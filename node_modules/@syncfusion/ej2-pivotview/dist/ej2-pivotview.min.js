/*!
*  filename: ej2-pivotview.min.js
*  version : 23.1.41
*  Copyright Syncfusion Inc. 2001 - 2023. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("SyncfusionBase"),require("SyncfusionPopups"),require("SyncfusionNavigations"),require("SyncfusionCharts"),require("SyncfusionDropdowns"),require("SyncfusionGrids"),require("SyncfusionData"),require("SyncfusionInputs"),require("SyncfusionButtons"),require("SyncfusionPdfExport"),require("SyncfusionCalendars"),require("SyncfusionExcelExport"),require("SyncfusionFileUtils"),require("SyncfusionSplitbuttons"),require("SyncfusionSvgBase")):"function"==typeof define&&define.amd?define(["SyncfusionBase","SyncfusionPopups","SyncfusionNavigations","SyncfusionCharts","SyncfusionDropdowns","SyncfusionGrids","SyncfusionData","SyncfusionInputs","SyncfusionButtons","SyncfusionPdfExport","SyncfusionCalendars","SyncfusionExcelExport","SyncfusionFileUtils","SyncfusionSplitbuttons","SyncfusionSvgBase"],t):"object"==typeof exports?exports.SyncfusionPivotview=t(require("SyncfusionBase"),require("SyncfusionPopups"),require("SyncfusionNavigations"),require("SyncfusionCharts"),require("SyncfusionDropdowns"),require("SyncfusionGrids"),require("SyncfusionData"),require("SyncfusionInputs"),require("SyncfusionButtons"),require("SyncfusionPdfExport"),require("SyncfusionCalendars"),require("SyncfusionExcelExport"),require("SyncfusionFileUtils"),require("SyncfusionSplitbuttons"),require("SyncfusionSvgBase")):e.SyncfusionPivotview=t(e.SyncfusionBase,e.SyncfusionPopups,e.SyncfusionNavigations,e.SyncfusionCharts,e.SyncfusionDropdowns,e.SyncfusionGrids,e.SyncfusionData,e.SyncfusionInputs,e.SyncfusionButtons,e.SyncfusionPdfExport,e.SyncfusionCalendars,e.SyncfusionExcelExport,e.SyncfusionFileUtils,e.SyncfusionSplitbuttons,e.SyncfusionSvgBase)}(this,function(e,t,i,r,n,a,o,s,l,d,p,u,h,c,g){return function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=57)}([function(t,i){t.exports=e},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return n}),i.d(t,"c",function(){return a}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return s}),i.d(t,"f",function(){return l}),i.d(t,"g",function(){return d}),i.d(t,"h",function(){return p}),i.d(t,"i",function(){return u}),i.d(t,"j",function(){return h}),i.d(t,"k",function(){return c}),i.d(t,"l",function(){return g}),i.d(t,"m",function(){return m}),i.d(t,"n",function(){return f}),i.d(t,"o",function(){return v}),i.d(t,"p",function(){return S}),i.d(t,"q",function(){return y}),i.d(t,"r",function(){return b}),i.d(t,"s",function(){return C}),i.d(t,"t",function(){return x}),i.d(t,"u",function(){return w}),i.d(t,"v",function(){return T}),i.d(t,"w",function(){return M}),i.d(t,"x",function(){return _}),i.d(t,"y",function(){return D}),i.d(t,"z",function(){return O}),i.d(t,"A",function(){return P}),i.d(t,"B",function(){return N}),i.d(t,"C",function(){return E}),i.d(t,"D",function(){return I}),i.d(t,"E",function(){return F}),i.d(t,"F",function(){return L}),i.d(t,"G",function(){return A}),i.d(t,"H",function(){return R}),i.d(t,"I",function(){return k}),i.d(t,"J",function(){return j}),i.d(t,"K",function(){return H}),i.d(t,"L",function(){return q}),i.d(t,"M",function(){return V}),i.d(t,"N",function(){return B}),i.d(t,"O",function(){return U}),i.d(t,"P",function(){return G}),i.d(t,"Q",function(){return z}),i.d(t,"R",function(){return W}),i.d(t,"S",function(){return Q}),i.d(t,"T",function(){return Y}),i.d(t,"U",function(){return K}),i.d(t,"V",function(){return X}),i.d(t,"W",function(){return J}),i.d(t,"X",function(){return Z}),i.d(t,"Y",function(){return $}),i.d(t,"Z",function(){return ee}),i.d(t,"_0",function(){return te}),i.d(t,"_1",function(){return ie}),i.d(t,"_2",function(){return re}),i.d(t,"_3",function(){return ne}),i.d(t,"_4",function(){return ae}),i.d(t,"_5",function(){return oe}),i.d(t,"_6",function(){return se}),i.d(t,"_7",function(){return le}),i.d(t,"_8",function(){return de}),i.d(t,"_9",function(){return pe}),i.d(t,"_10",function(){return ue}),i.d(t,"_11",function(){return he}),i.d(t,"_12",function(){return ce}),i.d(t,"_13",function(){return ge}),i.d(t,"_14",function(){return me}),i.d(t,"_15",function(){return fe}),i.d(t,"_16",function(){return ve}),i.d(t,"_17",function(){return Se}),i.d(t,"_18",function(){return ye}),i.d(t,"_19",function(){return be}),i.d(t,"_20",function(){return Ce}),i.d(t,"_21",function(){return xe}),i.d(t,"_22",function(){return we}),i.d(t,"_23",function(){return Te}),i.d(t,"_24",function(){return Me}),i.d(t,"_25",function(){return _e}),i.d(t,"_26",function(){return De}),i.d(t,"_27",function(){return Oe}),i.d(t,"_28",function(){return Pe}),i.d(t,"_29",function(){return Ne}),i.d(t,"_30",function(){return Ee}),i.d(t,"_31",function(){return Ie}),i.d(t,"_32",function(){return Fe}),i.d(t,"_33",function(){return Le}),i.d(t,"_34",function(){return Ae}),i.d(t,"_35",function(){return Re}),i.d(t,"_36",function(){return ke}),i.d(t,"_37",function(){return je}),i.d(t,"_38",function(){return He}),i.d(t,"_39",function(){return qe}),i.d(t,"_40",function(){return Ve}),i.d(t,"_41",function(){return Be}),i.d(t,"_42",function(){return Ue}),i.d(t,"_43",function(){return Ge}),i.d(t,"_44",function(){return ze}),i.d(t,"_45",function(){return We}),i.d(t,"_46",function(){return Qe}),i.d(t,"_47",function(){return Ye}),i.d(t,"_48",function(){return Ke}),i.d(t,"_49",function(){return Xe}),i.d(t,"_50",function(){return Je}),i.d(t,"_51",function(){return Ze}),i.d(t,"_52",function(){return $e}),i.d(t,"_53",function(){return et}),i.d(t,"_54",function(){return tt}),i.d(t,"_55",function(){return it}),i.d(t,"_56",function(){return rt}),i.d(t,"_57",function(){return nt}),i.d(t,"_58",function(){return at}),i.d(t,"_59",function(){return ot}),i.d(t,"_60",function(){return st}),i.d(t,"_61",function(){return lt}),i.d(t,"_62",function(){return dt}),i.d(t,"_63",function(){return pt}),i.d(t,"_64",function(){return ut}),i.d(t,"_65",function(){return ht}),i.d(t,"_66",function(){return ct}),i.d(t,"_67",function(){return gt}),i.d(t,"_68",function(){return mt}),i.d(t,"_69",function(){return ft}),i.d(t,"_70",function(){return vt}),i.d(t,"_71",function(){return St}),i.d(t,"_72",function(){return yt}),i.d(t,"_73",function(){return bt}),i.d(t,"_74",function(){return Ct}),i.d(t,"_75",function(){return xt}),i.d(t,"_76",function(){return wt}),i.d(t,"_77",function(){return Tt}),i.d(t,"_78",function(){return Mt}),i.d(t,"_79",function(){return _t}),i.d(t,"_80",function(){return Dt}),i.d(t,"_81",function(){return Ot}),i.d(t,"_82",function(){return Pt}),i.d(t,"_83",function(){return Nt}),i.d(t,"_84",function(){return Et}),i.d(t,"_85",function(){return It}),i.d(t,"_86",function(){return Ft}),i.d(t,"_87",function(){return Lt}),i.d(t,"_88",function(){return At}),i.d(t,"_89",function(){return Rt}),i.d(t,"_90",function(){return kt}),i.d(t,"_91",function(){return jt}),i.d(t,"_92",function(){return Ht}),i.d(t,"_93",function(){return qt}),i.d(t,"_94",function(){return Vt}),i.d(t,"_95",function(){return Bt}),i.d(t,"_96",function(){return Ut}),i.d(t,"_97",function(){return Gt}),i.d(t,"_98",function(){return zt}),i.d(t,"_99",function(){return Wt}),i.d(t,"_100",function(){return Qt}),i.d(t,"_101",function(){return Yt}),i.d(t,"_102",function(){return Kt}),i.d(t,"_103",function(){return Xt}),i.d(t,"_104",function(){return Jt}),i.d(t,"_105",function(){return Zt}),i.d(t,"_106",function(){return $t}),i.d(t,"_107",function(){return ei}),i.d(t,"_108",function(){return ti}),i.d(t,"_109",function(){return ii}),i.d(t,"_110",function(){return ri}),i.d(t,"_111",function(){return ni}),i.d(t,"_112",function(){return ai}),i.d(t,"_113",function(){return oi}),i.d(t,"_114",function(){return si}),i.d(t,"_115",function(){return li}),i.d(t,"_116",function(){return di}),i.d(t,"_117",function(){return pi}),i.d(t,"_118",function(){return ui}),i.d(t,"_119",function(){return hi}),i.d(t,"_120",function(){return ci}),i.d(t,"_121",function(){return gi}),i.d(t,"_122",function(){return mi}),i.d(t,"_123",function(){return fi}),i.d(t,"_124",function(){return vi}),i.d(t,"_125",function(){return Si}),i.d(t,"_126",function(){return yi}),i.d(t,"_127",function(){return bi});var r="load",n="enginePopulating",a="enginePopulated",o="onFieldDropped",s="fieldDrop",l="beforePivotTableRender",d="afterPivotTableRender",p="beforeExport",u="exportComplete",h="excelHeaderQueryCellInfo",c="pdfHeaderQueryCellInfo",g="excelQueryCellInfo",m="pdfQueryCellInfo",f="onPdfCellRender",v="dataBound",S="queryCellInfo",y="headerCellInfo",b="hyperlinkCellClick",C="resizing",x="resizeStop",w="cellClick",T="drillThrough",M="beforeColumnsRender",_="selected",D="cellSelecting",O="drill",P="cellSelected",N="cellDeselected",E="rowSelected",I="rowDeselected",F="beginDrillThrough",L="editCompleted",A="multiLevelLabelClick",R="saveReport",k="fetchReport",j="loadReport",H="renameReport",q="removeReport",V="newReport",B="toolbarRender",U="toolbarClick",G="chartTooltipRender",z="chartLegendClick",W="chartLoaded",Q="multiLevelLabelRender",Y="chartLoad",K="chartResized",X="chartAxisLabelRender",J="chartSeriesCreated",Z="aggregateCellInfo",$="onHeadersSort",ee="contextMenuClick",te="contextMenuOpen",ie="fieldListRefreshed",re="conditionalFormatting",ne="beforePdfExport",ae="beforeExcelExport",oe="memberFiltering",se="calculatedFieldCreate",le="memberEditorOpen",de="fieldRemove",pe="numberFormatting",ue="aggregateMenuOpen",he="fieldDragStart",ce="chartPointClick",ge="beforeServiceInvoke",me="afterServiceInvoke",fe="actionBegin",ve="actionComplete",Se="actionFailure",ye="initial-load",be="ui-update",Ce="scroll",xe="vertical-scroll",we="horizontal-scroll",Te="content-ready",Me="data-ready",_e="init-groupingbar",De="tree-view-update",Oe="pivot-button-update",Pe="init-calculatedfield",Ne="click",Ee="init-toolbar",Ie="init-pivotPager",Fe="init-formatting",Le="init-grouping",Ae="Sort value",Re="Drill up",ke="Drill down",je="Add new report",He="Save current report",qe="Save as current report",Ve="Rename current report",Be="Remove current report",Ue="Load report",Ge="Open conditional formatting dialog",ze="Open number formatting dialog",We="MdxQuery",Qe="Open field list",Ye="Show table view",Ke="Show chart view",Xe="Multiple Axis",Je="Show legend",Ze="PDF export",$e="PNG export",et="Excel export",tt="CSV export",it="JPEG export",rt="SVG export",nt="Hide sub-totals",at="Show row sub-totals",ot="Show column sub-totals",st="Show sub-totals",lt="Hide grand totals",dt="Show row grand totals",pt="Show column grand totals",ut="Show grand totals",ht="Number Formatting menu",ct="Conditional Formatting menu",gt="Report change",mt="Sort field tree",ft="Edit calculated field",vt="Sort field",St="Filter field",yt="Remove field",bt="Open calculated field dialog",Ct="Edit record",xt="Save edited records",wt="Add new record",Tt="Remove record",Mt="Aggregate field",_t="CalculatedField Context menu",Dt="Window resize",Ot="Navigate row page",Pt="Navigate column page",Nt="Calculated field applied",Et="Edited records saved",It="New record added",Ft="Record removed",Lt="Field list closed",At="Field tree sorted",Rt="Report saved",kt="New report added",jt="Report re-saved",Ht="Report renamed",qt="Report removed",Vt="Excel exported",Bt="CSV exported",Ut="PDF exported",Gt="PNG exported",zt="JPEG exported",Wt="SVG exported",Qt="Conditional formatting applied",Yt="Number formatting applied",Kt="Table view shown",Xt="Chart view shown",Jt="Sub-totals hidden",Zt="Row sub-totals shown",$t="Column sub-totals shown",ei="Sub-totals shown",ti="Grand totals hidden",ii="Row grand totals shown",ri="Column grand totals shown",ni="Grand totals shown",ai="Value sorted",oi="Calculated field edited",si="Field sorted",li="Field filtered",di="Field removed",pi="Field aggregated",ui="Record edited",hi="Report changed",ci="Window resized",gi="Records updated",mi="Drill-through closed",fi="Vertically scrolled",vi="Horizontally scrolled",Si="Row page navigated",yi="Column page navigated",bi="Action dropped"},function(e,t,i){"use strict";i.d(t,"_48",function(){return r}),i.d(t,"_36",function(){return n}),i.d(t,"_19",function(){return a}),i.d(t,"_37",function(){return o}),i.d(t,"a",function(){return s}),i.d(t,"_76",function(){return l}),i.d(t,"_69",function(){return d}),i.d(t,"_270",function(){return p}),i.d(t,"_273",function(){return u}),i.d(t,"_271",function(){return h}),i.d(t,"_272",function(){return c}),i.d(t,"_210",function(){return g}),i.d(t,"_238",function(){return m}),i.d(t,"_239",function(){return f}),i.d(t,"_241",function(){return v}),i.d(t,"_66",function(){return S}),i.d(t,"_245",function(){return y}),i.d(t,"_253",function(){return b}),i.d(t,"_220",function(){return C}),i.d(t,"_204",function(){return x}),i.d(t,"_221",function(){return w}),i.d(t,"_200",function(){return T}),i.d(t,"_228",function(){return M}),i.d(t,"_232",function(){return _}),i.d(t,"_226",function(){return D}),i.d(t,"_237",function(){return O}),i.d(t,"_240",function(){return P}),i.d(t,"_222",function(){return N}),i.d(t,"_233",function(){return E}),i.d(t,"_234",function(){return I}),i.d(t,"_229",function(){return F}),i.d(t,"_243",function(){return L}),i.d(t,"_244",function(){return A}),i.d(t,"_223",function(){return R}),i.d(t,"_224",function(){return k}),i.d(t,"_225",function(){return j}),i.d(t,"_262",function(){return H}),i.d(t,"_265",function(){return q}),i.d(t,"_172",function(){return V}),i.d(t,"_171",function(){return B}),i.d(t,"_217",function(){return U}),i.d(t,"_218",function(){return G}),i.d(t,"_173",function(){return z}),i.d(t,"_174",function(){return W}),i.d(t,"_193",function(){return Q}),i.d(t,"_194",function(){return Y}),i.d(t,"_219",function(){return K}),i.d(t,"_202",function(){return X}),i.d(t,"_201",function(){return J}),i.d(t,"_195",function(){return Z}),i.d(t,"_39",function(){return $}),i.d(t,"_23",function(){return ee}),i.d(t,"_72",function(){return te}),i.d(t,"_216",function(){return ie}),i.d(t,"_212",function(){return re}),i.d(t,"_89",function(){return ne}),i.d(t,"_211",function(){return ae}),i.d(t,"_215",function(){return oe}),i.d(t,"_213",function(){return se}),i.d(t,"_214",function(){return le}),i.d(t,"_203",function(){return de}),i.d(t,"_167",function(){return pe}),i.d(t,"_209",function(){return ue}),i.d(t,"_197",function(){return he}),i.d(t,"_198",function(){return ce}),i.d(t,"_74",function(){return ge}),i.d(t,"_77",function(){return me}),i.d(t,"_84",function(){return fe}),i.d(t,"_64",function(){return ve}),i.d(t,"_59",function(){return Se}),i.d(t,"_60",function(){return ye}),i.d(t,"_62",function(){return be}),i.d(t,"_61",function(){return Ce}),i.d(t,"_63",function(){return xe}),i.d(t,"_58",function(){return we}),i.d(t,"_80",function(){return Te}),i.d(t,"_81",function(){return Me}),i.d(t,"_104",function(){return _e}),i.d(t,"_105",function(){return De}),i.d(t,"_106",function(){return Oe}),i.d(t,"d",function(){return Pe}),i.d(t,"e",function(){return Ne}),i.d(t,"Q",function(){return Ee}),i.d(t,"_196",function(){return Ie}),i.d(t,"_180",function(){return Fe}),i.d(t,"_182",function(){return Le}),i.d(t,"_184",function(){return Ae}),i.d(t,"_186",function(){return Re}),i.d(t,"w",function(){return ke}),i.d(t,"_199",function(){return je}),i.d(t,"_68",function(){return He}),i.d(t,"_181",function(){return qe}),i.d(t,"_183",function(){return Ve}),i.d(t,"_185",function(){return Be}),i.d(t,"_166",function(){return Ue}),i.d(t,"_139",function(){return Ge}),i.d(t,"_263",function(){return ze}),i.d(t,"_264",function(){return We}),i.d(t,"_169",function(){return Qe}),i.d(t,"_261",function(){return Ye}),i.d(t,"_242",function(){return Ke}),i.d(t,"_257",function(){return Xe}),i.d(t,"_260",function(){return Je}),i.d(t,"_258",function(){return Ze}),i.d(t,"_259",function(){return $e}),i.d(t,"_110",function(){return et}),i.d(t,"_248",function(){return tt}),i.d(t,"_230",function(){return it}),i.d(t,"_231",function(){return rt}),i.d(t,"_236",function(){return nt}),i.d(t,"_137",function(){return at}),i.d(t,"_235",function(){return ot}),i.d(t,"_136",function(){return st}),i.d(t,"_93",function(){return lt}),i.d(t,"_94",function(){return dt}),i.d(t,"_95",function(){return pt}),i.d(t,"_96",function(){return ut}),i.d(t,"_97",function(){return ht}),i.d(t,"_98",function(){return ct}),i.d(t,"_99",function(){return gt}),i.d(t,"_100",function(){return mt}),i.d(t,"_101",function(){return ft}),i.d(t,"_102",function(){return vt}),i.d(t,"_70",function(){return St}),i.d(t,"_103",function(){return yt}),i.d(t,"_71",function(){return bt}),i.d(t,"_87",function(){return Ct}),i.d(t,"_90",function(){return xt}),i.d(t,"_91",function(){return wt}),i.d(t,"_88",function(){return Tt}),i.d(t,"_21",function(){return Mt}),i.d(t,"_40",function(){return _t}),i.d(t,"_26",function(){return Dt}),i.d(t,"_46",function(){return Ot}),i.d(t,"_20",function(){return Pt}),i.d(t,"_52",function(){return Nt}),i.d(t,"_32",function(){return Et}),i.d(t,"_53",function(){return It}),i.d(t,"_51",function(){return Ft}),i.d(t,"_33",function(){return Lt}),i.d(t,"_34",function(){return At}),i.d(t,"_35",function(){return Rt}),i.d(t,"_49",function(){return kt}),i.d(t,"_50",function(){return jt}),i.d(t,"_78",function(){return Ht}),i.d(t,"_86",function(){return qt}),i.d(t,"_79",function(){return Vt}),i.d(t,"_82",function(){return Bt}),i.d(t,"_83",function(){return Ut}),i.d(t,"_168",function(){return Gt}),i.d(t,"_140",function(){return zt}),i.d(t,"_141",function(){return Wt}),i.d(t,"_170",function(){return Qt}),i.d(t,"_135",function(){return Yt}),i.d(t,"_138",function(){return Kt}),i.d(t,"_164",function(){return Xt}),i.d(t,"_150",function(){return Jt}),i.d(t,"_163",function(){return Zt}),i.d(t,"_160",function(){return $t}),i.d(t,"_162",function(){return ei}),i.d(t,"_158",function(){return ti}),i.d(t,"_165",function(){return ii}),i.d(t,"_143",function(){return ri}),i.d(t,"_142",function(){return ni}),i.d(t,"_131",function(){return ai}),i.d(t,"_132",function(){return oi}),i.d(t,"_144",function(){return si}),i.d(t,"_154",function(){return li}),i.d(t,"_151",function(){return di}),i.d(t,"_227",function(){return pi}),i.d(t,"_148",function(){return ui}),i.d(t,"_147",function(){return hi}),i.d(t,"_156",function(){return ci}),i.d(t,"_145",function(){return gi}),i.d(t,"_146",function(){return mi}),i.d(t,"_176",function(){return fi}),i.d(t,"_175",function(){return vi}),i.d(t,"_177",function(){return Si}),i.d(t,"_178",function(){return yi}),i.d(t,"_179",function(){return bi}),i.d(t,"_31",function(){return Ci}),i.d(t,"_67",function(){return xi}),i.d(t,"_152",function(){return wi}),i.d(t,"_149",function(){return Ti}),i.d(t,"_155",function(){return Mi}),i.d(t,"_159",function(){return _i}),i.d(t,"_161",function(){return Di}),i.d(t,"_157",function(){return Oi}),i.d(t,"_73",function(){return Pi}),i.d(t,"E",function(){return Ni}),i.d(t,"_8",function(){return Ei}),i.d(t,"_85",function(){return Ii}),i.d(t,"_133",function(){return Fi}),i.d(t,"_134",function(){return Li}),i.d(t,"_153",function(){return Ai}),i.d(t,"f",function(){return Ri}),i.d(t,"_107",function(){return ki}),i.d(t,"_109",function(){return ji}),i.d(t,"_113",function(){return Hi}),i.d(t,"_115",function(){return qi});i.d(t,"_117",function(){return Vi}),i.d(t,"_118",function(){return Bi}),i.d(t,"_119",function(){return Ui}),i.d(t,"_123",function(){return Gi}),i.d(t,"p",function(){return zi}),i.d(t,"_120",function(){return Wi}),i.d(t,"_122",function(){return Qi}),i.d(t,"_121",function(){return Yi}),i.d(t,"_124",function(){return Ki}),i.d(t,"_125",function(){return Xi}),i.d(t,"_126",function(){return Ji}),i.d(t,"_127",function(){return Zi}),i.d(t,"_130",function(){return $i}),i.d(t,"_116",function(){return er}),i.d(t,"_129",function(){return tr}),i.d(t,"h",function(){return ir}),i.d(t,"_111",function(){return rr}),i.d(t,"_112",function(){return nr}),i.d(t,"_108",function(){return ar}),i.d(t,"_27",function(){return or}),i.d(t,"_28",function(){return sr}),i.d(t,"_22",function(){return lr}),i.d(t,"_29",function(){return dr}),i.d(t,"_24",function(){return pr}),i.d(t,"_246",function(){return ur}),i.d(t,"_249",function(){return hr}),i.d(t,"_250",function(){return cr}),i.d(t,"b",function(){return gr}),i.d(t,"c",function(){return mr}),i.d(t,"_252",function(){return fr}),i.d(t,"_251",function(){return vr}),i.d(t,"_247",function(){return Sr}),i.d(t,"_41",function(){return yr}),i.d(t,"_255",function(){return br}),i.d(t,"_254",function(){return Cr}),i.d(t,"_256",function(){return xr}),i.d(t,"_45",function(){return wr}),i.d(t,"_38",function(){return Tr}),i.d(t,"_44",function(){return Mr}),i.d(t,"_43",function(){return _r}),i.d(t,"_47",function(){return Dr}),i.d(t,"_25",function(){return Or}),i.d(t,"T",function(){return Pr}),i.d(t,"_12",function(){return Nr}),i.d(t,"_11",function(){return Er}),i.d(t,"_13",function(){return Ir}),i.d(t,"_14",function(){return Fr}),i.d(t,"_17",function(){return Lr}),i.d(t,"_18",function(){return Ar}),i.d(t,"U",function(){return Rr}),i.d(t,"V",function(){return kr}),i.d(t,"W",function(){return jr}),i.d(t,"X",function(){return Hr}),i.d(t,"Y",function(){return qr}),i.d(t,"Z",function(){return Vr}),i.d(t,"C",function(){return Br}),i.d(t,"x",function(){return Ur}),i.d(t,"A",function(){return Gr}),i.d(t,"B",function(){return zr}),i.d(t,"z",function(){return Wr}),i.d(t,"y",function(){return Qr}),i.d(t,"_0",function(){return Yr}),i.d(t,"_3",function(){return Kr}),i.d(t,"G",function(){return Xr}),i.d(t,"v",function(){return Jr}),i.d(t,"M",function(){return Zr}),i.d(t,"N",function(){return $r}),i.d(t,"L",function(){return en}),i.d(t,"O",function(){return tn}),i.d(t,"I",function(){return rn}),i.d(t,"D",function(){return nn}),i.d(t,"R",function(){return an}),i.d(t,"_7",function(){return on}),i.d(t,"_10",function(){return sn}),i.d(t,"_187",function(){return ln}),i.d(t,"_190",function(){return dn}),i.d(t,"_189",function(){return pn}),i.d(t,"_188",function(){return un}),i.d(t,"_191",function(){return hn}),i.d(t,"_192",function(){return cn}),i.d(t,"_205",function(){return gn}),i.d(t,"_206",function(){return mn}),i.d(t,"_207",function(){return fn}),i.d(t,"_208",function(){return vn}),i.d(t,"_42",function(){return Sn}),i.d(t,"_2",function(){return yn}),i.d(t,"_1",function(){return bn}),i.d(t,"_54",function(){return Cn}),i.d(t,"_15",function(){return xn}),i.d(t,"_16",function(){return wn}),i.d(t,"_56",function(){return Tn}),i.d(t,"J",function(){return Mn}),i.d(t,"K",function(){return _n}),i.d(t,"P",function(){return Dn}),i.d(t,"F",function(){return On}),i.d(t,"g",function(){return Pn}),i.d(t,"i",function(){return Nn}),i.d(t,"k",function(){return En}),i.d(t,"r",function(){return In}),i.d(t,"l",function(){return Fn}),i.d(t,"s",function(){return Ln}),i.d(t,"o",function(){return An}),i.d(t,"q",function(){return Rn}),i.d(t,"m",function(){return kn}),i.d(t,"t",function(){return jn}),i.d(t,"n",function(){return Hn}),i.d(t,"u",function(){return qn}),i.d(t,"H",function(){return Vn}),i.d(t,"j",function(){return Bn}),i.d(t,"_4",function(){return Un}),i.d(t,"_5",function(){return Gn}),i.d(t,"_114",function(){return zn}),i.d(t,"_6",function(){return Wn}),i.d(t,"_266",function(){return Qn}),i.d(t,"_9",function(){return Yn}),i.d(t,"_128",function(){return Kn}),i.d(t,"_65",function(){return Xn}),i.d(t,"S",function(){return Jn}),i.d(t,"_288",function(){return Zn}),i.d(t,"_291",function(){return $n}),i.d(t,"_304",function(){return ea}),i.d(t,"_307",function(){return ta}),i.d(t,"_57",function(){return ia}),i.d(t,"_274",function(){return ra}),i.d(t,"_279",function(){return na}),i.d(t,"_281",function(){return aa}),i.d(t,"_282",function(){return oa}),i.d(t,"_283",function(){return sa}),i.d(t,"_285",function(){return la}),i.d(t,"_278",function(){return da}),i.d(t,"_277",function(){return pa}),i.d(t,"_314",function(){return ua}),i.d(t,"_315",function(){return ha}),i.d(t,"_309",function(){return ca}),i.d(t,"_301",function(){return ga}),i.d(t,"_310",function(){return ma}),i.d(t,"_302",function(){return fa}),i.d(t,"_293",function(){return va}),i.d(t,"_294",function(){return Sa}),i.d(t,"_299",function(){return ya}),i.d(t,"_300",function(){return ba}),i.d(t,"_295",function(){return Ca}),i.d(t,"_296",function(){return xa}),i.d(t,"_312",function(){return wa}),i.d(t,"_313",function(){return Ta}),i.d(t,"_276",function(){return Ma}),i.d(t,"_269",function(){return _a}),i.d(t,"_280",function(){return Da}),i.d(t,"_297",function(){return Oa}),i.d(t,"_298",function(){return Pa}),i.d(t,"_311",function(){return Na}),i.d(t,"_287",function(){return Ea}),i.d(t,"_290",function(){return Ia}),i.d(t,"_303",function(){return Fa}),i.d(t,"_306",function(){return La}),i.d(t,"_289",function(){return Aa}),i.d(t,"_292",function(){return Ra}),i.d(t,"_305",function(){return ka}),i.d(t,"_308",function(){return ja}),i.d(t,"_267",function(){return Ha}),i.d(t,"_268",function(){return qa}),i.d(t,"_275",function(){return Va}),i.d(t,"_284",function(){return Ba}),i.d(t,"_286",function(){return Ua}),i.d(t,"_55",function(){return Ga}),i.d(t,"_92",function(){return za}),i.d(t,"_75",function(){return Wa}),i.d(t,"_30",function(){return Qa});var r="e-pivotfieldlist",n="e-rtl",a="e-ltr",o="e-device",s="e-icons",l="e-disable",d="e-hide",p="e-icon-first",u="e-icon-last",h="e-icon-prev",c="e-icon-next",g="e-dropdown-icon",m="e-pivotfieldlist-container",f="e-olapfieldlist-container",v="e-field-list-container",S="e-toggle-field-list",y="e-static",b="e-select-table",C="e-field-table",x="e-draggable",w="e-olap-field-table",T="e-field-list",M="e-olap-field-list-tree",_="e-field-list-tree",D="e-field-list-tree-outer-div",O="e-field-list-tree-outer-div-searchMode",P="e-search-mode",N="e-field-header",E="e-pivot-parent",I="e-pivot-child",F="e-field-header-container",L="e-field-list-title",A="e-title-content",R="e-field-list-search",k="e-field-list-search-input",j="e-field-list-search-icon",H="e-field-list-footer",q="e-calculated-field",V="e-flat e-primary",B="e-outline",U="e-axis-table",G="e-olap-axis-table",z="e-left-axis-fields",W="e-right-axis-fields",Q="e-all-fields-axis",Y="e-hscroll",K="e-axis-header",X="e-axis-content",J="e-draggable-prompt",Z="e-pvt-btn-div",$="e-pivot-button",ee="e-content",te="e-pvt-btn-content",ie="e-button-drag-clone",re="e-sort",ne="e-member-sort",ae="e-descend",oe="e-btn-filter",se="e-pv-filter",le="e-pv-filtered",de="e-remove",pe="e-drag",ue="e-disable-drag",he="e-drop-indicator",ce="e-drop-hover",ge="e-member-editor-dialog",me="e-member-editor-outer-container",fe="e-member-editor-container",ve="e-drillthrough-grid",Se="e-drillthrough-body",ye="e-drillthrough-body-header-container",be="e-drillthrough-body-header",Ce="e-drillthrough-body-header-common",xe="e-drillthrough-body-header-value",we="e-drillthrough-dialog",Te="e-editor-label-container",Me="e-editor-label",_e="e-frame",De="e-check",Oe="e-stop",Pe="e-ok-btn",Ne="e-cancel-btn",Ee="e-pivot-error-dialog",Ie="e-droppable",Fe="e-rows",Le="e-columns",Ae="e-values",Re="e-filters",ke="e-grouping-bar",je="e-group-all-fields",He="e-group-rows",qe="e-group-columns",Ve="e-group-values",Be="e-group-filters",Ue="e-drag-restrict",Ge="e-list-selected",ze="e-title-header",We="e-title-content",Qe="e-text-content",Ye="e-footer-content",Ke="e-adaptive-container",Xe="e-field-list-btn",Je="e-calculated-field-btn",Ze="e-small",$e="e-round",et="e-add-icon",tt="e-flat",it="e-center-div",rt="e-center-title",nt="e-adaptive-field-list-dialog",at="e-list-text",ot="e-selected-node",st="e-select",lt="e-selected-option-icon",dt="e-selected-level-icon",pt="e-filter-div-content",ut="e-filter-text-div",ht="e-between-text-div",ct="e-separator-div",gt="e-filter-option-container-1",mt="e-filter-option-container-2",ft="e-filter-input-div-1",vt="e-filter-input-div-2",St="e-value-options",yt="e-level-options",bt="e-filter-operator",Ct="e-filter-sort",xt="e-sort-ascend-icon",wt="e-sort-descend-icon",Tt="e-active",Mt="e-collapse",_t="e-expand",Dt="e-table",Ot="e-columnsheader",Pt="e-rowsheader",Nt="e-valuescontent",Et="e-headercell",It="e-summary",Ft="e-cellvalue",Lt="e-pivottooltip",At="e-tooltipheader",Rt="e-tooltipcontent",kt="e-nextspan",jt="e-lastspan",Ht="e-editor-search-container",qt="e-editor-search",Vt="e-editor-search-input",Bt="e-select-all-container",Ut="e-select-all",Gt="e-pivot-calc",zt="e-pivot-calc-dialog-div",Wt="e-olap-calc-dialog-div",Qt="e-pivot-calc-radio",Yt="e-pivot-calc-check",Kt="e-pivot-calc-input",Xt="e-custom-format-input",Jt="e-pivot-calc-input-div",Zt="e-pivot-calc-custom-format-div",$t="e-olap-calc-hierarchy-list-div",ei="e-pivot-calc-format-type-div",ti="e-olap-calc-member-type-div",ii="e-member-options",ri="e-pivot-calc-outer-div",ni="e-olap-calc-outer-div",ai="e-flat",oi="e-format",si="e-pivot-formula",li="e-pivot-treeview",di="e-pivot-treeview-outer",pi="e-treeContainer",ui="e-pivot-cancel-button",hi="e-pivot-add-button",ci="e-pivot-ok-button",gi="e-pivot-accord",mi="e-pivot-button-div",fi="e-axis",vi="e-axis-row",Si="e-axis-column",yi="e-axis-value",bi="e-axis-filter",Ci="e-grid",xi="e-pivotview",wi="e-pivot-all-field-title",Ti="e-pivot-field-name-title",Mi="e-pivot-formula-title",_i="e-olap-hierarchy-title",Di="e-pivot-format-title",Oi="e-olap-member-title",Pi="e-pivot-context-menu",Ni="e-disabled",Ei="e-menu-hide",Ii="e-member-prompt",Fi="e-edit",Li="e-edited",Ai="e-info",Ri="e-empty-field",ki="e-pivot-formatting-dialog",ji="e-format-condition-button",Hi="e-new-format",qi="e-format-outer-div",Vi="e-format-inner-div",Bi="e-format-table",Ui="e-format-value-label",Gi="e-format-label",zi="e-input",Wi="e-format-value1",Qi="e-format-value2",Yi="e-format-value-span",Ki="e-format-font-color",Xi="e-format-back-color",Ji="e-format-value-preview",Zi="e-format-color-picker",$i="e-format-delete-icon",er="e-format-delete-button",tr="e-selected-color",ir="e-dlg-header",rr="e-format-apply-button",nr="e-format-cancel-button",ar="e-small e-round",or="e-virtualtrack",sr="e-movablescrolldiv",lr="e-content-virtualtable",dr="e-movablescroll",pr="e-headercontent",ur="e-defer-apply-button",hr="e-defer-cancel-button",cr="e-layout-footer",gr="e-cellselectionbackground",mr="e-selectionbackground",fr="e-button-layout",vr="e-checkbox-layout",Sr="e-defer-update-btn",yr="e-headercontent",br="e-field-list-back-icon",Cr="e-title-mobile-header",xr="e-title-mobile-content",wr="e-rowcell",Tr="e-active",Mr="e-spanclicked",_r="e-rowselect",Dr="e-gridheader",Or="e-gridcontent",Pr="e-export",Nr="e-pivotview-export",Er="e-pivotview-grid",Ir="e-pivotview-expand",Fr="e-pivotview-collapse",Lr="e-pivotview-group",Ar="e-pivotview-ungroup",Rr="e-pivotview-pdf-export",kr="e-pivotview-excel-export",jr="e-pivotview-csv-export",Hr="e-pivotview-png-export",qr="e-pivotview-jpeg-export",Vr="e-pivotview-svg-export",Br="e-load-report",Ur="e-new-report",Gr="e-rename-report",zr="e-remove-report",Wr="e-saveas-report",Qr="e-save-report",Yr="e-sub-total",Kr="e-grand-total",Xr="e-toolbar-formatting",Jr="e-pivot-toolbar",Zr="e-pivotview-report-label",$r="e-pivotview-report-input",en="e-report-outer",tn="e-pivotview-report-dialog",rn="e-toolbar-fieldlist",nn="e-toolbar-grid",an="e-toolbar-chart",on="e-reportlist-drop",sn="e-pivotchart",ln="e-group-chart-rows",dn="e-group-chart-columns",pn="e-group-chart-values",un="e-group-chart-multi-values",hn="e-group-chart-accumulation-column",cn="e-group-chart-filters",gn="e-group-chart-values-drodown-div",mn="e-group-chart-values-drodown",fn="e-group-chart-columns-dropdown-div",vn="e-group-chart-columns-dropdown",Sn="e-chart-grouping-bar",yn="e-pivotview-disable-icon",bn="e-pivotview-select-icon",Cn="e-valuesheader",xn="e-icon-ascending",wn="e-icon-descending",Tn="e-pivot-grouping-bar",Mn="e-mdx-query",_n="e-mdx-query-content",Dn="e-pivotview-mdx-dialog",On="e-mdx",Pn="e-pivot-format-dialog",Nn="e-pivot-format-dialog-outer",En="e-pivot-format-value-lable",In="e-pivot-format-value-drop",Fn="e-pivot-format-lable",Ln="e-pivot-format-drop",An="e-pivot-format-custom-lable",Rn="e-pivot-format-custom-text",kn="e-pivot-format-grouping-lable",jn="e-pivot-format-grouping-drop",Hn="e-pivot-format-decimal-lable",qn="e-pivot-format-decimal-drop",Vn="e-pivot-format-toolbar",Bn="e-pivot-format-table",Un="e-pivot-format-menu",Gn="e-pivot-number-format-menu",zn="e-pivot-conditional-empty-format",Wn="e-pivot-conditional-format-menu",Qn="e-pivotchart-inner",Yn="e-pivotchart-type-dialog",Kn="e-format-font-color-picker",Xn="e-group-pivot-rows",Jn="e-pivot-toolbar-menu",Zn="e-firstpagedisabled",$n="e-prevpagedisabled",ea="e-nextpagedisabled",ta="e-lastpagedisabled",ia="e-pivot-pager",ra="e-pivot-pager-maindiv",na="e-pivot-pager-row-maindiv",aa="e-pivot-pager-column-maindiv",oa="e-pivot-row-pager-settings",sa="e-pivot-column-pager-settings",la="e-pagercontainer",da="e-pivotview-vseparator",pa="e-pivotview-hseparator",ua="e-pivotview-text-div",ha="e-pivotview-text-div-1",ca="e-pivotview-row-size",ga="e-pivotview-row-pagerNumber",ma="e-pivotview-column-size",fa="e-pivotview-column-pagerNumber",va="e-pivotview-row-pagerString",Sa="e-pivotview-column-pagerString",ya="e-pivot-row-of-string",ba="e-pivot-column-of-string",Ca="e-pivot-pager-row-dropdown",xa="e-pivot-pager-column-dropdown",wa="e-pivot-row-size-list",Ta="e-pivot-column-size-list",Ma="e-inverse-view",_a="e-compact-view",Da="e-page-size-disable",Oa="e-pivot-row-of-string-maindiv",Pa="e-pivot-column-of-string-maindiv",Na="e-pager-dropdown",Ea="e-first e-icons e-icon-first",Ia="e-prev e-icons e-icon-prev",Fa="e-next e-icons e-icon-next",La="e-last e-icons e-icon-last",Aa="e-firstpage e-pager-default",Ra="e-prevpage e-pager-default",ka="e-nextpage e-pager-default",ja="e-lastpage e-pager-default",Ha="e-pivot-pager-top",qa="e-pivot-pager-bottom",Va="e-pivot-pager-single-maindiv",Ba="e-pivot-pager-nav-container",Ua="e-pivot-pager-info-container",Ga="e-pivotcell-container",za="e-filter-tab-container",Wa="e-node-limit",Qa="e-leftfreeze"},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),n=(i.n(r),i(9)),a=(i.n(n),i(12)),o=(i.n(a),function(){function e(){}return e.getType=function(e){var t=new Date(e);return"boolean"==typeof e?"boolean":isNaN(Number(e))?t instanceof Date&&!isNaN(t.valueOf())?t&&t.getDay()&&(t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0)?"datetime":"date":typeof e:"number"},e.resetTime=function(e){return e.setHours(0,0,0,0),e},e.getClonedData=function(e){var t=[];if(e)for(var i=0,r=e;i<r.length;i++){for(var n=r[i],a=Object.keys(n),o=0,s={};o<a.length;)s[a[o]]=n[a[o]],o++;t.push(s)}return t},e.getDefinedObj=function(e){var t=0,i={};if(null!==e&&void 0!==e)for(var r=Object.keys(e);t<r.length;)null!==e[r[t]]&&void 0!==e[r[t]]&&(i[r[t]]=e[r[t]]),t++;else i=e;return i},e.inArray=function(e,t){if(t)for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},e.setPivotProperties=function(e,t){e.allowServerDataBinding=!1,e.pivotGridModule&&(e.pivotGridModule.allowServerDataBinding=!1),e.setProperties(t,!0),e.allowServerDataBinding=!0,e.pivotGridModule&&(e.pivotGridModule.allowServerDataBinding=!0)},e.getClonedDataSourceSettings=function(e){return this.getDefinedObj({type:e.type,catalog:e.catalog,cube:e.cube,providerType:e.providerType,url:e.url,localeIdentifier:e.localeIdentifier,excludeFields:i.i(r.isNullOrUndefined)(e.excludeFields)?[]:e.excludeFields.slice(),expandAll:e.expandAll,allowLabelFilter:e.allowLabelFilter,allowValueFilter:e.allowValueFilter,allowMemberFilter:e.allowMemberFilter,enableSorting:!!e.enableSorting,rows:this.cloneFieldSettings(e.rows),columns:this.cloneFieldSettings(e.columns),filters:this.cloneFieldSettings(e.filters),values:this.cloneFieldSettings(e.values),filterSettings:this.cloneFilterSettings(e.filterSettings),sortSettings:this.cloneSortSettings(e.sortSettings),drilledMembers:this.cloneDrillMemberSettings(e.drilledMembers),valueSortSettings:this.CloneValueSortObject(e.valueSortSettings),valueAxis:e.valueAxis,grandTotalsPosition:e.grandTotalsPosition,formatSettings:this.cloneFormatSettings(e.formatSettings),calculatedFieldSettings:this.cloneCalculatedFieldSettings(e.calculatedFieldSettings),fieldMapping:this.cloneFieldSettings(e.fieldMapping),showSubTotals:e.showSubTotals,showRowSubTotals:e.showRowSubTotals,showColumnSubTotals:e.showColumnSubTotals,subTotalsPosition:e.subTotalsPosition,showGrandTotals:e.showGrandTotals,showRowGrandTotals:e.showRowGrandTotals,showColumnGrandTotals:e.showColumnGrandTotals,showHeaderWhenEmpty:e.showHeaderWhenEmpty,alwaysShowValueHeader:e.alwaysShowValueHeader,conditionalFormatSettings:this.cloneConditionalFormattingSettings(e.conditionalFormatSettings),emptyCellsTextContent:e.emptyCellsTextContent,groupSettings:this.cloneGroupSettings(e.groupSettings),showAggregationOnValueField:e.showAggregationOnValueField,authentication:this.CloneAuthenticationObject(e.authentication)})},e.getClonedFieldList=function(e){for(var t=Object.keys(e),i={},r=0,n=t.length;r<n;r++){var a=e[t[r]];e[t[r]]&&(i[t[r]]={type:a.type,caption:a.caption,id:a.id,isSelected:a.isSelected,sort:a.sort,filterType:a.filterType,index:a.index,filter:a.filter,isCustomField:a.isCustomField,showRemoveIcon:a.showRemoveIcon,showFilterIcon:a.showFilterIcon,showSortIcon:a.showSortIcon,showNoDataItems:a.showNoDataItems,isCalculatedField:a.isCalculatedField,showEditIcon:a.showEditIcon,showValueTypeIcon:a.showValueTypeIcon,allowDragAndDrop:a.allowDragAndDrop,showSubTotals:a.showSubTotals,expandAll:a.expandAll,pid:a.pid,aggregateType:a.aggregateType,baseField:a.baseField,baseItem:a.baseItem,dateMember:this.cloneDateMembers(a.dateMember),formattedMembers:this.cloneFormatMembers(a.formattedMembers),members:this.cloneFormatMembers(a.members),formatString:a.formatString,format:a.format,formula:a.formula,isExcelFilter:a.isExcelFilter,membersOrder:a.membersOrder?a.membersOrder.slice():a.membersOrder,isAlphanumeric:a.isAlphanumeric,tag:a.tag,expanded:a.expanded,spriteCssClass:a.spriteCssClass,name:a.name,defaultHierarchy:a.defaultHierarchy,hasAllMember:a.hasAllMember,allMember:a.allMember,isChecked:a.isChecked,filterMembers:this.cloneFieldMembers(a.filterMembers),childMembers:this.cloneFieldMembers(a.childMembers),searchMembers:this.cloneFieldMembers(a.searchMembers),htmlAttributes:this.getDefinedObj(a.htmlAttributes),currrentMembers:this.cloneFormatMembers(a.currrentMembers),isHierarchy:a.isHierarchy,isNamedSets:a.isNamedSets,actualFilter:a.actualFilter?a.actualFilter.slice():a.actualFilter,levels:this.cloneFieldMembers(a.levels),levelCount:a.levelCount,fieldType:a.fieldType,memberType:a.memberType,parentHierarchy:a.parentHierarchy})}return i},e.cloneDateMembers=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push({formattedText:n.formattedText,actualText:n.actualText})}return t}return e},e.cloneFormatMembers=function(e){if(e){for(var t=Object.keys(e),i={},r=0,n=t.length;r<n;r++){var a=e[t[r]];i[t[r]]={index:a.index?a.index.slice():a.index,isDrilled:a.isDrilled,ordinal:a.ordinal}}return i}return e},e.cloneFieldMembers=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push({caption:n.caption,hasChildren:n.hasChildren,id:n.id,isSelected:n.isSelected,name:n.name,tag:n.tag,htmlAttributes:this.getDefinedObj(n.htmlAttributes),type:n.type,spriteCssClass:n.spriteCssClass,pid:n.pid,isChecked:n.isChecked})}return t}return e},e.updateDataSourceSettings=function(e,t){e&&this.setPivotProperties(e,{dataSourceSettings:this.getDefinedObj({type:t.type,catalog:t.catalog,cube:t.cube,providerType:t.providerType,url:t.url,localeIdentifier:t.localeIdentifier,excludeFields:i.i(r.isNullOrUndefined)(t.excludeFields)?[]:t.excludeFields,expandAll:t.expandAll,allowLabelFilter:t.allowLabelFilter,allowValueFilter:t.allowValueFilter,allowMemberFilter:t.allowMemberFilter,enableSorting:!!t.enableSorting,rows:t.rows,columns:t.columns,filters:t.filters,values:t.values,filterSettings:t.filterSettings,sortSettings:t.sortSettings,drilledMembers:t.drilledMembers,valueSortSettings:t.valueSortSettings,valueAxis:t.valueAxis,grandTotalsPosition:t.grandTotalsPosition,formatSettings:t.formatSettings,calculatedFieldSettings:t.calculatedFieldSettings,fieldMapping:t.fieldMapping,showSubTotals:t.showSubTotals,showRowSubTotals:t.showRowSubTotals,showColumnSubTotals:t.showColumnSubTotals,subTotalsPosition:t.subTotalsPosition,showGrandTotals:t.showGrandTotals,showRowGrandTotals:t.showRowGrandTotals,showColumnGrandTotals:t.showColumnGrandTotals,showHeaderWhenEmpty:t.showHeaderWhenEmpty,alwaysShowValueHeader:t.alwaysShowValueHeader,conditionalFormatSettings:t.conditionalFormatSettings,emptyCellsTextContent:t.emptyCellsTextContent,groupSettings:t.groupSettings,showAggregationOnValueField:t.showAggregationOnValueField,authentication:this.CloneAuthenticationObject(t.authentication)})})},e.cloneFieldSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,caption:n.caption,axis:n.axis,baseField:n.baseField,baseItem:n.baseItem,isCalculatedField:n.isCalculatedField,isNamedSet:n.isNamedSet,showNoDataItems:n.showNoDataItems,showSubTotals:n.showSubTotals,type:n.type,dataType:n.dataType,showFilterIcon:n.showFilterIcon,showSortIcon:n.showSortIcon,showRemoveIcon:n.showRemoveIcon,showValueTypeIcon:n.showValueTypeIcon,showEditIcon:n.showEditIcon,allowDragAndDrop:n.allowDragAndDrop,expandAll:n.expandAll,groupName:n.groupName}))}return t}return e},e.cloneOlapFieldSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({caption:n.caption,hasChildren:n.hasChildren,id:n.id,isSelected:n.isSelected,name:n.name,spriteCssClass:n.spriteCssClass,tag:n.tag,type:n.type,pid:n.pid,expanded:n.expanded,defaultHierarchy:n.defaultHierarchy,hasAllMember:n.hasAllMember,allMember:n.allMember,isChecked:n.isChecked,filterMembers:n.filterMembers,childMembers:n.childMembers,searchMembers:n.searchMembers,htmlAttributes:this.getDefinedObj(n.htmlAttributes),currrentMembers:n.currrentMembers,isHierarchy:n.isHierarchy,isNamedSets:n.isNamedSets,formatString:n.formatString,actualFilter:n.actualFilter,levels:n.levels,levelCount:n.levelCount,memberType:n.memberType,fieldType:n.fieldType,parentHierarchy:n.parentHierarchy}))}return t}return e},e.cloneFilterSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,type:n.type,condition:n.condition,items:n.items?n.items.slice():n.items,levelCount:n.levelCount,measure:n.measure,selectedField:n.selectedField,showDateFilter:n.showDateFilter,showLabelFilter:n.showLabelFilter,showNumberFilter:n.showNumberFilter,value1:n.value1,value2:n.value2}))}return t}return e},e.cloneSortSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,order:n.order,membersOrder:n.membersOrder?n.membersOrder.slice():n.membersOrder}))}return t}return e},e.cloneDrillMemberSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,delimiter:n.delimiter,items:n.items?n.items.slice():n.items}))}return t}return e},e.cloneFormatSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,calendar:n.calendar,currency:n.currency,format:n.format,maximumFractionDigits:n.maximumFractionDigits,maximumSignificantDigits:n.maximumSignificantDigits,minimumFractionDigits:n.minimumFractionDigits,minimumIntegerDigits:n.minimumIntegerDigits,minimumSignificantDigits:n.minimumSignificantDigits,skeleton:n.skeleton,type:n.type,useGrouping:n.useGrouping}))}return t}return e},e.CloneValueSortObject=function(e){if(e){return{columnIndex:e.columnIndex,headerDelimiter:e.headerDelimiter,headerText:e.headerText,measure:e.measure,sortOrder:e.sortOrder}}return e},e.CloneAuthenticationObject=function(e){if(e){return{userName:e.userName,password:e.password}}return e},e.cloneCalculatedFieldSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,formatString:n.formatString,formula:n.formula,hierarchyUniqueName:n.hierarchyUniqueName}))}return t}return e},e.cloneConditionalFormattingSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({applyGrandTotals:n.applyGrandTotals,conditions:n.conditions,label:n.label,measure:n.measure,style:n.style?{backgroundColor:n.style.backgroundColor,color:n.style.color,fontFamily:n.style.fontFamily,fontSize:n.style.fontSize}:n.style,value1:n.value1,value2:n.value2}))}return t}return e},e.cloneGroupSettings=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({name:n.name,caption:n.caption,customGroups:this.cloneCustomGroups(n.customGroups),endingAt:n.endingAt,startingAt:n.startingAt,groupInterval:n.groupInterval,rangeInterval:n.rangeInterval,type:n.type}))}return t}return e},e.cloneCustomGroups=function(e){if(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];t.push(this.getDefinedObj({groupName:n.groupName,items:n.items?n.items.slice():n.items}))}return t}return e},e.getFilterItemByName=function(e,t){var i=new n.DataManager({json:t}).executeLocal((new n.Query).where("name","equal",e));if(i&&i.length>0)return i[i.length-1]},e.getFieldByName=function(e,t){return new n.DataManager({json:t}).executeLocal((new n.Query).where("name","equal",e))[0]},e.getFieldInfo=function(e,t,i){if(!i)for(var r=this.cloneFieldSettings(t.dataSourceSettings.rows),n=this.cloneFieldSettings(t.dataSourceSettings.columns),a=this.cloneFieldSettings(t.dataSourceSettings.values),o=this.cloneFieldSettings(t.dataSourceSettings.filters),s=[r,n,a,o],l=0,d=s.length;l<d;l++)for(var p=0,u=s[l]?s[l].length:0;p<u;p++)if(s[l][p]&&s[l][p].name===e)return{fieldName:e,fieldItem:s[l][p],axis:0===l?"rows":1===l?"columns":2===l?"values":"filters",position:p};var h="olap"===t.dataType?t.olapEngineModule.fieldList[e]:t.engineModule.fieldList[e];return{fieldName:e,fieldItem:h?{name:e,caption:h.caption,baseField:h.baseField,baseItem:h.baseItem,isCalculatedField:h.isCalculatedField,isNamedSet:h.isNamedSets,showNoDataItems:h.showNoDataItems,showSubTotals:h.showSubTotals,type:h.aggregateType,showFilterIcon:h.showFilterIcon,showSortIcon:h.showSortIcon,showRemoveIcon:h.showRemoveIcon,showValueTypeIcon:h.showValueTypeIcon,showEditIcon:h.showEditIcon,allowDragAndDrop:h.allowDragAndDrop,expandAll:h.expandAll}:void 0,axis:"fieldlist",position:-1}},e.isButtonIconRefesh=function(e,t,n){var a=!1;try{if("dataSourceSettings"===e&&t.dataSourceSettings&&n.dataSourceSettings){var o=["notAvail","notAvail","notAvail","notAvail"],s=Object.keys(t.dataSourceSettings),l=Object.keys(n.dataSourceSettings);if(s&&l&&l.length>0&&s.length===l.length)for(var d=["rows","columns","values","filters"],p=0;p<l.length;p++){var u=l[p]in t.dataSourceSettings&&!i.i(r.isNullOrUndefined)(t.dataSourceSettings[l[p]])?Object.keys(t.dataSourceSettings[l[p]]):[],h=l[p]in n.dataSourceSettings&&!i.i(r.isNullOrUndefined)(n.dataSourceSettings[l[p]])?Object.keys(n.dataSourceSettings[l[p]]):[];if(-1!==d.indexOf(l[p])&&-1!==d.indexOf(s[p])&&u&&h&&h.length>0&&u.length===h.length)for(var c=["showFilterIcon","showSortIcon","showRemoveIcon","showValueTypeIcon","showEditIcon","allowDragAndDrop","expandAll"],g=0;g<h.length;g++){for(var m=Object.keys(t.dataSourceSettings[l[p]][h[g]]),f=Object.keys(n.dataSourceSettings[l[p]][h[g]]),v=0;v<f.length;v++){if(-1===c.indexOf(f[v])||-1===c.indexOf(m[v])){o[p]="break";break}o[p]="update"}if("break"===o[p])break}else o[p]="break";if("break"===o[p])break}for(var S=0,y=0,b=0,C=0,x=o;C<x.length;C++){var w=x[C];"break"===w&&S++,"notAvail"===w&&y++,"update"===w&&b++}a=!(S>0||4===y)&&(0===S&&y<4&&b>0)}}catch(e){a=!1}return a},e.formatPivotValues=function(e){for(var t=[],i=0;i<e.length;i++)if(e[i]){t[i]=[];for(var r=0;r<e[i].length;r++)e[i][r]&&(t[i][r]={axis:e[i][r].Axis,actualText:e[i][r].ActualText,indexObject:e[i][r].IndexObject,index:e[i][r].Index,rowHeaders:e[i][r].RowHeaders,columnHeaders:e[i][r].ColumnHeaders,formattedText:e[i][r].FormattedText,actualValue:e[i][r].ActualValue,rowIndex:e[i][r].RowIndex,colIndex:e[i][r].ColIndex,colSpan:e[i][r].ColSpan,level:e[i][r].Level,rowSpan:e[i][r].RowSpan,isSum:e[i][r].IsSum,isGrandSum:e[i][r].IsGrandSum,valueSort:e[i][r].ValueSort,ordinal:e[i][r].Ordinal,hasChild:e[i][r].HasChild,isDrilled:e[i][r].IsDrilled,value:e[i][r].Value,type:e[i][r].Type,members:e[i][r].Members})}return t},e.formatFieldList=function(e){for(var t=Object.keys(e),i={},r=0;r<t.length;r++)e[t[r]]&&(i[t[r]]={id:e[t[r]].Id,caption:e[t[r]].Caption,type:e[t[r]].Type,formatString:e[t[r]].FormatString,index:e[t[r]].Index,members:e[t[r]].Members,formattedMembers:e[t[r]].FormattedMembers,dateMember:e[t[r]].DateMember,filter:e[t[r]].Filter,sort:e[t[r]].Sort,aggregateType:e[t[r]].AggregateType,baseField:e[t[r]].BaseField,baseItem:e[t[r]].BaseItem,filterType:e[t[r]].FilterType,format:e[t[r]].Format,formula:e[t[r]].Formula,isSelected:e[t[r]].IsSelected,isExcelFilter:e[t[r]].IsExcelFilter,showNoDataItems:e[t[r]].ShowNoDataItems,isCustomField:e[t[r]].IsCustomField,showFilterIcon:e[t[r]].ShowFilterIcon,showSortIcon:e[t[r]].ShowSortIcon,showRemoveIcon:e[t[r]].ShowRemoveIcon,showEditIcon:e[t[r]].ShowEditIcon,showValueTypeIcon:e[t[r]].ShowValueTypeIcon,allowDragAndDrop:e[t[r]].AllowDragAndDrop,isCalculatedField:e[t[r]].IsCalculatedField,showSubTotals:e[t[r]].ShowSubTotals,expandAll:e[t[r]].expandAll,groupName:e[t[r]].groupName});return i},e.frameContent=function(e,t,i,r){var n=[],a=r;if(a.dataSourceSettings.values.length>0&&!a.engineModule.isEmptyData&&(a.enableValueSorting||!a.engineModule.isEngineUpdated))for(var o=0,s="value"===t?i:0,l="value"===t?e.length:i,d=s;d<l;d++)if(e[d]){o="header"===t?d:o,n[o]={};for(var p=0;p<e[d].length;p++)e[d][p]&&(n[o][p]=e[d][p]);o++}return n},e.getLocalizedObject=function(e){var t=new Object;return t.Null=e.localeObj.getConstant("null"),t.Years=e.localeObj.getConstant("Years"),t.Quarters=e.localeObj.getConstant("Quarters"),t.Months=e.localeObj.getConstant("Months"),t.Days=e.localeObj.getConstant("Days"),t.Hours=e.localeObj.getConstant("Hours"),t.Minutes=e.localeObj.getConstant("Minutes"),t.Seconds=e.localeObj.getConstant("Seconds"),t.QuarterYear=e.localeObj.getConstant("QuarterYear"),t.Of=e.localeObj.getConstant("of"),t.Qtr=e.localeObj.getConstant("qtr"),t.Undefined=e.localeObj.getConstant("undefined"),t.GroupOutOfRange=e.localeObj.getConstant("groupOutOfRange"),t.Group=e.localeObj.getConstant("group"),t},e.updateReport=function(e,t){e.setProperties({dataSourceSettings:{rows:[]}},!0),e.setProperties({dataSourceSettings:{columns:[]}},!0),e.setProperties({dataSourceSettings:{formatSettings:[]}},!0);for(var i=0;i<t.Rows.length;i++)e.dataSourceSettings.rows.push({name:t.Rows[i].Name,caption:t.Rows[i].Caption,showNoDataItems:t.Rows[i].ShowNoDataItems,baseField:t.Rows[i].BaseField,baseItem:t.Rows[i].BaseItem,showFilterIcon:t.Rows[i].ShowFilterIcon,showSortIcon:t.Rows[i].ShowSortIcon,showEditIcon:t.Rows[i].ShowEditIcon,showRemoveIcon:t.Rows[i].ShowRemoveIcon,showSubTotals:t.Rows[i].ShowValueTypeIcon,allowDragAndDrop:t.Rows[i].AllowDragAndDrop,axis:t.Rows[i].Axis,dataType:t.Rows[i].DataType,isCalculatedField:t.Rows[i].IsCalculatedField,showValueTypeIcon:t.Rows[i].ShowValueTypeIcon,type:t.Rows[i].Type,expandAll:t.Rows[i].expandAll});for(var i=0;i<t.Columns.length;i++)e.dataSourceSettings.columns.push({name:t.Columns[i].Name,caption:t.Columns[i].Caption,showNoDataItems:t.Columns[i].ShowNoDataItems,baseField:t.Columns[i].BaseField,baseItem:t.Columns[i].BaseItem,showFilterIcon:t.Columns[i].ShowFilterIcon,showSortIcon:t.Columns[i].ShowSortIcon,showEditIcon:t.Columns[i].ShowEditIcon,showRemoveIcon:t.Columns[i].ShowRemoveIcon,showSubTotals:t.Columns[i].ShowValueTypeIcon,allowDragAndDrop:t.Columns[i].AllowDragAndDrop,axis:t.Columns[i].Axis,dataType:t.Columns[i].DataType,isCalculatedField:t.Columns[i].IsCalculatedField,showValueTypeIcon:t.Columns[i].ShowValueTypeIcon,type:t.Columns[i].Type,expandAll:t.Columns[i].expandAll});for(var i=0;i<t.FormatSettings.length;i++)e.dataSourceSettings.formatSettings.push({name:t.FormatSettings[i].Name,format:t.FormatSettings[i].Format,type:t.FormatSettings[i].Type,currency:t.FormatSettings[i].Currency,maximumFractionDigits:t.FormatSettings[i].MaximumFractionDigits,maximumSignificantDigits:t.FormatSettings[i].MaximumSignificantDigits,minimumFractionDigits:t.FormatSettings[i].MinimumFractionDigits,minimumIntegerDigits:t.FormatSettings[i].MinimumIntegerDigits,minimumSignificantDigits:t.FormatSettings[i].MinimumSignificantDigits,skeleton:t.FormatSettings[i].Skeleton,useGrouping:t.FormatSettings[i].UseGrouping})},e.generateUUID=function(){var e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===i?r:3&r|8).toString(16)})},e.applyCustomSort=function(e,t,i,r,n){var a,o=[];o=e.IsOrderChanged?e.members:"Ascending"===e.sortOrder||"None"===e.sortOrder||void 0===e.sortOrder?[].concat(e.members):[].concat(e.members).reverse();var s=[],l=void 0===i||"string"===i||"number"===i;"Grand Total"===t[0].actualText&&(a=t[0],t.shift());for(var d=0,p=0;d<t.length;d++){var u=t[d],h=n?u.formattedText:l?u.actualText:!0===i?u.actualText.toString():u.dateText;if(o[p]===h){if(t.splice(p++,0,u),t.splice(++d,1),!(p<o.length)){r||s.splice(--p,0,h);break}d=-1}d>=0&&!r&&(s[d]=h)}if(!r){for(var d=s.length;d<t.length;d++){var u=t[d],h=n?u.formattedText:l?u.actualText:!0===i?u.actualText.toString():u.dateText;s[d]=h}"Grand Total"===s[s.length-1]&&s.pop(),e.members=s}return a&&t.splice(0,0,a),t},e.applyHeadersSort=function(e,t,i){return e="datetime"===i||"date"===i||"time"===i?"Ascending"===t?e.sort(function(e,t){return e.dateText>t.dateText?1:t.dateText>e.dateText?-1:0}):"Descending"===t?e.sort(function(e,t){return e.dateText<t.dateText?1:t.dateText<e.dateText?-1:0}):e:!0===i?"Ascending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:"Out of Range"===e.actualText?1:"Out of Range"===t.actualText?-1:Number(e.actualText.toString().match(/\d+/))>Number(t.actualText.toString().match(/\d+/))?1:Number(t.actualText.toString().match(/\d+/))>Number(e.actualText.toString().match(/\d+/))?-1:0}):"Descending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:"Out of Range"===e.actualText?-1:"Out of Range"===t.actualText?1:Number(e.actualText.toString().match(/\d+/))<Number(t.actualText.toString().match(/\d+/))?1:Number(t.actualText.toString().match(/\d+/))<Number(e.actualText.toString().match(/\d+/))?-1:0}):e:"Ascending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:e.actualText>t.actualText?1:t.actualText>e.actualText?-1:0}):"Descending"===t?e.sort(function(e,t){return"Grand Total"===e.actualText||"Grand Total"===t.actualText?0:e.actualText<t.actualText?1:t.actualText<e.actualText?-1:0}):e},e.frameHeaderWithKeys=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],i++;return r},e.getPageSize=function(e){switch(e){case"Letter":return new a.SizeF(612,792);case"Note":return new a.SizeF(540,720);case"Legal":return new a.SizeF(612,1008);case"A0":return new a.SizeF(2380,3368);case"A1":return new a.SizeF(1684,2380);case"A2":return new a.SizeF(1190,1684);case"A3":return new a.SizeF(842,1190);case"A5":return new a.SizeF(421,595);case"A6":return new a.SizeF(297,421);case"A7":return new a.SizeF(210,297);case"A8":return new a.SizeF(148,210);case"A9":return new a.SizeF(105,148);case"B0":return new a.SizeF(2836,4008);case"B1":return new a.SizeF(2004,2836);case"B2":return new a.SizeF(1418,2004);case"B3":return new a.SizeF(1002,1418);case"B4":return new a.SizeF(709,1002);case"B5":return new a.SizeF(501,709);case"Archa":return new a.SizeF(648,864);case"Archb":return new a.SizeF(864,1296);case"Archc":return new a.SizeF(1296,1728);case"Archd":return new a.SizeF(1728,2592);case"Arche":return new a.SizeF(2592,3456);case"Flsa":return new a.SizeF(612,936);case"HalfLetter":return new a.SizeF(396,612);case"Letter11x17":return new a.SizeF(792,1224);case"Ledger":return new a.SizeF(1224,792);default:return new a.SizeF(595,842)}},e}())},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t){e.exports=s},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t,i){"use strict";var r=i(14);i.d(t,"a",function(){return r.a});var n=i(3);i.d(t,"b",function(){return n.a});var a=i(48);i.d(t,"c",function(){return a.a}),i.d(t,"d",function(){return a.b})},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),n=(i.n(r),i(9)),a=(i.n(n),i(3)),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)},s=function(){function e(){this.aggregatedValueMatrix=[],this.valueContent=[],this.formatFields={},this.groupingFieldsInfo={},this.dateFormatFunction={},this.calculatedFields={},this.calculatedFormulas={},this.valueAxis=0,this.saveDataHeaders={},this.columnCount=0,this.rowCount=0,this.columnPageCount=0,this.rowPageCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.rowStartPos=0,this.colStartPos=0,this.enableValueSorting=!1,this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0},this.rMembers=[],this.cMembers=[],this.groupingFields={},this.isLastHeaderHasMeasures=!0,this.measureIndex=-1,this.isPagingOrVirtualizationEnabled=!1,this.valueMatrix=[],this.indexMatrix=[],this.memberCnt=-1,this.pageInLimit=!1,this.endPos=0,this.removeCount=0,this.colHdrBufferCalculated=!1,this.colValuesLength=1,this.rowValuesLength=1,this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.removeRowGrandTotal=!1,this.removeColumnGrandTotal=!1,this.isValueHasAdvancedAggregate=!1,this.rawIndexObject={},this.valueAxisFields={},this.reformAxisCount=0,this.isEditing=!1,this.data=[],this.actualData=[],this.groupRawIndex={},this.fieldKeys={},this.allowDataCompression=!1,this.dataSourceSettings={},this.frameHeaderObjectsCollection=!1,this.headerObjectsCollection={},this.columnKeys={},this.fieldDrillCollection={},this.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,this.measureNames={},this.enablePaging=!1,this.enableVirtualization=!1,this.enableHtmlSanitizer=!1,this.isParentLevelAdded=!0}return e.prototype.clearProperties=function(){this.isPagingOrVirtualizationEnabled||(this.columnKeys={},this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0}),this.enableValueSorting&&(this.valueContent=[]),this.saveDataHeaders=this.allowValueFilter?this.saveDataHeaders:{},this.rMembers=[],this.cMembers=[],this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.rawIndexObject={},this.dataSourceSettings.valueIndex>-1&&(this.valueAxisFields={}),this.headerObjectsCollection={},this.fieldDrillCollection={}},e.prototype.renderEngine=function(e,t,o,s){this.getValueCellInfo=o,this.getHeaderSortInfo=s,this.formatFields={},this.dateFormatFunction={},this.calculatedFields={},this.calculatedFormulas={},this.valueAxis=0,this.saveDataHeaders={},this.columnCount=0,this.rowCount=0,this.columnPageCount=0,this.rowPageCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.rowStartPos=0,this.colStartPos=0,this.dataSourceSettings.excludeFields=i.i(r.isNullOrUndefined)(e.excludeFields)?[]:e.excludeFields,this.enableValueSorting=!1,this.headerCollection={rowHeaders:[],columnHeaders:[],rowHeadersCount:0,columnHeadersCount:0},this.valueMatrix=[],this.indexMatrix=[],this.aggregatedValueMatrix=[],this.rMembers=[],this.cMembers=[],this.memberCnt=-1,this.pageInLimit=!1,this.endPos=0,this.removeCount=0,this.colHdrBufferCalculated=!1,this.colValuesLength=1,this.rowValuesLength=1,this.slicedHeaders=[],this.fieldFilterMem={},this.filterPosObj={},this.selectedHeaders={selectedHeader:[],values:[]},this.rowGrandTotal=null,this.columnGrandTotal=null,this.removeRowGrandTotal=!1,this.removeColumnGrandTotal=!1,this.isValueHasAdvancedAggregate=!1,this.rawIndexObject={},this.isLastHeaderHasMeasures=!0,this.isEditing=!1;var l;if(this.globalize=t&&t.globalize?t.globalize:new r.Internationalization,this.currencyCode=t&&t.currenyCode?t.currenyCode:void 0,this.localeObj=t?t.localeObj:void 0,this.fieldsType=t?t.fieldsType:{},this.clonedReport=t?t.clonedReport&&t.clonedReport.properties?t.clonedReport.properties:t.clonedReport:{},this.enablePaging=t.enablePaging,this.enableVirtualization=t.enableVirtualization,this.enableHtmlSanitizer=t.enableHtmlSanitizer,this.isPagingOrVirtualizationEnabled=this.enablePaging||this.enableVirtualization,this.enableSort=e.enableSorting,this.dataSourceSettings.alwaysShowValueHeader=e.alwaysShowValueHeader,this.dataSourceSettings.showHeaderWhenEmpty=!!i.i(r.isNullOrUndefined)(e.showHeaderWhenEmpty)||e.showHeaderWhenEmpty,this.dataSourceSettings.showSubTotals=!!i.i(r.isNullOrUndefined)(e.showSubTotals)||e.showSubTotals,this.dataSourceSettings.showRowSubTotals=!!i.i(r.isNullOrUndefined)(e.showRowSubTotals)||e.showRowSubTotals,this.dataSourceSettings.showColumnSubTotals=!!i.i(r.isNullOrUndefined)(e.showColumnSubTotals)||e.showColumnSubTotals,this.dataSourceSettings.showGrandTotals=!!i.i(r.isNullOrUndefined)(e.showGrandTotals)||e.showGrandTotals,this.dataSourceSettings.grandTotalsPosition=i.i(r.isNullOrUndefined)(e.grandTotalsPosition)?"Bottom":e.grandTotalsPosition,this.dataSourceSettings.showRowGrandTotals=!!i.i(r.isNullOrUndefined)(e.showRowGrandTotals)||e.showRowGrandTotals,this.dataSourceSettings.showColumnGrandTotals=!!i.i(r.isNullOrUndefined)(e.showColumnGrandTotals)||e.showColumnGrandTotals,this.showSubTotalsAtTop=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&"Top"===e.subTotalsPosition,this.showSubTotalsAtBottom=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals&&"Bottom"===e.subTotalsPosition,this.allowValueFilter=e.allowValueFilter,this.isValueFilterEnabled=!1,this.enableValueSorting=!!t&&t.enableValueSorting,this.isDrillThrough=!!t&&(!!t.isDrillThrough&&t.isDrillThrough),this.valueContent=[],this.dataSourceSettings=a.a.getClonedDataSourceSettings(e),e.dataSource instanceof n.DataManager||(this.data=e.dataSource),this.data&&this.data[0]){if(!this.fieldList){"CSV"===e.type?this.fields=this.data.shift():this.fields=Object.keys(this.data[0]);for(var d=0;d<this.fields.length;d++)this.fieldKeys[this.fields[d]]="CSV"===e.type?d:this.fields[d]}t&&t.pageSettings&&t.allowDataCompression&&(this.actualData=this.data,this.data=this.getGroupedRawData(e)),this.dataSourceSettings.rows=e.rows?e.rows:[],this.dataSourceSettings.columns=e.columns?e.columns:[],this.dataSourceSettings.filters=e.filters?e.filters:[],this.dataSourceSettings.values=e.values?e.values:[],this.dataSourceSettings.formatSettings=e.formatSettings?e.formatSettings:[],this.dataSourceSettings.groupSettings=e.groupSettings?e.groupSettings:[],this.dataSourceSettings.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.enableSort=void 0===e.enableSorting||e.enableSorting,this.dataSourceSettings.fieldMapping=e.fieldMapping?e.fieldMapping:[];for(var p=0,u=this.dataSourceSettings.values;p<u.length;p++){var h=u[p];this.valueAxisFields[h.name]=h}l=this.getGroupData(this.data);for(var d=0;d<this.fields.length;d++)this.fieldKeys[this.fields[d]]="CSV"===e.type?d:this.fields[d];this.validateFilters(e),this.isExpandAll=!(!this.isValueFiltersAvail||!e.allowValueFilter)||e.expandAll,this.drilledMembers=e.drilledMembers?this.isValueFiltersAvail&&e.allowValueFilter?[]:e.drilledMembers:[],this.isMultiMeasures=this.dataSourceSettings.values.length>1,this.valueAxis="row"===e.valueAxis?1:0,this.measureIndex=i.i(r.isNullOrUndefined)(e.valueIndex)?-1:e.valueIndex,this.emptyCellTextContent=e.emptyCellsTextContent?e.emptyCellsTextContent:"",this.rowValuesLength=1===this.valueAxis?this.dataSourceSettings.values.length:1,this.colValuesLength=0===this.valueAxis?this.dataSourceSettings.values.length:1,this.valueSortSettings=e.valueSortSettings||{sortOrder:"None",headerDelimiter:".",headerText:"",columnIndex:void 0},this.valueSortData=[],this.pageSettings=t?t.pageSettings?t.pageSettings:this.pageSettings:void 0,this.allowDataCompression=t&&t.allowDataCompression,this.savedFieldList=t?t.savedFieldList:void 0,this.getFieldList(l,this.enableSort,e.allowValueFilter),this.removeIrrelevantFields(Object.keys(this.fieldList)),this.fillFieldMembers(this.data,this.indexMatrix),this.updateSortSettings(e.sortSettings,this.enableSort),this.valueMatrix=this.generateValueMatrix(this.data),this.filterMembers=[];var c=this.dataSourceSettings.columns.length-1;for(this.columnKeys={};c>-1;)this.columnKeys[this.dataSourceSettings.columns[c].name]=this.dataSourceSettings.columns[c],c--;this.updateFilterMembers(e),this.generateGridData(e)}},e.prototype.removeIrrelevantFields=function(e){var t={};t[0]=this.dataSourceSettings.rows,t[1]=this.dataSourceSettings.columns,t[2]=this.dataSourceSettings.values,t[3]=this.dataSourceSettings.filters;for(var n=0;n<4;){if(t[n])for(var a=0;a<t[n].length;a++){var o=t[n][a].name;this.dataSourceSettings.excludeFields.indexOf(o)>-1||!i.i(r.isNullOrUndefined)(e)&&-1===e.indexOf(o)?(t[n].splice(a,1),a--):2===n&&(this.measureNames[o]=t[n][a].caption?t[n][a].caption:o,this.measureNames[t[n][a].caption?t[n][a].caption:o]=o)}n++}this.isMultiMeasures=this.dataSourceSettings.values.length>1,this.measureIndex=-1===this.measureIndex?this.valueAxis?t[0].length:t[1].length:this.measureIndex},e.prototype.updateDataSourceSettings=function(e,t){t&&(this.emptyCellTextContent=e.emptyCellsTextContent?e.emptyCellsTextContent:"",this.valueAxis="row"===e.valueAxis?1:0,this.rowValuesLength=1===this.valueAxis?this.dataSourceSettings.values.length:1,this.colValuesLength=0===this.valueAxis?this.dataSourceSettings.values.length:1,this.measureIndex=i.i(r.isNullOrUndefined)(e.valueIndex)?-1:e.valueIndex,this.enableSort=e.enableSorting,this.dataSourceSettings.alwaysShowValueHeader=e.alwaysShowValueHeader,this.dataSourceSettings.showHeaderWhenEmpty=!!i.i(r.isNullOrUndefined)(e.showHeaderWhenEmpty)||e.showHeaderWhenEmpty,this.dataSourceSettings.showSubTotals=!!i.i(r.isNullOrUndefined)(e.showSubTotals)||e.showSubTotals,this.dataSourceSettings.showRowSubTotals=!!i.i(r.isNullOrUndefined)(e.showRowSubTotals)||e.showRowSubTotals,this.dataSourceSettings.showColumnSubTotals=!!i.i(r.isNullOrUndefined)(e.showColumnSubTotals)||e.showColumnSubTotals,this.dataSourceSettings.showGrandTotals=!!i.i(r.isNullOrUndefined)(e.showGrandTotals)||e.showGrandTotals,this.dataSourceSettings.grandTotalsPosition=i.i(r.isNullOrUndefined)(e.grandTotalsPosition)?"Bottom":e.grandTotalsPosition,this.dataSourceSettings.showRowGrandTotals=!!i.i(r.isNullOrUndefined)(e.showRowGrandTotals)||e.showRowGrandTotals,this.dataSourceSettings.showColumnGrandTotals=!!i.i(r.isNullOrUndefined)(e.showColumnGrandTotals)||e.showColumnGrandTotals,this.showSubTotalsAtTop=this.dataSourceSettings.showSubTotals&&"Top"===e.subTotalsPosition&&e.showColumnSubTotals,this.showSubTotalsAtBottom=this.dataSourceSettings.showSubTotals&&"Bottom"===e.subTotalsPosition&&e.showRowSubTotals,this.allowValueFilter=e.allowValueFilter,this.dataSourceSettings.formatSettings=e.formatSettings?e.formatSettings:[],this.dataSourceSettings.groupSettings=e.groupSettings?e.groupSettings:[],this.dataSourceSettings.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.enableSort=void 0===e.enableSorting||e.enableSorting,this.dataSourceSettings.fieldMapping=e.fieldMapping?e.fieldMapping:[],this.removeIrrelevantFields(Object.keys(this.fieldList)))},e.prototype.getGroupedRawData=function(e){this.data=[];for(var t=0,n=this.actualData;t<n.length;t++){var o=n[t];this.data[this.data.length]=a.a.frameHeaderWithKeys(o)}var s=e.values.filter(function(e){return"Count"===e.type||"DistinctCount"===e.type}).map(function(e){return e.name}),l=s.length>0,d=this.data,p=e.rows.concat(e.columns.concat(e.filters)).map(function(e){return e.name}),u={},h=[];this.groupRawIndex={};for(var c={},g=0,m=0;m<d.length;m++){var f=d[m],v=[];if(l)for(var S=0;S<s.length;S++)f[this.fieldKeys[s[S]]]=i.i(r.isNullOrUndefined)(f[this.fieldKeys[s[S]]])?f[this.fieldKeys[s[S]]]:1;for(var y=0;y<p.length;y++)v.push(f[this.fieldKeys[p[y]]]);var b=v.join("-");if(u[b]){for(var S=0;S<e.values.length;S++){var C=e.values[S].name,x=f[this.fieldKeys[C]],w=u[b],T=e.values[S].type;i.i(r.isNullOrUndefined)(x)||("number"==typeof x&&"DistinctCount"!==T||(T="Count"),i.i(r.isNullOrUndefined)(w[C])?w[C]="Product"===T?1:"Min"===T||"Max"===T?void 0:0:"number"!=typeof w[C]&&(w[C]=1),"Count"===T?w[C]+=1:"Min"===T?i.i(r.isNullOrUndefined)(w[C])||(w[C]=w[C]>x?x:w[C]):"Max"===T?i.i(r.isNullOrUndefined)(w[C])||(w[C]=w[C]<x?x:w[C]):"Product"===T?w[C]*=x:w[C]+=x)}this.isDrillThrough&&this.groupRawIndex[c[b]].push(m)}else u[b]=f,h.push(f),this.isDrillThrough&&(this.groupRawIndex[g]=[m],c[b]=g,g++)}return h},e.prototype.getGroupData=function(e){for(var t=this,n=e[0],o=this,s=0,l=this.dataSourceSettings.groupSettings;s<l.length;s++){var d=l[s],p=function(s){var l=s.name,d=s.caption;if(!(o.fields.indexOf(l)>-1))return{value:n};var p={},u=void 0;if("Date"===s.type&&o.groupingFields[l]||"Custom"===s.type&&o.groupingFields[l])return{value:n};if("Number"===s.type){if("number"!==a.a.getType(n[l])&&o.groupingFields[l])return{value:n};s.rangeInterval&&e.sort(function(e,i){return Number(e[t.fieldKeys[l]])>Number(i[t.fieldKeys[l]])?1:Number(i[t.fieldKeys[l]])>Number(e[t.fieldKeys[l]])?-1:0})}for(var h=e.length;h--;){var c=e[h];if(c[o.fieldKeys[l]]&&"Date"===s.type){var g=new Date(c[o.fieldKeys[l]].toString());if(!i.i(r.isNullOrUndefined)(g)&&s.groupInterval.length>0)for(var m=0,f=s.groupInterval.length;m<f;m++){var v=s.groupInterval[m],S=o.getRange(s,g.getTime()),y=a.a.resetTime(new Date);switch(v){case"Years":var b=m===s.groupInterval.length-1?l:l+"_date_group_years";p[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setFullYear(g.getFullYear())).toString();break;case"Quarters":var b=m===s.groupInterval.length-1?l:l+"_date_group_quarters";p[b]=v;var C=Math.ceil((g.getMonth()+1)/3);o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:(o.localeObj?o.localeObj.getConstant("qtr"):"Qtr")+C.toString();break;case"QuarterYear":var b=m===s.groupInterval.length-1?l:l+"_date_group_quarterYear";p[b]=v;var C=Math.ceil((g.getMonth()+1)/3);o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:(o.localeObj?o.localeObj.getConstant("qtr"):"Qtr")+C.toString()+" "+(o.localeObj?o.localeObj.getConstant("of"):"of")+" "+g.getFullYear().toString();break;case"Months":var b=m===s.groupInterval.length-1?l:l+"_date_group_months";p[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setMonth(g.getMonth(),1)).toString();break;case"Days":var b=m===s.groupInterval.length-1?l:l+"_date_group_days";p[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setMonth(g.getMonth(),g.getDate())).toString();break;case"Hours":var b=m===s.groupInterval.length-1?l:l+"_date_group_hours";p[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setHours(g.getHours())).toString();break;case"Minutes":var b=m===s.groupInterval.length-1?l:l+"_date_group_minutes";p[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setMinutes(g.getMinutes())).toString();break;case"Seconds":var b=m===s.groupInterval.length-1?l:l+"_date_group_seconds";p[b]=v,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b),c[o.fieldKeys[b]]=S?void 0:new Date(y.setSeconds(g.getSeconds())).toString()}}}else if(isNaN(Number(c[o.fieldKeys[l]]))||"Number"!==s.type){if(c[o.fieldKeys[l]]&&"Custom"===s.type&&s.customGroups&&s.customGroups.length>0){var b=l+"_custom_group",x=s.customGroups,w=void 0;o.groupingFieldsInfo[l]=l,o.groupingFieldsInfo[b]=l;for(var m=0,T=x.length;m<T;m++){var M=x[m];if(M.items&&M.items.length>1){u=b,o.fieldKeys[b]="CSV"===o.dataSourceSettings.type?o.fieldKeys[b]?o.fieldKeys[b]:o.fields.length:b,-1===o.fields.indexOf(b)&&o.fields.push(b);var _=-1!==a.a.inArray(c[o.fieldKeys[l]].toString(),M.items);c[o.fieldKeys[b]]=_?M.groupName&&""!==M.groupName?M.groupName:o.localeObj.getConstant("group")+" "+m:w&&w!==c[o.fieldKeys[l]].toString()?w:c[o.fieldKeys[l]].toString(),w=c[o.fieldKeys[b]]}}}}else{var S=o.getRange(s,Number(c[o.fieldKeys[l]]));c[o.fieldKeys[l]]=S?void 0:c[o.fieldKeys[l]]}for(var D=Object.keys(c),O=[],P=0,N=D;P<N.length;P++){var E=N[P];O.push(!!c[E])}n=-1===O.indexOf(!1)&&D.length===Object.keys(e[0]).length?c:n}if("Date"===s.type){for(var I=!1,F=[o.dataSourceSettings.rows,o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters],L=Object.keys(p),A=Object.keys(L).length,R=void 0,k=0,j=F;k<j.length;k++){var H=j[k];if(!I&&H){for(var q=H.length,m=0;m<q;){if(H[m].name===l){I=!0;var V=H[m];H.splice(m,1);var B=o.dataSourceSettings.rows;for(B=B.concat(o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters);A--;){var U=V.caption?V.caption:V.name;if(o.clonedReport){var G=o.clonedReport.rows;G=G.concat(o.clonedReport.columns,o.clonedReport.values,o.clonedReport.filters);var z=a.a.getFieldByName(L[A],G);z&&(U=z.caption?z.caption:z.name)}if(!a.a.getFieldByName(L[A],B)){R=p[L[A]],U=-1!==U.indexOf(" (")&&-1!==U.indexOf(")")?U.slice(U.indexOf("(")+1,U.length-1):U;var W={name:L[A],caption:(o.localeObj?o.localeObj.getConstant(R):R)+" ("+U+")",type:"Count",showNoDataItems:V.showNoDataItems,baseField:V.baseField,baseItem:V.baseItem,showFilterIcon:V.showFilterIcon,showSortIcon:V.showSortIcon,showEditIcon:V.showEditIcon,showRemoveIcon:V.showRemoveIcon,showSubTotals:V.showValueTypeIcon,allowDragAndDrop:V.allowDragAndDrop,expandAll:V.expandAll,groupName:V.groupName};H.splice(m,0,W),o.groupingFieldsInfo[W.name]=l}}break}if(H[m].name.indexOf(l)>-1){var Q=p[H[m].name],Y=H.filter(function(e){return e.name===l})[0],K=-1!==Y.caption.indexOf(" (")&&-1!==Y.caption.indexOf(")")?Y.caption.slice(Y.caption.indexOf("(")+1,Y.caption.length-1):Y.caption;H[m].caption=(o.localeObj?o.localeObj.getConstant(Q):Y)+" ("+K+")"}m++}if(I)break}}A=Object.keys(L).length;for(var X=o.getMappingField(l,o.clonedReport?o.clonedReport.fieldMapping:o.dataSourceSettings.fieldMapping),J=X.caption?X.caption:l;A--;){R=p[L[A]];for(var m=0,Z=o.dataSourceSettings.formatSettings.length;m<Z;m++)if(o.dataSourceSettings.formatSettings[m].name===L[A]){o.dataSourceSettings.formatSettings.splice(m,1);break}if("Quarters"!==R&&"QuarterYear"!==R){var $={name:L[A],type:["Years","Months","Days"].indexOf(R)>-1?"date":"time",format:"Years"===R?"yyyy":"Months"===R?"MMM":"Days"===R?"d-MMM":"Hours"===R?"hh a":"Minutes"===R?":mm":"Seconds"===R?":ss":void 0};o.dataSourceSettings.formatSettings.push($)}if(!I){var ee=o.getMappingField(L[A],o.dataSourceSettings.fieldMapping);if(L[A]!==l&&i.i(r.isNullOrUndefined)(ee.name)){var W={name:L[A],caption:(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")"};o.dataSourceSettings.fieldMapping.push(W),o.groupingFieldsInfo[W.name]=l}else L[A]!==l&&(ee.caption=(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")")}}if(!I){var ee=o.getMappingField(l,o.dataSourceSettings.fieldMapping);if(R=p[l],L[A]!==l&&i.i(r.isNullOrUndefined)(ee.name)){var W={name:l,caption:(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")"};o.dataSourceSettings.fieldMapping.push(W),o.groupingFieldsInfo[W.name]=l}else ee.caption=(o.localeObj?o.localeObj.getConstant(R):R)+" ("+J+")"}}else if("Number"===s.type&&s.rangeInterval){var te=void 0,ie=[],re=[],ne=e.length,q=0;o.groupingFields[l]=l;for(var ae=void 0,oe=[];q<ne;){var se=Number(e[q][l]);re.push(se),isNaN(se)||-1!==ie.indexOf(se)||ie.push(se),q++}for(ne=e.length,q=0;q<ne;){var le=e[q];if(le&&!isNaN(Number(le[l]))){ae="string"==typeof s.endingAt?parseInt(s.endingAt,10):s.endingAt,te=ae||Math.max.apply(Math,ie);var de=Math.round(Number(le[l])),pe=Math.round(de+(s.rangeInterval-1));if(de>=oe[0]&&de<=oe[oe.length-1]){var ue=oe[0],he=oe[oe.length-1];le[l]=o.getNumberGroupHeaders(ue,he,te)}else if(0===oe.length){for(var m=de;m<=pe;m++)oe.push(m);var ue=oe[0],he=oe[oe.length-1];le[l]=o.getNumberGroupHeaders(ue,he,te)}else{var ue=oe[oe.length-1]+1,he=ue+(s.rangeInterval-1),ce=!0;for(oe.splice(0,oe.length);ce;)de>=ue&&de<=he&&(le[l]=o.getNumberGroupHeaders(ue,he,te),oe.push(ue),oe.push(he),ce=!1),ue=he+1,he=ue+(s.rangeInterval-1)}for(var D=Object.keys(le),O=[],ge=0,me=D;ge<me.length;ge++){var E=me[ge];O.push(!!le[E])}n=-1===O.indexOf(!1)&&D.length===Object.keys(e[0]).length?le:n}q++}for(var F=[o.dataSourceSettings.rows,o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters],fe=0,ve=F;fe<ve.length;fe++){var Se=ve[fe],X=a.a.getFieldByName(l,Se);X&&(X=X.properties?X.properties:X,X.type="Count")}for(var m=0,ye=o.dataSourceSettings.formatSettings.length;m<ye;m++)if(o.dataSourceSettings.formatSettings[m].name===l){o.dataSourceSettings.formatSettings.splice(m,1);break}}else if("Custom"===s.type&&u){var be=u,I=!1,F=[o.dataSourceSettings.rows,o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters],B=o.dataSourceSettings.rows;B=B.concat(o.dataSourceSettings.columns,o.dataSourceSettings.values,o.dataSourceSettings.filters);var Ce=[];d&&""!==d||(Ce=be.match(/_custom_group/g));for(var xe=a.a.getFieldByName(l.replace(/_custom_group/g,""),B),we=a.a.getFieldByName(be,B),Te=0,Me=F;Te<Me.length;Te++){var H=Me[Te];if(!I&&H){for(var q=H.length,m=0;m<q;){if(H[m].name===s.name&&!we){I=!0;var V=H[m],W={name:be,caption:d&&""!==d?d:(xe.caption?xe.caption:xe.name)+(Ce.length+1),type:"Count",showNoDataItems:V.showNoDataItems,baseField:V.baseField,baseItem:V.baseItem,showSubTotals:V.showValueTypeIcon,allowDragAndDrop:V.allowDragAndDrop,showFilterIcon:V.showFilterIcon,showSortIcon:V.showSortIcon,showRemoveIcon:V.showRemoveIcon,showEditIcon:V.showEditIcon,expandAll:V.expandAll,groupName:V.groupName};H.splice(m,0,W),o.groupingFieldsInfo[W.name]=l,o.groupingFieldsInfo[l]=l;break}if(H[m].name===be&&we){var W={name:we.name,caption:d&&""!==d?d:we.caption,type:we.type,showNoDataItems:we.showNoDataItems,baseField:we.baseField,baseItem:we.baseItem,showRemoveIcon:we.showRemoveIcon,showSubTotals:we.showValueTypeIcon,allowDragAndDrop:we.allowDragAndDrop,showFilterIcon:we.showFilterIcon,showSortIcon:we.showSortIcon,showEditIcon:we.showEditIcon,expandAll:we.expandAll,groupName:we.groupName};H.splice(m,1,W),o.groupingFieldsInfo[W.name]=l,o.groupingFieldsInfo[l]=l;break}m++}if(I)break}}var _e=a.a.getFieldByName(l,a.a.cloneFormatSettings(o.dataSourceSettings.formatSettings));_e&&(_e.name=be,o.dataSourceSettings.formatSettings.push(_e)),o.groupingFields[l]=l}o.groupingFields=i.i(r.extend)(o.groupingFields,p)}(d);if("object"==typeof p)return p.value}return n},e.prototype.getNumberGroupHeaders=function(e,t,i){return e===t?e.toString():i>=e&&i<=t?i===e?e.toString():e.toString()+"-"+i.toString():e.toString()+"-"+t.toString()},e.prototype.frameData=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=void 0,i++;return r},e.prototype.getRange=function(e,t){var i;if("Date"===e.type){var r=new Date(t),n="string"==typeof e.startingAt?new Date(e.startingAt):e.startingAt,a="string"==typeof e.endingAt?new Date(e.endingAt):e.endingAt;i=!!(n&&r.getTime()<n.getTime()||a&&r.getTime()>a.getTime())}else{var o="string"==typeof e.startingAt?parseInt(e.startingAt,10):e.startingAt,s="string"==typeof e.endingAt?parseInt(e.endingAt,10):e.endingAt;i=!isNaN(o)&&t<o||!isNaN(s)&&t>s}return i},e.prototype.getPercentFormat=function(e,t){var n=i.i(r.isNullOrUndefined)(e[t])||i.i(r.isNullOrUndefined)(this.formatFields[t].format)?void 0:this.formatFields[t].format.toLowerCase().match(/p[0-9]/);return i.i(r.isNullOrUndefined)(n)?2:Number(this.formatFields[t].format.replace(/[^0-9]/g,""))},e.prototype.getFormattedFields=function(e){for(var t=this.dataSourceSettings.formatSettings.length;t--;)this.formatFields[this.dataSourceSettings.formatSettings[t].name]=this.dataSourceSettings.formatSettings[t],this.dataSourceSettings.formatSettings[t].type&&(this.dateFormatFunction[this.dataSourceSettings.formatSettings[t].name]={exactFormat:this.globalize.getDateFormat(this.dataSourceSettings.formatSettings[t]),fullFormat:this.globalize.getDateFormat({format:"yyyy/MM/dd/HH/mm/ss",type:this.dataSourceSettings.formatSettings[t].type})})},e.prototype.getFieldList=function(e,t,n){for(var o,s=this.dataSourceSettings.excludeFields.length-1;s>-1;){var l=this.fields.indexOf(this.dataSourceSettings.excludeFields[s]);-1!==l&&this.fields.splice(l,1),this.fieldList&&delete this.fieldList[this.dataSourceSettings.excludeFields[s]],s--}var d=this.fields,p=i.i(r.extend)([],this.dataSourceSettings.rows,null,!0);p=p.concat(this.dataSourceSettings.columns,this.dataSourceSettings.values,this.dataSourceSettings.filters),this.getFormattedFields(p),this.getCalculatedField(d),d=this.fields;var u=d.length,h=["string","number","datetime","date","boolean"];if(this.savedFieldList)for(this.fieldList=this.savedFieldList;u--;){var c=d[u],g=this.getMappingField(c,this.dataSourceSettings.fieldMapping);this.fieldList[c]?(this.fieldList[c].isSelected=!1,this.fieldList[c].index=u,this.fieldList[c].filter=[],this.fieldList[c].sort=t?"Ascending":"None",this.fieldList[c].isExcelFilter=!1,this.fieldList[c].filterType="",this.fieldList[c].showFilterIcon=!(g&&"showFilterIcon"in g)||g.showFilterIcon,this.fieldList[c].showRemoveIcon=!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,this.fieldList[c].showSortIcon=!(g&&"showSortIcon"in g)||g.showSortIcon,this.fieldList[c].showEditIcon=!(g&&"showEditIcon"in g)||g.showEditIcon,this.fieldList[c].showValueTypeIcon=!(g&&"showValueTypeIcon"in g)||g.showValueTypeIcon,this.fieldList[c].allowDragAndDrop=!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop,this.fieldList[c].isCalculatedField=!!(g&&"isCalculatedField"in g)&&g.isCalculatedField,this.fieldList[c].showNoDataItems=!!(g&&"showNoDataItems"in g)&&g.showNoDataItems,this.fieldList[c].showSubTotals=!(g&&"showSubTotals"in g)||g.showSubTotals,this.fieldList[c].expandAll=!!(g&&"expandAll"in g)&&g.expandAll,this.fieldList[c].pid=g&&"groupName"in g&&g.groupName?g.groupName:this.groupingFieldsInfo[c]?this.groupingFieldsInfo[c]:void 0,this.isValueFiltersAvail&&n&&(this.fieldList[c].dateMember=[],this.fieldList[c].formattedMembers={},this.fieldList[c].members={}),this.updateMembersOrder(c)):(o=g&&"dataType"in g&&g.dataType&&h.indexOf(g.dataType.toLowerCase())>-1?g.dataType.toLowerCase():o,this.fieldList[c]={caption:g&&"caption"in g&&g.caption?g.caption:c,id:c,type:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o,isSelected:!1,sort:t?"Ascending":"None",filterType:"",index:u,filter:[],isCustomField:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group"),showRemoveIcon:!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,showFilterIcon:!(g&&"showFilterIcon"in g)||g.showFilterIcon,showSortIcon:!(g&&"showSortIcon"in g)||g.showSortIcon,showNoDataItems:!!(g&&"showNoDataItems"in g)&&g.showNoDataItems,isCalculatedField:!!(g&&"isCalculatedField"in g)&&g.isCalculatedField,showEditIcon:!(g&&"showEditIcon"in g)||g.showEditIcon,showValueTypeIcon:!(g&&"showValueTypeIcon"in g)||g.showValueTypeIcon,allowDragAndDrop:!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop,showSubTotals:!(g&&"showSubTotals"in g)||g.showSubTotals,expandAll:!!(g&&"expandAll"in g)&&g.expandAll,pid:g&&"groupName"in g&&g.groupName?g.groupName:this.groupingFieldsInfo[c]?this.groupingFieldsInfo[c]:void 0,aggregateType:g&&"type"in g?g.type:"number"===(-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o)?"Sum":"Count",baseField:g&&"baseField"in g?g.baseField:void 0,baseItem:g&&"baseItem"in g?g.baseItem:void 0},this.updateMembersOrder(c))}else for(this.fieldList={};u--;){var c=d[u],g=this.getMappingField(c,this.dataSourceSettings.fieldMapping);o=g&&"dataType"in g&&g.dataType&&h.indexOf(g.dataType.toLowerCase())>-1?g.dataType.toLowerCase():a.a.getType(e[this.fieldKeys[c]]),this.fieldList[c]={id:c,pid:g&&"groupName"in g&&g.groupName?g.groupName:this.groupingFieldsInfo[c]?this.groupingFieldsInfo[c]:void 0,caption:g&&"caption"in g&&g.caption?g.caption:c,type:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o,filterType:"",index:u,filter:[],sort:t?"Ascending":"None",isSelected:!1,isCustomField:-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group"),showFilterIcon:!(g&&"showFilterIcon"in g)||g.showFilterIcon,showRemoveIcon:!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,showSortIcon:!(g&&"showSortIcon"in g)||g.showSortIcon,showEditIcon:!(g&&"showEditIcon"in g)||g.showEditIcon,showValueTypeIcon:!(g&&"showValueTypeIcon"in g)||g.showValueTypeIcon,allowDragAndDrop:!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop,showSubTotals:!(g&&"showSubTotals"in g)||g.showSubTotals,showNoDataItems:!!(g&&"showNoDataItems"in g)&&g.showNoDataItems,isCalculatedField:!!(g&&"isCalculatedField"in g)&&g.isCalculatedField,expandAll:!!(g&&"expandAll"in g)&&g.expandAll,aggregateType:g&&"type"in g?g.type:"number"===(-1!==c.indexOf("_custom_group")||-1!==c.indexOf("_date_group")?"string":void 0===o||"undefined"===o?"number":o)?"Sum":"Count",baseField:g&&"baseField"in g?g.baseField:void 0,baseItem:g&&"baseItem"in g?g.baseItem:void 0},this.updateMembersOrder(c)}this.updateTreeViewData(p)},e.prototype.updateMembersOrder=function(e){for(var t=0,i=this.dataSourceSettings.sortSettings;t<i.length;t++){var r=i[t];if(e===r.name&&r.membersOrder){this.fieldList[e].membersOrder=r.membersOrder;break}}},e.prototype.getMappingField=function(e,t){var i={};if(t&&t.length>0)for(var r=0,n=t.length;r<n;r++)if(t[r].name===e){i=t[r];break}return i},e.prototype.updateFieldList=function(e){for(var t=this.fields,i=t.length;i--;)this.fieldList[t[i]].isExcelFilter=e[t[i]].isExcelFilter},e.prototype.updateTreeViewData=function(e){for(var t=e.length,i=this.dataSourceSettings.calculatedFieldSettings.length;t--;)if(this.fieldList[e[t].name]){var r=this.fieldList[e[t].name];r.type=e[t].dataType?e[t].dataType.toLowerCase():r.type,r.caption=e[t].caption?e[t].caption:e[t].name,r.isSelected=!0,r.showNoDataItems=e[t].showNoDataItems,r.aggregateType=e[t].type,r.baseField=e[t].baseField,r.baseItem=e[t].baseItem,r.allowDragAndDrop=e[t].allowDragAndDrop,r.showFilterIcon=e[t].showFilterIcon,r.showSortIcon=e[t].showSortIcon,r.showRemoveIcon=e[t].showRemoveIcon,r.showValueTypeIcon=e[t].showValueTypeIcon,r.showEditIcon=e[t].showEditIcon,r.showSubTotals=e[t].showSubTotals,r.expandAll=e[t].expandAll}for(;i--;)this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name]&&(this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name].aggregateType="CalculatedField",this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name].isCalculatedField=!0,this.fieldList[this.dataSourceSettings.calculatedFieldSettings[i].name].formula=this.dataSourceSettings.calculatedFieldSettings[i].formula)},e.prototype.getCalculatedField=function(e){for(var t=0,n=this.dataSourceSettings.calculatedFieldSettings;t<n.length;t++){var a=n[t];this.calculatedFields[a.name]=i.i(r.extend)({},a,null,!0),this.calculatedFields[a.name].actualFormula=a.formula}for(var o=Object.keys(this.calculatedFields),s=this,l=0,d=o.length;l<d;l++)!function(t,i){var r=s.calculatedFields[o[t]],n=r.properties,a=(n?n.formula:r.formula).trim(),l=a.replace(/"/g,"");r.formula=l.indexOf("^")>-1?s.powerFunction(l):l,-1===r.formula.indexOf("Math.min(")&&r.formula.indexOf("min(")>-1&&(r.formula=r.formula.replace(/min\(/g,"Math.min(")),-1===r.formula.indexOf("Math.max(")&&r.formula.indexOf("max(")>-1&&(r.formula=r.formula.replace(/max\(/g,"Math.max(")),-1===r.formula.indexOf("Math.abs(")&&r.formula.indexOf("abs(")>-1&&(r.formula=r.formula.replace(/abs\(/g,"Math.abs(")),r.name=n?n.name:r.name,e=e.filter(function(e){return e!==r.name}),e.push(r.name);for(var d=a.split('"'),p=0,u=d.length;p<u;p++){var h=d[p].trim(),c=h.split(/[ .:;?!~,`"&|()<>{}\[\]\r\n\/\\]+/),g=h.match(/^([^()]+)\((.*)\)$/),m="DistinctCount"===c[0]?"DistinctCount":"PopulationStDev"===c[0]?"PopulationStDev":"SampleStDev"===c[0]?"SampleStDev":"PopulationVar"===c[0]?"PopulationVar":"SampleVar"===c[0]?"SampleVar":c[0];if(-1!==["Sum","Count","Min","Max","Avg","Product","DistinctCount","PopulationStDev","SampleStDev","PopulationVar","SampleVar","Median"].indexOf(m)){var f=-1===e.indexOf(c[1])&&g[2]?e.indexOf(g[2]):e.indexOf(c[1]);s.calculatedFormulas[r.name]?s.calculatedFormulas[r.name].push({index:f,type:m,formula:h}):s.calculatedFormulas[r.name]=[{index:f,type:m,formula:h}]}}}(l);this.fields=e},e.prototype.validateFilters=function(e){this.isValueFiltersAvail=!1;var t=e.filterSettings?e.filterSettings:[],n=i.i(r.extend)([],this.dataSourceSettings.rows,null,!0);n=n.concat(this.dataSourceSettings.columns);for(var a=0,o=t;a<o.length;a++){for(var s=o[a],l=0,d=n;l<d.length;l++){var p=d[l];if(s.name===p.name&&"Value"===s.type){this.isValueFiltersAvail=!0;break}}if(this.isValueFiltersAvail)break}},e.prototype.validateValueFields=function(){this.isValueHasAdvancedAggregate=!1;for(var e=0,t=this.dataSourceSettings.values;e<t.length;e++){if(-1!==["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal","RunningTotals"].indexOf(t[e].type)){this.isValueHasAdvancedAggregate=!0;break}}},e.prototype.fillFieldMembers=function(e,t){for(var i=this.fields,n=e.length,a=this.fieldList,o=i.length,s=0;s<o;s++){var l=i[s];a[l].members&&!this.allowDataCompression||(a[l].members={}),a[l].formattedMembers&&!this.allowDataCompression||(a[l].formattedMembers={}),a[l].dateMember&&!this.allowDataCompression||(a[l].dateMember=[]);for(var d=a[l].members,p=Object.keys(d).length>0,u=a[l].formattedMembers,h=a[l].dateMember,c=0,g=0,m=a[l].expandAll,f=0;f<n;f++){var v=e[f][this.fieldKeys[l]];if(v=this.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(v):v,!p){var S=v,y=this.pageSettings&&this.formatFields[l]&&!this.valueAxisFields[l]?this.getFormattedValue(v,l):{formattedText:null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):void 0===v?this.localeObj?l in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(v):v.toString(),actualText:null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):void 0===v?this.localeObj?l in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(v):v};y.formattedText&&(S=y.formattedText),d.hasOwnProperty(v)?d[v].index.push(f):(c++,d[v]={index:[f],ordinal:c,isDrilled:!(!this.isExpandAll&&!m)},h.push({formattedText:y.formattedText,actualText:y.dateText?y.dateText:y.actualText})),u.hasOwnProperty(S)?u[S].index.push(f):(g++,u[S]={index:[f],ordinal:g,isDrilled:!(!this.isExpandAll&&!m)})}t[f]?t[f][s]=d[v].ordinal:(t[f]=[],t[f][s]=d[v].ordinal)}}},e.prototype.generateValueMatrix=function(e){for(var t=this.fields,n=e.length,a=[],o=t.length,s=this.fieldList;n--;){var l=o;for(a[n]=[];l--;){var d=t[l];a[n][l]="number"===s[d].type||i.i(r.isNullOrUndefined)(e[n][this.fieldKeys[d]])?i.i(r.isNullOrUndefined)(e[n][this.fieldKeys[d]])?e[n][this.fieldKeys[d]]:isNaN(Number(e[n][this.fieldKeys[d]]))?void 0:Number(e[n][this.fieldKeys[d]]):1}}return a},e.prototype.updateSortSettings=function(e,t){for(var i=0,r=e?e.length:0;i<r&&t;i++)this.fieldList[e[i].name]&&(this.fieldList[e[i].name].sort=e[i].order)},e.prototype.updateFilterMembers=function(e){var t=this.filterMembers,i={},r=this.getFilters(e,i),n=this.indexMatrix.length;if(r)for(var a=i.include.index,o=0;o<a.length;o++)void 0!==i.exclude&&void 0!==i.exclude.indexObject[a[o]]||t.push(a[o]);else for(var o=0;o<n;o++)void 0!==i.exclude&&void 0!==i.exclude.indexObject[o]||t.push(o)},e.prototype.getFilters=function(e,t){for(var i=e.filterSettings?e.filterSettings:[],r=!1,n=[],a=0,o=i.length;a<o;a++){var s=i[a].properties?i[a].properties:i[a];this.fieldList[s.name]&&this.fieldList[s.name].isSelected&&this.isValidFilterField(s,e.allowMemberFilter,e.allowLabelFilter)&&(this.applyLabelFilter(s),s&&(n=s.items),s.type&&"Include"===s.type?(this.frameFilterList(n,s.name,t,"include",s.showLabelFilter,r),r=!0):this.frameFilterList(n,s.name,t,"exclude",s.showLabelFilter),s.showLabelFilter&&(s.items=[],s.type=s.showDateFilter?"Date":s.showNumberFilter?"Number":"Label"))}return r},e.prototype.isValidFilterField=function(e,t,n){var a=e.name,o=!1,s=["Include","Exclude"],l=i.i(r.extend)([],this.dataSourceSettings.rows,null,!0);if(l=l.concat(this.dataSourceSettings.columns),this.fieldList[a].isSelected&&t&&s.indexOf(e.type)>=0){o=!0;for(var d=0,p=this.dataSourceSettings.values;d<p.length;d++){var u=p[d];if(a===u.name){o=!1;break}}}else if(n)for(var h=0,c=l;h<c.length;h++){var u=c[h];if(a===u.name&&["Label","Date","Number"].indexOf(e.type)>=0){o=!0;break}}return o},e.prototype.applyLabelFilter=function(e){if(["Label","Date","Number"].indexOf(e.type)>=0){var t=Object.keys(this.fieldList[e.name].members);if(e.showLabelFilter=!0,"Label"===e.type)e.items=this.getLabelFilterMembers(t,e.condition,e.value1,e.value2);else if("Date"===e.type){e.showDateFilter=!0;var i="string"==typeof e.value1?new Date(e.value1):e.value1,r="string"==typeof e.value2?new Date(e.value2):e.value2;e.items=this.getDateFilterMembers(t,e.name,e.condition,i,r)}else{e.showNumberFilter=!0,e.items=[];for(var n=0,a=t;n<a.length;n++){var o=a[n],s=this.getParsedValue(e.name,e.value1),l=this.getParsedValue(e.name,e.value2),d=this.getParsedValue(e.name,o);this.validateFilterValue(d,e.condition,s,l)&&e.items.push(o)}}var p=["DoesNotBeginWith","DoesNotContains","DoesNotEndsWith","DoesNotEquals","NotBetween"];e.type=e.condition?p.indexOf(e.condition)>-1&&!e.showNumberFilter?"Exclude":"Include":"Exclude"}else e.showLabelFilter=!1},e.prototype.getLabelFilterMembers=function(e,t,i,r){for(var n=[],a=0,o=e;a<o.length;a++){var s=o[a],l=s.toLowerCase();if(i.toString())switch(t){case"Equals":case"DoesNotEquals":l===i.toLowerCase()&&n.push(s);break;case"BeginWith":case"DoesNotBeginWith":0===l.indexOf(i.toLowerCase())&&n.push(s);break;case"EndsWith":case"DoesNotEndsWith":null!==l.match(i.toLowerCase()+"$")&&n.push(s);break;case"Contains":case"DoesNotContains":l.indexOf(i.toLowerCase())>-1&&n.push(s);break;case"GreaterThan":l>i.toLowerCase()&&n.push(s);break;case"GreaterThanOrEqualTo":l>=i.toLowerCase()&&n.push(s);break;case"LessThan":l<i.toLowerCase()&&n.push(s);break;case"LessThanOrEqualTo":l<=i.toLowerCase()&&n.push(s);break;case"Between":case"NotBetween":l>=i.toLowerCase()&&l<=r.toLowerCase()&&n.push(s);break;default:l===i.toLowerCase()&&n.push(s)}}return n},e.prototype.getDateFilterMembers=function(e,t,i,r,n){for(var a=[],o=0,s=e;o<s.length;o++){var l=s[o],d=new Date(l);if(r)switch(i){case"Equals":case"DoesNotEquals":this.getFormattedValue(d.toString(),t).formattedText===this.getFormattedValue(r.toString(),t).formattedText&&a.push(this.getFormattedValue(l,t).formattedText);break;case"After":d.getTime()>r.getTime()&&a.push(this.getFormattedValue(l,t).formattedText);break;case"AfterOrEqualTo":d.getTime()>=r.getTime()&&a.push(this.getFormattedValue(l,t).formattedText);break;case"Before":d.getTime()<r.getTime()&&a.push(this.getFormattedValue(l,t).formattedText);break;case"BeforeOrEqualTo":d.getTime()<=r.getTime()&&a.push(this.getFormattedValue(l,t).formattedText);break;case"Between":case"NotBetween":d.getTime()>=r.getTime()&&d.getTime()<=n.getTime()&&a.push(this.getFormattedValue(l,t).formattedText);break;default:this.getFormattedValue(d.toString(),t).formattedText===this.getFormattedValue(r.toString(),t).formattedText&&a.push(this.getFormattedValue(l,t).formattedText)}}return a},e.prototype.validateFilterValue=function(e,t,i,r){var n=!1;if("number"==typeof i)switch(t){case"Equals":e===i&&(n=!0);break;case"DoesNotEquals":e!==i&&(n=!0);break;case"GreaterThan":e>i&&(n=!0);break;case"GreaterThanOrEqualTo":e>=i&&(n=!0);break;case"LessThan":e<i&&(n=!0);break;case"LessThanOrEqualTo":e<=i&&(n=!0);break;case"Between":e>=i&&e<=r&&(n=!0);break;case"NotBetween":e>=i&&e<=r||(n=!0);break;default:e!==i&&(n=!0)}return n},e.prototype.frameFilterList=function(e,t,i,r,n,a){i[r]?this.updateFilter(e,t,i,r,n,a):(i[r]={indexObject:{},index:[]},this.updateFilter(e,t,i,r,n,a))},e.prototype.updateFilter=function(e,t,n,a,o,s){var l=0,d=this.fieldList[t];d.filter=e,d.filterType=a,d.isExcelFilter=o;var p=this.formatFields[t]&&["date","dateTime","time"].indexOf(this.formatFields[t].type)>-1||t in this.groupingFields?d.formattedMembers:d.members,u=s,h={},c={};for(h[a]={indexObject:{},index:[]},this.fieldFilterMem[t]={memberObj:{}};!i.i(r.isNullOrUndefined)(e[l]);){if(p[e[l]]){var g=p[e[l]].index;if("include"===a)for(var m=0,f=g.length;m<f;m++)u&&void 0===n[a].indexObject[g[m]]||(h[a].indexObject[g[m]]=g[m],h[a].index.push(g[m]));else{for(var m=0,f=g.length;m<f;m++)void 0===n[a].indexObject[g[m]]&&(n[a].indexObject[g[m]]=g[m],n[a].index.push(g[m]));this.fieldFilterMem[t].memberObj[e[l]]=e[l]}}l++}if("include"===a){n[a]=h[a];for(var m=0;m<e.length;m++)p[e[m]]&&(c[e[m]]=e[m]);for(var v=Object.keys(p),m=0,f=v.length;m<f;m++)void 0===c[v[m]]&&(this.fieldFilterMem[t].memberObj[v[m]]=v[m])}},e.prototype.applyValueFiltering=function(e,t,n,a,o,s,l){this.isValueFiltered=!1;var d=i.i(r.extend)({},"row"===l&&this.rowGrandTotal?this.rowGrandTotal:"column"===l&&this.columnGrandTotal?this.columnGrandTotal:"Top"!==this.dataSourceSettings.grandTotalsPosition?n[n.length-1]:n[0],null,!0);return this.getFilteredData(n,a,o,s,t,e.name,d,l),this.isValueFiltered&&(("row"===l&&null===this.rowGrandTotal||"column"===l&&null===this.columnGrandTotal)&&s.push(d),n=s),n},e.prototype.getFilteredData=function(e,t,n,a,o,s,l,d){for(var p=e.length,u=0;u<p;u++)if(n[s])if(e[u].level===o){this.isValueFiltered=!0,this.fieldList[s].isExcelFilter=!0;var h=0,c=n[s].measure,g=this.fieldList[c].index,m=this.fieldList[c].aggregateType;this.rawIndexObject={},h="row"===d?this.getAggregateValue(e[u].index,t.indexObject,g,m,!1):this.getAggregateValue(t.index,e[u].indexObject,g,m,!1);var f={fieldName:c,row:e[u],column:t,value:h,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:e[u].hasChild&&e[u].isDrilled?"subTotal":"grand sum"===e[u].type?"grandTotal":"value",columnCellType:t.hasChild&&t.isDrilled?"subTotal":"grand sum"===t.type?"grandTotal":"value",aggregateType:m,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(f),h=f.value,this.rawIndexObject={};var v=this.getParsedValue(c,n[s].value1),S=this.getParsedValue(c,n[s].value2);if(this.validateFilterValue(h,n[s].condition,v,S)||"grand sum"===e[u].type)"grand sum"!==e[u].type&&(a.push(i.i(r.extend)({},e[u],null,!0)),a[a.length-1].isLevelFiltered=!0);else{var y=this.removefilteredData(e[u],this.valueFilteredData),b=y||e[u];this.validateFilteredParentData(b,this.valueFilteredData,l,0,o,d)}}else e[u].hasChild&&e[u].members.length>0&&"grand sum"!==e[u].type&&(a.push(i.i(r.extend)({},e[u],null,!0)),a[a.length-1].members=[],a[a.length-1].isLevelFiltered=!0,this.getFilteredData(e[u].members,t,n,a[a.length-1].members,o,s,l,d))},e.prototype.getParsedValue=function(e,t){var n=t?t.toString():"";if(this.formatFields[e]&&t){var a=i.i(r.extend)({},this.formatFields[e],null,!0);return delete a.name,this.globalize.parseNumber(n,a)}return this.globalize.parseNumber(n,{format:"N"})},e.prototype.removefilteredData=function(e,t){for(var n,a=i.i(r.extend)([],t,null,!0),o=0;o<a.length;o++){if(e.isLevelFiltered&&e.axis===a[o].axis&&e.valueSort.levelName===a[o].valueSort.levelName&&e.actualText===a[o].actualText&&e.axis===a[o].axis&&e.level===a[o].level&&e.ordinal===a[o].ordinal){n=a[o],t.splice(o,1);break}t[o].hasChild&&t[o].members.length>0&&this.removefilteredData(e,t[o].members)}return n},e.prototype.validateFilteredParentData=function(e,t,i,r,n,a){if(t.length>0)for(var o=0,s=t;o<s.length;o++){var l=s[o];if(l.level===r){if("row"===a)for(var d=e.index,p=0,u=d;p<u.length;p++){var h=u[p];i.index.indexOf(h)>=0&&i.index.splice(i.index.indexOf(h),1),e.valueSort.levelName.toString().indexOf(l.valueSort.levelName.toString())>=0&&l.level!==n&&l.index.indexOf(h)>=0&&l.index.splice(l.index.indexOf(h),1)}else for(var d=e.indexObject,c=0,g=Object.keys(d);c<g.length;c++){var h=g[c];d.hasOwnProperty(h)&&(delete i.indexObject[h],e.valueSort.levelName.toString().indexOf(l.valueSort.levelName.toString())>=0&&l.level!==n&&delete l.indexObject[h])}l&&l.members.length>0&&l.members[0].level===r+1&&l.members[0].level!==n&&this.validateFilteredParentData(e,l.members,i,r+1,n,a)}}else if("row"===a)for(var d=e.index,m=0,f=d;m<f.length;m++){var h=f[m];i.index.indexOf(h)>=0&&i.index.splice(i.index.indexOf(h),1)}else for(var d=e.indexObject,v=0,S=Object.keys(d);v<S.length;v++){var h=S[v];d.hasOwnProperty(h)&&delete i.indexObject[h]}},e.prototype.updateFramedHeaders=function(e,t,n,a,o){for(var s=0,l=e;s<l.length;s++){var d=l[s];this.isHeaderAvail=!1,(this.validateFilteredHeaders(d,n,o)||"grand sum"===d.type)&&("row"===o?this.rowCount+=this.rowValuesLength:this.columnCount+=this.colValuesLength,a.push(i.i(r.extend)({},d,null,!0)),a[a.length-1].members=[],d.hasChild&&d.isDrilled&&d.members.length>0&&this.updateFramedHeaders(d.members,t,n,a[a.length-1].members,o))}return this.filterFramedHeaders},e.prototype.validateFilteredHeaders=function(e,t,i){for(var r=0,n=t;r<n.length;r++){var a=n[r];if(!this.isHeaderAvail){if(e.actualText===a.actualText&&e.level===a.level&&e.valueSort.levelName===a.valueSort.levelName)return"row"===i?a.index.length>0?(this.isHeaderAvail=!0,e.index=a.index,!0):(this.isHeaderAvail=!1,e.index=a.index,!1):Object.keys(a.indexObject).length>0?(this.isHeaderAvail=!0,e.indexObject=a.indexObject,!0):(this.isHeaderAvail=!1,e.indexObject=a.indexObject,!1);a.hasChild&&a.members.length>0&&"grand sum"!==a.type&&this.validateFilteredHeaders(e,a.members,i)}}return this.isHeaderAvail},e.prototype.isEmptyDataAvail=function(e,t){this.isEmptyData=!1,e.length>0&&"grand sum"===e[e.length-1].type&&0===e[e.length-1].index.length&&(this.isEmptyData=!0),t.length>0&&"grand sum"===t[t.length-1].type&&0===Object.keys(t[t.length-1].indexObject).length&&(this.isEmptyData=!0),0!==e.length&&0!==t.length||(this.isEmptyData=!0)},e.prototype.updateGridData=function(e){this.updateDataSourceSettings(e,!0),this.data=e.dataSource,this.allowDataCompression&&(this.actualData=this.data,this.data=this.getGroupedRawData(e)),this.indexMatrix=[];for(var t=0,i=this.fields;t<i.length;t++){var r=i[t];this.fieldList[r].members={},this.fieldList[r].formattedMembers={},this.fieldList[r].dateMember=[]}this.fillFieldMembers(this.data,this.indexMatrix),this.valueMatrix=this.generateValueMatrix(this.data),this.filterMembers=[],this.cMembers=[],this.rMembers=[],this.updateFilterMembers(e),this.isEditing=!0,this.isDrillThrough=!0,this.generateGridData(e),this.isEditing=!1},e.prototype.generateGridData=function(e,t,n){void 0===t&&(t=!1),this.updateDataSourceSettings(e,t);var o=e.columns?e.columns:[],s=this.data,l=e.rows?e.rows:[],d=e.filterSettings,p=e.values?e.values:[];this.removeCount=0,this.isExpandAll=e.expandAll,this.drilledMembers=e.drilledMembers?e.drilledMembers:[],this.isEmptyData=!1;var u=[];if(l[0]&&l[0].showNoDataItems||o[0]&&o[0].showNoDataItems)for(var h=0;h<this.indexMatrix.length;h++)u.push(h);for(var h=0;h<this.filterMembers.length;h++)this.filterPosObj[this.filterMembers[h]]=this.filterMembers[h];this.valueSortSettings.columnIndex=void 0,this.validateValueFields(),this.frameDrillObject(),this.isValueFilterEnabled&&!this.isEditing||n||(this.isLastHeaderHasMeasures=!0,this.columnCount=0,this.rowCount=0,this.cMembers=[],this.rMembers=[],0!==l.length&&(this.rMembers=this.getIndexedHeaders(l,s,0,l[0].showNoDataItems?u:this.filterMembers,"row","",this.allowValueFilter)),0!==o.length&&(this.cMembers=this.getIndexedHeaders(o,s,0,o[0].showNoDataItems?u:this.filterMembers,"column","",this.allowValueFilter)),this.insertAllMembersCommon(),this.saveDataHeaders=this.isValueFiltersAvail&&e.allowValueFilter?{rowHeaders:i.i(r.extend)([],this.rMembers,null,!0),columnHeaders:i.i(r.extend)([],this.cMembers,null,!0)}:{}),this.pivotValues=[],this.headerContent=[],this.valueContent=[],this.valueFilteredData=[],this.filterFramedHeaders=[];var c=[],g=[],m=[],f=[],v=[],S=this.dataSourceSettings.values.length;if(this.isValueFiltersAvail&&e.allowValueFilter&&!n){this.valueFilteredData=[];var y=this.saveDataHeaders.rowHeaders?this.saveDataHeaders.rowHeaders:[],b=this.saveDataHeaders.columnHeaders?this.saveDataHeaders.columnHeaders:[];if(d.length>0){for(var C={},x={},w=0,T=p;w<T.length;w++){var M=T[w];x[M.name]=M}for(var _=0,D=d;_<D.length;_++){var O=D[_];y=m.length>0?m:y,b=f.length>0?f:b,this.valueFilteredData=[];var P=O.properties?O.properties:O;if("Value"===P.type&&this.fieldList[O.name]&&this.fieldList[O.name].isSelected){C[O.name]=O,P.items=[];for(var N=!1,E=l.length,I=o.length,F=0;F<E;F++)if(P.name===l[F].name&&x[P.measure]&&!N){N=!0,m=this.applyValueFiltering(l[F],F,y,this.columnGrandTotal?this.columnGrandTotal:"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?b[0]:b[b.length-1],C,this.valueFilteredData,"row");break}for(var L=0;L<I;L++)if(P.name===o[L].name&&x[P.measure]&&!N){N=!0,f=this.applyValueFiltering(o[L],L,b,this.rowGrandTotal?this.rowGrandTotal:"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?y[0]:y[y.length-1],C,this.valueFilteredData,"column");break}}}}m=m.length>0?m:y,f=f.length>0?f:b,this.isEmptyDataAvail(m,f);var A=a.a.getClonedFieldList(this.fieldList);this.indexMatrix=[];var R=this.data[0];this.getFieldList(R,this.enableSort,e.allowValueFilter),this.fillFieldMembers(this.data,this.indexMatrix),this.updateSortSettings(e.sortSettings,this.enableSort),this.valueMatrix=this.generateValueMatrix(this.data),this.filterMembers=[],this.updateFilterMembers(e),this.isLastHeaderHasMeasures=!0,this.rMembers=0!==l.length?this.getIndexedHeaders(l,s,0,l[0].showNoDataItems?u:this.filterMembers,"row",""):[],this.cMembers=0!==o.length?this.getIndexedHeaders(o,s,0,o[0].showNoDataItems?u:this.filterMembers,"column",""):[],this.insertAllMembersCommon(),this.updateFieldList(A),this.rowCount=0,this.columnCount=0,this.rMembers=this.updateFramedHeaders(this.rMembers,this.rMembers,m,this.filterFramedHeaders,"row"),this.filterFramedHeaders=[],this.cMembers=this.updateFramedHeaders(this.cMembers,this.cMembers,f,this.filterFramedHeaders,"column"),this.isValueFilterEnabled=!0}n||this.applyValueSorting(),this.isPagingOrVirtualizationEnabled&&(n?(this.rMembers=n.rowHeaders,this.cMembers=n.columnHeaders,this.rowCount=n.rowHeadersCount,this.columnCount=n.columnHeadersCount):(this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.columnHeaders=this.cMembers,this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeadersCount=this.columnCount),this.calculatePagingValues()),!this.valueAxis&&this.isLastHeaderHasMeasures&&this.getAggregatedHeaders(l,o,this.rMembers,this.cMembers,p),this.getHeaderData(l,o,p,v,this.cMembers,g,this.pivotValues,0,this.valueAxis?1:S),this.insertSubTotals(),this.getTableData(v.length>0?v:this.rMembers,c,g,0,this.pivotValues,S,0,this.rowGrandTotal?this.rowGrandTotal:this.rMembers[this.rMembers.length-1],this.columnGrandTotal?this.columnGrandTotal:this.cMembers[this.cMembers.length-1]),this.applyAdvancedAggregate(c,g,this.pivotValues),this.isEngineUpdated=!0,this.isEmptyDataAvail(this.rMembers,this.cMembers),this.clearProperties()},e.prototype.updateHeaders=function(e,t){e=i.i(r.isNullOrUndefined)(e)?!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)||!(this.dataSourceSettings.rows.length>0):e,(this.pageSettings&&this.removeRowGrandTotal||!e&&!this.rowGrandTotal)&&"grand sum"===this.rMembers[this.rMembers.length-1].type&&(this.rMembers=this.rMembers.slice(0,this.rMembers.length-1)),t=i.i(r.isNullOrUndefined)(t)?!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||!(this.dataSourceSettings.columns.length>0):t,(this.pageSettings&&this.removeColumnGrandTotal||!t&&!this.columnGrandTotal)&&"grand sum"===this.cMembers[this.cMembers.length-1].type&&(this.cMembers=this.cMembers.slice(0,this.cMembers.length-1))},e.prototype.updatePivotValues=function(e){var t=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)||!(this.dataSourceSettings.rows.length>0),i=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||!(this.dataSourceSettings.columns.length>0);if(e&&this.updateHeaders(t,i),(this.pageSettings&&this.removeRowGrandTotal||!t&&!this.rowGrandTotal)&&this.valueContent.length>0){var r=1;this.valueAxis&&this.dataSourceSettings.values.length>0&&(r=1+this.dataSourceSettings.values.length),this.pivotValues[this.pivotValues.length-r]&&"grand sum"===this.pivotValues[this.pivotValues.length-r][0].type&&(this.pivotValues=this.pivotValues.slice(0,this.pivotValues.length-r),this.valueContent=this.valueContent.slice(0,this.valueContent.length-r))}if((this.pageSettings&&this.removeColumnGrandTotal||!i&&!this.columnGrandTotal)&&this.headerContent.length>0){var r=this.dataSourceSettings.values.length;if(this.valueAxis&&this.dataSourceSettings.values.length>0&&(r=1),this.pivotValues[0][this.pivotValues[0].length-r]&&"grand sum"===this.pivotValues[0][this.pivotValues[0].length-r].type)for(var n=0;n<this.pivotValues.length;n++)if(this.pivotValues[n]&&(this.pivotValues[n]=this.pivotValues[n].slice(0,this.pivotValues[n].length-r)),this.headerContent[n])for(var a=this.pivotValues[n].length;a<this.pivotValues[n].length+r;a++)delete this.headerContent[n][a]}this.removeRowGrandTotal=this.removeColumnGrandTotal=!1},e.prototype.onDrill=function(e){this.frameDrillObject(e);var t=this.getHeadersInfo(e.fieldName,e.axis);this.performDrillOperation(t.headers,e,t.fields,t.position,0),this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeadersCount=this.columnCount,"row"===t.axis?this.headerCollection.rowHeaders=t.headers:this.headerCollection.columnHeaders=t.headers,this.updateEngine()},e.prototype.onSort=function(e){var t=this.getHeadersInfo(e.name,"");this.fieldList[e.name].sort=e.order,this.performSortOperation(t.headers,e,t,0),this.updateEngine()},e.prototype.onFilter=function(e,t){this.updateDataSourceSettings(t,!0);var i=this.getHeadersInfo(e.name,"");this.isLastHeaderHasMeasures=!!(this.valueAxis&&"row"===i.axis||!this.valueAxis&&"column"===i.axis)||this.isLastHeaderHasMeasures,"Include"===e.type&&e.items.length===this.fieldList[e.name].dateMember.length?(this.fieldList[e.name].filter=[],this.fieldList[e.name].filterType=""):(this.fieldList[e.name].filter=e.items,this.fieldList[e.name].filterType=e.type);for(var r={},n=0,a=this.filterMembers;n<a.length;n++){var o=a[n];r[o]=o}this.filterMembers=[],this.fieldFilterMem={},this.updateFilterMembers(t);for(var s=this.filterMembers.filter(function(e){return void 0===r[e]}),l={},d=0,p=e.items;d<p.length;d++){var u=p[d];l[u]=u}var h=this.dataSourceSettings.rows[0]&&this.dataSourceSettings.rows[0].showNoDataItems||this.dataSourceSettings.columns[0]&&this.dataSourceSettings.columns[0].showNoDataItems;if(h&&this.columnKeys[e.name]?h=!(!this.dataSourceSettings.columns[0]||!this.dataSourceSettings.columns[0].showNoDataItems):h&&"row"===i.axis&&(h=!(!this.dataSourceSettings.rows[0]||!this.dataSourceSettings.rows[0].showNoDataItems)),h){var c=[];this.filterPosObj={};for(var g=0;g<s.length;g++)this.filterPosObj[s[g]]=s[g];for(var g=0;g<this.indexMatrix.length;g++)c.push(g);s=c}this.performFilterCommonUpdate(e,i,s),this.frameHeaderObjectsCollection=!1,this.headerObjectsCollection={},this.updateEngine()},e.prototype.onAggregation=function(e){this.fieldList[e.name].aggregateType=e.type,this.rMembers=this.headerCollection.rowHeaders,this.cMembers=this.headerCollection.columnHeaders,this.allowDataCompression&&(this.data=this.getGroupedRawData(this.dataSourceSettings),this.valueMatrix=this.generateValueMatrix(this.data)),this.updateEngine()},e.prototype.onCalcOperation=function(e,t){this.dataSourceSettings.calculatedFieldSettings=t.calculatedFieldSettings?t.calculatedFieldSettings:[],this.dataSourceSettings.values=t.values?t.values:[],this.rMembers=this.headerCollection.rowHeaders,this.cMembers=this.headerCollection.columnHeaders,this.getCalculatedField(this.fields),this.fieldList[e.name]?this.fieldList[e.name].formula=e.formula:(this.fieldList[e.name]={id:e.name,caption:e.name,type:"number",aggregateType:"CalculatedField",filterType:"",index:this.fields.length-1,filter:[],sort:this.enableSort?"Ascending":"None",isSelected:!0,isExcelFilter:!1,formula:e.formula},1===this.valueAxis?this.headerCollection.rowHeadersCount=this.rowCount=this.rowCount/(this.dataSourceSettings.values.length-1)*this.dataSourceSettings.values.length:this.headerCollection.columnHeadersCount=this.columnCount=this.columnCount/(this.dataSourceSettings.values.length-1)*this.dataSourceSettings.values.length),this.updateEngine()},e.prototype.performDrillOperation=function(e,t,i,r,n){for(var a=0;a<e.length;){if(r===n){var o=e[a].valueSort.levelName.split(this.valueSortSettings.headerDelimiter);if(t.memberName===o.join(t.delimiter?t.delimiter:"**")){if("down"===t.action){e[a].isDrilled=!0,e[a].members=this.getIndexedHeaders(i,this.data,r+1,e[a].index,t.axis,t.memberName.split(t.delimiter?t.delimiter:"**").join(this.valueSortSettings.headerDelimiter));var s=void 0;if("row"===t.axis)s=this.applyValueSorting(e[a].members,this.cMembers),e[a].members=s.rMembers;else{var l=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&i[r].showSubTotals;this.columnCount-=l?0:this.colValuesLength,s=this.applyValueSorting(this.rMembers,e[a].members),e[a].members=s.cMembers}}else e[a].isDrilled=!1,this.updateHeadersCount(e[a].members,t.axis,r,i,"minus",!0),e[a].members=[];break}}else e[a].members.length>0&&(e[a].members=this.performDrillOperation(e[a].members,t,i,r,n+1));a++}return e},e.prototype.performSortOperation=function(e,t,i,r){for(var n=0;n<e.length;){if(i.position===r){e=this.getSortedHeaders(e,t.order.toString());break}e[n].members.length>0&&(e[n].members=this.performSortOperation(e[n].members,t,i,r+1)),n++}return e},e.prototype.performFilterDeletion=function(e,t,i,r,n){for(var a=0,o=!0,s=this;a<e.length&&o;)!function(){if(i.position===n){var l=s;e=e.filter(function(e){return!l.fieldFilterMem[t.name].memberObj[e.formattedText]||"grand sum"===e.type}),o=!1}else e[a].members.length>0&&(e[a].members=s.performFilterDeletion(e[a].members,t,i,r,n+1));a++}();var l=this;return e.filter(function(e){return e.members.length>0||"grand sum"===e.type||l.matchIndexes(e.indexObject,r)})},e.prototype.matchIndexes=function(e,t){var i=Object.keys(e),r=i.length;if(0===r)return!0;for(;r>-1;){if(void 0!==t[e[i[r]]])return!0;r--}return!1},e.prototype.performFilterAddition=function(e,t,i){for(var r=0,n=this;r<e.length;)!function(){var a=e[r].valueSort.levelName;if(n.headerObjectsCollection[a]){for(var o={},s=0,l=e[r].members;s<l.length;s++){var d=l[s];o[d.valueSort.levelName.toString()]=d.valueSort.levelName.toString()}var p=n.headerObjectsCollection[a].filter(function(e){return!o[e.valueSort.levelName.toString()]});e[r].members=e[r].members.concat(p),e[r].members=n.getSortedHeaders(e[r].members,n.fieldList[i.fields[e[r].members[0].level].name].sort),delete n.headerObjectsCollection[a]}e[r].members.length>0&&(e[r].members=n.performFilterAddition(e[r].members,t,i)),r++}();return e},e.prototype.performFilterCommonUpdate=function(e,t,i){if("row"===t.axis||"column"===t.axis){for(var r="row"===t.axis?this.rMembers:this.cMembers,n={},a=0,o=this.filterMembers;a<o.length;a++){var s=o[a];n[s]=s}if(this.fieldFilterMem[e.name]&&(r=this.performFilterDeletion(t.headers,e,t,n,0)),i.length>0&&t.fields.length>0){if(this.frameHeaderObjectsCollection=!0,t.fields.filter(function(e){return e.showNoDataItems}).length>0)for(var l=0;l<this.data.length;l++)i.push(l);this.headerObjectsCollection.parent=this.getIndexedHeaders(t.fields,this.data,0,i,t.axis,""),r=this.performFilterAddition(r,t.fields,t);for(var d={},p=0,u=r;p<u.length;p++){var h=u[p];d[h.valueSort.levelName.toString()]=h.valueSort.levelName.toString()}var c=this.headerObjectsCollection.parent.filter(function(e){return!d[e.valueSort.levelName.toString()]}),g=r.filter(function(e){return"grand sum"===e.type});g.length>0&&r.pop(),r=this.getSortedHeaders(r.concat(c),this.fieldList[t.fields[0].name].sort).concat(g),"row"===t.axis?(this.cMembers=this.getIndexedHeaders(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column",""),this.insertAllMember(this.cMembers,this.filterMembers,"","column")):(this.rMembers=this.getIndexedHeaders(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row",""),this.insertAllMember(this.rMembers,this.filterMembers,"","row"))}"row"===t.axis?this.rowCount=0:this.columnCount=0,this.updateHeadersCount(r,t.axis,0,t.fields,"plus",!1),"row"===t.axis?(t.position>0&&this.insertPosition(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row","",r),this.insertTotalPosition(r),this.rMembers=this.headerCollection.rowHeaders=r,this.headerCollection.rowHeadersCount=this.rowCount):(t.position>0&&this.insertPosition(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column","",r),this.insertTotalPosition(r),this.cMembers=this.headerCollection.columnHeaders=r,this.headerCollection.columnHeadersCount=this.columnCount)}else{var m=this.dataSourceSettings.rows[0]&&this.dataSourceSettings.rows[0].showNoDataItems||this.dataSourceSettings.columns[0]&&this.dataSourceSettings.columns[0].showNoDataItems;this.dataSourceSettings.rows.length>0&&(this.rMembers=this.getIndexedHeaders(this.dataSourceSettings.rows,this.data,0,m?i:this.filterMembers,"row","")),this.dataSourceSettings.columns.length>0&&(this.cMembers=this.getIndexedHeaders(this.dataSourceSettings.columns,this.data,0,m?i:this.filterMembers,"column","")),this.insertAllMembersCommon(),this.rowCount=0,this.columnCount=0,this.updateHeadersCount(this.cMembers,"column",0,this.dataSourceSettings.columns,"plus",!1),this.updateHeadersCount(this.rMembers,"row",0,this.dataSourceSettings.rows,"plus",!1),m&&(this.insertPosition(this.dataSourceSettings.rows,this.data,0,this.filterMembers,"row","",this.rMembers),this.insertPosition(this.dataSourceSettings.columns,this.data,0,this.filterMembers,"column","",this.cMembers)),this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.rowHeadersCount=this.rowCount,this.headerCollection.columnHeaders=this.cMembers,this.headerCollection.columnHeadersCount=this.columnCount}this.applyValueSorting()},e.prototype.getHeadersInfo=function(e,t){this.rMembers=this.headerCollection.rowHeaders,this.cMembers=this.headerCollection.columnHeaders,t=""===t?this.getAxisByFieldName(e):t;for(var i="row"===t?this.rMembers:this.cMembers,r="row"===t?this.dataSourceSettings.rows:this.dataSourceSettings.columns,n=0,a=0,o=r;a<o.length;a++){if(o[a].name===e)break;n++}return{axis:t,fields:r,headers:i,position:n}},e.prototype.updateEngine=function(){this.removeCount=0,this.validateValueFields(),this.calculatePagingValues(),this.pivotValues=[],this.headerContent=[],this.valueContent=[];var e=[],t=[],i=[],r=this.dataSourceSettings.values.length;this.getAggregatedHeaders(this.dataSourceSettings.rows,this.dataSourceSettings.columns,this.rMembers,this.cMembers,this.dataSourceSettings.values),this.getHeaderData(this.dataSourceSettings.rows,this.dataSourceSettings.columns,this.dataSourceSettings.values,i,this.cMembers,t,this.pivotValues,0,this.valueAxis?1:r),this.insertSubTotals(),this.getTableData(i.length>0?i:this.rMembers,e,t,0,this.pivotValues,r,0,this.rowGrandTotal?this.rowGrandTotal:this.rMembers[this.rMembers.length-1],this.columnGrandTotal?this.columnGrandTotal:this.cMembers[this.cMembers.length-1]),this.applyAdvancedAggregate(e,t,this.pivotValues),this.isEngineUpdated=!0,this.isEmptyDataAvail(this.rMembers,this.cMembers)},e.prototype.getAxisByFieldName=function(e){for(var t=0,i="";t<4&&""===i;){switch(t){case 0:i=this.getFieldByName(e,this.dataSourceSettings.rows)?"row":"";break;case 1:i=this.getFieldByName(e,this.dataSourceSettings.columns)?"column":""}t++}return i},e.prototype.getFieldByName=function(e,t){return new n.DataManager({json:t}).executeLocal((new n.Query).where("name","equal",e))[0]},e.prototype.updateHeadersCount=function(e,t,i,r,n,a){var o=0,s=r[i],l=!0;for(l="column"===t?this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&s.showSubTotals:!(this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals&&s)||s.showSubTotals;o<e.length;)"row"===t?this.rowCount=this.rowCount-("plus"===n?-(1===this.valueAxis?this.dataSourceSettings.values.length:1):1===this.valueAxis?this.dataSourceSettings.values.length:1):this.columnCount=this.columnCount-("plus"===n?-(1===this.valueAxis?1:this.dataSourceSettings.values.length):1===this.valueAxis?1:this.dataSourceSettings.values.length),e[o].members.length>0&&this.updateHeadersCount(e[o].members,t,i+1,r,n,!0),o++;"column"===t&&!l&&a&&(this.columnCount+="plus"===n?-this.colValuesLength:this.colValuesLength)},e.prototype.getSortedHeaders=function(e,t){var i="Grand Total"!==e[0].actualText?e[0].valueSort.axis:e[1].valueSort.axis,r=!(this.formatFields&&this.formatFields[i]&&this.formatFields[i].type),n=this.fieldList[i];if(r){if(n&&"number"===n.type&&e.length>0&&"string"==typeof e[0].actualText){for(var a=[],o=[],s=[],l=0;l<e.length;l++)if(isNaN(e[l].actualText.toString().charAt(0)))a.push(e[l]);else{if(""!==e[l].actualText){o.push(e[l]);break}s.push(e[l])}return o.length>0&&(o=this.sortHeaders(i,n,e,n.sort,n.isAlphanumeric)),e}return this.sortHeaders(i,n,e,t,n.type)}return this.sortHeaders(i,n,e,t,n.type)},e.prototype.sortHeaders=function(e,t,i,r,n){var o=!1,s=this.fieldList[e]&&this.fieldList[e].membersOrder?this.fieldList[e].membersOrder.slice():[],l={fieldName:e,sortOrder:r,members:s&&s.length>0?s:Object.keys(t.members),IsOrderChanged:!1};n="datetime"===n||"date"===n||"time"===n?this.formatFields[e]&&["date","dateTime","time"].indexOf(this.formatFields[e].type)>-1?n:"string":n;var d="datetime"===n||"date"===n||"time"===n;if(s&&s.length>0?a.a.applyCustomSort(l,i,n):(a.a.applyHeadersSort(i,r,n),o=!0),o&&this.getHeaderSortInfo){for(var p=[],u=0,h=0;u<i.length;u++){var c=i[u],g=d?c.dateText:c.actualText;"Grand Total"!==c.actualText&&(p[h++]=g)}l.members=p}return this.getHeaderSortInfo&&this.getHeaderSortInfo(l),l.IsOrderChanged&&a.a.applyCustomSort(l,i,n,!0),i},e.prototype.applyValueSorting=function(e,t){var i=!1;if(void 0===e||void 0===t){if(this.valueSortHeaderText=void 0,this.enableValueSorting&&this.valueSortSettings.headerText&&!this.valueSortHeaderText&&""!==this.valueSortSettings.headerText&&this.dataSourceSettings.values.length>0){this.valueSortHeaderText=this.valueSortSettings.headerText;for(var r=this.valueSortHeaderText.split(this.valueSortSettings.headerDelimiter),n=0,a=this.dataSourceSettings.values;n<a.length;n++){var o=a[n],s=o.caption?o.caption:o.name,l=r.indexOf(s);if(l>-1){r.splice(l,1),r.push(s),this.valueSortHeaderText=r.join(this.valueSortSettings.headerDelimiter);break}}}e=this.rMembers,t=this.cMembers,i=!0}if(this.valueSortHeaderText){for(var r=this.valueSortHeaderText.split(this.valueSortSettings.headerDelimiter),d="",p=void 0,u=void 0,h=void 0,c=0;c<this.dataSourceSettings.values.length;c++){if(this.dataSourceSettings.values[c].caption===r[r.length-1]){h=this.dataSourceSettings.values[c].name;break}h=r[r.length-1]}if((1===this.dataSourceSettings.values.length&&0===this.dataSourceSettings.columns.length||this.dataSourceSettings.values.length>1)&&h&&this.fieldList[h]){for(var c=0;c<r.length-1;c++)d=""===d?r[c]:d+this.valueSortSettings.headerDelimiter+r[c];p=this.fieldList[h].index,u=this.fieldList[h].aggregateType}else{if(this.dataSourceSettings.alwaysShowValueHeader&&1!==r.length)for(var c=0;c<r.length-1;c++)d=""===d?r[c]:d+this.valueSortSettings.headerDelimiter+r[c];else d=this.valueSortHeaderText;p=this.fieldList[this.dataSourceSettings.values[0].name].index,u=this.fieldList[this.dataSourceSettings.values[0].name].aggregateType}var g=void 0;0===this.valueAxis?(g=this.getMember(t,d))&&(e=this.sortByValueRow(e,g,this.valueSortSettings.sortOrder,p,u)):(g=this.getMember(e,d))&&(t=this.sortByValueRow(t,g,this.valueSortSettings.sortOrder,p,u)),i&&(this.rMembers=e,this.cMembers=t,this.isPagingOrVirtualizationEnabled&&(this.headerCollection.rowHeaders=this.rMembers,this.headerCollection.columnHeaders=this.cMembers))}return{rMembers:e,cMembers:t}},e.prototype.getMember=function(e,t){for(var i,r=e.length,n=0;n<r;n++){if(e[n].valueSort.levelName===t){i=e[n];break}if(e[n].members.length>0&&(i=this.getMember(e[n].members,t)),i)return i}return i},e.prototype.sortByValueRow=function(e,t,i,r,n){for(var a=[],o=0,s=e;o<s.length;o++){var l=s[o];if("grand sum"===l.type)a.push({header:l});else{this.rawIndexObject={};var d=this.getAggregateValue(l.index,t.indexObject,r,n,!1),p={fieldName:this.fields[r],row:l,column:t,value:d,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:l.hasChild&&l.isDrilled?"subTotal":"grand sum"===l.type?"grandTotal":"value",columnCellType:t.hasChild&&t.isDrilled?"subTotal":"grand sum"===t.type?"grandTotal":"value",aggregateType:n,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(p),d=p.value,this.rawIndexObject={},a.push({header:l,value:d})}}a.sort(function(e,t){return"Descending"===i?(t.value||"grand sum"===t.header.type?t.value:0)-(e.value||"grand sum"===e.header.type?e.value:0):(e.value||"grand sum"===e.header.type?e.value:0)-(t.value||"grand sum"===t.header.type?t.value:0)}),e=a.map(function(e){return e.header});for(var u=0,h=e;u<h.length;u++){var l=h[u];l.members.length>0&&(l.members=this.sortByValueRow(l.members,t,i,r,n))}return e},e.prototype.insertAllMembersCommon=function(){this.rowGrandTotal=this.columnGrandTotal=null;var e=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showRowGrandTotals)||!(this.dataSourceSettings.rows.length>0),t=!(!this.dataSourceSettings.showGrandTotals||!this.dataSourceSettings.showColumnGrandTotals)||!(this.dataSourceSettings.columns.length>0);this.isValueHasAdvancedAggregate?(this.insertAllMember(this.rMembers,this.filterMembers,"","row"),e&&(this.rowCount+=this.rowValuesLength),this.insertAllMember(this.cMembers,this.filterMembers,"","column"),t&&(this.columnCount+=this.colValuesLength)):(e?(this.insertAllMember(this.rMembers,this.filterMembers,"","row"),this.rowCount+=this.rowValuesLength):this.rowGrandTotal=this.insertAllMember([],this.filterMembers,"","row")[0],t?(this.insertAllMember(this.cMembers,this.filterMembers,"","column"),this.columnCount+=this.colValuesLength):this.columnGrandTotal=this.insertAllMember([],this.filterMembers,"","column")[0])},e.prototype.insertSubTotals=function(){for(var e=this.pivotValues.length,t=0;t<e;t++){var n=this.pivotValues[t];if(n)for(var a=void 0,o=1,s=n.length,l=void 0,d=1,p=this.showSubTotalsAtTop?this.reformAxisCount:s,u=this.showSubTotalsAtTop?d:p-1,h=void 0,c=void 0;d<p;){var g=n[u];if(g){a&&(a.colSpan=o,a.colIndex=this.showSubTotalsAtTop?a.colIndex+(o-1):a.colIndex-(o-1)),this.showSubTotalsAtTop&&(h=c=this.getMemberSpanCount(this.pivotValues[t],u)),l={index:g.index,indexObject:g.indexObject},g.index=[],g.indexObject={},a=i.i(r.extend)({},g,null,!0),g.index=l.index,g.indexObject=l.indexObject;for(var m=t+1;this.pivotValues[m]&&!this.pivotValues[m][u];){var f=this.pivotValues[t][u];f.isDrilled||!this.valueAxis&&!this.isLastHeaderHasMeasures&&f.members&&f.members.length>0&&m>this.measureIndex||(f.rowSpan=m-t+1,a.rowSpan=m-t+1);var v="sum"===g.type||"grand sum"===g.type?g.type:"sum";this.pivotValues[m][u]=this.headerContent[m][u]={type:v,formattedText:"sum"===g.type||"grand sum"===g.type?g.formattedText:g.formattedText+" Total",axis:"column",hierarchyName:g.hierarchyName,level:-1,colIndex:u,rowIndex:m,valueSort:g.valueSort},g.valueSort&&g.valueSort[this.valueSortSettings.headerText]&&(this.valueSortSettings.columnIndex=u);var S=!1;"grand sum"===v?(f.rowSpan=m-t+1,a.rowSpan=m-t+1):"sum"!==f.type&&(f.isDrilled||this.valueAxisFields[f.actualText]&&!this.valueAxis&&!this.isLastHeaderHasMeasures&&f.members&&f.members.length>0)?(this.pivotValues[t+1][u].rowSpan=m-t,S=!0):this.pivotValues[m][u].rowSpan=-1,m>t+1&&("sum"===f.type||S)&&(this.pivotValues[m][u].rowSpan=-1),m++}o=1}else n[u]=this.headerContent[t][u]=i.i(r.extend)({},a,null,!0),n[u].index=this.headerContent[t][u].index=l.index,n[u].indexObject=this.headerContent[t][u].indexObject=l.indexObject,o++,this.showSubTotalsAtTop?(c--,n[u].colSpan=c,n[u].colIndex=n[u].colIndex+(o-1)):(n[u].colSpan=o,n[u].colIndex=n[u].colIndex-(o-1));if(1===u&&a&&(this.showSubTotalsAtTop?(a.colSpan=h,a.colIndex=a.colIndex+(o-1)):(a.colSpan=o,a.colIndex=a.colIndex-(o-1))),this.showSubTotalsAtTop&&(n[u+1]||u+1===this.reformAxisCount)){var y=this.pivotValues[t][u-o+1];y.colSpan=h,this.pivotValues[t][u-o+1]=y}u=this.showSubTotalsAtTop?u+1:u-1,d++}}},e.prototype.getMemberSpanCount=function(e,t){for(var i=1,r=t+1;r<this.reformAxisCount&&!e[r];r++)i++;return i},e.prototype.frameDrillObject=function(e){void 0===e&&(e=null),this.fieldDrillCollection={};for(var t=0;t<this.drilledMembers.length;t++){for(var i=this.drilledMembers[t],r=!1,n=1,a=!1,o=this.fieldList[i.name],s=o&&o.expandAll,l=0;l<this.dataSourceSettings.rows.length;l++)if(this.dataSourceSettings.rows[l].name===i.name){var d=this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.measureIndex>-1&&this.measureIndex<=l;n=(d?l+1:l)+1,r=!!d,a=!0;break}if(!a)for(var l=0;l<this.dataSourceSettings.columns.length;l++)if(this.dataSourceSettings.columns[l].name===i.name){var d=!this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.measureIndex>-1&&this.measureIndex<=l;n=(d?l+1:l)+1,r=!!d,a=!0;break}for(var p=0,u=i.items;p<u.length;p++){var h=u[p],c=h.split(i.delimiter);if(n===c.length){var g=i.name+this.valueSortSettings.headerDelimiter+c.join(this.valueSortSettings.headerDelimiter);if(this.fieldDrillCollection[g]=g,r){var m=!1;if(this.isExpandAll||s)for(var f=0,v=this.dataSourceSettings.values;f<v.length;f++){var S=v[f],y=S.caption?S.caption:S.name;if(c[this.measureIndex]=y,!(i.items.indexOf(c.join(i.delimiter))>-1)){m=!1;break}m=!0}((this.isExpandAll||s)&&m||!this.isExpandAll||!s)&&(c=h.split(i.delimiter),c.splice(this.measureIndex,1),e&&e.memberName===h&&(e.memberName=c.join(i.delimiter)),g=i.name+this.valueSortSettings.headerDelimiter+c.join(this.valueSortSettings.headerDelimiter),this.fieldDrillCollection[g]=g)}}}}},e.prototype.getIndexedHeaders=function(e,t,n,a,o,s,l){var d=[],p=0;if(e&&e.length>0){p++;var u=e.length,h={},c=e[n].name,g=e[n],m=this.fieldList[c];if(i.i(r.isNullOrUndefined)(this.reportDataType)){this.reportDataType={};for(var f=0;f<this.dataSourceSettings.rows.length;f++)this.reportDataType[this.dataSourceSettings.rows[f].name]=this.dataSourceSettings.rows[f].dataType;for(var f=0;f<this.dataSourceSettings.columns.length;f++)this.reportDataType[this.dataSourceSettings.columns[f].name]=this.dataSourceSettings.columns[f].dataType;for(var f=0;f<this.dataSourceSettings.values.length;f++)this.reportDataType[this.dataSourceSettings.values[f].name]=this.dataSourceSettings.values[f].dataType}m.type=i.i(r.isNullOrUndefined)(this.reportDataType[m.id])?m.type:this.reportDataType[m.id];var v=!1,S=this.formatFields[c]&&["date","dateTime","time"].indexOf(this.formatFields[c].type)>-1,y=a.length<1&&n>0||g.showNoDataItems,b={};if(y){for(var C=Object.keys(m.members),x=0,w=C.length;x<w;x++)(this.dataSourceSettings.showHeaderWhenEmpty||this.localeObj&&C[x]!==this.localeObj.getConstant("undefined"))&&(b[C[x]]=C[x]);a.length<1&&(v=!0,a.length=C.length)}o===this.dataSourceSettings.valueAxis&&this.measureIndex===n&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(this.isLastHeaderHasMeasures=!1);for(var x=0,w=a.length;x<w;x++){var T={};i.i(r.isNullOrUndefined)(e[n].showSubTotals)||e[n].showSubTotals||(T.showSubTotals=!1),T.hasChild=n<u-1,T.level=n,T.axis=o,T.colSpan=1;var M=v?m.members[Object.keys(b)[0]].ordinal:this.indexMatrix[a[x]][m.index],_=v?Object.keys(b)[0]:t[a[x]][this.fieldKeys[c]];if(_=this.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(_):_,!(i.i(r.isNullOrUndefined)(_)||this.localeObj&&_===this.localeObj.getConstant("undefined"))||this.dataSourceSettings.showHeaderWhenEmpty){if(delete b[_],!y||!this.fieldFilterMem[c]||this.fieldFilterMem[c].memberObj[_]!==_){var D=S||this.formatFields[c]?{actualText:_,formattedText:m.dateMember[M-1].formattedText,dateText:m.dateMember[M-1].actualText}:{formattedText:null===_?this.localeObj?this.localeObj.getConstant("null"):String(_):void 0===_&&this.localeObj?c in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(_),actualText:null===_?this.localeObj?this.localeObj.getConstant("null"):String(_):void 0===_?this.localeObj?c in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(_):_};T.actualText=D.actualText,T.formattedText=D.formattedText,S&&(T.dateText=D.dateText);var O=!y||void 0!==this.filterPosObj[a[x]]&&!v,P=!1;if(y&&m.filter.length>0&&"include"===m.filterType&&(P=!0),h&&h[M]||P&&!(P&&m.filter.indexOf(_.toString())>-1))O&&(h[M].index.push(a[x]),h[M].indexObject[a[x]]=a[x]);else{h[M]={index:[],indexObject:{}},T.index=h[M].index,T.indexObject=h[M].indexObject,O&&(T.index=h[M].index=[a[x]],h[M].indexObject[a[x]]=a[x],T.indexObject=h[M].indexObject),T.ordinal=M,T.valueSort={},T.valueSort.axis=c,0!==n?(T.valueSort.levelName=s+this.valueSortSettings.headerDelimiter+T.formattedText,T.valueSort[s+this.valueSortSettings.headerDelimiter+T.formattedText]=1,T.valueSort.uniqueName=s+this.valueSortSettings.headerDelimiter+(T.actualText?T.actualText:T.formattedText),T.valueSort[s+this.valueSortSettings.headerDelimiter+(T.actualText?T.actualText:T.formattedText)]=1):(T.valueSort[T.formattedText]=1,T.valueSort.levelName=T.formattedText,T.valueSort[T.actualText?T.actualText:T.formattedText]=1,T.valueSort.uniqueName=T.actualText?T.actualText:T.formattedText);var N=T.valueSort.axis+this.valueSortSettings.headerDelimiter+T.valueSort.levelName,E=this.isExpandAll||g&&g.expandAll;T.isDrilled=!(!l||!this.isValueFiltersAvail)||(T.hasChild&&this.fieldDrillCollection[N]?!E||!this.valueAxis&&!this.isLastHeaderHasMeasures&&p>=this.measureIndex:E),T.members=[],d.push(T)}y&&!v&&n>0&&x+1===a.length&&Object.keys(b).length>0&&(v=!0,w=Object.keys(b).length,x=-1)}}else y&&!v&&n>0&&x+1===a.length&&Object.keys(b).length>0&&(w=Object.keys(b).length,v=!0,x=-1)}for(var I=0,F=d.length;I<F;I++){this.frameHeaderObjectsCollection||("row"===o?this.rowCount+=this.rowValuesLength:this.columnCount+=this.colValuesLength);var L=null;if(d[I].valueSort&&d[I].valueSort.levelName&&(L=d[I].valueSort.levelName),s=L||d[I].formattedText,!this.dataSourceSettings.showHeaderWhenEmpty&&u-1>n&&d[I].index&&d[I].index.length>0)if(y&&e[n+1]&&e[n+1].name&&Object.keys(this.fieldList[e[n+1].name].members).length>0)d[I].hasChild=!0;else{for(var A=d[I].index.length,R=0,k=0;k<A;k++){var _=t[d[I].index[k]][this.fieldKeys[e[n+1].name]];(i.i(r.isNullOrUndefined)(_)||this.localeObj&&_===this.localeObj.getConstant("undefined"))&&R++}d[I].hasChild=R!==A}if(u-1>n&&d[I].isDrilled){this.columnCount-=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&g.showSubTotals||"column"!==o?0:this.colValuesLength;var j=d[I].index;d[I].members=this.getIndexedHeaders(e,t,n+1,void 0===j?[]:j,o,s,l),this.frameHeaderObjectsCollection&&(this.headerObjectsCollection[s]=d[I].members)}}if(this.enableSort){if(S)return this.sortHeaders(c,m,d,m.sort,"date");if("number"===m.type.toLowerCase()&&d.length>0&&"string"==typeof d[0].actualText&&d[0].actualText.match(/[a-zA-Z]+/g)){for(var H=[],q=void 0,V=[],B=[],f=0;f<d.length;f++)if(i.i(r.isNullOrUndefined)(d[f].actualText.toString().match(/\d+/)))H.push(d[f]),q||"None"===m.sort||"Out of Range"===d[f].actualText&&(q=d[f],d.splice(f,1));else{if(""!==d[f].actualText){this.fieldList[c].isAlphanumeric=!0,V.push(d[f]);break}B.push(d[f])}return q&&("Ascending"===m.sort?"Grand Total"===d[0].actualText?d.splice(1,0,q):d.splice(0,0,q):"Grand Total"===d[d.length-1].actualText?d.splice(d.length-1,0,q):d.splice(d.length,0,q)),V.length>0&&this.sortHeaders(c,m,d,m.sort,m.isAlphanumeric),d}return this.sortHeaders(c,m,d,m.sort,m.type)}return d}return d},e.prototype.getOrderedIndex=function(e){for(var t={},i=0;i<e.length;i++)"grand sum"!==e[i].type&&(t[e[i].ordinal]=i);return t},e.prototype.insertPosition=function(e,t,i,r,n,a,o){var s=[],l=this.getOrderedIndex(o);if(e){for(var d={},p=e[i].name,u=this.fieldList[p],h=0,c=r.length;h<c;h++){var g={},m=this.indexMatrix[r[h]][u.index],f=o[l[m]],v=t[r[h]][this.fieldKeys[p]];v=null===v?this.localeObj?this.localeObj.getConstant("null"):String(v):v;var S=this.formatFields[p]&&["date","dateTime","time"].indexOf(this.formatFields[p].type)>-1?this.getFormattedValue(v,p):{formattedText:v.toString(),actualText:v.toString()};f&&f.formattedText===S.formattedText&&(d&&d[m]?(d[m].index.push(r[h]),d[m].indexObject[r[h]]=r[h]):(d[m]={index:[],indexObject:{}},f.index=d[m].index=[r[h]],d[m].indexObject[r[h]]=r[h],f.indexObject=d[m].indexObject,f.valueSort={},f.valueSort.axis=p,0!==i?(f.valueSort.levelName=a+this.valueSortSettings.headerDelimiter+f.formattedText,f.valueSort[a+this.valueSortSettings.headerDelimiter+f.formattedText]=1,f.valueSort.uniqueName=a+this.valueSortSettings.headerDelimiter+(f.actualText?f.actualText:f.formattedText),f.valueSort[a+this.valueSortSettings.headerDelimiter+(f.actualText?f.actualText:f.formattedText)]=1):(f.valueSort[f.formattedText]=1,f.valueSort.levelName=f.formattedText,f.valueSort[f.actualText?f.actualText:f.formattedText]=1,f.valueSort.uniqueName=f.actualText?f.actualText:f.formattedText),g.members=[],s.push(g)))}for(var y=o.length-s.length;y>0;)s.push({members:[]}),y--;for(var b=0,C=s.length;b<C;b++)if(o[b].members.length>0){var x=null;o[b].valueSort&&o[b].valueSort.levelName&&(x=o[b].valueSort.levelName),a=x||o[b].formattedText,s[b].members=this.insertPosition(e,t,i+1,o[b].index,n,a,o[b].members)}return s}return s},e.prototype.insertTotalPosition=function(e){var t=e[e.length-1];if(t&&"grand sum"===t.type){t.index=this.filterMembers,t.indexObject={};for(var i=0,r=this.filterMembers.length;i<r;i++)t.indexObject[this.filterMembers[i]]=this.filterMembers[i]}return e},e.prototype.calculatePagingValues=function(){if(this.isPagingOrVirtualizationEnabled){1===this.valueAxis?this.rowValuesLength=this.dataSourceSettings.values.length:this.colValuesLength=this.dataSourceSettings.values.length,this.columnPageCount=Math.ceil(this.columnCount/this.pageSettings.columnPageSize),this.rowPageCount=Math.ceil(this.rowCount/this.pageSettings.rowPageSize),this.pageSettings.currentColumnPage=this.pageSettings.currentColumnPage>=this.columnPageCount?this.columnPageCount:this.pageSettings.currentColumnPage,this.pageSettings.currentRowPage=this.pageSettings.currentRowPage>=this.rowPageCount?this.rowPageCount:this.pageSettings.currentRowPage;var e=this.enablePaging?1:3;this.memberCnt=this.enablePaging?0:-this.rowValuesLength,this.rowStartPos=(this.pageSettings.currentRowPage*this.pageSettings.rowPageSize-this.pageSettings.rowPageSize)*(this.enablePaging?1:this.rowValuesLength)+(this.enablePaging?1:0);var t=this.enablePaging?this.rowStartPos:this.rowStartPos+this.pageSettings.rowPageSize*e*this.rowValuesLength>this.rowCount?this.rowCount-this.pageSettings.rowPageSize*e*this.rowValuesLength:this.rowStartPos;t<0&&(t=this.rowStartPos=0,this.pageSettings.currentRowPage=1),this.rowFirstLvl=(this.rowStartPos-t)%this.pageSettings.rowPageSize,this.rowStartPos=t,this.endPos=this.rowStartPos+this.pageSettings.rowPageSize*e*(this.enablePaging?1:this.rowValuesLength)-(this.enablePaging?1:0),this.endPos=this.endPos>this.rowCount+1?this.rowCount+1:this.endPos,this.rMembers=this.performSlicing(this.rMembers,[],this.rowStartPos,"row"),this.memberCnt=this.enablePaging?0:-this.colValuesLength,this.pageInLimit=!1,this.colHdrBufferCalculated=!1,this.colStartPos=(this.pageSettings.currentColumnPage*this.pageSettings.columnPageSize-this.pageSettings.columnPageSize)*(this.enablePaging?1:this.colValuesLength)+(this.enablePaging?1:0),t=this.enablePaging?this.colStartPos:this.colStartPos+this.pageSettings.columnPageSize*e*this.colValuesLength>this.columnCount?this.columnCount-this.pageSettings.columnPageSize*e*this.colValuesLength:this.colStartPos,t<0&&(t=this.colStartPos=0,this.pageSettings.currentColumnPage=1),this.colFirstLvl=(this.colStartPos-t)%this.pageSettings.columnPageSize,this.colStartPos=t,this.endPos=this.colStartPos+this.pageSettings.columnPageSize*e*(this.enablePaging?1:this.colValuesLength)-(this.enablePaging?1:0),this.endPos=this.endPos>this.columnCount+1?this.columnCount+1:this.endPos,this.cMembers=this.performSlicing(this.cMembers,[],this.colStartPos,"column"),this.memberCnt=-1,this.pageInLimit=!1,this.isValueHasAdvancedAggregate?("grand sum"!==this.rMembers[this.rMembers.length-1].type&&"grand sum"===this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1].type&&(this.rMembers.push(this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1]),this.removeRowGrandTotal=!0),"grand sum"!==this.cMembers[this.cMembers.length-1].type&&"grand sum"===this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1].type&&(this.cMembers.push(this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1]),this.removeColumnGrandTotal=!0)):(this.rowGrandTotal=this.rowGrandTotal?this.rowGrandTotal:this.headerCollection.rowHeaders[this.headerCollection.rowHeaders.length-1],this.columnGrandTotal=this.columnGrandTotal?this.columnGrandTotal:this.headerCollection.columnHeaders[this.headerCollection.columnHeaders.length-1])}},e.prototype.performSlicing=function(e,t,i,r){for(var n=0;e[n]&&!(this.enablePaging&&this.endPos<=this.memberCnt&&0!==n);){if(this.memberCnt+=e[n].level<=this.measureIndex?"column"===r?this.colValuesLength:this.rowValuesLength:1,i<=this.memberCnt&&this.endPos>=this.memberCnt&&!this.pageInLimit&&("column"===r?this.colFirstLvl=this.colFirstLvl+e[n].level:this.rowFirstLvl=this.rowFirstLvl+e[n].level,this.isParentLevelAdded="column"===r?!(this.colFirstLvl>0):!(this.rowFirstLvl>0),this.pageInLimit=!0),this.pageInLimit&&!this.enablePaging&&this.endPos<=this.memberCnt){if("column"!==r)break;if(0===e[n].members.length){if(this.colHdrBufferCalculated)break;this.colHdrBufferCalculated=!0,this.endPos+=e[n].level*this.colValuesLength}else if(this.colHdrBufferCalculated)break}if(t.push(e[n].members.length>0?this.removeChildMembers(e[n]):e[n]),e[n].members.length>0&&("column"===r?this.memberCnt-=this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals&&this.columnKeys[e[n].valueSort.axis].showSubTotals?0:this.colValuesLength:this.showSubTotalsAtBottom&&this.memberCnt++,t[t.length-1].members=this.performSlicing(e[n].members,[],i,r)),!this.isParentLevelAdded&&this.enablePaging&&(this.memberCnt+=(t[t.length-1].level<=this.measureIndex?"column"===r?this.colValuesLength:this.rowValuesLength:1)*t[t.length-1].level,this.isParentLevelAdded=!0),this.pageInLimit||t.pop(),0===e[n].level&&this.pageInLimit&&this.endPos<=this.memberCnt)break;n++}return t},e.prototype.removeChildMembers=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],"members"===t[i]&&(r.members=[]),i++;return r},e.prototype.insertAllMember=function(e,t,i,r){var n=e.length;i=" Total";var a={hasChild:!1,index:t,level:0,axis:r,isDrilled:!1,indexObject:{},members:[],actualText:"Grand"+i,formattedText:"Grand"+i,ordinal:n,type:"grand sum",valueSort:{}};a.valueSort[a.formattedText]=1,a.valueSort.levelName=a.formattedText,a.valueSort[a.actualText]=1,a.valueSort.uniqueName=a.actualText;for(var o=0,s=t.length;o<s;o++)a.indexObject[t[o]]=t[o];return"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals?e.unshift(a):e.push(a),e},e.prototype.getTableData=function(e,t,n,o,s,l,d,p,u,h){for(var c=e.length,g=0;g<c;g++){var m=!this.valueAxis&&!this.isLastHeaderHasMeasures&&s.length<this.dataSourceSettings.columns.length+1?this.dataSourceSettings.columns.length+1:s.length,f=e[g];t[m]=f;var v=m-Number(Object.keys(t)[0]),S=!t[m].members.length;f.colIndex=0,f.rowIndex=m;var y=!1,b=this.dataSourceSettings.valueSortSettings.headerDelimiter;if(this.valueAxis&&0===this.dataSourceSettings.rows.length&&this.dataSourceSettings.values.length>1&&(this.rowIndex=i.i(r.isNullOrUndefined)(this.rowIndex)&&!S&&0===this.dataSourceSettings.rows.length?f.index:this.rowIndex,y=this.valueAxis&&0===this.dataSourceSettings.rows.length&&f.valueSort.levelName&&0!==f.valueSort.levelName.toString().indexOf("Grand Total"+b),this.valueAxis&&0===this.dataSourceSettings.rows.length&&0===f.valueSort.levelName.toString().indexOf("Grand Total"+b)&&(f.index=this.rowIndex)),y)S||this.recursiveRowData(e,t,n,m,s,l,S,g,0,d,p,u);else{var C=!1;if(this.showSubTotalsAtBottom&&t[o]&&t[o].hasChild)for(var x=void 0,w=0,T=t[o].members;w<T.length;w++)if(x=T[w],"value"===x.type){C=!0;break}if(C&&!t[m].isSum&&t[m].members&&0===t[m].members.length)continue;if(s[m]?s[m][0]=this.valueContent[v][0]=a.a.frameHeaderWithKeys(f):(s[m]=[],this.valueContent[v]={},s[m][0]=this.valueContent[v][0]=a.a.frameHeaderWithKeys(f)),this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)){var M=m,_=v,D=m,O=!1;if(((0!==d||0!==this.measureIndex)&&!S||S)&&"value"===f.type&&!f.valueSort.axis||d>this.measureIndex&&"row"===f.axis&&f.valueSort.axis)for(var P=0,N=!1,E=f.valueSort.uniqueName?f.valueSort.uniqueName.toString().split(this.valueSortSettings.headerDelimiter):[],I=0,F=1,L=n.length;I<L;++I){if(!N)for(P=0;P<l;P++)if(E.indexOf(this.dataSourceSettings.values[P].name)>-1){N=!0,O=!0;break}if(d>this.measureIndex&&"row"===f.axis&&f.valueSort.axis)this.updateRowData(e,n,m,s,P,g,I,F,v,p,u);else{if(!t[o]){O=!1;break}var A=this.showSubTotalsAtBottom&&h?h:o;this.updateRowData(t,n,m,s,P,A,I,F,v,p,u)}F=s[m].length}if(!O)for(var I=0,F=1,L=n.length;I<L;++I)F=s[m].length,s[M][F]=this.valueContent[_][F]={axis:"value",actualText:"",colSpan:1,colIndex:F,formattedText:"",hasChild:!1};this.recursiveRowData(e,t,n,D,s,l,S,g,l,d,p,u)}else{for(var I=0,F=1,L=n.length;I<L;++I)for(var R=n[I].valueSort.uniqueName?n[I].valueSort.uniqueName.toString().split(this.valueSortSettings.headerDelimiter):[],P=0;P<l;P++)this.valueAxis||this.isLastHeaderHasMeasures?(this.updateRowData(e,n,m,s,P,g,I,F,v,p,u),F=s[m].length):R.indexOf(this.dataSourceSettings.values[P].name)>-1&&(this.updateRowData(e,n,m,s,P,g,I,F,v,p,u),F=s[m].length);this.recursiveRowData(e,t,n,m,s,l,S,g,0,d,p,u)}}}},e.prototype.insertRowSubTotals=function(e,t,i,r,n,o,s,l){var d=!!e[i].type&&("value"===e[i].type&&e[i].valueSort.levelName!==e[i].actualText);if(e[i].hasChild&&e[i].isDrilled&&e[i].members.length>0){var p=[],u=a.a.frameHeaderWithKeys(e[i]);if("value"===e[i].members[0].type){for(var h=0,c=[],g=1,m=0,f=u.members;m<f.length;m++){var v=f[m];"value"===v.type&&(c[c.length]=v)}for(;h<c.length;){var S=a.a.frameHeaderWithKeys(c[h]),y=void 0;for(g;g<e.length;g++)if(e[g]&&e[g].valueSort.levelName===S.valueSort.levelName){y=e.indexOf(e[g]);break}y>-1&&(p[p.length]=y),S.formattedText=u.formattedText+" "+S.formattedText,S.isSum=!0,S.members=[],this.getTableData([S],e,t,i,r,n,o,s,l),h++}}else{u.formattedText=u.formattedText+" Total",u.members=[],u.isDrilled=!1,u.hasChild=!1,u.isSum=!0,u.type="sum";var b=d?this.getParentIndex(e,u):0;this.getTableData([u],e,t,i,r,n,o,s,l,b),p=[i]}for(var y=0;y<p.length;y++){var C=r[p[y]];C=C.map(function(e){return e.formattedText=0===e.colIndex?e.formattedText:"",e}),r[p[y]]=C}}},e.prototype.getParentIndex=function(e,t){for(var i=0,r=e.length-1;r>0;r--)if(t.level===e[r].level&&e[r].index){i=r;break}return i},e.prototype.getAggregatedHeaders=function(e,t,i,r,n){this.selectedHeaders={selectedHeader:[],values:[]};for(var a=n.length,o=0;o<a;o++)switch(n[o].type){case"DifferenceFrom":case"PercentageOfDifferenceFrom":var s=void 0,l=void 0;this.selectedHeaders.values.push(n[o].name),n[o].baseField&&n[o].baseItem?(s=n[o].baseField,l=n[o].baseItem):this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&t.length>0?(s=t[0].name,l=Object.keys(this.fieldList[t[0].name].members)[0]):e.length>0&&(s=e[0].name,l=Object.keys(this.fieldList[e[0].name].members)[0]);for(var d=!1,p=0,u=e;p<u.length;p++){if(u[p].name===s){this.getAggregatedHeaderData(i,n[o].name,l,!1,"row",n[o].type,this.selectedHeaders.selectedHeader,o),d=!0;break}}if(!d)for(var h=0,c=t;h<c.length;h++){var g=c[h];if(g.name===s){this.getAggregatedHeaderData(r,n[o].name,l,!1,"column",n[o].type,this.selectedHeaders.selectedHeader,o);break}}break;case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":this.selectedHeaders.values.push(n[o].name),this.getAggregatedHeaderData("PercentageOfParentRowTotal"===n[o].type?i:r,n[o].name,void 0,!1,"PercentageOfParentRowTotal"===n[o].type?"row":"column",n[o].type,this.selectedHeaders.selectedHeader,o);break;case"RunningTotals":this.selectedHeaders.values.push(n[o].name),this.getAggregatedHeaderData(this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)?r:i,n[o].name,void 0,!1,this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)?"column":"row",n[o].type,this.selectedHeaders.selectedHeader,o);break;case"PercentageOfParentTotal":var s=void 0;this.selectedHeaders.values.push(n[o].name),n[o].baseField?s=n[o].baseField:this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&t.length>0?s=t[0].name:e.length>0&&(s=e[0].name);for(var d=!1,m=e.length,f=0;f<m;f++)if(e[f].name===s){var v=f>=this.measureIndex?f+1:f;this.getAggregatedHeaderData(i,n[o].name,void 0,!1,"row",n[o].type,this.selectedHeaders.selectedHeader,o,v),d=!0;break}if(!d)for(var m=t.length,f=0;f<m;f++)if(t[f].name===s){var v=f;this.valueAxis||this.isLastHeaderHasMeasures||(v=f>=this.measureIndex?f+1:f),this.getAggregatedHeaderData(r,n[o].name,void 0,!1,"column",n[o].type,this.selectedHeaders.selectedHeader,o,v);break}}},e.prototype.getAggregatedHeaderData=function(e,t,n,a,o,s,l,d,p){for(var u=0,h=e;u<h.length;u++){var c=h[u];switch(s){case"DifferenceFrom":case"PercentageOfDifferenceFrom":if(-1!==c.valueSort.levelName.toString().split(this.valueSortSettings.headerDelimiter).indexOf(n)){var g=[];if(!a&&"row"===o)for(var m=0,f=e;m<f.length;m++){var v=f[m];v.level>=c.level&&g.push(v)}if(l.push(this.updateSelectedHeaders(n,c.level,o,a,t,s,c.valueSort.levelName,a?[c]:"column"===o?e:g,d+1)),c.members.length>0){var S=!1,y=[];if("row"===o)for(var b=0,C=c.members;b<C.length;b++){var x=C[b];if("value"!==x.type||0!==x.members.length){y.push(x),S=!1;break}S=!0}(!S&&y.length>0||"column"===o)&&this.getAggregatedHeaderData("column"===o?c.members:y,t,n,!0,o,s,l[l.length-1].childMembers,d)}}else c.members.length>0&&this.getAggregatedHeaderData(c.members,t,n,!1,o,s,l,d);break;case"RunningTotals":case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":"grand sum"===c.type?l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,e,d+1)):c.members.length>0&&(l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,c.members,d+1)),this.getAggregatedHeaderData(c.members,t,void 0,!1,o,s,l,d));break;case"PercentageOfParentTotal":if("grand sum"!==c.type)if(c.valueSort.levelName.split(this.valueSortSettings.headerDelimiter).length-1===p)if(c.members.length>0){if(a)for(var w=l[l.length-1].aggregateHeaders,T=0,M=c.members;T<M.length;T++){var x=M[T];w.push(i.i(r.extend)({},x,null,!0))}else{var _=i.i(r.extend)([],c.members,null,!0);l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,_,d+1));var w=l[l.length-1].aggregateHeaders;w.push(i.i(r.extend)({},c,null,!0))}this.getAggregatedHeaderData(c.members,t,void 0,!0,o,s,l,d,p+1)}else a||l.push(this.updateSelectedHeaders(void 0,c.level,o,!1,t,s,c.valueSort.levelName,[c],d+1));else c.members.length>0&&this.getAggregatedHeaderData(c.members,t,void 0,!1,o,s,l,d,p)}}},e.prototype.updateSelectedHeaders=function(e,t,n,a,o,s,l,d,p){return{name:e,level:t,axis:n,isChild:a,value:o,type:s,uniqueName:l,aggregateHeaders:i.i(r.extend)([],d,null,!0),childMembers:[],valueCount:p}},e.prototype.applyAdvancedAggregate=function(e,t,i){if(this.aggregatedValueMatrix=[],this.selectedHeaders.values.length>0){for(var r={},n=[],a=[],o=!1,s=i.length,l=0;l<s;l++)if(void 0!==i[l]&&void 0!==i[l][0]){if(!o)for(var d=i[l].length,p=0;p<d;p++){var u=i[l][p].actualText;"value"===i[l][p].axis&&-1!==this.selectedHeaders.values.indexOf(u)&&(n.push(p),o=!0)}var h=this.showSubTotalsAtBottom&&i[l][0].isDrilled&&i[l][0].hasChild;if(!h&&n.length>0&&"value"===i[l][n[0]].axis&&-1!==this.selectedHeaders.values.indexOf(i[l][n[0]].actualText)){a.push(l);for(var c=0,g=n;c<g.length;c++){var m=g[c];r[l+","+m]=[l,m]}}}this.updateAggregates(e,t,i,this.selectedHeaders.selectedHeader,n,a,r);for(var f=Object.keys(r),v=0,S=f;v<S.length;v++){var m=S[v];i[r[m][0]][r[m][1]].formattedText=this.selectedHeaders.selectedHeader.length>0?this.emptyCellTextContent:"#N/A",this.aggregatedValueMatrix[r[m][0]]||(this.aggregatedValueMatrix[r[m][0]]=[]),this.aggregatedValueMatrix[r[m][0]][r[m][1]]=0}this.updatePivotValues(!0)}},e.prototype.updateAggregates=function(e,t,n,a,o,s,l){for(var d=0,p=a;d<p.length;d++){var u=p[d],h=u.aggregateHeaders,c=u.value,g=u.type,m=u.uniqueName,f=u.axis,v="row"===f,S=void 0,y=[],b=[],C=[],x=[],w=[],T=[];if(-1!==["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal","RunningTotals"].indexOf(u.type))if(v){if("RunningTotals"!==u.type)for(var M=0,_=s;M<_.length;M++){var D=_[M];if(void 0!==e[D]&&e[D].valueSort[m]){S=e[D],w=0===this.valueAxis||this.valueAxis&&n[D]&&n[D][1]&&n[D][1].actualText===c?n[D]:[];break}}}else{for(var O=n.length,P=0;P<O&&(void 0!==n[P]&&void 0===n[P][0]);P++)C.push(n[P]);for(var N=C.length;N--;){var E=C[N][o[0]],I=E.actualText;-1===this.selectedHeaders.values.indexOf(I)&&(b=C[N],N=0)}if("RunningTotals"!==u.type){for(var F=b.length,L=0;L<F;L++){var A=!1;if(void 0!==b[L]&&b[L].valueSort[m]){S=b[L];for(var R=n.length,P=0;P<R;P++){var E=n[P];void 0!==E&&void 0!==E[0]&&"value"===E[L].axis&&-1!==this.selectedHeaders.values.indexOf(E[L].actualText)&&(A=!0,T[P]=E[L],x.push(P))}if(A)break}}if(0===T.length&&0===x.length)for(var F=b.length,L=0;L<F;L++){var A=!1;if(void 0!==b[L]&&0===b[L].valueSort.levelName.indexOf(m)){S=b[L];for(var k=n.length,j=0;j<k;j++){var E=n[j];void 0!==E&&void 0!==E[0]&&"value"===E[L].axis&&-1!==this.selectedHeaders.values.indexOf(E[L].actualText)&&(A=!0,x.push(j))}if(A)break}}}}switch(u.type){case"DifferenceFrom":case"PercentageOfDifferenceFrom":var H=u.isChild;if(v){if(H)for(var q=m.split(this.valueSortSettings.headerDelimiter),V=0,B=s;V<B.length;V++){var U=B[V];if(void 0!==e[U]){var G=e[U].valueSort.levelName.split(this.valueSortSettings.headerDelimiter);if(-1!==G.indexOf(q[q.length-1])&&S&&e[U].level===S.level)for(var z=0,W=o;z<W.length;z++){var Q=W[z],Y=n[U][Q];"value"===Y.axis&&Y.actualText===c&&(y.push([U,Q]),l[U+","+Q]&&delete l[U+","+Q])}}}else for(var K=0,X=h;K<X.length;K++)for(var J=X[K],Z=0,$=s;Z<$.length;Z++){var D=$[Z];if(void 0!==e[D]&&e[D].valueSort[J.valueSort.levelName]&&e[D].level===S.level&&"grand sum"!==e[D].type)for(var ee=0,te=o;ee<te.length;ee++){var Q=te[ee],Y=n[D][Q];"value"===Y.axis&&Y.actualText===c&&(y.push([D,Q]),l[D+","+Q]&&delete l[D+","+Q])}}for(var ie=0,re=y;ie<re.length;ie++){var Q=re[ie],Y=n[Q[0]][Q[1]],ne=i.i(r.isNullOrUndefined)(w[Q[1]].actualValue)?0:w[Q[1]].actualValue,ae=(i.i(r.isNullOrUndefined)(Y.actualValue)?0:Y.actualValue)-ne;ae=isNaN(ae)?0:0===Y.value&&0===w[Q[1]].value?0:ae,this.aggregatedValueMatrix[Q[0]]||(this.aggregatedValueMatrix[Q[0]]=[]),"DifferenceFrom"===g?(this.aggregatedValueMatrix[Q[0]][Q[1]]=ae,Y.formattedText=0===ae?this.emptyCellTextContent:this.getFormattedValue(ae,c).formattedText):(ae=0===ne?0:ae/ne,this.aggregatedValueMatrix[Q[0]][Q[1]]=ae,Y.formattedText=Y.showSubTotals?0!==ae?this.globalize.formatNumber(ae,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent:Y.formattedText)}}else{if(H)for(var q=m.split(this.valueSortSettings.headerDelimiter),F=b.length,oe=0;oe<F;oe++){var A=!1;if(void 0!==b[oe]){var G=b[oe].valueSort.levelName.split(this.valueSortSettings.headerDelimiter);if(-1!==G.indexOf(q[q.length-1])&&b[oe].level===S.level){for(var se=0,le=x;se<le.length;se++){var Q=le[se],Y=n[Q][oe];"value"===Y.axis&&Y.actualText===c&&(A=!0,y.push([Q,oe]),l[Q+","+oe]&&delete l[Q+","+oe])}if(A)break}}}else for(var de=0,pe=h;de<pe.length;de++)for(var J=pe[de],F=b.length,L=0;L<F;L++){var A=!1;if(void 0!==b[L]&&b[L].valueSort[J.valueSort.levelName]&&S&&b[L].level===S.level&&"grand sum"!==b[L].type){for(var ue=0,he=x;ue<he.length;ue++){var Q=he[ue],Y=n[Q][L];"value"===Y.axis&&Y.actualText===c&&(A=!0,y.push([Q,L]),l[Q+","+L]&&delete l[Q+","+L])}if(A)break}}var ce=void 0;0===T.length&&(ce=this.getSelectedColumn(u.uniqueName,t));for(var ge=0,me=y;ge<me.length;ge++){var Q=me[ge],Y=n[Q[0]][Q[1]],fe=0;if(0===T.length){var ve=this.getSelectedRow(Y.rowHeaders,e);fe=this.getAggregateValue(ve.index,ce.indexObject,this.fieldList[c].index,u.type,!1)}else fe=T[Q[0]].value;var ae=Y.value-fe;ae=isNaN(ae)?0:ae,this.aggregatedValueMatrix[Q[0]]||(this.aggregatedValueMatrix[Q[0]]=[]),"DifferenceFrom"===g?(Y.formattedText=0===ae?this.emptyCellTextContent:this.getFormattedValue(ae,c).formattedText,this.aggregatedValueMatrix[Q[0]][Q[1]]=ae):(ae=0===T[Q[0]].value?0:ae/T[Q[0]].value,Y.formattedText=0!==ae?this.globalize.formatNumber(ae,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent,this.aggregatedValueMatrix[Q[0]][Q[1]]=ae)}}u.childMembers.length>0&&this.updateAggregates(e,t,n,u.childMembers,o,s,l);break;case"PercentageOfParentRowTotal":case"PercentageOfParentColumnTotal":case"PercentageOfParentTotal":if(v){for(var Se=0,ye=h;Se<ye.length;Se++)for(var J=ye[Se],be=0,Ce=s;be<Ce.length;be++){var P=Ce[be];if(void 0!==e[P]&&e[P].valueSort[J.valueSort.levelName]&&e[P].level===J.level)for(var xe=0,we=o;xe<we.length;xe++){var Q=we[xe],Y=n[P][Q];"value"===Y.axis&&Y.actualText===c&&(y.push([P,Q]),l[P+","+Q]&&delete l[P+","+Q])}}for(var Te=0,Me=y;Te<Me.length;Te++){var P=Me[Te],Y=n[P[0]][P[1]],_e=0;_e=0===w.length&&S?this.getAggregateValue(S.index,t[P[1]-1].indexObject,this.fieldList[c].index,u.type,!1):w[P[1]]?w[P[1]].actualValue:0;var ae=Y.value/_e;ae=isNaN(ae)?0:ae,Y.formattedText=Y.showSubTotals?0!==ae?this.globalize.formatNumber(ae,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent:Y.formattedText,this.aggregatedValueMatrix[P[0]]||(this.aggregatedValueMatrix[P[0]]=[]),this.aggregatedValueMatrix[P[0]][P[1]]=ae}}else{for(var De=0,Oe=h;De<Oe.length;De++)for(var J=Oe[De],F=b.length,j=0;j<F;j++){var A=!1;if(void 0!==b[j]&&b[j].valueSort[J.valueSort.levelName]){for(var Pe=0,Ne=x;Pe<Ne.length;Pe++){var Q=Ne[Pe],Ee=this.showSubTotalsAtBottom&&n[Q][0].isDrilled&&n[Q][0].hasChild;if(!Ee){var Y=n[Q][j];"value"===Y.axis&&Y.actualText===c&&(A=!0,y.push([Q,j]),l[Q+","+j]&&delete l[Q+","+j])}}if(A)break}}var Ie=void 0;0===T.length&&(Ie=this.getSelectedColumn(u.uniqueName,t));for(var Fe=0,Le=y;Fe<Le.length;Fe++){var P=Le[Fe],Y=n[P[0]][P[1]],Ae=0;if(0===T.length){var ve=this.getSelectedRow(Y.rowHeaders,e);Ae=this.getAggregateValue(ve.index,Ie.indexObject,this.fieldList[c].index,u.type,!1)}else Ae=T[P[0]].value;var Re=Y.value/Ae;Re=isNaN(Re)?0:Re,Y.formattedText=0!==Re?this.globalize.formatNumber(Re,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,Y.actualText)}):this.emptyCellTextContent,this.aggregatedValueMatrix[P[0]]||(this.aggregatedValueMatrix[P[0]]=[]),this.aggregatedValueMatrix[P[0]][P[1]]=Re}}break;case"RunningTotals":if(v)for(var ke=0,je=o;ke<je.length;ke++)for(var Q=je[ke],ae=0,He=0,qe=h;He<qe.length;He++)for(var J=qe[He],Ve=0,Be=s;Ve<Be.length;Ve++){var U=Be[Ve];if(void 0!==e[U]){var Y=n[U][Q];if(void 0!==e[U]&&e[U].valueSort[J.valueSort.levelName]&&e[U].level===J.level&&"value"===Y.axis&&Y.actualText===c){"grand sum"!==e[U].type&&(ae+=Y.showSubTotals||!i.i(r.isNullOrUndefined)(Y.actualValue)&&isNaN(Y.actualValue)?i.i(r.isNullOrUndefined)(Y.value)||isNaN(Y.value)?null:Y.value:Y.actualValue,Y.formattedText=Y.showSubTotals?0===ae&&Y.actualValue&&0!==Y.actualValue?"":this.getFormattedValue(ae,c).formattedText:Y.formattedText,this.aggregatedValueMatrix[U]||(this.aggregatedValueMatrix[U]=[]),this.aggregatedValueMatrix[U][Q]=ae),l[U+","+Q]&&delete l[U+","+Q];break}}}else for(var Ue=0,Ge=s;Ue<Ge.length;Ue++){var D=Ge[Ue];if(void 0!==n[D])for(var ae=0,ze=0,We=h;ze<We.length;ze++)for(var J=We[ze],Qe=e[D].hasChild&&e[D].isDrilled&&(!i.i(r.isNullOrUndefined)(e[D].showSubTotals)&&!e[D].showSubTotals||!this.dataSourceSettings.showSubTotals||!this.dataSourceSettings.showRowSubTotals),F=b.length,L=0;L<F;L++){var Y=n[D][L];if(void 0!==b[L]&&b[L].valueSort[J.valueSort.levelName]&&"value"===Y.axis&&Y.actualText===c){"grand sum"!==b[L].type&&(i.i(r.isNullOrUndefined)(Y.value)||(ae+=Y.value),Y.formattedText=Qe?"":this.getFormattedValue(ae,c).formattedText,this.aggregatedValueMatrix[D]||(this.aggregatedValueMatrix[D]=[]),this.aggregatedValueMatrix[D][L]=ae),l[D+","+L]&&delete l[D+","+L];break}}}}}},e.prototype.getSelectedColumn=function(e,t){for(var i={axis:"column",index:[],indexObject:{}},r=0,n=t;r<n.length;r++){var a=n[r];a&&a.valueSort&&0===a.valueSort.levelName.indexOf(e)&&(i.index=i.index.concat(a.index).sort(function(e,t){return e-t}),i.indexObject=o({},i.indexObject,a.indexObject))}return i},e.prototype.getSelectedRow=function(e,t){for(var i=0,r=t;i<r.length;i++){var n=r[i];if(n){if(n.valueSort&&n.valueSort.levelName===e)return n;if(""===e&&"grand sum"===n.type)return n}}return null},e.prototype.recursiveRowData=function(e,t,n,a,o,s,l,d,p,u,h,c){l||this.getTableData(t[a].members,t,n,a,o,s,u+1,h,c),this.showSubTotalsAtBottom&&(i.i(r.isNullOrUndefined)(e[d].showSubTotals)||e[d].showSubTotals)&&this.insertRowSubTotals(t,n,a,o,s,u,h,c),this.isPagingOrVirtualizationEnabled||(t[a].members=[])},e.prototype.updateRowData=function(e,t,n,a,o,s,l,d,p,u,h){var c=this.fieldList[this.dataSourceSettings.values[o].name].index,g=this.fieldList[this.dataSourceSettings.values[o].name].aggregateType,m=this.dataSourceSettings.values[o].name,f=[],v={},S=0,y=0;switch(g){case"Index":f=[[e[s],t[l]],[e[s],h],[u,t[l]],[u,h]];for(var b=["cVal","rTotalVal","cTotalVal","gTotalVal"],C=0,x=0,w=f;x<w.length;x++){var T=w[x];v[b[C]]=this.getAggregateValue(T[0].index,T[1].indexObject,c,g,0!==C),C++}var M=v.cVal*v.gTotalVal/(v.rTotalVal*v.cTotalVal);S=!(e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled)||(i.i(r.isNullOrUndefined)(e[s].showSubTotals)||e[s].showSubTotals)&&this.dataSourceSettings.showRowSubTotals&&this.dataSourceSettings.showSubTotals?i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M:void 0,y=i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M;break;case"PercentageOfGrandTotal":case"PercentageOfColumnTotal":case"PercentageOfRowTotal":f=[[e[s],t[l]]],f.push("PercentageOfGrandTotal"===g?[u,h]:"PercentageOfColumnTotal"===g?[u,t[l]]:[e[s],h]);for(var b=["cVal","gTotalVal"],C=0,_=0,D=f;_<D.length;_++){var T=D[_];v[b[C]]=this.getAggregateValue(T[0].index,T[1].indexObject,c,g,0!==C),C++}var M=v.cVal/v.gTotalVal;S=!(e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled)||(i.i(r.isNullOrUndefined)(e[s].showSubTotals)||e[s].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals?i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M:void 0,y=i.i(r.isNullOrUndefined)(v.cVal)?v.cVal:isNaN(M)?0:M;break;default:var M=this.getAggregateValue(e[s].index,t[l].indexObject,c,g,!1);S=!(e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled)||(i.i(r.isNullOrUndefined)(e[s].showSubTotals)||e[s].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals?M:void 0,y=M}var O={fieldName:this.dataSourceSettings.values[o].name,row:e[s],column:t[l],value:S,cellSets:this.getValueCellInfo?this.getCellSet(this.rawIndexObject):[],rowCellType:e[s].hasChild&&e[s].isDrilled?"subTotal":"grand sum"===e[s].type?"grandTotal":"value",columnCellType:t[l].hasChild&&t[l].isDrilled?"subTotal":"grand sum"===t[l].type?"grandTotal":"value",aggregateType:g,skipFormatting:!1};this.getValueCellInfo&&this.getValueCellInfo(O),S=O.value;var P=e[s].hasChild||t[l].hasChild||"grand sum"===e[s].type||"grand sum"===t[l].type||this.showSubTotalsAtBottom&&e[s].isSum,N="grand sum"===e[s].type||"grand sum"===t[l].type,E=e[s].members.length>0&&e[s].hasChild&&e[s].isDrilled&&(!i.i(r.isNullOrUndefined)(e[s].showSubTotals)&&!e[s].showSubTotals||!this.dataSourceSettings.showSubTotals||!this.dataSourceSettings.showRowSubTotals),I=E?"":void 0===S?this.emptyCellTextContent:"Count"===g||"DistinctCount"===g?S.toLocaleString():this.getFormattedValue(S,m).formattedText;!isNaN(S)&&!i.i(r.isNullOrUndefined)(S)&&["PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal"].indexOf(g)>=0?I=this.globalize.formatNumber(S,{format:"P",maximumFractionDigits:this.getPercentFormat(this.formatFields,O.fieldName)}):E||!isNaN(S)||i.i(r.isNullOrUndefined)(S)||-1===["PopulationStDev","SampleStDev","PopulationVar","SampleVar"].indexOf(g)||(I="#DIV/0!",S=0),I=O.skipFormatting?i.i(r.isNullOrUndefined)(S)?this.emptyCellTextContent:S.toString():I,a[n][d]=this.valueContent[p][d]={axis:"value",actualText:m,indexObject:this.isDrillThrough?this.rawIndexObject:{},rowHeaders:"grand sum"===e[s].type?"":e[s].valueSort.levelName,columnHeaders:"grand sum"===t[l].type?"":t[l].valueSort.levelName,formattedText:I,value:S,hierarchyName:t[l].hierarchyName,actualValue:y,rowIndex:n,colIndex:d,isSum:P,isGrandSum:N,showSubTotals:!E},this.rawIndexObject={}},e.prototype.getCellSet=function(e){for(var t=[],i=Object.keys(e),r=0,n=i;r<n.length;r++){var a=n[r];this.data[parseInt(a,10)]&&t.push(this.data[parseInt(a,10)])}return t},e.prototype.updateValueMembers=function(e,t,n,o,s,l,d){var p=n&&!i.i(r.isNullOrUndefined)(n.levelName)?n.levelName.toString():void 0,u=n&&!i.i(r.isNullOrUndefined)(n.uniqueName)?n.uniqueName.toString():void 0;if(e)for(var h=0;h<l;h++){var c=this.dataSourceSettings.values[h],g=c.caption?c.caption:c.name,m={axis:this.valueAxis?"row":"column",rowIndex:this.valueAxis?0:t&&d<=t.rowIndex?t.rowIndex+1:d,actualText:c.name,formattedText:g,level:0,valueSort:{},members:[],type:this.valueAxis?"value":t?t.type:null,index:!this.valueAxis&&t?t.index:null,indexObject:!this.valueAxis&&t?t.indexObject:null};s.length>0&&(m.showSubTotals=c.showSubTotals);var f=m.valueSort;f.axis=this.valueAxis?void 0:c.name,f[(p?p+this.valueSortSettings.headerDelimiter:"")+g]=1,f[(u?u+this.valueSortSettings.headerDelimiter:"")+c.name]=1,f.levelName=(p?p+this.valueSortSettings.headerDelimiter:"")+g,f.uniqueName=(u?u+this.valueSortSettings.headerDelimiter:"")+c.name,o.push(m),this.updateValueMembers(!1,t,f,m.members,s,l,d+1)}else for(var v=0,S=s.length;v<S;v++){var y=a.a.frameHeaderWithKeys(s[v]);y.members=[],y.rowIndex=this.valueAxis?y.rowIndex:d<0?0:d;var b={};b.axis=y.valueSort.axis,b[(p?p+this.valueSortSettings.headerDelimiter:"")+y.formattedText]=1,b[(u?u+this.valueSortSettings.headerDelimiter:"")+y.actualText]=1,b.levelName=(p?p+this.valueSortSettings.headerDelimiter:"")+y.formattedText,b.uniqueName=(u?u+this.valueSortSettings.headerDelimiter:"")+y.actualText,y.hierarchyName=y.valueSort.uniqueName,y.valueSort=b;var C=b.axis+this.valueSortSettings.headerDelimiter+b.levelName,x=this.fieldList[b.axis];y.isDrilled&&((this.isExpandAll||x.expandAll)&&this.fieldDrillCollection[C]||!this.isExpandAll&&!x.expandAll&&!this.fieldDrillCollection[C])&&(y.isDrilled=!1),o.push(y),y.isDrilled&&s[v].members.length>0?(this.valueAxis&&d<this.measureIndex&&this.measureIndex!==d+1&&(!s[v].hasChild||(i.i(r.isNullOrUndefined)(s[v].showSubTotals)||s[v].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showRowSubTotals)&&this.updateValueMembers(!0,y,b,o[o.length-1].members,[],l,d),this.updateValueMembers(this.measureIndex===d+1,y,b,o[o.length-1].members,s[v].members,l,d+1),!this.valueAxis&&d<this.measureIndex&&this.measureIndex!==d+1&&(!s[v].hasChild||(i.i(r.isNullOrUndefined)(s[v].showSubTotals)||s[v].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals)&&this.updateValueMembers(!0,y,b,o[o.length-1].members,[],l,d)):d<this.measureIndex&&this.updateValueMembers(!0,y,b,o[o.length-1].members,[],l,d)}},e.prototype.reArrangeValueMember=function(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];this.valueAxisFields[n.actualText]&&(t[t.length]=n)}return t.concat(e).slice(0,e.length)},e.prototype.frameDefinedHeaderData=function(e,t,n,o,s,l){for(var d=0,p=e.length;d<p;d++){var u=!0;!(e[d].members.length>0)||(i.i(r.isNullOrUndefined)(e[d].showSubTotals)||e[d].showSubTotals)&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals||(u=!1);var h=this.measureIndex<o&&u?1:this.measureIndex>o&&e[d].members.length>0||this.measureIndex!==o+1||!e[d].isDrilled?this.measureIndex===o&&0!==this.measureIndex&&u?1:this.measureIndex>o&&u&&e[d].valueSort&&e[d].valueSort.axis&&this.measureNames[e[d].valueSort.axis.toString()]?1:0:0!==this.measureIndex&&u?1:0;if(e[d].members.length){var c=void 0,g=e[d].members;this.showSubTotalsAtTop?o+1<this.measureIndex&&u?(c=s,g=this.reArrangeValueMember(g)):c=s+h:c=s,this.frameDefinedHeaderData(g,t,n,o+1,c,l)}var m=this.measureIndex>o&&e[d].valueSort&&e[d].valueSort.axis&&this.measureNames[e[d].valueSort.axis.toString()]?this.measureIndex:o;s=this.showSubTotalsAtTop?s+1:t.length+h,t[s-1]||(t[s-1]=a.a.frameHeaderWithKeys(e[d])),e[d].colIndex=s,n[m]?n[m][s]=this.headerContent[m][s]=a.a.frameHeaderWithKeys(e[d]):(n[m]=[],this.headerContent[m]={},n[m][s]=this.headerContent[m][s]=a.a.frameHeaderWithKeys(e[d])),this.isPagingOrVirtualizationEnabled||this.showSubTotalsAtTop&&0===h||t[s-1]&&(t[s-1].members=[]),this.showSubTotalsAtTop&&(s=t.length,d+1===p&&0===e[d].level&&(this.reformAxisCount=t.length+1))}},e.prototype.getHeaderData=function(e,t,n,o,s,l,d,p,u){if(!this.valueAxis&&!this.isLastHeaderHasMeasures){var h=[];if(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals&&"grand sum"===s[s.length-1].type)this.updateValueMembers(0===this.measureIndex&&s.length>1,null,null,h,s.slice(0,s.length-1),u,0),this.updateValueMembers(!1,null,null,h,s.slice(s.length-1,s.length),u,-1);else if("Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&0===this.measureIndex)this.updateValueMembers(!1,null,null,h,s.slice(0,1),u,-1),this.updateValueMembers(0===this.measureIndex&&s.length>1,null,null,h,s.slice(1,s.length),u,0);else{var c=0===t.length&&1===s.length&&"grand sum"===s[0].type;this.updateValueMembers(!c&&0===this.measureIndex,null,null,h,s,u,c?-1:0)}if(this.getAggregatedHeaders(e,t,this.rMembers,h,n),this.selectedHeaders.values.length>0)for(var g=this.selectedHeaders.selectedHeader.length,m=0;m<g;m++){var f=this.selectedHeaders.selectedHeader[m];if("column"===f.axis)if(f.uniqueName===f.value)this.selectedHeaders.selectedHeader.splice(m,1),m--,g--;else if("Grand Total"===f.uniqueName)for(var v=f.aggregateHeaders.length,S=0;S<v;S++)if(f.aggregateHeaders[S]&&f.aggregateHeaders[S].members.length>0)for(var y=0,b=f.aggregateHeaders[S].members;y<b.length;y++){var C=b[y];C.actualText===f.value&&(f.aggregateHeaders[S]=C,"grand sum"===C.type&&(f.uniqueName=C.valueSort.levelName))}}return void this.frameDefinedHeaderData(h,l,d,0,this.showSubTotalsAtTop?0:1,u)}if(0===o.length&&this.valueAxis&&(this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader)&&this.dataSourceSettings.values.length>0){if(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&"grand sum"===this.rMembers[this.rMembers.length-1].type)this.updateValueMembers(0===this.measureIndex&&this.rMembers.length>1,null,null,o,this.rMembers.slice(0,this.rMembers.length-1),this.dataSourceSettings.values.length,0),this.updateValueMembers(!1,null,null,o,this.rMembers.slice(this.rMembers.length-1,this.rMembers.length),this.dataSourceSettings.values.length,-1);else if("Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&0===this.measureIndex)this.updateValueMembers(!1,null,null,o,this.rMembers.slice(0,1),this.dataSourceSettings.values.length,-1),this.updateValueMembers(0===this.measureIndex&&this.rMembers.length>1,null,null,o,this.rMembers.slice(1,this.rMembers.length),this.dataSourceSettings.values.length,0);else{var x=0===e.length&&1===this.rMembers.length&&"grand sum"===this.rMembers[0].type;this.updateValueMembers(!x&&0===this.measureIndex,null,null,o,this.rMembers,this.dataSourceSettings.values.length,x?-1:0)}if(this.getAggregatedHeaders(e,t,o,s,n),this.selectedHeaders.values.length>0)for(var g=this.selectedHeaders.selectedHeader.length,m=0;m<g;m++){var f=this.selectedHeaders.selectedHeader[m];if("row"===f.axis)for(var w=f.aggregateHeaders.length,S=0;S<w;S++)if(f.aggregateHeaders[S].actualText===f.value)if(-1!==f.aggregateHeaders[S].valueSort.levelName.indexOf(f.uniqueName))f.uniqueName=f.aggregateHeaders[S].valueSort.levelName,f.aggregateHeaders.splice(S,1),S--,w--;else for(var T=f.aggregateHeaders[S].members.length,M=0;M<T;M++){var C=f.aggregateHeaders[S].members[M];if("value"!==C.type&&C.level===f.aggregateHeaders[S].level){var _=i.i(r.extend)([],f.aggregateHeaders[S].members,null,!0);f.aggregateHeaders=[].concat(f.aggregateHeaders,_,f.aggregateHeaders.splice(S)),f.aggregateHeaders.splice(_.length+S,1),S=_.length+S-1,w=f.aggregateHeaders.length}}else if(f.aggregateHeaders[S].actualText!==f.value&&f.aggregateHeaders[S].members.length>0)for(var T=f.aggregateHeaders[S].members.length,M=0;M<T;M++){var C=f.aggregateHeaders[S].members[M];if(C.actualText===f.value){f.uniqueName===f.aggregateHeaders[S].valueSort.levelName&&(f.uniqueName=C.valueSort.levelName),f.aggregateHeaders[S].members.splice(M,1),f.aggregateHeaders[S]=C;break}}}}for(var D=s.length,O=this.dataSourceSettings.columns.length,P=this.valueSortSettings.headerText,N=0;N<D;N++){var E=!i.i(r.isNullOrUndefined)(s[N].showSubTotals)&&!s[N].showSubTotals;s[N].members.length&&this.getHeaderData(e,t,n,o,s[N].members,l,d,this.showSubTotalsAtTop&&!E?p+1:p,u);var I=!0;p=this.showSubTotalsAtTop?p:l.length,!E&&this.dataSourceSettings.showSubTotals&&this.dataSourceSettings.showColumnSubTotals?l[p]=a.a.frameHeaderWithKeys(s[N]):(s[N].members.length>0?(this.removeCount++,I=!1):l[this.showSubTotalsAtTop?p:l.length]=a.a.frameHeaderWithKeys(s[N]),p=this.showSubTotalsAtTop?p:l.length-1);var F=s[N].level;s[N].rowIndex=F;var L=p*u+(this.showSubTotalsAtTop?1:u);s[N].colIndex=L,d[F]?d[F][L]=this.headerContent[F][L]=a.a.frameHeaderWithKeys(s[N]):(d[F]=[],this.headerContent[F]={},d[F][L]=this.headerContent[F][L]=a.a.frameHeaderWithKeys(s[N]));var A=0===this.dataSourceSettings.columns.length&&1===this.dataSourceSettings.values.length;if((this.isMultiMeasures||this.dataSourceSettings.alwaysShowValueHeader||A)&&!this.valueAxis&&I)for(var R=0;R<u;R++){var k=this.dataSourceSettings.values[R].caption?this.dataSourceSettings.values[R].caption:this.dataSourceSettings.values[R].name,j={axis:"column",actualText:this.dataSourceSettings.values[R].name,formattedText:k,level:0,valueSort:{},colIndex:p*u+1+R,rowIndex:O};d[O]?d[O][p*u+1+R]=this.headerContent[O][p*u+1+R]=j:(d[O]=[],this.headerContent[O]={},d[O][p*u+1+R]=this.headerContent[O][p*u+1+R]=j);var H=d[O][p*u+1+R].valueSort;H[s[N].valueSort.levelName+this.valueSortSettings.headerDelimiter+k]=1,H.levelName=s[N].valueSort.levelName+this.valueSortSettings.headerDelimiter+k,H[s[N].valueSort.uniqueName+this.valueSortSettings.headerDelimiter+this.dataSourceSettings.values[R].name]=1,H.uniqueName=s[N].valueSort.uniqueName+this.valueSortSettings.headerDelimiter+this.dataSourceSettings.values[R].name,H&&H[P]&&(this.valueSortSettings.columnIndex=p*u+1+R)}else s[N].valueSort&&s[N].valueSort[P]&&(this.valueSortSettings.columnIndex=p*u+1);this.isPagingOrVirtualizationEnabled||(l[p].members=[]),this.showSubTotalsAtTop&&(p=l.length,0===s[N].level&&N+1===D&&(this.reformAxisCount=l.length*u+1))}},e.prototype.getAggregateValue=function(e,t,n,a,o){var s=0,l=0,d=0,p=!0,u=!1;switch(a.toLowerCase()){case"median":for(var h=[],c=0;void 0!==e[s];)void 0!==t[e[s]]&&(u=!0,this.rawIndexObject[e[s]]=e[s],i.i(r.isNullOrUndefined)(this.valueMatrix[e[s]][n])||h.push(this.valueMatrix[e[s]][n])),s++;var g=h.length;g>0&&(h.sort(function(e,t){return e-t}),g%2==0?(c=g/2<=1?0:g/2-1,l=(h[c]+h[c+1])/2):(c=(g+1)/2<=1?0:(g+1)/2-1,l=h[c]));break;case"count":for(;void 0!==e[s];)void 0!==t[e[s]]&&(u=!0,this.rawIndexObject[e[s]]=e[s],l+=i.i(r.isNullOrUndefined)(this.valueMatrix[e[s]][n])?0:this.allowDataCompression?this.valueMatrix[e[s]][n]:1),s++;break;case"distinctcount":for(var m=[];void 0!==e[s];){if(void 0!==t[e[s]]){this.rawIndexObject[e[s]]=e[s],u=!0;var f=this.data[e[s]][this.fieldKeys[this.fields[n]]];if(!i.i(r.isNullOrUndefined)(f)){var v=f.toString();(0===m.length||m.length>0&&-1===m.indexOf(v))&&(l+=this.allowDataCompression&&"number"==typeof f?f:1,m.push(v))}}s++}break;case"product":for(;void 0!==e[s];){if(void 0!==t[e[s]]){this.rawIndexObject[e[s]]=e[s],u=!0;var v=this.valueMatrix[e[s]][n];i.i(r.isNullOrUndefined)(v)?p&&(l=v):(l=p||i.i(r.isNullOrUndefined)(l)?1:l,l*=v),p=!1}s++}break;case"populationstdev":case"samplestdev":case"populationvar":case"samplevar":for(var S=0,f=0,y=[],b=0,C=0,x=0;void 0!==e[s];){if(void 0!==t[e[s]]){u=!0,this.rawIndexObject[e[s]]=e[s];var v=this.valueMatrix[e[s]][n];i.i(r.isNullOrUndefined)(v)||(f+=v,y.push(v),S++)}s++}if(S>0){b=f/S;for(var w=0,T=y;w<T.length;w++){var M=T[w];x+=Math.pow(M-b,2)}C=-1!==["populationstdev","samplestdev"].indexOf(a.toLowerCase())?Math.sqrt(x/("populationstdev"===a.toLowerCase()?S:S-1)):x/("populationvar"===a.toLowerCase()?S:S-1),l=0===C?NaN:C}else l=f;break;case"min":var _=!0;for(l=void 0;void 0!==e[s];)void 0!==t[e[s]]&&void 0!==this.valueMatrix[e[s]][n]&&(u=!0,this.rawIndexObject[e[s]]=e[s],i.i(r.isNullOrUndefined)(l)&&i.i(r.isNullOrUndefined)(this.valueMatrix[e[s]][n])?l=this.valueMatrix[e[s]][n]:_?(l=this.valueMatrix[e[s]][n],_=!1):l=this.valueMatrix[e[s]][n]<l?this.valueMatrix[e[s]][n]:l),s++;break;case"max":for(var D=!0;void 0!==e[s];)void 0!==t[e[s]]&&void 0!==this.valueMatrix[e[s]][n]&&(u=!0,this.rawIndexObject[e[s]]=e[s],D?(l=this.valueMatrix[e[s]][n],D=!1):l=this.valueMatrix[e[s]][n]>l?this.valueMatrix[e[s]][n]:l),s++;break;case"calculatedfield":u=!0;var O=this.calculatedFields[this.fields[n]],P=O.formula,N={};if(this.calculatedFormulas[O.name])for(var E=this.calculatedFormulas[O.name],g=0,I=E.length;g<I;g++){var F=E[g],L=N[F.formula];if(void 0===L){var A=F.type;L=this.getAggregateValue(e,t,F.index,A,!1),N[F.formula]=L}P=P.replace(F.formula,String(L))}l=this.evaluate(P),l=l===1/0||l===-1/0?1/0:void 0===l||isNaN(l)?void 0:JSON.parse(String(l));break;default:for(l=void 0;void 0!==e[s];){if(void 0!==t[e[s]]){u=!0,o||(this.rawIndexObject[e[s]]=e[s]);var v=this.valueMatrix[e[s]][n];i.i(r.isNullOrUndefined)(l)&&i.i(r.isNullOrUndefined)(v)?l=v:(i.i(r.isNullOrUndefined)(l)&&(l=0),l+=i.i(r.isNullOrUndefined)(v)?0:v),i.i(r.isNullOrUndefined)(v)||d++}s++}}return a&&"avg"===a.toLowerCase()&&0!==l&&!i.i(r.isNullOrUndefined)(l)?l/d:u?l:void 0},e.prototype.evaluate=function(e){return Function('"use strict";return ('+e+")")()},e.prototype.getFormattedValue=function(e,t){var n=null===e?this.localeObj?this.localeObj.getConstant("null"):String(e):void 0===e?this.localeObj?t in this.groupingFields?this.localeObj.getConstant("groupOutOfRange"):this.localeObj.getConstant("undefined"):String(e):e,a={formattedText:n.toString(),actualText:n,dateText:n};if(this.formatFields[t]&&(this.formatFields[t].format||this.formatFields[t].skeleton)&&!i.i(r.isNullOrUndefined)(e))try{var o=this.formatFields[t].properties?this.formatFields[t].properties:this.formatFields[t],s=i.i(r.extend)({},o,null,!0);if(delete s.name,!s.minimumSignificantDigits&&s.minimumSignificantDigits<1&&delete s.minimumSignificantDigits,!s.maximumSignificantDigits&&s.maximumSignificantDigits<1&&delete s.maximumSignificantDigits,s.type)a.formattedText=this.dateFormatFunction[t].exactFormat(new Date(e)),a.actualText=e;else{if(delete s.type,s.format&&!this.formatRegex.test(s.format)){var l=s.format.match(/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/),d=!0;if(i.i(r.isNullOrUndefined)(s.minimumFractionDigits)&&delete s.minimumFractionDigits,i.i(r.isNullOrUndefined)(s.maximumFractionDigits)&&delete s.maximumFractionDigits,i.i(r.isNullOrUndefined)(s.minimumIntegerDigits)&&delete s.minimumIntegerDigits,i.i(r.isNullOrUndefined)(l)&&(l=s.format.match(/^(('[^']+'|''|[^*@0])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@,.E])*)$/),delete s.useGrouping,d=!1),l&&l.length>5){var p=l[6];d&&(s.useGrouping=-1!==p.indexOf(","))}}a.formattedText=this.globalize.formatNumber(isNaN(Number(e))?e:Number(e),s),a.actualText=isNaN(Number(e))?e:Number(e),a.dateText=isNaN(Number(e))?e:Number(e)}"None"!==this.fieldList[t].sort&&s.type&&["date","dateTime","time"].indexOf(this.formatFields[t].type)>-1&&(a.dateText=this.dateFormatFunction[t].fullFormat(new Date(e))),this.fieldList[t].isCustomField&&(a.formattedText="NaN"===a.formattedText?n.toString():a.formattedText,a.dateText="NaN"===a.dateText?n.toString():a.dateText)}catch(e){if(!this.fieldList[t].isCustomField)throw e}finally{this.fieldList[t].isCustomField&&(a.formattedText=i.i(r.isNullOrUndefined)(a.formattedText)||"NaN"===a.formattedText?n.toString():a.formattedText,a.dateText=i.i(r.isNullOrUndefined)(a.dateText)||"NaN"===a.dateText?n.toString():a.dateText)}return a},e.prototype.powerFunction=function(e){if(e.indexOf("^")>-1){for(var t=[];e.indexOf("(")>-1;)e=e.replace(/(\([^\(\)]*\))/g,function(e,i){return t.push(i),"~"+(t.length-1)});for(t.push(e),e="~"+(t.length-1);e.indexOf("~")>-1;)e=e.replace(new RegExp("~(\\d+)","g"),function(e,i){return t[i].replace(/(\w*)\^(\w*)/g,"Math.pow($1,$2)")})}return e},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(){function e(){}return e.getClonedPivotValues=function(e){for(var t=[],i=0;i<e.length;i++)if(e[i]){t[i]=[];for(var r=0;r<e[i].length;r++)e[i][r]&&(t[i][r]=this.getClonedPivotValueObj(e[i][r]))}return t},e.getClonedPivotValueObj=function(e){var t=0,i={};if(null!==e&&void 0!==e)for(var r=Object.keys(e);t<r.length;)i[r[t]]=e[r[t]],t++;else i=e;return i},e.isContainCommonElements=function(e,t){for(var i=0,r=e.length;i<r;i++)for(var n=0,a=t.length;n<a;n++)if(t[n]===e[i])return!0;return!1},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),n=(i.n(r),i(3)),a=i(23),o=i(2),s=function(){function e(){this.fieldList={},this.columnCount=0,this.rowCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.pageColStartPos=0,this.enableSort=!1,this.enableValueSorting=!1,this.dataFields={},this.formatFields={},this.filterMembers={},this.drilledSets={},this.aggregatedValueMatrix=[],this.mappingFields={},this.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,this.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,this.pivotValues=[],this.valueContent=[],this.headerContent=[],this.rowStartPos=0,this.pageRowStartPos=0,this.tupColumnInfo=[],this.tupRowInfo=[],this.gridJSON="",this.namedSetsPosition={},this.colDepth=0,this.totalCollection=[],this.parentObjCollection={},this.curDrillEndPos=-1,this.headerGrouping={},this.lastLevel=[],this.showRowSubTotals=!0,this.showColumnSubTotals=!0,this.hideRowTotalsObject={},this.hideColumnTotalsObject={},this.sortObject={},this.isColDrill=!1}return e.prototype.renderEngine=function(e,t,i){this.isEmptyData=!1,this.getHeaderSortInfo=i,this.mdxQuery="",this.isMeasureAvail=!1,this.allowMemberFilter=!1,this.allowLabelFilter=!1,this.allowValueFilter=!1,this.isMondrian=!1,this.aggregatedValueMatrix=[],this.measureReportItems=[],this.calcChildMembers=[],this.selectedItems=[],this.savedFieldList=void 0,this.savedFieldListData=void 0,this.formatFields={},this.filterMembers={},this.dataFields={},this.valueAxis="",this.columnCount=0,this.rowCount=0,this.colFirstLvl=0,this.rowFirstLvl=0,this.pageColStartPos=0,this.enableValueSorting=!1,this.sortObject={},this.globalize=new r.Internationalization,this.locale=this.globalize.getCulture(),this.localeObj=t?t.localeObj:void 0,this.enableValueSorting=!!t&&t.enableValueSorting,e.url&&(this.dataSourceSettings=e,this.valueAxis="row"===e.valueAxis?"row":"column",this.getAxisFields(),this.formats=e.formatSettings?e.formatSettings:[],this.enableSort=void 0===e.enableSorting||e.enableSorting,this.valueSortSettings=e.valueSortSettings?e.valueSortSettings:void 0,this.filterSettings=e.filterSettings?e.filterSettings:[],this.sortSettings=e.sortSettings?e.sortSettings:[],this.allowMemberFilter=!!e.allowMemberFilter,this.allowLabelFilter=!!e.allowLabelFilter,this.allowValueFilter=!!e.allowValueFilter,this.drilledMembers=e.drilledMembers?this.updateDrilledItems(e.drilledMembers):[],this.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.emptyCellTextContent=e.emptyCellsTextContent?e.emptyCellsTextContent:"",this.pageSettings=t?t.pageSettings?t.pageSettings:this.pageSettings:void 0,this.isPaging=!(!this.pageSettings||!t.enablePaging&&!t.enableVirtualization),this.frameSortObject(),this.getFormattedFields(this.formats),this.savedFieldList=t?t.savedFieldList:void 0,this.savedFieldListData=t?t.savedFieldListData:void 0,this.fieldListData=[],this.fieldListObj={},this.setNamedSetsPosition(),this.savedFieldList&&this.savedFieldListData?this.updateFieldlist(!0):this.getFieldList(e),this.loadCalculatedMemberElements(this.calculatedFieldSettings),this.measureReportItems=[],this.updateFilterItems(this.filterSettings),this.generateGridData(e))},e.prototype.generateGridData=function(e,t){var i=!(!t||"navPaging"!==t||!this.isPaging||void 0===this.pageSettings);this.rows.length>0||this.columns.length>0||this.values.length>0||this.filters.length>0?a.a.getCellSets(e,this,i):(a.a.getCellSets(e,this,!0,void 0,!0),this.generateEngine(void 0,void 0,{dataSourceSettings:e,action:"loadTableElements"}))},e.prototype.generatePagingData=function(e,t,i){var r=[].slice.call(e.querySelectorAll("Axes, CellData")),n=r[1]?r[1].querySelectorAll("FmtValue"):null;n&&n.length>0&&(this.columnCount=Number(n[0].textContent),this.rowCount=Number(n[1].textContent));var o=i.dataSourceSettings;a.a.getCellSets(o,this,!0)},e.prototype.scrollPage=function(){a.a.getCellSets(this.dataSourceSettings,this,!0)},e.prototype.generateEngine=function(e,t,n){"down"!==n.action&&(this.pivotValues=[],this.valueContent=[],this.headerContent=[],this.colDepth=0,this.tupColumnInfo=[],this.tupRowInfo=[],this.colMeasures={},this.colMeasurePos=void 0,this.rowMeasurePos=void 0,this.rowStartPos=-1),this.xmlDoc=e?e.cloneNode(!0):void 0,this.request=t,this.customArgs=n,this.totalCollection=[],this.parentObjCollection={},this.curDrillEndPos=-1,this.onDemandDrillEngine=[],this.getSubTotalsVisibility(),this.xmlaCellSet=e?e.querySelectorAll("Axes, CellData"):void 0;var a=this.xmlaCellSet&&this.xmlaCellSet.length>0?[].slice.call(this.xmlaCellSet[0].querySelectorAll('Axis[name|="Axis0"] Tuple')):[],o=this.xmlaCellSet&&this.xmlaCellSet.length>0?[].slice.call(this.xmlaCellSet[0].querySelectorAll('Axis[name|="Axis1"] Tuple')):[],s=this.xmlaCellSet&&this.xmlaCellSet.length>1?[].slice.call(this.xmlaCellSet[1].querySelectorAll("Cell")):[];if(this.drilledMembers.length>0){var l=this.getMeasureInfo(),d=void 0;d=this.frameMeasureOrder(l,"column",a,s,a.length),a=d.orderedHeaderTuples,s=d.orderedValueTuples,d=this.frameMeasureOrder(l,"row",o,s,a.length),o=d.orderedHeaderTuples,s=d.orderedValueTuples}if("down"===n.action&&this.updateTupCollection("row"===n.drillInfo.axis?o.length:a.length),"down"===n.action&&"column"!==n.drillInfo.axis||(this.olapValueAxis=i.i(r.isNullOrUndefined)(this.getValueAxis(void 0,void 0))?"column":"row",this.frameColumnHeader(a),this.isPaging||this.performColumnSorting()),"down"===n.action&&"row"!==n.drillInfo.axis||(this.frameRowHeader(o),this.isPaging||this.performRowSorting()),this.frameValues(s,a.length),this.performColumnSpanning(),!this.isPaging&&this.enableSort)for(var p=0;p<this.headerContent.length;p++)this.headerContent[p]=this.pivotValues[p];this.isEngineUpdated=!0,this.isEmptyData=0===a.length},e.prototype.getSubTotalsVisibility=function(){this.showRowSubTotals=this.dataSourceSettings.showRowSubTotals&&this.dataSourceSettings.showSubTotals,this.showColumnSubTotals=this.dataSourceSettings.showColumnSubTotals&&this.dataSourceSettings.showSubTotals,this.showSubTotalsAtTop=this.showColumnSubTotals&&"Top"===this.dataSourceSettings.subTotalsPosition,this.showSubTotalsAtBottom=this.showRowSubTotals&&"Bottom"===this.dataSourceSettings.subTotalsPosition,this.hideRowTotalsObject={},this.hideColumnTotalsObject={};var e=1;do{if(1===e){if(this.showColumnSubTotals)for(var t=0;t<this.dataSourceSettings.columns.length;t++)!1===this.dataSourceSettings.columns[t].showSubTotals&&(this.hideColumnTotalsObject[this.dataSourceSettings.columns[t].name]=t)}else if(this.showRowSubTotals)for(var i=0;i<this.dataSourceSettings.rows.length;i++)!1===this.dataSourceSettings.rows[i].showSubTotals&&(this.hideRowTotalsObject[this.dataSourceSettings.rows[i].name]=i);e++}while(e<3)},e.prototype.frameRowHeader=function(e){var t=this;this.headerGrouping={},this.lastLevel=[];var i=!0,r=this.pivotValues.length,n=[],a=[];"down"!==this.customArgs.action?(n=this.pivotValues,a=this.valueContent):r=this.customArgs.drillInfo.currentCell.rowIndex+1,this.rowStartPos=this.rowStartPos>0?this.rowStartPos:r;for(var o,s,l,d=0,p=[],u={},h=[],c=!1,g=-1,m=-1,f=[],v=[{axis:"row",colIndex:0,formattedText:"Grand Total",hasChild:!1,level:-1,rowIndex:0,index:[],type:"grand sum",ordinal:0,colSpan:1,rowSpan:1,memberType:2,isDrilled:!1,valueSort:{"Grand Total":1,levelName:"Grand Total"}}],S=[],y=this.customArgs.drillInfo&&"row"===this.customArgs.drillInfo.axis?this.customArgs.drillInfo.currentCell.ordinal+1:0;d<e.length;){var b=e[d].querySelectorAll("Member");S=this.frameTupCollection(b,S,d+y,this.tupRowInfo,this.showRowSubTotals,this.hideRowTotalsObject,"row"),d++}d=0;var C,x=e.length;if("down"===this.customArgs.action){var w=this.customArgs.drillInfo.currentCell.ordinal+1;d=w,x+=w,s=this.tupRowInfo[w-1].allCount,o=this.tupRowInfo[w-1].allStartPos,C=this.tupRowInfo[w-1]}for(var T=d,M=0,_=!1,D=[];d<x;){var b=e["down"===this.customArgs.action?d-(this.customArgs.drillInfo.currentCell.ordinal+1):d].querySelectorAll("Member"),O=0,P=void 0,N=this.tupRowInfo[d].allCount,E=this.tupRowInfo[d].allStartPos,I=this.tupRowInfo[d].measure,F=this.tupRowInfo[d].typeCollection,L=this.tupRowInfo[d].drillStartPos,A=this.tupRowInfo[d].startDrillUniquename;if(0===d||d===T){for(var R="down"===this.customArgs.action?this.tupRowInfo[0].members:b;O<R.length;)"1"===R[O].querySelector("MEMBER_TYPE").textContent&&0===Number(R[O].querySelector("LNum").textContent)?f[O]=0:f[O]=Number(R[O].querySelector("LNum").textContent),"1"===R[O].querySelector("MEMBER_TYPE").textContent?(u[O]=0,g=-1===g?O:g,m=O):(u[O]=1,c="3"!==R[O].querySelector("MEMBER_TYPE").textContent||c),O++;l=F.indexOf("3")}if(O=0,0===d&&(b.length>N+(I?1:0)||1===b.length&&I)&&v.pop(),0===d&&this.isPaging?0===v.length:!c||N===s||E!==o||1===b.length&&I){var k=this.checkAttributeDrill(this.tupRowInfo[d].drillInfo,"rows"),j=!(L>-1)||(!(N>0)||(k||E>L));j=C&&j&&L>-1?C.startDrillUniquename!==A||!(m>C.measurePosition||C.measureName===this.tupRowInfo[d].measureName||E!==L+1&&this.tupRowInfo[d].measurePosition!==L+1):j;var H=!(g>-1&&N>0)||(k||E>m);if(_="Top"===this.dataSourceSettings.grandTotalsPosition&&0===this.olapRowValueIndex&&"row"===this.olapValueAxis&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&("row"!==this.olapValueAxis||this.dataSourceSettings.rows.length>1),_&&1===v.length&&(v=this.frameGrandTotalValues(e,v,F,l)),b.length===N+(I?1:0)&&I&&!_){var q="Grand Total."+b[l].querySelector("Caption").textContent,V="3"===F[l]&&this.dataFields[this.getUniqueName(b[l].querySelector("UName").textContent)]&&this.dataFields[this.getUniqueName(b[l].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(b[l].querySelector("UName").textContent)].caption:b[l].querySelector("Caption").textContent;v=this.frameGrandTotalAxisSet(v,this.getUniqueName(b[l].querySelector("UName").textContent),V,r,d,Number(F[l]),b[l].querySelector("PARENT_UNIQUE_NAME")?b[l].querySelector("PARENT_UNIQUE_NAME").textContent:void 0,b[l].querySelector("LName").textContent,b[l].getAttribute("Hierarchy"),{levelName:q,axis:b[l].getAttribute("Hierarchy")}),v[v.length-1].valueSort["Grand Total."+b[l].querySelector("Caption").textContent]=1}else if(0!==E&&(0!==l||1!==E)&&j&&H){"Top"===this.dataSourceSettings.grandTotalsPosition&&i&&this.dataSourceSettings.showGrandTotals&&("row"!==this.olapValueAxis||this.dataSourceSettings.rows.length>1)&&(this.insertRowGrandTotal(v,a,n,e,r),r=this.pivotValues.length,i=!1),C=this.tupRowInfo[d];var B=r,U=O;P={};for(var G=!1;O<b.length;){var z=b[O];if(z.querySelector("UName").textContent!==p[O]&&"2"!==F[O]&&(!(Object.keys(P).length>0?P.isDrilled&&!this.fieldList[P.hierarchy].isHierarchy:G)||"3"===F[O]&&u[O-1]&&0!==u[O+1])){var W=Number(z.querySelector("LNum").textContent)-(u[O]&&"3"!==F[O]?1:f[O]),Q=!!this.namedSetsPosition.row[O],Y=this.getUniqueName(z.querySelector("UName").textContent),K=this.getDepth(this.tupRowInfo[d],Y,Number(F[O])),q=this.getCaptionCollectionWithMeasure(this.tupRowInfo[d]);if(this.showSubTotalsAtBottom&&r>this.rowStartPos&&(B=r=this.insertRowSubTotal(n,a,D,r,W,q)),!(this.isPaging&&n[M][0]&&this.fieldList[n[M][0].hierarchy]&&this.fieldList[n[M][0].hierarchy].isHierarchy&&n[M][0].hasChild&&!n[M][0].isDrilled&&!this.rows[O].isNamedSet&&(0===this.rows[O].name.indexOf("[Measures]")||this.fieldList[z.getAttribute("Hierarchy")]&&(this.fieldList[z.getAttribute("Hierarchy")].isHierarchy||this.fieldList[z.getAttribute("Hierarchy")].hasAllMember))&&n[M][0].depth<K)){n[r]=[{axis:"row",actualText:Y,colIndex:0,formattedText:"3"===F[O]&&this.dataFields[Y]&&this.dataFields[Y].caption?this.dataFields[Y].caption:z.querySelector("Caption").textContent,hasChild:!!(this.fieldList[z.getAttribute("Hierarchy")]&&this.fieldList[z.getAttribute("Hierarchy")].isHierarchy&&O<this.rows.length-1&&!this.rows[O+1].isNamedSet&&this.rows[O+1].name.indexOf("[Measures]")<0&&this.fieldList[this.rows[O+1].name]&&this.fieldList[this.rows[O+1].name].hasAllMember)||Number(z.querySelector("CHILDREN_CARDINALITY").textContent)>0,level:W,depth:K,rowIndex:r,index:[],ordinal:d,type:"header",colSpan:1,rowSpan:1,memberType:Number(F[O]),isDrilled:!(!this.fieldList[z.getAttribute("Hierarchy")]||!this.fieldList[z.getAttribute("Hierarchy")].isHierarchy||this.isAttributeDrill(z.getAttribute("Hierarchy"),this.tupRowInfo[d].drillInfo,"rows"))||this.tupRowInfo[d].drillInfo[O].isDrilled,parentUniqueName:z.querySelector("PARENT_UNIQUE_NAME")?z.querySelector("PARENT_UNIQUE_NAME").textContent:void 0,levelUniqueName:z.querySelector("LName").textContent,hierarchy:z.getAttribute("Hierarchy"),isNamedSet:Q,valueSort:{levelName:"",axis:z.getAttribute("Hierarchy")}}],P="3"!==F[O]?n[r][0]:P,P||h.push(z.querySelector("Caption").textContent),n[r][0].valueSort.levelName=q,n[r][0].valueSort[q]=1,a[r-this.rowStartPos]={},a[r-this.rowStartPos][0]=n[r][0],I&&l>O&&(p[l]="");for(var X=O+1;X<b.length;X++)p[X]="";p[O]=z.querySelector("UName").textContent,M=3!==Number(F[O])?r:M,r++,U=O}}else"2"===F[O]?U=O:this.tupRowInfo[d].drillInfo[O].isDrilled&&0===u[O]&&(G=!0);this.tupRowInfo[d].drillInfo[O].isDrilled&&this.tupRowInfo[d].showTotals&&(this.tupRowInfo[d].showTotals=!!this.showRowSubTotals&&void 0===this.hideRowTotalsObject[this.tupRowInfo[d].drillInfo[O].hierarchy]),O++}B<r&&U>=b.length-1&&(n[r-1][0].ordinal=d,"header"===n[r-1][0].type&&delete n[r-1][0].type)}s=N,o=E}d++}this.showSubTotalsAtBottom&&D.length>0&&(D.reverse(),D.forEach(function(e){n[r]=[e],a[r-t.rowStartPos]={},a[r-t.rowStartPos][0]=n[r][0],r++})),("Top"!==this.dataSourceSettings.grandTotalsPosition||"row"===this.olapValueAxis&&1===this.dataSourceSettings.rows.length&&"Top"===this.dataSourceSettings.grandTotalsPosition||0===this.dataSourceSettings.rows.length)&&this.insertRowGrandTotal(v,a,n,e,r)},e.prototype.insertRowSubTotal=function(e,t,i,r,a,o){var s=n.a.frameHeaderWithKeys(e[r-1][0]);if(s.level<a&&"grand sum"!==s.type&&(s.isDrilled||3===s.memberType))if(3===s.memberType){for(var l=[],d=1;3===e[r-d][0].memberType;)l[l.length]=e[r-d][0],d++;if(e[r-d][0].isDrilled&&0!==l.length){for(var p=0,u=l.length;p<u;p++)l[p].formattedText=e[r-d][0].formattedText+" "+l[p].formattedText,l[p].isSum=!0,l[p].type="sum",l[p].parentUniqueName=e[r-d][0].levelUniqueName,i[i.length]=l[p];d--,r-=d}}else s.hasChild=!1,s.isDrilled=!1,s.isSum=!0,s.type="sum",s.formattedText=s.formattedText+" Total",i[Object.keys(i).length]=s;if(i.length>0)for(var h=i.length-1,c=i[h].valueSort.levelName.split(".").length,g=o.split(".").length;c>=g&&(e[r]=[i[h]],t[r-this.rowStartPos]={},t[r-this.rowStartPos][0]=e[r][0],r++,i.splice(i.length-1,1),Object.keys(i).length>0);)h--,c=i[h].valueSort.levelName.split(".").length;return r},e.prototype.insertRowGrandTotal=function(e,t,i,r,n){if(e.length>1&&3!==e[0].memberType&&(e[0].ordinal=-1),"down"!==this.customArgs.action){if(this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals)for(var a=0;a<e.length;a++)e[a].rowIndex=n,i[n]=[e[a]],t[n-this.rowStartPos]={},t[n-this.rowStartPos][0]=i[n][0],n++}else this.updateRowEngine(i,t,r.length),this.onDemandDrillEngine=i;return e},e.prototype.getValueAxis=function(e,t){this.olapValueAxis=e,this.olapRowValueIndex=t;for(var i=0;i<this.dataSourceSettings.rows.length;i++)if("[Measures]"===this.dataSourceSettings.rows[i].name){this.olapValueAxis="row",this.olapRowValueIndex=i;break}return this.olapValueAxis},e.prototype.frameGrandTotalAxisSet=function(e,t,i,r,n,a,o,s,l,d){return e.push({axis:"row",actualText:t,colIndex:0,formattedText:i,hasChild:!1,level:-1,rowIndex:r,index:[],ordinal:n,colSpan:1,rowSpan:1,memberType:a,isDrilled:!1,parentUniqueName:o,levelUniqueName:s,hierarchy:l,valueSort:d}),e},e.prototype.getDepth=function(e,t,i){var r=e.uNameCollection.indexOf(t),n=e.uNameCollection.substring(0,r)+(3===i?"":t),a=n.split("::[").map(function(e){return"["===e[0]?e:"["+e});3===i&&this.rowMeasurePos===a.length&&a.push(t);for(var o=-1,s=0;s<a.length;s++){o+=a[s].split("~~").length}return o},e.prototype.checkAttributeDrill=function(e,t){for(var i=!1,r=0;r<e.length&&!(i=this.isAttributeDrill(e[r].hierarchy,e,t));r++);return i},e.prototype.frameTupCollection=function(e,t,n,a,o,s,l){for(var d,p,u,h,c,g,m=0,f=0,v=[],S=[],y=[],b="",C="",x=!0,w=-1;m<e.length;){var T=e[m],M=Number(T.querySelector("LNum").textContent),_=T.querySelector("UName").textContent;Number(T.querySelector("MEMBER_TYPE").textContent)>3&&(T.querySelector("MEMBER_TYPE").textContent=0===_.indexOf("[Measures]")?"3":"1");var D=0===_.indexOf("[Measures]")?"3":Number(T.querySelector("MEMBER_TYPE").textContent)>3?"1":T.querySelector("MEMBER_TYPE").textContent,O=T.querySelector("Caption").textContent;this.fieldList[O]&&"CalculatedField"===this.fieldList[O].type&&(O=this.fieldList[O].caption,T.querySelector("Caption").textContent=O);var P=T.getAttribute("Hierarchy"),N=T.querySelector("PARENT_UNIQUE_NAME")?T.querySelector("PARENT_UNIQUE_NAME").textContent:"";if("2"===D?(this.isPaging||f++,u=i.i(r.isNullOrUndefined)(u)?m:u):"3"===D?(h=T,c=_,g=m,"column"===l?(this.colMeasures[_]=T,this.colMeasurePos=m):this.rowMeasurePos=m):w=s[P],"2"!==D){if(this.headerGrouping[m]){if(M>this.lastLevel[m])this.lastLevel[m]=M;else if(M<this.lastLevel[m]){for(var E=this.lastLevel[m];E>=M;)delete this.headerGrouping[m].UName[E],delete this.headerGrouping[m].Caption[E],E--;this.lastLevel[m]=M}this.headerGrouping[m].UName[M]=_,this.headerGrouping[m].Caption[M]=O}else this.lastLevel[m]=M,this.headerGrouping[m]={UName:(d={},d[M]=_,d),Caption:(p={},p[M]=O,p)};if(this.isPaging)for(var I=N;this.drilledSets[I];){var F=this.drilledSets[I].querySelector("Caption").textContent,L=Number(this.drilledSets[I].querySelector("LNum").textContent);this.headerGrouping[m].UName[L]=I,this.headerGrouping[m].Caption[L]=F,I=null===this.drilledSets[I].querySelector("PARENT_UNIQUE_NAME")?"":this.drilledSets[I].querySelector("PARENT_UNIQUE_NAME").textContent}for(var A="",R=Object.keys(this.headerGrouping[m].UName),k=0;k<R.length;k++){var j=R[k];A=0===k?this.headerGrouping[m].UName[j]:A+"~~"+this.headerGrouping[m].UName[j]}b=""===b?A:b+"::"+A;for(var H="",q=Object.keys(this.headerGrouping[m].Caption),k=0;k<q.length;k++){var j=q[k];H=0===k?this.headerGrouping[m].Caption[j]:H+"~~"+this.headerGrouping[m].Caption[j]}m!==g&&(C=""===C?H:C+"::"+H)}if(v.push(D),S.push(M),(i.i(r.isNullOrUndefined)(t[m])||t[m]<M)&&(t[m]=M),y.push({level:M,uName:_,hierarchy:P,isDrilled:!1}),a[n-1]&&"1"===a[n-1].typeCollection[m]&&y[m].level>a[n-1].drillInfo[m].level){var V=b.split(/~~|::\[/).map(function(e){return"["===e[0]?e:"["+e});V.pop();var B=V.join("~~");this.setDrillInfo(N,B,m,n,a)}m++}return w>-1&&(x="2"!==v[w+1]),a[n]={allCount:f,allStartPos:u,measure:h,measureName:c,measurePosition:g,members:e,typeCollection:v,uNameCollection:b,captionCollection:C,levelCollection:S,drillInfo:y,drillStartPos:-1,drillEndPos:-1,showTotals:!(!o&&f>0&&u>(0===g?1:0))&&x},t},e.prototype.getCaptionCollectionWithMeasure=function(e){var t=e.captionCollection;if(e.measure){var i=e.measure.querySelector("Caption").textContent,r=e.uNameCollection.split(/[~~::]+/g).indexOf(e.measureName),n=e.captionCollection.split(/[~~::]+/g);n.splice(r,0,i),t=n.join(".")}else{var n=e.captionCollection.split(/[~~::]+/g);t=n.join(".")}return t},e.prototype.setNamedSetsPosition=function(){this.namedSetsPosition={};var e=0;do{for(var t={},i=e?this.dataSourceSettings.rows:this.dataSourceSettings.columns,r=0;r<i.length;r++)i[r].isNamedSet&&(t[r]=i[r].name);this.namedSetsPosition[e?"row":"column"]=t,e++}while(e<2)},e.prototype.updateRowEngine=function(e,t,i){for(var r=this.pivotValues.length-1,n=Object.keys(e).length;r>this.customArgs.drillInfo.currentCell.rowIndex;)this.pivotValues[r+n]=this.pivotValues[r],this.pivotValues[r+n][0].ordinal+=i,this.pivotValues[r+n][0].rowIndex+=n,this.valueContent[r+n-this.rowStartPos]=this.valueContent[r-this.rowStartPos],r--;for(var a=0;a<e.length;a++)this.pivotValues[a]=e[a],this.valueContent[Number(a)-this.rowStartPos]=t[Number(a)-this.rowStartPos];this.pivotValues[this.customArgs.drillInfo.currentCell.rowIndex][0].isDrilled=!0},e.prototype.updateTupCollection=function(e){for(var t="row"===this.customArgs.drillInfo.axis?this.tupRowInfo:this.tupColumnInfo,i=t.length-1;i>this.customArgs.drillInfo.currentCell.ordinal;)t[i+e]=t[i],i--},e.prototype.frameGrandTotalValues=function(e,t,i,r){for(var n=0,a=!1;n<e.length&&!a;){var o=e["down"===this.customArgs.action?n-(this.customArgs.drillInfo.currentCell.ordinal+1):n].querySelectorAll("Member"),s=this.tupRowInfo[n].allCount,l=this.tupRowInfo[n].allStartPos,d=this.tupRowInfo[n].measure,p=this.tupRowInfo[n].typeCollection,u=this.tupRowInfo[n].drillStartPos;this.tupRowInfo[n].startDrillUniquename;if(0===n&&(o.length>s+(d?1:0)||1===o.length&&d)&&t.pop(),0!==n||!this.isPaging||0===t.length){var h=this.checkAttributeDrill(this.tupRowInfo[n].drillInfo,"rows"),c=!(u>-1)||(!(s>0)||(h||l>u));if(c=c,o.length===s+(d?1:0)&&d){var g="Grand Total."+o[r].querySelector("Caption").textContent,m="3"===p[r]&&this.dataFields[this.getUniqueName(o[r].querySelector("UName").textContent)]&&this.dataFields[this.getUniqueName(o[r].querySelector("UName").textContent)].caption?this.dataFields[this.getUniqueName(o[r].querySelector("UName").textContent)].caption:o[r].querySelector("Caption").textContent;t=this.frameGrandTotalAxisSet(t,this.getUniqueName(o[r].querySelector("UName").textContent),m,this.pivotValues.length,n,Number(p[r]),o[r].querySelector("PARENT_UNIQUE_NAME")?o[r].querySelector("PARENT_UNIQUE_NAME").textContent:void 0,o[r].querySelector("LName").textContent,o[r].getAttribute("Hierarchy"),{levelName:g,axis:o[r].getAttribute("Hierarchy")}),t[t.length-1].valueSort["Grand Total."+o[r].querySelector("Caption").textContent]=1}s,l}a=this.dataSourceSettings.values.length+1===t.length,n++}return t},e.prototype.frameColumnHeader=function(e){var t=this;this.headerGrouping={},this.lastLevel=[];for(var i=0,r=[],n=[],a=[],o=-1,s=-1,l=this.customArgs.drillInfo&&"column"===this.customArgs.drillInfo.axis?this.customArgs.drillInfo.currentCell.ordinal+1:0;i<e.length;){var d=e[i].querySelectorAll("Member");r=this.frameTupCollection(d,r,i+l,this.tupColumnInfo,this.showColumnSubTotals,this.hideColumnTotalsObject,"column"),i++}if(e.length>0)for(var d=e[0].querySelectorAll("Member"),p=0;p<d.length;)a[p]="1"===d[p].querySelector("MEMBER_TYPE").textContent&&0===Number(d[p].querySelector("LNum").textContent)?0:Number(d[p].querySelector("LNum").textContent),"1"!==d[p].querySelector("MEMBER_TYPE").textContent||!this.isPaging&&0!==Number(d[p].querySelector("LNum").textContent)?n[p]=1:(n[p]=0,o=-1===o?p:o,s=p),p++;i=0;for(var u,h=1,c={},g=!0,m=!1,f=this;i<e.length;)!function(){var l=e[i].querySelectorAll("Member"),d=f.tupColumnInfo[i].allCount,p=f.tupColumnInfo[i].allStartPos,v=f.tupColumnInfo[i].measure,S=f.tupColumnInfo[i].typeCollection,y=f.tupColumnInfo[i].drillInfo,b=f.tupColumnInfo[i].drillStartPos,C=f.tupColumnInfo[i].startDrillUniquename,x=f.tupColumnInfo[i].endDrillUniquename,w=f.tupColumnInfo[i].drillEndPos,T=f.tupColumnInfo[i].levelCollection,M="2"!==S[0]&&("3"!==S[0]||"2"!==S[1]),_=0;r.map(function(e,i){_+=0===n[i]?e+(1-(a[i]>1?1:a[i])):0===e?t.isPaging&&"2"===S[i]?0:1:e}),f.colDepth=f.colDepth>_?f.colDepth:_,0===i&&l.length>d+(v?1:0)&&(m=!0,M=d>0&&M?p>o:M);var D=!1;if("Top"===f.dataSourceSettings.grandTotalsPosition&&f.dataSourceSettings.showGrandTotals&&f.dataSourceSettings.showColumnGrandTotals){for(var O=0,P=0;P<l.length;P++)0===l[P].querySelector("Caption").textContent.indexOf("All")&&O++;D=O===("column"===f.olapValueAxis?f.dataSourceSettings.columns.length-1:f.dataSourceSettings.columns.length)}if((M||D)&&(0===d||D)){var N=[-1,-1,-1];f.tupColumnInfo[i-1]&&0===f.tupColumnInfo[i-1].allCount?N=f.levelCompare(T,f.tupColumnInfo[i-1].levelCollection):m&&u&&(N=f.levelCompare(T,u.levelCollection)),f.tupColumnInfo[i].drillStartPos<0||f.showSubTotalsAtTop?(!g&&N[0]>-1&&N[2]>-1&&(h=f.mergeTotCollection(h,d,r,a,n,p,y,N)),f.setParentCollection(l),f.frameCommonColumnLoop(l,i,h,r,n,a),f.tupColumnInfo[i].showTotals||h--,!g&&N[0]>-1&&N[2]>-1&&(h=f.mergeTotCollection(h,d,r,a,n,p,y,N)),g=!1,f.isColDrill?f.isColDrill=!1:h++):c.drillStartPos===b&&c.startDrillUniquename===C&&c.allCount!==d||(!g&&N[0]>-1&&N[2]>-1&&(h=f.mergeTotCollection(h,d,r,a,n,p,y,N),g=!0),f.setParentCollection(l),(!m||s<=b)&&(D||(f.totalCollection[f.totalCollection.length]={allCount:d,ordinal:i,members:l,drillInfo:y}),c.allCount=d,c.allStartPos=p,c.drillStartPos=b,c.startDrillUniquename=C,c.endDrillUniquename=x)),u=f.tupColumnInfo[i]}var E=f.checkAttributeDrill(f.tupColumnInfo[i].drillInfo,"columns");if(d>0&&(!m||M&&(E||s<p))&&(d===c.allCount||p!==c.allStartPos)){var I=w===b||c.endDrillUniquename===x,F=p!==c.allStartPos?c.startDrillUniquename!==C:I;b>-1&&!F||(g||(h=f.mergeTotCollection(h,d,r,a,n,p,y),g=!0),f.setParentCollection(l),m&&b>-1&&!(s<=b)||(D||(f.totalCollection[f.totalCollection.length]={allCount:d,ordinal:i,members:l,allStartPos:p,drillInfo:y}),c.allCount=d,c.allStartPos=p,c.drillStartPos=b,c.startDrillUniquename=C,c.endDrillUniquename=x))}i++}();if(this.totalCollection.length>0)if(Object.keys(this.colMeasures).length>1)this.orderTotals(h,r,n,a);else{this.totalCollection=this.totalCollection.reverse();for(var v=0,S=this.totalCollection;v<S.length;v++){var y=S[v],b=0===this.tupColumnInfo[y.ordinal].measurePosition?1===this.tupColumnInfo[y.ordinal].allStartPos:0===this.tupColumnInfo[y.ordinal].allStartPos;if(!b||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals){this.frameCommonColumnLoop(y.members,y.ordinal,h,r,a,n);var C=this.checkAttributeDrill(this.tupColumnInfo[y.ordinal].drillInfo,"columns");(this.tupColumnInfo[y.ordinal].showTotals||C)&&h++}}}},e.prototype.orderTotals=function(e,t,i,r){for(var n={},a=1,o=0,s=this.totalCollection;o<s.length;o++){var l=s[o];if(!(0===this.tupColumnInfo[l.ordinal].measurePosition?1===this.tupColumnInfo[l.ordinal].allStartPos:0===this.tupColumnInfo[l.ordinal].allStartPos)||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals){var d=this.tupColumnInfo[l.ordinal].measure.querySelector("UName").textContent;n[d]?(n[d].coll.push(l),n[d].count++,a=a<n[d].count?n[d].count:a):n[d]={coll:[l],count:1}}}for(var p=Object.keys(n),u=a-1;u>-1;){for(var h=0,c=p;h<c.length;h++){var g=c[h],l=n[g].coll[u];l&&(this.frameCommonColumnLoop(l.members,l.ordinal,e,t,i,r),this.tupColumnInfo[l.ordinal].showTotals&&e++)}u--}},e.prototype.setParentCollection=function(e){for(var t=0;e.length>t;){var i=e[t],r=Number(i.querySelector("MEMBER_TYPE").textContent)>2?"3":i.querySelector("MEMBER_TYPE").textContent,n=Number(i.querySelector("LNum").textContent),a=i.querySelector("UName").textContent,o=i.querySelector("PARENT_UNIQUE_NAME")?i.querySelector("PARENT_UNIQUE_NAME").textContent:"",s=!0,l=!1;if(this.parentObjCollection[t]){var d=Object.keys(this.parentObjCollection[t]),p=this.parentObjCollection[t][n-1];s=p?o===p.querySelector("UName").textContent:0===d.length,l="1"===this.tupColumnInfo[0].typeCollection[t]}"2"===r?delete this.parentObjCollection[t]:(!this.isPaging&&!l||s||delete this.parentObjCollection[t],this.parentObjCollection[t]?this.parentObjCollection[t][n]&&this.parentObjCollection[t][n].querySelector("UName").textContent===a||(this.parentObjCollection[t][n]=i):(this.parentObjCollection[t]={},this.parentObjCollection[t][n]=i)),t++}},e.prototype.setDrillInfo=function(e,t,i,r,n){for(r--;n[r]&&n[r].drillInfo[i].uName===e;){if(n[r].uNameCollection.split(/~~|::\[/).map(function(e){return"["===e[0]?e:"["+e}).join("~~").indexOf(t)<0)break;n[r].drillInfo[i].isDrilled=!0,this.curDrillEndPos<=i&&(n[r].drillEndPos=this.curDrillEndPos=i,n[r].endDrillUniquename=e),(n[r].drillStartPos>i||-1===n[r].drillStartPos)&&(n[r].drillStartPos=i),n[r].startDrillUniquename=e,r--}},e.prototype.levelCompare=function(e,t){for(var i=[-1,0],r=0;r<t.length;r++)if(e[r]!==t[r]){i=[r,e[r],t[r]-e[r]];break}return i},e.prototype.mergeTotCollection=function(e,t,n,a,o,s,l,d){for(var p=i.i(r.isNullOrUndefined)(s)?d[0]:s-(this.colMeasurePos===s-1?2:1),u=l[p]&&l[p].level,h=this.getLevelsAsString(p-1,l),c={},g=1,m=!1,f=0,v=this.totalCollection;f<v.length;f++){var S=v[f];if(m||S.allCount<=t&&(!(u>-1&&S.drillInfo[p])||S.drillInfo[p].level>=u&&this.getLevelsAsString(p-1,S.drillInfo)===h)){var y=this.tupColumnInfo[S.ordinal].measure?this.tupColumnInfo[S.ordinal].measure.querySelector("UName").textContent:"measure";c[y]?(c[y].coll.push(S),c[y].count++,g=g<c[y].count?c[y].count:g):c[y]={coll:[S],count:1},m=!1}}for(var b=Object.keys(c),C=g-1;C>-1;){for(var x=0,w=b;x<w.length;x++){var T=w[x],M=c[T].coll[C];if(M){(!(0===this.tupColumnInfo[M.ordinal].measurePosition?1===this.tupColumnInfo[M.ordinal].allStartPos:0===this.tupColumnInfo[M.ordinal].allStartPos)||this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showColumnGrandTotals)&&(this.frameCommonColumnLoop(M.members,M.ordinal,e,n,o,a),this.tupColumnInfo[M.ordinal].showTotals&&e++),this.totalCollection.pop()}}C--}return e},e.prototype.getLevelsAsString=function(e,t){for(var i=[],r=0;r<e;r++)i[r]=t[r].level;return i.length>0?i.toString():""},e.prototype.frameCommonColumnLoop=function(e,t,i,r,n,a){var o,s=-1;if(this.tupColumnInfo[t].showTotals)for(var l=0,d=0;l<e.length;)d+=a[l]>0&&this.getMeasurePosition(this.tupColumnInfo[t].uNameCollection,this.tupColumnInfo[t].measurePosition)!==l?r[l]:r[l]+(1-n[l]),this.tupColumnInfo[t].drillInfo[l].isDrilled&&this.tupColumnInfo[t].showTotals&&(this.tupColumnInfo[t].showTotals=!!this.showColumnSubTotals&&void 0===this.hideColumnTotalsObject[this.tupColumnInfo[t].drillInfo[l].hierarchy],d-=r[l]-this.tupColumnInfo[t].levelCollection[l],s=this.tupColumnInfo[t].showTotals?-1:d-1),l++;var p=this.checkAttributeDrill(this.tupColumnInfo[t].drillInfo,"columns");if(this.tupColumnInfo[t].showTotals||p)for(var u=0,h=0,c={};u<e.length;){for(var g=e[u],m=Number(g.querySelector("MEMBER_TYPE").textContent)>2?"3":g.querySelector("MEMBER_TYPE").textContent,f=0,v="2"!==m?a[u]?1:n[u]:1;v<=("3"===m?1:r[u]);v++){var S=!1;this.pivotValues[h]||(this.pivotValues[h]=[]),Number(e[u].querySelector("LNum").textContent)>v&&"2"!==m?(this.parentObjCollection[u][v]||this.getDrilledParent(e[u],v,this.parentObjCollection[u]),this.parentObjCollection[u][v]&&(g=this.parentObjCollection[u][v]),S=!0):(g=e[u],f++),"2"!==m&&(c[g.querySelector("UName").textContent]=g.querySelector("Caption").textContent);for(var y="",b=Object.keys(c),C=0;C<b.length;C++){var x=b[C];y=0===C?c[x]:y+this.valueSortSettings.headerDelimiter+c[x]}var w=!!this.namedSetsPosition.column[u],T=this.getUniqueName(g.querySelector("UName").textContent),M=this.getDepth(this.tupColumnInfo[t],T,Number(m));if(this.isPaging&&this.pivotValues[h-1]&&this.pivotValues[h-1][i]&&this.fieldList[this.pivotValues[h-1][i].hierarchy]&&this.fieldList[this.pivotValues[h-1][i].hierarchy].isHierarchy&&this.pivotValues[h-1][i].hasChild&&!this.pivotValues[h-1][i].isDrilled&&!this.columns[u].isNamedSet&&this.fieldList[g.getAttribute("Hierarchy")]&&(this.fieldList[g.getAttribute("Hierarchy")].isHierarchy||this.fieldList[g.getAttribute("Hierarchy")].hasAllMember)&&this.pivotValues[h-1][i].depth<M){this.isColDrill=!0;break}this.pivotValues[h][i]={axis:"column",actualText:T,colIndex:i,formattedText:"3"===m&&this.dataFields[T]&&this.dataFields[T].caption?this.dataFields[T].caption:g.querySelector("Caption").textContent,hasChild:!!(this.fieldList[g.getAttribute("Hierarchy")]&&this.fieldList[g.getAttribute("Hierarchy")].isHierarchy&&u<this.columns.length-1&&!this.columns[u+1].isNamedSet&&this.columns[u+1].name.indexOf("[Measures]")<0&&this.fieldList[this.columns[u+1].name]&&this.fieldList[this.columns[u+1].name].hasAllMember)||Number(g.querySelector("CHILDREN_CARDINALITY").textContent)>0,level:f>1?-1:Number(g.querySelector("LNum").textContent)-(a[u]&&"3"!==m?1:0),rowIndex:h,ordinal:t,memberType:Number(m),depth:M,isDrilled:!(!this.fieldList[g.getAttribute("Hierarchy")]||!this.fieldList[g.getAttribute("Hierarchy")].isHierarchy||this.isAttributeDrill(g.getAttribute("Hierarchy"),this.tupColumnInfo[t].drillInfo,"columns"))||(S||this.tupColumnInfo[t].drillInfo[u].isDrilled),parentUniqueName:g.querySelector("PARENT_UNIQUE_NAME")?g.querySelector("PARENT_UNIQUE_NAME").textContent:void 0,levelUniqueName:g.querySelector("LName").textContent,hierarchy:g.getAttribute("Hierarchy"),isNamedSet:w,valueSort:(o={levelName:y},o[y]=1,o.axis=g.getAttribute("Hierarchy"),o)},this.headerContent[h]||(this.headerContent[h]={}),this.headerContent[h][i]=this.pivotValues[h][i],h++}u++}else if(s>-1)this.pivotValues[s][i-1].ordinal=t;else if(this.tupColumnInfo[t].allCount>0){for(var l=0,d=0;l<this.tupColumnInfo[t].allStartPos;)d+=a[l]>0&&this.getMeasurePosition(this.tupColumnInfo[t].uNameCollection,this.tupColumnInfo[t].measurePosition)!==l?r[l]:r[l]+(1-n[l]),l++;this.tupColumnInfo[t].allStartPos===this.tupColumnInfo[t].measurePosition+1?d-=r[this.tupColumnInfo[t].allStartPos-2]-this.tupColumnInfo[t].levelCollection[this.tupColumnInfo[t].allStartPos-2]+1:d-=r[this.tupColumnInfo[t].allStartPos-1]-this.tupColumnInfo[t].levelCollection[this.tupColumnInfo[t].allStartPos-1],this.pivotValues[d-1]&&(this.pivotValues[d-1][i-1].ordinal=t)}},e.prototype.isAttributeDrill=function(e,t,i){var r=!1;if(!this.isAdjacentToMeasure(e,i))for(var n=0;n<this.drilledMembers.length;n++)if(this.drilledMembers[n].name===e)for(var a=0;a<this.drilledMembers[n].items.length;a++){for(var o=this.drilledMembers[n].delimiter,s=this.drilledMembers[n].items[a].split(o),l="",d=0;d<s.length;d++)t[d]&&t[d].uName&&(l=l+(""===l?"":this.drilledMembers[n].delimiter)+t[d].uName);if(l===this.drilledMembers[n].items[a]){r=!0;break}}return r},e.prototype.isAdjacentToMeasure=function(e,t){for(var i=!1,r="rows"===t?this.rows:this.columns,n=0;n<r.length;n++)if(r[n].name===e&&r[n+1]&&("[Measures]"===r[n+1].name||r[n+1].isNamedSet||this.fieldList[r[n+1].name]&&!this.fieldList[r[n+1].name].hasAllMember)){i=!0;break}return i},e.prototype.getDrilledParent=function(e,t,i){for(var r=Number(e.querySelector("LNum").textContent),n=e,a=r-1;a>=t;a--){var o=this.drilledSets[n.querySelector("PARENT_UNIQUE_NAME").textContent];if(!o)break;i[a]=o,n=o}},e.prototype.performRowSorting=function(){var e;if(this.enableSort&&this.tupRowInfo.length>0){for(var t=this.pivotValues.length,i={},r={},a=[],o=!1,s=this.tupRowInfo[0].typeCollection.lastIndexOf("1"),l=void 0,d=this.colDepth;d<t;d++){var p=this.pivotValues[d][0];if(!this.showSubTotalsAtBottom||!p.isSum||3===p.memberType){var u=this.tupRowInfo[p.ordinal],h=u?0===u.measurePosition&&3===p.memberType?u.measureName:u.uNameCollection:"";if(""!==h){s>-1&&(h=this.frameUniqueName(h,p,u));var c=h.split(/~~|::\[/).length;if(3===p.memberType&&this.tupRowInfo[0].measurePosition>0){var g=this.getParentUname(h,p,!0,!0);r[g]?r[g].push(p):r[g]=[p]}else i[c]?i[c][h]=[p]:i[c]=(e={},e[h]=[p],e)}o&&a.push(p),"grand sum"===p.type&&(o=!0)}}for(var m=Object.keys(r).length>0&&this.tupRowInfo[0].measurePosition>0,f=Object.keys(i).map(function(e){return Number(e)}).sort(function(e,t){return e>t?1:t>e?-1:0}),v={},S=f.length-1;S>=0;S--){for(var y={},b=i[f[S]],C=Object.keys(b),x=0;x<C.length;x++){var g=0===S?"parent":this.getParentUname(C[x],b[C[x]][0],m,!1);y[g]?y[g].push(b[C[x]][0]):y[g]=[b[C[x]]][0]}for(var w=Object.keys(y),T=0;T<w.length;T++)y[w[T]]=this.sortRowHeaders(y[w[T]]);if(v[f[S+1]])for(var T=0;T<w.length;T++){for(var M=[],_=y[w[T]],D=0;D<_.length;D++){var O=this.tupRowInfo[_[D].ordinal],P=0===O.measurePosition&&3===_[D].memberType?O.measureName:O.uNameCollection;M.push(_[D]),s>-1&&(P=this.frameUniqueName(P,_[D],O));var N=!1;if(m){var g=this.getParentUname(P,_[D],m,!0);if(r[g]){r[g]=this.sortRowHeaders(r[g]);var E=P.lastIndexOf("::[")===P.indexOf("::[Measures]"),I=P.split("::[").length-1===O.measurePosition,F=!O.drillInfo[O.measurePosition-1].isDrilled,L=O.members.length>O.measurePosition+1;if(E&&I&&F&&L){N=!0;for(var A=0;A<r[g].length;A++){M.push(r[g][A]);var R=P.substring(0,P.indexOf("::[Measures]"))+"::"+r[g][A].actualText;v[f[S+1]][R]&&(M=M.concat(v[f[S+1]][R]))}}else l=this.showSubTotalsAtBottom&&M[M.length-1].isDrilled,M=M.concat(r[g])}}if(!N&&v[f[S+1]][P])if(this.showSubTotalsAtBottom&&3===M[M.length-1].memberType&&M[M.length-1].level>-1&&l){for(var k=[],j=0,H=M.length-1;H>=0;H--){if(3!==M[H].memberType){k=k.reverse(),j=H+1;break}k[k.length]=M[H]}M=M.slice(0,j).concat(v[f[S+1]][P]).concat(k)}else{var p=M[M.length-1],q=void 0;this.showSubTotalsAtBottom&&p.isDrilled&&(q=n.a.frameHeaderWithKeys(p),q.hasChild=!1,q.isDrilled=!1,q.isSum=!0,q.formattedText=q.formattedText+" Total"),M=M.concat(v[f[S+1]][P]),q&&(M[M.length]=q)}}y[w[T]]=M}else if(m)for(var T=0;T<w.length;T++){for(var _=y[w[T]],M=[],D=0;D<_.length;D++){M.push(_[D]);var P=this.tupRowInfo[_[D].ordinal].uNameCollection;s>-1&&(P=this.frameUniqueName(P,_[D],this.tupRowInfo[_[D].ordinal]));var g=this.getParentUname(P,_[D],!0,!0);r[g]&&(r[g]=this.sortRowHeaders(r[g]),M=M.concat(r[g]))}y[w[T]]=M}v[f[S]]=y}var V=0,B=0,U=0;o=!1,a=this.sortRowHeaders(a);for(var d=this.colDepth;d<t;d++){"Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&("column"===this.olapValueAxis&&this.colDepth+1===d||"row"===this.olapValueAxis&&this.colDepth+this.dataSourceSettings.values.length+1===d)&&(V=0,o=!1);var G=o?a:v[f[0]].parent,z="Top"===this.dataSourceSettings.grandTotalsPosition&&this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals&&this.colDepth===d?G.length:o?V-B:V;G[z]&&(this.pivotValues[d]=[G[z]],this.pivotValues[d][0].rowIndex=d,this.valueContent[U][0]=this.pivotValues[d][0]),V++,U++,"grand sum"===this.pivotValues[d][0].type&&(o=!0,B=V)}}},e.prototype.performColumnSorting=function(){if(this.enableSort)for(var e=0;e<this.dataSourceSettings.columns.length;e++){for(var t=[],n=0,a=[],o=0;o<this.pivotValues.length;o++){var s=this.pivotValues[o],l=void 0,d=void 0,p={},u=1;a[n]=[],t[n]=[];var h=1,c=s[h].hierarchy,g=s[h].levelUniqueName;for(h;h<s.length;h++)if(!s[h].isNamedSet){if(2!==s[h].memberType&&"[Measures]"!==s[h].hierarchy&&-1!==s[h].level){if(i.i(r.isNullOrUndefined)(p[s[h].formattedText])||i.i(r.isNullOrUndefined)(this.pivotValues[o-1]))p[s[h].formattedText]=p[s[h].formattedText]?p[s[h].formattedText]:[],p[s[h].formattedText][s[h].colIndex]=s[h];else if(p[s[h].formattedText]&&this.pivotValues[o-1]){var m=this.pivotValues[o-1][s[h].colIndex],f=Number(Object.keys(p[s[h].formattedText])[0]),v=p[s[h].formattedText][f].colIndex,S=this.pivotValues[o-1][v];if(m.formattedText!==S.formattedText){var y=Object.keys(p);y=this.sortColumnHeaders(y,this.sortObject[s[h-1].levelUniqueName]||this.sortObject[s[h].hierarchy],c,g),t[n]=i.i(r.isNullOrUndefined)(t[n])?[]:t[n];for(var b=0;b<y.length;b++)for(var C=Object.keys(p[y[b]]).length,x=0;x<C;x++)u=0===t[n].length?1:0,t[n][t[n].length+u]=p[y[b]][Number(Object.keys(p[y[b]])[x])];p={},p[s[h].formattedText]=[],p[s[h].formattedText][s[h].colIndex]=s[h]}else p[s[h].formattedText][s[h].colIndex]=s[h]}}else if(Object.keys(p).length>0){a[n][a[n].length+u]=s[h],l=Object.keys(p),l=this.sortColumnHeaders(l,this.sortObject[s[h-1].levelUniqueName]||this.sortObject[s[h].hierarchy],c,g),t[n]=i.i(r.isNullOrUndefined)(t[n])?[]:t[n];for(var w=0;w<l.length;w++)for(var T=Object.keys(p[l[w]]).length,M=0;M<T;M++)u=0===t[n].length?1:0,t[n][t[n].length+u]=p[l[w]][Number(Object.keys(p[l[w]])[M])]}else(-1===s[h].level||0===s[h].level)&&Object.keys(p).length>=0&&"[Measures]"!==s[h].hierarchy&&(a[n][a[n].length+u]=s[h]);if(-1!==s[h].level&&1===Object.keys(p).length&&"[Measures]"!==s[h].hierarchy&&!i.i(r.isNullOrUndefined)(s[h+1])&&-1===s[h+1].level){var _=Object.keys(p[s[h].formattedText]).length,D=Object.keys(p[s[h].formattedText]);if(_>1)for(var O=0;O<_;O++)u=0===a[n].length?1:0,a[n][a[n].length+u]=p[s[h].formattedText][Number(D[O])];else a[n][a[n].length+u]=s[h]}if(Object.keys(a[n]).length>0){u=0===t[n].length?1:0;var P=a[n].length;if(P>2)for(var N=1;N<P;N++)u=0===t[n].length?1:0,t[n][t[n].length+u]=a[n][N];else t[n][t[n].length+u]=a[n][1]||a[n][0];p={},a[n]=[]}}if(Object.keys(p).length>0){a[n][a[n].length+u]=s[h],d=Object.keys(p);var E=this.sortObject[s[h-1].levelUniqueName]||this.sortObject[s[h-1].hierarchy];l=this.sortColumnHeaders(d,E,c,g),t[n]=i.i(r.isNullOrUndefined)(t[n])?[]:t[n];for(var I=0;I<d.length;I++)for(var F=Object.keys(p[d[I]]).length,M=0;M<F;M++)u=0===t[n].length?1:0,t[n][t[n].length+u]=p[l[I]][Number(Object.keys(p[d[I]])[M])]}for(var L=1;L<t[n].length;L++)this.pivotValues[n][L]=t[n][L];for(var A=o;A<this.pivotValues.length;A++){var R=i.i(r.extend)({},this.pivotValues[A+1],null,!0),k=i.i(r.extend)({},this.pivotValues[A],null,!0);if(Object.keys(R).length===Object.keys(k).length&&Object.keys(R).length>2){for(var j=1;j<this.pivotValues[o].length;j++)Object.keys(R).length>0&&k[j].colIndex!==R[j].colIndex&&(this.pivotValues[A+1][j]=R[k[j].colIndex]);break}}n++,p={}}for(var H=0;H<this.pivotValues.length;H++)for(var s=this.pivotValues[H],o=1;o<s.length;o++)s[o].colIndex=o}},e.prototype.frameUniqueName=function(e,t,i){var r=e.indexOf(t.actualText.toString()+"::[Measures]")>-1;e=e.substring(0,e.indexOf(t.actualText.toString()))+t.actualText.toString();var n=e.split("::[").length<=this.getMeasurePosition(e,i.measurePosition);return e+=r||n?"::"+i.measureName:""},e.prototype.getMeasurePosition=function(e,t){for(var i=t,r=e.split("::["),n=0;n<r.length;n++)if(r[n]&&r[n].indexOf("Measures")>-1){i=n;break}return i},e.prototype.sortRowHeaders=function(e){if(e.length>0&&3!==e[0].memberType&&!e[0].isNamedSet){for(var t=[],i=0;i<e.length;i++)t[i]=e[i].actualText;var r=!1,a="Grand Total"!==e[0].actualText?e[0].hierarchy:e[1].hierarchy,o=this.fieldList[a]&&this.fieldList[a].membersOrder?this.fieldList[a].membersOrder.slice():[],s={fieldName:a,levelName:e[0].levelUniqueName,sortOrder:this.sortObject[e[0].hierarchy]||this.sortObject[e[0].levelUniqueName],members:o&&o.length>0?o:t,IsOrderChanged:!1};if(o&&o.length>0?n.a.applyCustomSort(s,e,"string",!1,!0):("Ascending"===s.sortOrder||void 0===s.sortOrder?e.sort(function(e,t){return e.formattedText>t.formattedText?1:t.formattedText>e.formattedText?-1:0}):"Descending"===s.sortOrder&&e.sort(function(e,t){return e.formattedText<t.formattedText?1:t.formattedText<e.formattedText?-1:0}),r=!0),r&&this.getHeaderSortInfo){for(var l=[],d=0,p=0;d<e.length;d++)"Grand Total"!==e[d].actualText&&(l[p++]=e[d].formattedText);s.members=l}return this.getHeaderSortInfo&&this.getHeaderSortInfo(s),s.IsOrderChanged&&n.a.applyCustomSort(s,e,"string",!0,!0),e}return e},e.prototype.sortColumnHeaders=function(e,t,i,r){var n=!1,a=this.fieldList[i]&&this.fieldList[i].membersOrder?this.fieldList[i].membersOrder.slice():[],o={fieldName:i,levelName:r,sortOrder:t,members:a&&a.length>0?a:e,IsOrderChanged:!1};if(a&&a.length>0?this.applyCustomSort(e,o):("Ascending"===o.sortOrder||void 0===o.sortOrder?e.sort(function(e,t){return e>t?1:t>e?-1:0}):"Descending"===o.sortOrder&&e.sort(function(e,t){return e<t?1:t<e?-1:0}),n=!0),n&&this.getHeaderSortInfo){for(var s=[],l=0,d=0;l<e.length;l++)"Grand Total"!==e[l]&&(s[d++]=e[l]);o.members=s}return this.getHeaderSortInfo&&this.getHeaderSortInfo(o),o.IsOrderChanged&&this.applyCustomSort(e,o,!0),e},e.prototype.applyCustomSort=function(e,t,i){var r,n=[],a=[];n=t.IsOrderChanged?t.members:"Ascending"===t.sortOrder||"None"===t.sortOrder||void 0===t.sortOrder?[].concat(t.members):[].concat(t.members).reverse(),"Grand Total"===e[0]&&(r=e[0],e.shift());for(var o=0,s=0;o<e.length;o++){var l=e[o];if(n[s]===l){if(e.splice(s++,0,l),e.splice(++o,1),!(s<n.length)){i||a.splice(--s,0,l);break}o=-1}o>=0&&!i&&(a[o]=e[o])}if(!i){for(var o=a.length;o<e.length;o++)a[o]=e[o];"Grand Total"===a[a.length-1]&&a.pop(),t.members=a}return r&&e.splice(0,0,r),e},e.prototype.frameSortObject=function(){if(this.enableSort)for(var e=0;e<this.sortSettings.length;e++)this.sortObject[this.sortSettings[e].name]=this.sortSettings[e].order},e.prototype.getParentUname=function(e,t,i,r){var n="";if(i&&!r){for(var a=this.tupRowInfo[t.ordinal],o=[],s={},l=0;l<e.length;l++)"~"!==e[l]&&":"!==e[l]||(o.push(l),s[l]=e[l]+e[l],l++);if(this.getMeasurePosition(e,a.measurePosition)>=e.split("::[").length-1)n=o[o.length-2]>-1?e.substring(0,o[o.length-2])+s[o[o.length-1]]+a.measureName:"parent";else{var d=e.lastIndexOf("~~")>e.lastIndexOf("::[")?e.lastIndexOf("~~"):e.lastIndexOf("::[");n=d>-1?e.substring(0,d):"parent"}}else{var d=e.lastIndexOf("~~")>e.lastIndexOf("::[")?e.lastIndexOf("~~"):e.lastIndexOf("::[");n=d>-1?e.substring(0,d):"parent"}return n},e.prototype.performColumnSpanning=function(){for(var e={},t=this.rowStartPos-1,i=Object.keys(this.colMeasures).length;t>-1;){e[t]={};for(var r=this.pivotValues[t].length-1;r>0;){e[t][r]=1;var n=this.pivotValues[t][r+1],a=this.pivotValues[t+1]&&this.rowStartPos-t>1?this.pivotValues[t+1][r]:void 0,o=this.pivotValues[t][r],s=!1,l=!1,d=this.tupColumnInfo[o.ordinal],p=d.allStartPos>("3"===d.typeCollection[0]?1:0),u=this.checkAttributeDrill(d.drillInfo,"columns");if(this.showSubTotalsAtTop&&o.isDrilled&&n&&n.actualText!==o.actualText&&o.level>-1&&(o.ordinal=this.getOrdinal(o,this.pivotValues[t+1])),a&&n&&(2===o.memberType||-1===o.level?n.actualText===o.actualText:3===o.memberType&&o.actualText===n.actualText||n.valueSort.levelName===o.valueSort.levelName)&&(2===o.memberType?p&&"sum"!==n.type?o.colSpan=1:o.colSpan=n.colSpan+1>(d.measurePosition>t?i:0)?1:n.colSpan+1:(o.colSpan=n.colSpan+1,o.ordinal=n.ordinal),s=!0),2===o.memberType){if(p)u||(o.type="sum"),o.formattedText="Total",o.valueSort[o.valueSort.levelName.toString()]=1;else{var h="Grand Total";a&&i>0&&(h=3===a.memberType?"Grand Total."+a.formattedText:a.valueSort.levelName),o.type="grand sum",o.formattedText="Grand Total",o.valueSort.levelName=h,o.valueSort[h.toString()]=1}o.hasChild=!1}else-1===o.level&&(o.type="sum",o.formattedText="Total",o.hasChild=!1,o.valueSort[o.valueSort.levelName.toString()]=1);a?2===o.memberType&&2===a.memberType||a.actualText===o.actualText?(e[t][r]=e[t+1]?e[t+1][r]+1:1,0===t||1===o.memberType&&o.level>-1&&1===a.memberType&&-1===a.level?(o.rowSpan=!o.isDrilled||this.fieldList[o.hierarchy]&&this.fieldList[o.hierarchy].isHierarchy&&!o.hasChild?e[t+1][r]+1:1,a.rowSpan=!a.isDrilled||this.fieldList[a.hierarchy]&&this.fieldList[a.hierarchy].isHierarchy&&!a.hasChild||-1!==a.level?a.rowSpan:e[t+1][r]):3===o.memberType?o.rowSpan=1:o.rowSpan=-1,l=!0):!o.isDrilled||this.fieldList[o.hierarchy]&&this.fieldList[o.hierarchy].isHierarchy&&!o.hasChild||-1!==o.level||2!==a.memberType?(o.rowSpan=0===t?e[t][r]:-1,a.rowSpan=a.level>-1&&(!a.isDrilled||this.fieldList[a.hierarchy]&&this.fieldList[a.hierarchy].isHierarchy&&!a.hasChild)||2!==o.memberType&&2===a.memberType?e[t+1][r]:1):(e[t][r]=e[t+1]?e[t+1][r]+1:1,o.rowSpan=-1,l=!0):o.rowSpan=o.level>-1||1===this.rowStartPos?e[t][r]:-1,s||(o.colSpan=1),l||(e[t][r]=1),r--}t--}},e.prototype.getOrdinal=function(e,t){for(var i=0,r=e.colIndex;r>0;r--)if(-1===t[r].level){i=t[r].ordinal;break}return i},e.prototype.frameValues=function(e,t){var n=this.colDepth,a=this.pivotValues.length,o=0;if("down"===this.customArgs.action){var s=Object.keys(this.onDemandDrillEngine);n=Number(s[0]),a=Number(s[s.length-1])+1,o=this.onDemandDrillEngine[n][0].ordinal}for(var l={},d=0;d<e.length;d++)i.i(r.isNullOrUndefined)(e[d])||(l[Number(e[d].getAttribute("CellOrdinal"))]=e[d]);for(var p=n;p<a;p++)for(var u=this.pivotValues[p],h=u[0].ordinal,d=1;d<this.pivotValues[0].length;d++)if(this.pivotValues[this.colDepth-1][d]){var c=this.pivotValues[this.colDepth-1][d].ordinal,g=this.pivotValues[this.colDepth-1][d],m=3===u[0].memberType?u[0].actualText.toString():this.tupColumnInfo[g.ordinal]&&this.tupColumnInfo[g.ordinal].measure?this.tupColumnInfo[g.ordinal].measure.querySelector("UName").textContent:u[0].actualText;if("header"===u[0].type)u[d]={axis:"value",actualText:this.getUniqueName(m),formattedText:"",value:0,colIndex:d,rowIndex:p};else{var f=void 0,v="0",S=this.getUniqueName(m),y=!0,b=!this.fieldList[u[0].hierarchy]||!this.fieldList[u[0].hierarchy].isHierarchy||u[0].isDrilled;y=this.tupRowInfo[h]?this.tupRowInfo[h].showTotals:this.dataSourceSettings.showGrandTotals&&this.dataSourceSettings.showRowGrandTotals;var C=l[(h-o)*t+c];f=this.showSubTotalsAtBottom&&u[0].isDrilled?"":!y&&b?"":i.i(r.isNullOrUndefined)(C)||i.i(r.isNullOrUndefined)(C.querySelector("FmtValue"))?this.emptyCellTextContent:C.querySelector("FmtValue").textContent,v=!y&&b?"0":i.i(r.isNullOrUndefined)(C)||i.i(r.isNullOrUndefined)(C.querySelector("Value"))?null:C.querySelector("Value").textContent,f=this.showSubTotalsAtBottom&&u[0].isDrilled?"":y&&!i.i(r.isNullOrUndefined)(v)?this.getFormattedValue(Number(v),S,""!==f?f:v):f;var x=!this.tupColumnInfo[c]||(this.tupColumnInfo[c].allCount>0||this.tupColumnInfo[c].drillStartPos>-1)||!this.tupRowInfo[h]||this.tupRowInfo[h].allCount>0||this.tupRowInfo[h].drillStartPos>-1,w=!!this.tupRowInfo[h]&&(0===this.tupRowInfo[h].measurePosition?1===this.tupRowInfo[h].allStartPos:0===this.tupRowInfo[h].allStartPos)||!!this.tupColumnInfo[c]&&(0===this.tupColumnInfo[c].measurePosition?1===this.tupColumnInfo[c].allStartPos:0===this.tupColumnInfo[c].allStartPos);u[d]={axis:"value",actualText:S,formattedText:f,colOrdinal:c,rowOrdinal:h,columnHeaders:this.tupColumnInfo[c]?this.tupColumnInfo[c].captionCollection:"",rowHeaders:this.tupRowInfo[h]?this.tupRowInfo[h].captionCollection:"",value:i.i(r.isNullOrUndefined)(v)?null:Number(v),colIndex:d,rowIndex:p,isSum:x,isGrandSum:w}}this.valueContent[p-this.rowStartPos][d]=u[d]}},e.prototype.getFormattedValue=function(e,t,n){var a=n;if(this.formatFields[t]&&!i.i(r.isNullOrUndefined)(e)){var o=this.formatFields[t].properties?this.formatFields[t].properties:this.formatFields[t],s=i.i(r.extend)({},o,null,!0);if(delete s.name,!s.minimumSignificantDigits&&s.minimumSignificantDigits<1&&delete s.minimumSignificantDigits,!s.maximumSignificantDigits&&s.maximumSignificantDigits<1&&delete s.maximumSignificantDigits,s.type)a=this.globalize.formatDate(new Date(e.toString()),s);else{if(delete s.type,s.format&&!this.formatRegex.test(s.format)){var l=s.format.match(this.customRegex),d=l[6];s.useGrouping=-1!==d.indexOf(",")}a=this.globalize.formatNumber(e,s)}}return a},e.prototype.getMeasureInfo=function(){for(var e,t="column",i=[],r=0,n=this.values;r<n.length;r++){var a=n[r];i[i.length]=a.isCalculatedField?this.fieldList[a.name].tag:a.name}if(i.length>1){if(this.isMeasureAvail){for(var o=!1,s=0,l=this.rows.length;s<l;s++)if("[measures]"===this.rows[s].name.toLowerCase()){t="row",e=s,o=!0;break}if(!o)for(var s=0,l=this.columns.length;s<l;s++)if("[measures]"===this.columns[s].name.toLowerCase()){t="column",e=s,o=!0;break}}else t=this.valueAxis,e="row"===t?this.rows.length-1:this.columns.length-1;return{measureAxis:t,measureIndex:e,valueInfo:i}}return{measureAxis:t,measureIndex:-1,valueInfo:[]}},e.prototype.frameMeasureOrder=function(e,t,n,a,o){var s=[],l=[],d=[],p={},u=[],h=e.measureAxis,c=e.measureIndex,g=e.valueInfo;if(h===t&&g.length>0){for(var m={},f=[],v=0,S=n.length;v<S;v++){for(var y=n[v],b=[].slice.call(y.querySelectorAll("Member")),C="",x="",w=0;w<b.length;)C=C+(""!==C?"~~":"")+b[w].querySelector("UName").textContent,w===c&&0===c?x=C:w===c-1&&(x=C),w++;m[x]?m[x][m[x].length]=C:(m[x]=[C],f[f.length]=x),p[C]={index:v,node:y},u[u.length]=C}if(u.length>0&&f.length>0)if(0===c)for(var T=0,M=g;T<M.length;T++)for(var _=M[T],D=0,O=f;D<O.length;D++){var P=O[D];if(P===_)for(var N=0,E=m[P];N<E.length;N++){var C=E[N];d[d.length]=p[C].index,s[s.length]=p[C].node}}else for(var I=0,F=f;I<F.length;I++)for(var P=F[I],L=0,A=g;L<A.length;L++)for(var R=A[L],k=0,j=m[P];k<j.length;k++){var C=j[k],H=C.split("~~");H[c]===R&&(d[d.length]=p[C].index,s[s.length]=p[C].node)}if(a.length>0){for(var q=[],V=[],B=0,U=0,v=0,G=a.length;v<G;v++)B>o-1?(U++,B=0,q[U]||(q[U]=[]),q[U][B]=v,B++):(q[U]||(q[U]=[]),q[U][B]=v,B++),V[V.length]=Number(a[v].getAttribute("CellOrdinal"));if("column"===h){if(q.length>0&&q[0].length===d.length)for(var w=0,G=d.length;w<G;w++)for(var v=0;v<q.length;){var z=v*o+w;if(!i.i(r.isNullOrUndefined)(V[z])&&!i.i(r.isNullOrUndefined)(q[v])&&!i.i(r.isNullOrUndefined)(d[w])){var W=V[z].toString(),Q=a[Number(q[v][d[w]])];Q.setAttribute("CellOrdinal",W.toString()),l[z]=Q}v++}}else if(q.length===d.length)for(var w=0,G=d.length;w<G;w++)for(var v=0;v<q[d[w]].length;){var z=w*o+v,W=V[z].toString(),Q=a[Number(q[d[w]][v])];Q.setAttribute("CellOrdinal",W.toString()),l[l.length]=Q,v++}}return{orderedHeaderTuples:s,orderedValueTuples:l}}return{orderedHeaderTuples:n,orderedValueTuples:a}},e.prototype.getDrilledSets=function(e,t,n,a){for(var o=[],s=t.actualText.toString(),l="row"===a?this.tupRowInfo:this.tupColumnInfo,d=l[t.ordinal],p=l[0].typeCollection.indexOf("3"),u=0===p?1:0,h=0,c="1"===l[0].typeCollection[n];h<l.length;)(i.i(r.isNullOrUndefined)(l[h].allStartPos)||l[h].allStartPos>u)&&(o[o.length]=l[h].uNameCollection),h++;for(var g=e.split("::[").map(function(e){return"["===e[0]?e:"["+e}),m=[],f=0;f<=n;f++)if(g[f])if((c||this.isPaging)&&f===n){for(var v=g[f].split("~~"),S=v.indexOf(s),y=[],b=0;b<=S;b++)y.push(v[b]);m[m.length]=y.length>0?y.join("~~"):g[f]}else m[m.length]=g[f];e=m.join("::");for(var C=[],x={},w=0,T=o;w<T.length;w++){var M=T[w];if(0===M.indexOf(e)&&(C.push(M),this.isPaging)){var _=M.split("::[")[n];_="["===_[0]?_:"["+_;for(var D=_.split("~~"),O=D.indexOf(s);O<D.length;O++)x[D[O]]=D[O]}}if(this.isPaging){for(var P=d.uNameCollection.split("::[").map(function(e){return"["===e[0]?e:"["+e}),N=[],O=0;O<P.length;O++)O!==n&&(N[O]=P[O]);for(var D=Object.keys(x),O=0;O<D.length;O++)N[n]=D[O],C.push(N.join("::"))}for(var E={},I=0,F=C;I<F.length;I++){for(var L=F[I],A=L.split("::[").map(function(e){return"["===e[0]?e:"["+e}),R="",k=0;k<=n;k++){var j=A[k];if(j){var H=j.split("~~");R=R+(""!==R?"~~":"")+H[H.length-1]}}E[R]=R}return E},e.prototype.updateDrilledInfo=function(e){this.dataSourceSettings=e,this.drilledMembers=e.drilledMembers?this.updateDrilledItems(e.drilledMembers):[],this.generateGridData(e)},e.prototype.updateCalcFields=function(e,t){this.dataSourceSettings=e,this.calculatedFieldSettings=e.calculatedFieldSettings?e.calculatedFieldSettings:[],this.getAxisFields(),this.updateFieldlist(),this.loadCalculatedMemberElements(this.calculatedFieldSettings),this.dataFields[t.name]?this.generateGridData(e):a.a.getCellSets(e,this,!0,void 0,!0)},e.prototype.onSort=function(e){this.dataSourceSettings=e,this.sortSettings=e.sortSettings?e.sortSettings:[],this.getAxisFields(),this.frameSortObject(),this.updateFieldlist(),this.xmlaCellSet.length>0&&this.xmlDoc?this.generateEngine(this.xmlDoc,this.request,this.customArgs):this.generateGridData(e)},e.prototype.updateFieldlist=function(e){for(var t=0;t<this.savedFieldListData.length;){var i=this.savedFieldListData[t].id,r=this.savedFieldListData[t].pid;if(this.savedFieldList[i]){var n=this.enableSort?this.sortObject[i]?this.sortObject[i]:"Ascending":"None";this.savedFieldList[i].isSelected=!1,this.savedFieldList[i].isExcelFilter=!1,this.savedFieldList[i].sort=n,this.savedFieldList[i].allowDragAndDrop=!0,this.savedFieldList[i].showFilterIcon=!0,this.savedFieldList[i].showSortIcon=!0,this.savedFieldList[i].showEditIcon=!0,this.savedFieldList[i].showRemoveIcon=!0,this.savedFieldList[i].showValueTypeIcon=!0,this.savedFieldList[i].showSubTotals=!0,this.savedFieldListData[t].sort=n,this.savedFieldListData[t].allowDragAndDrop=!0,this.savedFieldListData[t].showFilterIcon=!0,this.savedFieldListData[t].showSortIcon=!0,this.savedFieldListData[t].showEditIcon=!0,this.savedFieldListData[t].showRemoveIcon=!0,this.savedFieldListData[t].showValueTypeIcon=!0,this.savedFieldListData[t].showSubTotals=!0,e&&(this.savedFieldList[i].filter=[],this.savedFieldList[i].actualFilter=[])}if(this.dataFields[i]&&this.savedFieldList[i]&&this.selectedItems.indexOf(i)>-1?(this.savedFieldList[i].isSelected=!0,this.savedFieldList[i].allowDragAndDrop=!this.dataFields[i]||this.dataFields[i].allowDragAndDrop,this.savedFieldList[i].showFilterIcon=!this.dataFields[i]||this.dataFields[i].showFilterIcon,this.savedFieldList[i].showSortIcon=!this.dataFields[i]||this.dataFields[i].showSortIcon,this.savedFieldList[i].showEditIcon=!this.dataFields[i]||this.dataFields[i].showEditIcon,this.savedFieldList[i].showRemoveIcon=!this.dataFields[i]||this.dataFields[i].showRemoveIcon,this.savedFieldList[i].showValueTypeIcon=!this.dataFields[i]||this.dataFields[i].showValueTypeIcon,this.savedFieldList[i].showSubTotals=!this.dataFields[i]||this.dataFields[i].showSubTotals,this.savedFieldListData[t].isSelected=!0,this.savedFieldListData[t].allowDragAndDrop=!this.dataFields[i]||this.dataFields[i].allowDragAndDrop,this.savedFieldListData[t].showFilterIcon=!this.dataFields[i]||this.dataFields[i].showFilterIcon,this.savedFieldListData[t].showSortIcon=!this.dataFields[i]||this.dataFields[i].showSortIcon,this.savedFieldListData[t].showEditIcon=!this.dataFields[i]||this.dataFields[i].showEditIcon,this.savedFieldListData[t].showRemoveIcon=!this.dataFields[i]||this.dataFields[i].showRemoveIcon,this.savedFieldListData[t].showValueTypeIcon=!this.dataFields[i]||this.dataFields[i].showValueTypeIcon,this.savedFieldListData[t].showSubTotals=!this.dataFields[i]||this.dataFields[i].showSubTotals):this.dataFields[r]&&this.savedFieldList[r]&&this.selectedItems.indexOf(r)>-1?this.savedFieldListData[t].isSelected=!0:this.savedFieldListData[t].isSelected=!1,this.savedFieldList[i]&&this.savedFieldList[i].isCalculatedField||"[calculated members].[_0]"===i.toLowerCase()){for(var a=!1,o=0,s=this.calculatedFieldSettings;o<s.length;o++){var l=s[o];if(i===l.name){var d=l.formula,p=l.formatString;this.savedFieldListData[t].formula=d,this.savedFieldListData[t].formatString=p,this.savedFieldListData[t].parentHierarchy=d.toLowerCase().indexOf("measure")>-1?void 0:l.hierarchyUniqueName,this.savedFieldList[i].formula=d,this.savedFieldList[i].formatString=p,this.savedFieldList[i].parentHierarchy=this.savedFieldListData[t].parentHierarchy,a=!0}}(!a&&"[calculated members].[_0]"!==i.toLowerCase()||"[calculated members].[_0]"===i.toLowerCase()&&0===this.calculatedFieldSettings.length)&&(this.savedFieldListData.splice(t,1),t--,this.savedFieldList[i]&&delete this.savedFieldList[i])}t++}this.fieldList=this.savedFieldList,this.fieldListData=this.savedFieldListData},e.prototype.updateFieldlistData=function(e,t){for(var i=0,r=this.fieldListData;i<r.length;i++){var n=r[i];if(n.id===e){n.isSelected=!!t;break}}},e.prototype.getFormattedFields=function(e){this.formatFields={};for(var t=e.length;t--;)this.formatFields[e[t].name]=e[t]},e.prototype.getFieldList=function(e){var t={catalog:e.catalog,cube:e.cube,url:e.url,LCID:e.localeIdentifier.toString(),request:"MDSCHEMA_HIERARCHIES",roles:e.roles};this.getTreeData(t,this.getFieldListItems.bind(this),{dataSourceSettings:e,action:"loadFieldElements"})},e.prototype.getTreeData=function(e,t,i){var r=this.getConnectionInfo(e.url,e.LCID),n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>'+e.request+"</RequestType><Restrictions><RestrictionList><CATALOG_NAME>"+e.catalog+"</CATALOG_NAME><CUBE_NAME>"+e.cube+"</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>"+e.catalog+"</Catalog> <LocaleIdentifier>"+r.LCID+"</LocaleIdentifier>"+(e.roles?"<Roles>"+e.roles+"</Roles>":"")+"</PropertyList></Properties></Discover></Body></Envelope>";this.doAjaxPost("POST",r.url,n,t,i)},e.prototype.getAxisFields=function(){this.rows=this.dataSourceSettings.rows?this.dataSourceSettings.rows:[],this.columns=this.dataSourceSettings.columns?this.dataSourceSettings.columns:[],this.filters=this.dataSourceSettings.filters?this.dataSourceSettings.filters:[],this.values=this.dataSourceSettings.values?this.dataSourceSettings.values:[];var e=i.i(r.extend)([],this.rows,null,!0);e=e.concat(this.columns,this.values,this.filters);for(var t=e.length;t--;)this.dataFields[e[t].name]=e[t],"[measures]"===e[t].name.toLowerCase()?this.isMeasureAvail=!0:this.selectedItems.push(e[t].name);if(this.mappingFields={},this.dataSourceSettings.fieldMapping)for(var n=0,a=this.dataSourceSettings.fieldMapping;n<a.length;n++){var o=a[n];this.mappingFields[o.name]=o}if(!this.isMeasureAvail&&this.values.length>0){var s={name:"[Measures]",caption:"Measures",showRemoveIcon:!0,allowDragAndDrop:!0};"row"===this.valueAxis?this.rows.push(s):this.columns.push(s),this.isMeasureAvail=!0}},e.prototype.getAggregateType=function(e,t){var i;switch(t){case"1":i="Sum";break;case"2":i="Count";break;case"3":i="Min";break;case"4":i="Max";break;case"5":i="Avg";break;case"8":i="DistinctCount";break;case"127":i="CalculatedField";break;default:i=void 0}return i||void 0},e.prototype.getUniqueName=function(e){for(var t=e,i=0,r=this.calculatedFieldSettings;i<r.length;i++){var n=r[i];if(e===(n.formula.toLowerCase().indexOf("measure")>-1?"[Measures].":n.hierarchyUniqueName+".")+"["+n.name+"]"){t=n.name;break}}return t},e.prototype.updateFilterItems=function(e){var t=i.i(r.extend)([],this.rows,null,!0);t=t.concat(this.columns);for(var a=0,o=e;a<o.length;a++){var s=o[a];if("Include"===s.type&&this.allowMemberFilter){var l=this.fieldList[s.name].members,d=l&&Object.keys(l).length>0;this.fieldList[s.name].actualFilter=s.items.slice();var p=i.i(r.extend)([],s.items,null,!0);if(d)for(var u=0;u<p.length;){var h=[];h=this.getParentNode(p[u],l,h);for(var c=0,g=h;c<g.length;c++){var m=g[c],f=n.a.inArray(m,s.items);-1!==f&&s.items.splice(f,1)}u++}for(var v=[],S=0,y=s.items;S<y.length;S++){var b=y[S];v.push(b),d?this.fieldList[s.name].filter.push(l[b].caption):this.fieldList[s.name].filter.push(b)}this.filterMembers[s.name]=v,this.fieldList[s.name].isExcelFilter=!1}else if((this.allowValueFilter||this.allowLabelFilter)&&-1!==["Date","Label","Number","Value"].indexOf(s.type))for(var C=0,x=t;C<x.length;C++){var w=x[C];if(w.name===s.name){var T=this.filterMembers[s.name];T&&"object"==typeof T[0]&&T[0].type===s.type?T[T.length]=s:this.filterMembers[s.name]=[s],this.fieldList[s.name].isExcelFilter=!0;break}}}},e.prototype.getParentNode=function(e,t,i){if(t[e].parent&&e!==t[e].parent){var r=t[e].parent;i.push(r),this.getParentNode(r,t,i)}return i},e.prototype.updateDrilledItems=function(e){var t=[],n=i.i(r.extend)([],this.rows,null,!0);n=n.concat(this.columns);for(var a=0,o=e;a<o.length;a++)for(var s=o[a],l=0,d=n;l<d.length;l++){var p=d[l];if(s.name===p.name){t.push(s);break}}return t},e.prototype.getDrillThroughData=function(e,t){for(var i,r=this.tupColumnInfo[e.colOrdinal]&&this.tupColumnInfo[e.colOrdinal].uNameCollection&&""!==this.tupColumnInfo[e.colOrdinal].uNameCollection?this.tupColumnInfo[e.colOrdinal].uNameCollection.split("::[").map(function(e){return"["===e[0]?e:"["+e}):[],n=this.tupRowInfo[e.rowOrdinal]&&this.tupRowInfo[e.rowOrdinal].uNameCollection&&""!==this.tupRowInfo[e.rowOrdinal].uNameCollection?this.tupRowInfo[e.rowOrdinal].uNameCollection.split("::[").map(function(e){return"["===e[0]?e:"["+e}):[],a=[],o="",s=0;s<this.filters.length;s++)if(i=this.filterMembers[this.filters[s].name]){for(var l=0;l<i.length;l++)o+=i[l],o=l<i.length-1?o+",":o+"";a[s]=o,o=""}for(var s=0;s<a.length;s++)o=""===o?"{"+a[s]+"}":o+",{"+a[s]+"}";for(var d="",p="",s=0;s<r.length;s++)d=(d.length>0?d+",":"")+(r[s].split("~~").length>1?r[s].split("~~")[r[s].split("~~").length-1]:r[s]);for(var s=0;s<n.length;s++)p=(p.length>0?p+",":"")+(n[s].split("~~").length>1?n[s].split("~~")[n[s].split("~~").length-1]:n[s]);var u="DRILLTHROUGH MAXROWS "+t+" Select("+(d.length>0?d:"")+(d.length>0&&p.length>0?",":"")+(p.length>0?p:"")+") on 0 from "+(""===o?"["+this.dataSourceSettings.cube+"]":"(SELECT ("+o+") ON COLUMNS FROM ["+this.dataSourceSettings.cube+"])");u=u.replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;");var h=this.getSoapMsg(this.dataSourceSettings,u),c=this.getConnectionInfo(this.dataSourceSettings.url,this.dataSourceSettings.localeIdentifier);this.doAjaxPost("POST",c.url,h,this.drillThroughSuccess.bind(this),{dataSourceSettings:this.dataSourceSettings,action:"drillThrough"})},e.prototype.drillThroughSuccess=function(e){var t=[].slice.call(e.querySelectorAll("row")),i="";if(t.length>0){for(var r=[],n=0;n<t.length;){for(var a=[].slice.call(t[n].children),o=0;o<a.length;)r.push('"'+a[o].tagName+'":"'+a[o].textContent+'"'),o++;n++}for(var s=r[0],l=0;l<r.length;)Object.keys(JSON.parse("[{"+r[l]+"}]")[0])[0]!==Object.keys(JSON.parse("[{"+s+"}]")[0])[0]?(i+=","+r[l],l++):(i+=""===i?"[{"+r[l]:"}, {"+r[l],l++);i+="}]"}else for(var d=[].slice.call(e.querySelectorAll("faultstring")),n=0;n<d.length;)i+=d[n].textContent,n++;this.gridJSON=i},e.prototype.getFilterMembers=function(e,t,i,r,n){var a,o=this.fieldList[t].levels,s=this.fieldList[t].levelCount;return a=n?"Descendants({"+o[s].id+"}, "+o[i-1].id+", "+(i-s==1?"SELF)":"SELF_AND_BEFORE)"):t+", Descendants({"+o[0].id+"}, "+o[i-1].id+", SELF_AND_BEFORE)",this.fieldList[t].levelCount=i,r||this.getMembers(e,t,!1,a,n),a},e.prototype.getMembers=function(e,t,i,r,n){var a,o="DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE",s=this.fieldList[t].hasAllMember,l=(s?t:t+".LEVELS(0)").replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;");a=i?"SELECT ({"+l+".ALLMEMBERS})"+o+" ON 0 FROM ["+e.cube+"]":"SELECT ({"+(r||(s?l+", "+l+".CHILDREN":l+".ALLMEMBERS"))+"})"+o+" ON 0 FROM ["+e.cube+"]";var d=this.getSoapMsg(e,a),p=this.getConnectionInfo(e.url,e.localeIdentifier);n||(this.fieldList[t].filterMembers=[],this.fieldList[t].childMembers=[],this.fieldList[t].searchMembers=[],this.fieldList[t].members={},this.fieldList[t].currrentMembers={}),this.doAjaxPost("POST",p.url,d,this.generateMembers.bind(this),{dataSourceSettings:e,fieldName:t,loadLevelMembers:n,action:"fetchMembers"})},e.prototype.getChildMembers=function(e,t,i){var r="SELECT ({"+t.replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;")+".CHILDREN})DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+e.cube+"]",n=this.getSoapMsg(e,r),a=this.getConnectionInfo(e.url,e.localeIdentifier);this.doAjaxPost("POST",a.url,n,this.generateMembers.bind(this),{dataSourceSettings:e,fieldName:i,action:"fetchChildMembers"})},e.prototype.getCalcChildMembers=function(e,t){this.calcChildMembers=[];var i="SELECT ({"+t.replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;")+".MEMBERS})DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+e.cube+"]",r=this.getConnectionInfo(e.url,e.localeIdentifier),n=this.getSoapMsg(e,i);this.doAjaxPost("POST",r.url,n,this.generateMembers.bind(this),{dataSourceSettings:e,action:"fetchCalcChildMembers"})},e.prototype.getSearchMembers=function(e,t,i,r,n,a){if(this.fieldList[t].searchMembers=[],this.fieldList[t].currrentMembers={},""!==i){var o=t.replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"),s="WITH SET [SearchMembersSet] AS &#39;FILTER("+(n?o+".ALLMEMBERS, ":"{"+(a>1?this.getFilterMembers(e,t,a,!0):o+", "+o+".CHILDREN")+"},")+"(INSTR(1, "+o+'.CurrentMember.member_caption, "'+i+'") > 0))&#39;SET [SearchParentsSet] AS &#39;GENERATE([SearchMembersSet], ASCENDANTS([SearchMembersSet].Current))&#39;SET [SearchSet] AS &#39;HIERARCHIZE(DISTINCT({[SearchMembersSet], [SearchParentsSet]}))&#39;SELECT SUBSET([SearchSet], 0, '+r+")DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE ON 0 FROM ["+e.cube+"]",l=this.getSoapMsg(e,s),d=this.getConnectionInfo(e.url,e.localeIdentifier);this.doAjaxPost("POST",d.url,l,this.generateMembers.bind(this),{dataSourceSettings:e,fieldName:t,action:"fetchSearchMembers"})}},e.prototype.generateMembers=function(e,t,i){for(var r,n=[].slice.call(e.querySelectorAll('Axis[name="Axis0"] Tuple')),a=i.fieldName,o={},s=0,l=n;s<l.length;s++){var d=l[s],p=d.querySelector("Member"),u=p.querySelector("MEMBER_TYPE").textContent,h=p.querySelector("UName").textContent,c=p.querySelector("Caption").textContent,g=p.querySelector("PARENT_UNIQUE_NAME")?p.querySelector("PARENT_UNIQUE_NAME").textContent:"",m={"data-fieldName":a,"data-memberId":h};if(""===g&&"1"===u)o={hasChildren:!!d.querySelector("CHILDREN_CARDINALITY")&&"0"!==d.querySelector("CHILDREN_CARDINALITY").textContent,isSelected:!1,id:h,tag:h,name:c,caption:c,htmlAttributes:m},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[a].members[h]={name:h,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1},this.fieldList[a].filterMembers.push(o),this.fieldList[a].childMembers.push(o)):"fetchSearchMembers"===i.action?(this.fieldList[a].currrentMembers[h]={name:h,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1},this.fieldList[a].searchMembers.push(o),o.expanded=!0):this.calcChildMembers.push(o);else if(""!==g&&"1"===u)if(g===r&&"1"===u)o={hasChildren:!!d.querySelector("CHILDREN_CARDINALITY")&&"0"!==d.querySelector("CHILDREN_CARDINALITY").textContent,id:h,name:c,isSelected:!1,caption:c,htmlAttributes:m,tag:h},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[a].filterMembers.push(o),this.fieldList[a].childMembers.push(o),this.fieldList[a].members[h]={name:h,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1}):"fetchSearchMembers"===i.action?(o.expanded=!0,this.fieldList[a].searchMembers.push(o),this.fieldList[a].currrentMembers[h]={name:h,caption:c,parent:void 0,isNodeExpand:!1,isSelected:!1}):this.calcChildMembers.push(o);else{if("fetchMembers"===i.action&&this.fieldList[a].members[h])continue;var f=!!i.loadLevelMembers&&this.fieldList[a].members[g].isSelected;o={hasChildren:!!d.querySelector("CHILDREN_CARDINALITY")&&"0"!==d.querySelector("CHILDREN_CARDINALITY").textContent,htmlAttributes:m,isSelected:!1,id:h,pid:g,name:c,caption:c,tag:h},"fetchMembers"===i.action||"fetchChildMembers"===i.action?(this.fieldList[a].isHierarchy=!1,this.fieldList[a].filterMembers.push(o),this.fieldList[a].childMembers.push(o),this.fieldList[a].members[h]={name:h,caption:c,parent:g,isNodeExpand:!1,isSelected:f}):"fetchSearchMembers"===i.action?(this.fieldList[a].searchMembers.push(o),o.expanded=!0,this.fieldList[a].currrentMembers[h]={name:h,caption:c,parent:g,isNodeExpand:!1,isSelected:!1}):this.calcChildMembers.push(o)}else"2"===u&&(r=h)}},e.prototype.getFieldListItems=function(e,t,i){for(var r={},n=[],a=[].slice.call(e.querySelectorAll("row")),o=0,s=a;o<s.length;o++){var l=s[o],d=[].slice.call(l.querySelectorAll("ALL_MEMBER")).length>0,p=l.querySelector("DIMENSION_UNIQUE_NAME").textContent,u=l.querySelector("HIERARCHY_UNIQUE_NAME").textContent,h=p===u&&"[measures]"!==p.toLowerCase()&&"[measures]"!==u.toLowerCase();n.push({pid:this.isMondrian||h?p+"~#^Dim":p,id:u,name:l.querySelector("HIERARCHY_CAPTION").textContent,caption:l.querySelector("HIERARCHY_CAPTION").textContent,tag:u,hasAllMember:d,allMember:d?l.querySelectorAll("ALL_MEMBER")[0].textContent:void 0,type:"string"})}r={hierarchy:n,hierarchySuccess:e,measures:[]},this.fieldListObj=r;var c={catalog:i.dataSourceSettings.catalog,cube:i.dataSourceSettings.cube,url:i.dataSourceSettings.url,LCID:i.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_DIMENSIONS",roles:i.dataSourceSettings.roles};this.getTreeData(c,this.loadDimensionElements.bind(this),i)},e.prototype.loadCalculatedMemberElements=function(e){if(e.length>0){var t=this.fieldListData,i={hasChildren:!0,isSelected:!1,id:"[Calculated Members].[_0]",name:"[Calculated Members].[_0]",caption:"Calculated Members",spriteCssClass:"e-calcMemberGroupCDB "+o.a,tag:"[Calculated Members].[_0]",type:"string"};t.length>0&&"[measures]"===t[0].id.toLowerCase()&&t.splice(0,0,i);for(var r=0,n=e;r<n.length;r++){var a=n[r];if(!this.fieldList[a.name]){var s=a.formula,l=s.toLowerCase().indexOf("measure")>-1?"[Measures].":a.hierarchyUniqueName+".",d=l+"["+a.name+"]",p=this.dataFields[a.name]&&this.dataFields[a.name].caption?this.dataFields[a.name].caption:this.mappingFields[a.name]&&this.mappingFields[a.name].caption?this.mappingFields[a.name].caption:a.name,u=a.formatString,h={hasChildren:!1,isSelected:!1,id:a.name,pid:"[Calculated Members].[_0]",name:a.name,caption:p,spriteCssClass:"e-calc-member "+(s.toLowerCase().indexOf("measure")>-1?"e-calc-measure-icon":"e-calc-dimension-icon")+" "+o.a,tag:d,formula:s,formatString:u,aggregateType:void 0,type:"CalculatedField",filter:[],dateMember:[],sort:"Ascending",actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},isHierarchy:!0,isExcelFilter:!1,isCalculatedField:!0,allowDragAndDrop:this.dataFields[a.name]?this.dataFields[a.name].allowDragAndDrop:!this.mappingFields[a.name]||this.mappingFields[a.name].allowDragAndDrop,showFilterIcon:this.dataFields[a.name]?this.dataFields[a.name].showFilterIcon:!this.mappingFields[a.name]||this.mappingFields[a.name].showFilterIcon,showSortIcon:this.dataFields[a.name]?this.dataFields[a.name].showSortIcon:!this.mappingFields[a.name]||this.mappingFields[a.name].showSortIcon,showEditIcon:this.dataFields[a.name]?this.dataFields[a.name].showEditIcon:!this.mappingFields[a.name]||this.mappingFields[a.name].showEditIcon,showRemoveIcon:this.dataFields[a.name]?this.dataFields[a.name].showRemoveIcon:!this.mappingFields[a.name]||this.mappingFields[a.name].showRemoveIcon,showValueTypeIcon:this.dataFields[a.name]?this.dataFields[a.name].showValueTypeIcon:!this.mappingFields[a.name]||this.mappingFields[a.name].showValueTypeIcon,showSubTotals:this.dataFields[a.name]?this.dataFields[a.name].showSubTotals:!this.mappingFields[a.name]||this.mappingFields[a.name].showSubTotals,fieldType:s.toLowerCase().indexOf("measure")>-1?"Measure":"Dimension",parentHierarchy:s.toLowerCase().indexOf("measure")>-1?void 0:a.hierarchyUniqueName};t.push(h),this.fieldList[h.id]=h,this.updateMembersOrder(a.name)}}}},e.prototype.loadDimensionElements=function(e,t,n){for(var a=[],s=[].slice.call(e.querySelectorAll("row")),l={},d=0,p=s;d<p.length;d++){var u=p[d],h=u.querySelector("DIMENSION_UNIQUE_NAME").textContent,c=u.querySelector("DEFAULT_HIERARCHY").textContent,g=u.querySelector("DIMENSION_CAPTION").textContent,m=h===c;h.toLowerCase().indexOf("[measure")>=0?l={hasChildren:!0,isSelected:!1,id:h,name:h,caption:g,spriteCssClass:"[measures]"===h.toLowerCase()?"e-measureGroupCDB-icon "+o.a:"e-dimensionCDB-icon "+o.a,tag:h,type:"string"}:i.i(r.isNullOrUndefined)(s[0].querySelector("HIERARCHY_CAPTION"))&&a.push({hasChildren:!0,isSelected:!1,id:this.isMondrian||m?h+"~#^Dim":h,name:h,caption:g,spriteCssClass:"e-dimensionCDB-icon "+o.a,tag:h,defaultHierarchy:u.querySelector("DEFAULT_HIERARCHY").textContent,type:"string"})}a.splice(0,0,l),this.fieldListData=a;var f={catalog:n.dataSourceSettings.catalog,cube:n.dataSourceSettings.cube,url:n.dataSourceSettings.url,LCID:n.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_SETS",roles:n.dataSourceSettings.roles};this.getTreeData(f,this.loadNamedSetElements.bind(this),n)},e.prototype.loadNamedSetElements=function(e,t,n){var a=i.i(r.extend)([],this.rows,null,!0);a=a.concat(this.columns,this.filters);for(var s=this.fieldListData,l=[],d=0,p=a;d<p.length;d++){var u=p[d];l.push(u.name)}for(var h=[],c=[].slice.call(e.querySelectorAll("row")),g=0,m=c;g<m.length;g++){var u=m[g];h.indexOf(u.querySelector("DIMENSIONS").textContent.split(".")[0])>=0||(s.push({hasChildren:!0,isSelected:!1,pid:u.querySelector("DIMENSIONS").textContent.split(".")[0],id:u.querySelector("SET_DISPLAY_FOLDER").textContent+"_"+u.querySelector("DIMENSIONS").textContent.split(".")[0],name:u.querySelector("SET_DISPLAY_FOLDER").textContent,spriteCssClass:"e-folderCDB-icon "+o.a+" namedSets",caption:u.querySelector("SET_DISPLAY_FOLDER").textContent,type:"string"}),h.push(u.querySelector("DIMENSIONS").textContent.split(".")[0]));var f="["+u.querySelector("SET_NAME").textContent.trim()+"]",v={hasChildren:!0,isNamedSets:!0,isSelected:l.indexOf("["+u.querySelector("SET_NAME").textContent+"]")>=0,pid:u.querySelector("SET_DISPLAY_FOLDER").textContent+"_"+u.querySelector("DIMENSIONS").textContent.split(".")[0],id:f,name:u.querySelector("SET_CAPTION").textContent,caption:this.dataFields[f]&&this.dataFields[f].caption?this.dataFields[f].caption:this.mappingFields[f]&&this.mappingFields[f].caption?this.mappingFields[f].caption:u.querySelector("SET_CAPTION").textContent,spriteCssClass:"e-namedSetCDB-icon "+o.a,tag:u.querySelector("EXPRESSION").textContent,type:"string",filter:[],dateMember:[],actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},isHierarchy:!0,isExcelFilter:!1,allowDragAndDrop:this.dataFields[f]?this.dataFields[f].allowDragAndDrop:!this.mappingFields[f]||this.mappingFields[f].allowDragAndDrop,showFilterIcon:this.dataFields[f]?this.dataFields[f].showFilterIcon:!this.mappingFields[f]||this.mappingFields[f].showFilterIcon,showSortIcon:this.dataFields[f]?this.dataFields[f].showSortIcon:!this.mappingFields[f]||this.mappingFields[f].showSortIcon,showEditIcon:this.dataFields[f]?this.dataFields[f].showEditIcon:!this.mappingFields[f]||this.mappingFields[f].showEditIcon,showRemoveIcon:this.dataFields[f]?this.dataFields[f].showRemoveIcon:!this.mappingFields[f]||this.mappingFields[f].showRemoveIcon,showValueTypeIcon:this.dataFields[f]?this.dataFields[f].showValueTypeIcon:!this.mappingFields[f]||this.mappingFields[f].showValueTypeIcon,showSubTotals:this.dataFields[f]?this.dataFields[f].showSubTotals:!this.mappingFields[f]||this.mappingFields[f].showSubTotals};s.push(v),this.fieldList[f]=v,this.updateMembersOrder(f)}n.hierarchy=this.fieldListData,n.hierarchySuccess=this.fieldListObj.hierarchySuccess,this.loadHierarchyElements(n)},e.prototype.loadHierarchyElements=function(e){var t=e.hierarchySuccess,n=e.hierarchy,a=i.i(r.extend)([],this.rows,null,!0);a=a.concat(this.columns,this.filters);for(var s=[],l=0,d=a;l<d.length;l++){var p=d[l];s.push(p.name)}for(var u=[].slice.call(t.querySelectorAll("row")),h=0,c=u;h<c.length;h++){var p=c[h],g=p.querySelector("DIMENSION_UNIQUE_NAME").textContent,m=p.querySelector("HIERARCHY_UNIQUE_NAME").textContent,f=[].slice.call(p.querySelectorAll("ALL_MEMBER")).length>0,v=void 0;if(f){var S=p.querySelectorAll("ALL_MEMBER")[0].textContent.replace(/[\]']+/g,"").split(".");v=S[S.length-1].trim()}else v=void 0;for(var y=p.querySelector("HIERARCHY_DISPLAY_FOLDER")?p.querySelector("HIERARCHY_DISPLAY_FOLDER").textContent:"",b=[],C=0,x=n;C<x.length;C++){var w=x[C];w.tag===g&&b.push(w)}if(b.length>0){var T=g===m&&"[measures]"!==g.toLowerCase()&&"[measures]"!==m.toLowerCase();if("[measures]"!==g.toLowerCase()&&"[measures]"!==m.toLowerCase()){var M=g+(this.isMondrian||T?"~#^Dim":"");if(""!==y){for(var _=g+(this.isMondrian||T?"~#^Dim":"")+"_"+y,D=[],O=0,P=n;O<P.length;O++){var w=P[O];w.tag===_&&w.pid===M&&D.push(w)}if(0===D.length){var N={hasChildren:!0,isSelected:!1,pid:g+(this.isMondrian||T?"~#^Dim":""),id:_,name:y,spriteCssClass:"e-folderCDB-icon "+o.a,tag:_,caption:y,type:"string"};n.push(N)}M=_}var E={hasChildren:!p.querySelector("HIERARCHY_ORIGIN")||"2"!==p.querySelector("HIERARCHY_ORIGIN").textContent&&"6"!==p.querySelector("HIERARCHY_ORIGIN").textContent,isSelected:s.indexOf(m)>=0,pid:M,id:m,name:p.querySelector("HIERARCHY_CAPTION").textContent,spriteCssClass:(p.querySelector("HIERARCHY_ORIGIN")?"2"!==p.querySelector("HIERARCHY_ORIGIN").textContent&&"6"!==p.querySelector("HIERARCHY_ORIGIN").textContent?"e-hierarchyCDB-icon":"e-attributeCDB-icon":"e-hierarchyCDB-icon")+" "+o.a,hasAllMember:f,allMember:v,tag:m,caption:this.dataFields[m]&&this.dataFields[m].caption?this.dataFields[m].caption:this.mappingFields[m]&&this.mappingFields[m].caption?this.mappingFields[m].caption:p.querySelector("HIERARCHY_CAPTION").textContent,type:"string",filter:[],dateMember:[],sort:this.enableSort?this.sortObject[m]?this.sortObject[m]:"Ascending":"None",actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},levels:[],levelCount:1,isHierarchy:!!p.querySelector("HIERARCHY_ORIGIN")&&("2"===p.querySelector("HIERARCHY_ORIGIN").textContent||"6"===p.querySelector("HIERARCHY_ORIGIN").textContent),isExcelFilter:!1,allowDragAndDrop:this.dataFields[m]?this.dataFields[m].allowDragAndDrop:!this.mappingFields[m]||this.mappingFields[m].allowDragAndDrop,showFilterIcon:this.dataFields[m]?this.dataFields[m].showFilterIcon:!this.mappingFields[m]||this.mappingFields[m].showFilterIcon,showSortIcon:this.dataFields[m]?this.dataFields[m].showSortIcon:!this.mappingFields[m]||this.mappingFields[m].showSortIcon,showEditIcon:this.dataFields[m]?this.dataFields[m].showEditIcon:!this.mappingFields[m]||this.mappingFields[m].showEditIcon,showRemoveIcon:this.dataFields[m]?this.dataFields[m].showRemoveIcon:!this.mappingFields[m]||this.mappingFields[m].showRemoveIcon,showValueTypeIcon:this.dataFields[m]?this.dataFields[m].showValueTypeIcon:!this.mappingFields[m]||this.mappingFields[m].showValueTypeIcon,showSubTotals:this.dataFields[m]?this.dataFields[m].showSubTotals:!this.mappingFields[m]||this.mappingFields[m].showSubTotals};n.push(E),this.fieldList[m]=E,this.updateMembersOrder(m)}}}var I={catalog:e.dataSourceSettings.catalog,cube:e.dataSourceSettings.cube,url:e.dataSourceSettings.url,LCID:e.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_LEVELS",roles:e.dataSourceSettings.roles};this.getTreeData(I,this.loadLevelElements.bind(this),e)},e.prototype.updateMembersOrder=function(e){for(var t=0,i=this.sortSettings;t<i.length;t++){var r=i[t];if(e===r.name&&r.membersOrder){this.fieldList[e].membersOrder=r.membersOrder;break}}},e.prototype.loadLevelElements=function(e,t,i){var r=[],n=this.fieldListData;r=[];for(var a=[].slice.call(e.querySelectorAll("row")),s=0,l=a;s<l.length;s++){var d=l[s];if(1!==parseInt(d.querySelector("LEVEL_TYPE").textContent,10)&&"[measures]"!==d.querySelector("HIERARCHY_UNIQUE_NAME").textContent.toLowerCase()){var p=d.querySelector("HIERARCHY_UNIQUE_NAME").textContent,u=d.querySelector("LEVEL_UNIQUE_NAME").textContent,h=d.querySelector("LEVEL_CAPTION").textContent,c={hasChildren:!1,isChecked:!1,isSelected:this.fieldList[p].isSelected,pid:p,id:u,name:h,tag:u,spriteCssClass:"e-level-members e-hierarchy-level-"+parseInt(d.querySelector("LEVEL_NUMBER").textContent,10)+"-icon "+o.a,caption:h,type:"string"};r.push(c),this.fieldList[p]&&this.fieldList[p].spriteCssClass&&-1===this.fieldList[p].spriteCssClass.indexOf("e-attributeCDB-icon")?(this.fieldList[p].levels.push(c),this.fieldList[p].isHierarchy=!1):this.fieldList[p].isHierarchy=!0}}this.fieldListData=n=n.concat(r);var g={catalog:i.dataSourceSettings.catalog,cube:i.dataSourceSettings.cube,url:i.dataSourceSettings.url,LCID:i.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_MEASURES",roles:i.dataSourceSettings.roles};this.getTreeData(g,this.loadMeasureElements.bind(this),i)},e.prototype.loadMeasureElements=function(e,t,n){for(var a,s=this.fieldListData,l=[],d=i.i(r.extend)([],this.values,null,!0),p=[],u=0,h=d;u<h.length;u++){var c=h[u];p.push(c.name)}if("en-US"!==this.locale){var g={catalog:n.dataSourceSettings.catalog,cube:n.dataSourceSettings.cube,url:n.dataSourceSettings.url,LCID:n.dataSourceSettings.localeIdentifier.toString(),request:"MDSCHEMA_MEASUREGROUPS",roles:n.dataSourceSettings.roles};this.getTreeData(g,this.loadMeasureGroups.bind(this),n)}for(var m=[].slice.call(e.querySelectorAll("row")),f=0,v=m;f<v.length;f++){var c=v[f],S=i.i(r.isNullOrUndefined)(c.querySelector("MEASUREGROUP_NAME"))?"":c.querySelector("MEASUREGROUP_NAME").textContent,y=c.querySelector("MEASURE_UNIQUE_NAME").textContent,b=c.querySelector("DEFAULT_FORMAT_STRING")?c.querySelector("DEFAULT_FORMAT_STRING").textContent:"#,#",C=c.querySelector("MEASURE_AGGREGATOR")?c.querySelector("MEASURE_AGGREGATOR").textContent:"1";if(!(l.indexOf(S)>=0)){if("en-US"!==this.locale){for(var x=[],w=0,T=this.fieldListObj.measuresGroups;w<T.length;w++){var M=T[w];M.querySelector("MEASUREGROUP_NAME").textContent===S&&x.push(M)}a=x.length>0?x[0].querySelector("MEASUREGROUP_CAPTION").textContent:S}else a=S;""!==S&&(s.push({hasChildren:!0,isChecked:!1,isSelected:!1,pid:"[Measures]",id:S,name:a,spriteCssClass:"e-measureCDB e-folderCDB-icon "+o.a,tag:S,caption:a,aggregateType:this.getAggregateType(S,C),type:"string"}),l.push(S))}var _={hasChildren:!1,isSelected:p.indexOf(y)>=0,pid:""===S?"[Measures]":S,id:y,name:c.querySelector("MEASURE_CAPTION").textContent,spriteCssClass:"e-measure-icon "+o.a,tag:y,caption:this.dataFields[y]&&this.dataFields[y].caption?this.dataFields[y].caption:this.mappingFields[y]&&this.mappingFields[y].caption?this.mappingFields[y].caption:c.querySelector("MEASURE_CAPTION").textContent,aggregateType:this.getAggregateType(y,C),type:"number",filter:[],actualFilter:[],filterMembers:[],childMembers:[],searchMembers:[],members:{},currrentMembers:{},formatString:b,allowDragAndDrop:this.dataFields[y]?this.dataFields[y].allowDragAndDrop:!this.mappingFields[y]||this.mappingFields[y].allowDragAndDrop,showFilterIcon:this.dataFields[y]?this.dataFields[y].showFilterIcon:!this.mappingFields[y]||this.mappingFields[y].showFilterIcon,showSortIcon:this.dataFields[y]?this.dataFields[y].showSortIcon:!this.mappingFields[y]||this.mappingFields[y].showSortIcon,showEditIcon:this.dataFields[y]?this.dataFields[y].showEditIcon:!this.mappingFields[y]||this.mappingFields[y].showEditIcon,showRemoveIcon:this.dataFields[y]?this.dataFields[y].showRemoveIcon:!this.mappingFields[y]||this.mappingFields[y].showRemoveIcon,showValueTypeIcon:this.dataFields[y]?this.dataFields[y].showValueTypeIcon:!this.mappingFields[y]||this.mappingFields[y].showValueTypeIcon,showSubTotals:this.dataFields[y]?this.dataFields[y].showSubTotals:!this.mappingFields[y]||this.mappingFields[y].showSubTotals};s.push(_),this.fieldList[y]=_,p.indexOf(y)>=0&&p.splice(p.indexOf(y),1)}this.measureReportItems=p},e.prototype.loadMeasureGroups=function(e){i.i(r.isNullOrUndefined)(this.fieldListObj)&&(this.fieldListObj={}),this.fieldListObj.measuresGroups=[].slice.call(e.querySelectorAll("row"))},e.prototype.doAjaxPost=function(e,t,i,n,a){new r.Ajax({mode:!1,contentType:"text/xml",url:t,data:i,dataType:"xml",type:e,beforeSend:this.beforeSend.bind(this),onSuccess:function(e,t){var i=new DOMParser,r=i.parseFromString(e,"text/xml");n(r,t,a)},onFailure:function(e){return e}}).send()},e.prototype.beforeSend=function(e){this.dataSourceSettings.authentication.userName&&this.dataSourceSettings.authentication.password&&e.httpRequest.setRequestHeader("Authorization","Basic "+btoa(this.dataSourceSettings.authentication.userName+":"+this.dataSourceSettings.authentication.password))},e.prototype.getSoapMsg=function(e,t){var i="",r="",n=this.getConnectionInfo(e.url,e.localeIdentifier);return this.isMondrian?(r="",i='<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement><![CDATA['+t+"]]></Statement></Command><Properties><PropertyList><DataSourceInfo>"+r+"</DataSourceInfo><Catalog>"+e.catalog+"</Catalog><AxisFormat>TupleFormat</AxisFormat><Content>Data</Content><Format>Multidimensional</Format></PropertyList></Properties></Execute></SOAP-ENV:Body></SOAP-ENV:Envelope>"):i='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement> '+t+" </Statement> </Command> <Properties> <PropertyList> <Catalog>"+e.catalog+"</Catalog> <LocaleIdentifier>"+n.LCID+"</LocaleIdentifier>"+(e.roles?"<Roles>"+e.roles+"</Roles>":"")+"</PropertyList> </Properties> </Execute> </Body> </Envelope>",i},e.prototype.getConnectionInfo=function(e,t){var n={url:"",LCID:i.i(r.isNullOrUndefined)(t)?"1033":t.toString()};if(""!==e)for(var a=0,o=e.split(";");a<o.length;a++){var s=o[a];s.toLowerCase().indexOf("locale")<0&&0===n.url.length?n.url=s:s.toLowerCase().indexOf("locale")>=0&&(n.LCID=s.replace(/ /g,"").split("=")[1])}return n},e.prototype.getMDXQuery=function(e){return a.a.getCellSets(e,this,!0,void 0,!0),this.mdxQuery},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(27),n=i(26),a=i(28),o=i(25),s=i(33),l=i(34),d=function(){function e(e){return this.currentTreeItems=[],this.savedTreeFilterPos={},this.currentTreeItemsPos={},this.searchTreeItems=[],this.isDataOverflow=!1,this.isDateField=!1,this.element=e.element,this.moduleName=e.moduleName,this.dataSourceSettings=e.dataSourceSettings,this.engineModule=e.pivotEngine,this.enableRtl=e.enableRtl,this.enableHtmlSanitizer=e.enableHtmlSanitizer,this.isAdaptive=e.isAdaptive,this.renderMode=e.renderMode,this.parentID=e.id,this.localeObj=e.localeObj,this.dataType=e.dataType,this.cssClass=e.cssClass,this.nodeStateModified=new a.a(this),this.dataSourceUpdate=new o.a(this),this.eventBase=new n.a(this),this.filterDialog=new l.a(this),this.errorDialog=new s.a(this),this.keyboardModule=new r.a(this),this}return e.prototype.destroy=function(){this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return u});var r=i(0),n=(i.n(r),i(2)),a=i(5),o=(i.n(a),i(4)),s=(i.n(o),i(10)),l=(i.n(s),i(7)),d=(i.n(l),i(1)),p=i(3),u=function(){function e(e){this.menuInfo=[],this.stringAggregateTypes=["Count","DistinctCount"],this.parent=e}return e.prototype.render=function(e,t){this.parentElement=t,this.openContextMenu(e)},e.prototype.openContextMenu=function(e){var t=this,i=e.target.parentElement.getAttribute("data-uid"),r=p.a.getFieldInfo(i,this.parent);this.buttonElement=e.target.parentElement;var n="number"!==this.parent.engineModule.fieldList[i].type?1:0,a=this.getMenuItem(n).slice();if(this.parent.actionObj.actionName=d._78,this.parent.actionObj.fieldInfo=r.fieldItem,!this.parent.actionBeginMethod()){var o={cancel:!1,fieldName:i,aggregateTypes:a,displayMenuCount:7},s="pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent;try{s.trigger(d._10,o,function(i){if(!i.cancel){a=i.aggregateTypes,t.createContextMenu(n,a,i.displayMenuCount),t.currentMenu=e.target;var r=t.currentMenu.getBoundingClientRect();t.parent.enableRtl?t.menuInfo[n].open(r.top+(window.scrollY||document.documentElement.scrollTop),r.left-105):t.menuInfo[n].open(r.top+(window.scrollY||document.documentElement.scrollTop),r.left)}})}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.createContextMenu=function(e,t,n){var o=this,s=[];s[e]=[],this.menuInfo[e]&&!this.menuInfo[e].isDestroyed&&this.menuInfo[e].destroy();for(var l=[],d=0;d<t.length;d++){var p=t[d];e?this.stringAggregateTypes.indexOf(p)>-1&&l.indexOf(p)<0&&(s[e].push({text:this.parent.localeObj.getConstant(p),id:this.parent.element.id+"StringMenu_"+p}),l.push(p)):this.parent.getAllSummaryType().indexOf(p)>-1&&l.indexOf(p)<0&&(s[e].push({text:this.parent.localeObj.getConstant(p),id:this.parent.element.id+"_"+p}),l.push(p))}s[e].length>n&&(s[e].splice(n),s[e].push({text:this.parent.localeObj.getConstant("MoreOption"),id:this.parent.element.id+"_MoreOption"}));var u={items:s[e],enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:this.parent.cssClass,beforeOpen:this.beforeMenuOpen.bind(this,e),onClose:function(){i.i(r.select)("#"+o.buttonElement.id,o.parentElement).focus()},select:this.selectOptionInContextMenu.bind(this)},h=document.getElementById(this.parent.element.id+(e?"valueFieldStringContextMenu":"valueFieldContextMenu"));null!==h?h.innerHTML="":h=i.i(r.createElement)("ul",{id:this.parent.element.id+(e?"valueFieldStringContextMenu":"valueFieldContextMenu")}),this.parent.element.appendChild(h),this.menuInfo[e]=new a.ContextMenu(u),this.menuInfo[e].isStringTemplate=!0,this.menuInfo[e].appendTo(h)},e.prototype.getMenuItem=function(e){for(var t=[],i=0;i<this.parent.aggregateTypes.length;i++){var r=this.parent.aggregateTypes[i];e?this.stringAggregateTypes.indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r):this.parent.getAllSummaryType().indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r)}return t},e.prototype.beforeMenuOpen=function(e,t){t.element.style.zIndex=(this.menuInfo[e].element.style.zIndex+3).toString(),t.element.style.display="inline"},e.prototype.createValueSettingsDialog=function(e,t,a){var s=this;this.parentElement=t;var l=i.i(r.createElement)("div",{id:this.parentElement.id+"_ValueDialog",className:"e-value-field-settings",attrs:{"data-field":e.getAttribute("data-uid")?e.getAttribute("data-uid"):e.getAttribute("data-field")}});this.parentElement.appendChild(l);var d=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("valueFieldSettings"),content:this.createFieldOptions(e,a),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateValueSettings.bind(this),buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){d.hide()},buttonModel:{cssClass:n.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:"pivotfieldlist"!==this.parent.getModuleName()||"Popup"!==this.parent.renderMode,target:this.parentElement,overlayClick:function(){s.removeDialog()},close:this.removeDialog.bind(this),cssClass:this.parent.cssClass});d.isStringTemplate=!0,d.appendTo(l)},e.prototype.createFieldOptions=function(e,t){var a=e.getAttribute("data-caption"),o=t&&"MoreOption"!==t?t:e.getAttribute("data-type"),d=e.getAttribute("data-basefield"),p=e.getAttribute("data-baseitem");o="undefined"!==o.toString()?o:"Sum";for(var u=[],h=this.parent.aggregateTypes,c=[],g=0;g<h.length;g++)this.parent.getAllSummaryType().indexOf(h[g])>-1&&c.indexOf(h[g])<0&&(u.push({value:h[g],text:this.parent.localeObj.getConstant(h[g])}),c.push(h[g]));var m=["DifferenceFrom","PercentageOfDifferenceFrom"],f=["DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"],v=i.i(r.extend)([],this.parent.dataSourceSettings.rows,null,!0);v=v.concat(this.parent.dataSourceSettings.columns);for(var S=[],y=[],b=0,C=v;b<C.length;b++){var x=C[b],w=x.name,T=x.caption?x.caption:x.name;S.push({value:w,text:T})}0===Object.keys(S).length?(S.push({value:"",text:""}),d="",y=[]):(d=d&&"undefined"!==d.toString()&&"null"!==d.toString()?d:S[0].value,y=Object.keys(this.parent.engineModule.fieldList["undefined"!==d.toString()?d:S[0].value].formattedMembers)),p="undefined"!==p.toString()?p:y[0];var M=i.i(r.createElement)("div",{className:"e-value-field-div-content",id:this.parentElement.id+"_field_div_content",attrs:{"data-type":o,"data-caption":a,"data-basefield":d,"data-baseitem":p}}),_=i.i(r.createElement)("div",{className:"e-field-name-text-container"}),D=i.i(r.createElement)("div",{className:"e-field-option-container"}),O=i.i(r.createElement)("div",{className:"e-type-option-container"}),P=i.i(r.createElement)("div",{className:"e-base-field-option-container"}),N=i.i(r.createElement)("div",{className:"e-base-item-option-container"}),E=i.i(r.createElement)("div",{className:"e-field-name-title"});E.innerText=this.parent.localeObj.getConstant("sourceName")+" ";var I=i.i(r.createElement)("div",{className:"e-field-name-content"});I.innerText=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(e.getAttribute("data-uid")?e.getAttribute("data-uid"):e.getAttribute("data-field")):e.getAttribute("data-uid")?e.getAttribute("data-uid"):e.getAttribute("data-field"),this.buttonElement=this.buttonElement?this.buttonElement:document.querySelector("."+I.innerText);var F=i.i(r.createElement)("div",{className:"e-type-option-text"});F.innerText=this.parent.localeObj.getConstant("sourceCaption");var L=i.i(r.createElement)("div",{className:"e-base-field-option-text"});L.innerText=this.parent.localeObj.getConstant("summarizeValuesBy");var A=i.i(r.createElement)("div",{className:"e-base-item-option-text"});A.innerText=this.parent.localeObj.getConstant("baseField");var R=i.i(r.createElement)("div",{className:"e-type-option-text"});R.innerText=this.parent.localeObj.getConstant("baseItem");var k=i.i(r.createElement)("div",{className:"e-caption-input-container"}),j=i.i(r.createElement)("div",{id:this.parentElement.id+"_type_option"}),H=i.i(r.createElement)("div",{id:this.parentElement.id+"_base_field_option"}),q=i.i(r.createElement)("div",{id:this.parentElement.id+"_base_item_option"}),V=i.i(r.createElement)("input",{id:this.parentElement.id+"type_input_option",className:"e-caption-input-text",attrs:{type:"text"}});_.appendChild(E),_.appendChild(I),k.appendChild(F),k.appendChild(V),O.appendChild(L),P.appendChild(A),N.appendChild(R),O.appendChild(j),P.appendChild(H),N.appendChild(q),D.appendChild(_),D.appendChild(k),D.appendChild(O),D.appendChild(P),D.appendChild(N),M.appendChild(D);var B=this,U=new l.DropDownList({dataSource:u,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:o,cssClass:n._70+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){G.enabled=-1!==f.indexOf(e.value),z.enabled=-1!==m.indexOf(e.value),z.enabled&&1===z.dataSource.length&&(z.dataSource=y,z.dataBind())}});U.isStringTemplate=!0,U.appendTo(j);var G=new l.DropDownList({dataSource:S,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:d,enabled:-1!==f.indexOf(o),cssClass:n._70+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){y=Object.keys(B.parent.engineModule.fieldList[e.value].formattedMembers),z.dataSource=y,z.value=y[0],z.filterBarPlaceholder=B.parent.localeObj.getConstant("example")+" "+y[0],z.itemData=null,z.dataBind()}});G.isStringTemplate=!0,G.appendTo(H);var z=new l.DropDownList({dataSource:y,enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:p,allowFiltering:!0,filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+y[0],enabled:-1!==m.indexOf(o),cssClass:n._71+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%"});z.isStringTemplate=!0,z.appendTo(q);var W=new s.MaskedTextBox({placeholder:"Enter field caption",enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:a,width:"100%",cssClass:this.parent.cssClass});return W.isStringTemplate=!0,W.appendTo(V),M},e.prototype.selectOptionInContextMenu=function(e){if(null!==e.item.text){var t=this.currentMenu.parentElement,a=p.a.getFieldInfo(t?t.getAttribute("data-uid"):"",this.parent);if(this.parent.actionObj.actionName=d._78,this.parent.actionObj.fieldInfo=a.fieldItem,this.parent.actionBeginMethod())return;var o=e.item.id.split("_").pop();try{if("MoreOption"===o||"PercentageOfDifferenceFrom"===o||"PercentageOfParentTotal"===o||"DifferenceFrom"===o)this.createValueSettingsDialog(t,this.parentElement,o);else{var s=t.getAttribute("data-uid"),l=this.parent.dataSourceSettings.values,u=t.querySelector("."+n._72),h=e.item.text+" "+this.parent.localeObj.getConstant("of")+" "+this.parent.engineModule.fieldList[s].caption;h=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(h):h,u.innerText=h,u.setAttribute("title",h),t.setAttribute("data-type",o);for(var c=0;c<this.parent.dataSourceSettings.values.length;c++)if(this.parent.dataSourceSettings.values[c].name===s){var g=i.i(r.extend)({},l[c].properties?l[c].properties:l[c],null,!0);g.type=o,this.parent.engineModule.fieldList[s].aggregateType=o,l.splice(c,1,g),this.parent.lastAggregationInfo=g}this.updateDataSource()}}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.updateDataSource=function(e){this.parent.allowDeferLayoutUpdate&&"pivotview"!==this.parent.getModuleName()?"pivotfieldlist"===this.parent.getModuleName()&&"Popup"===this.parent.renderMode?(this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0),this.parent.pivotGridModule.notify(d._19,this),this.parent.pivotGridModule.engineModule=this.parent.engineModule):this.parent.triggerPopulateEvent():this.parent.updateDataSource(e)},e.prototype.updateValueSettings=function(){var e,t=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_ValueDialog",document),o.Dialog),a=t.element,d=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"type_input_option"),s.MaskedTextBox),u=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_type_option"),l.DropDownList),h=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_base_field_option"),l.DropDownList),c=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_base_item_option"),l.DropDownList),g=a.getAttribute("data-field");if(this.parentElement.querySelector("."+n._39)&&(e=this.parentElement.querySelector("."+n._39+"."+g.replace(/[^A-Z0-9]/gi,""))),e){var m=e.querySelector("."+n._72),f=this.parent.localeObj.getConstant(u.value)+" "+this.parent.localeObj.getConstant("of")+" "+d.value;f=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(f):f,m.innerText=f,m.setAttribute("title",f),e.setAttribute("data-type",u.value),e.setAttribute("data-caption",d.value),e.setAttribute("data-basefield",h.value),e.setAttribute("data-baseitem",c.value)}var v=p.a.getFieldByName(g,this.parent.dataSourceSettings.values);v=v.properties?v.properties:v,v.caption=d.value,v.type=u.value,v.baseField=h.value,v.baseItem=c.value,t.close(),this.parent.lastAggregationInfo=v,this.updateDataSource(!0)},e.prototype.removeDialog=function(){this.buttonElement&&i.i(r.select)("#"+this.buttonElement.id,this.parentElement)&&i.i(r.select)("#"+this.buttonElement.id,this.parentElement).focus();var e=i.i(r.select)("#"+this.parentElement.id+"_ValueDialog",document),t=e?i.i(r.getInstance)(e,o.Dialog):null;t&&!t.isDestroyed&&t.destroy(),document.getElementById(this.parentElement.id+"_ValueDialog")&&i.i(r.remove)(document.getElementById(this.parentElement.id+"_ValueDialog"))},e.prototype.destroy=function(){this.parent.isDestroyed||this.menuInfo&&(void 0===this.menuInfo[1]||this.menuInfo[1].isDestroyed||this.menuInfo[1].destroy(),void 0===this.menuInfo[0]||this.menuInfo[0].isDestroyed||this.menuInfo[0].destroy())},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"c",function(){return l}),i.d(t,"d",function(){return d}),i.d(t,"e",function(){return p}),i.d(t,"f",function(){return u}),i.d(t,"g",function(){return h}),i.d(t,"h",function(){return c}),i.d(t,"i",function(){return g}),i.d(t,"j",function(){return m}),i.d(t,"k",function(){return f}),i.d(t,"l",function(){return v}),i.d(t,"m",function(){return S}),i.d(t,"n",function(){return y});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),a=this&&this.__decorate||function(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)()],t.prototype,"caption",void 0),a([i.i(r.Property)("Sum")],t.prototype,"type",void 0),a([i.i(r.Property)()],t.prototype,"axis",void 0),a([i.i(r.Property)(!1)],t.prototype,"showNoDataItems",void 0),a([i.i(r.Property)()],t.prototype,"baseField",void 0),a([i.i(r.Property)()],t.prototype,"baseItem",void 0),a([i.i(r.Property)(!0)],t.prototype,"showSubTotals",void 0),a([i.i(r.Property)(!1)],t.prototype,"isNamedSet",void 0),a([i.i(r.Property)(!1)],t.prototype,"isCalculatedField",void 0),a([i.i(r.Property)(!0)],t.prototype,"showFilterIcon",void 0),a([i.i(r.Property)(!0)],t.prototype,"showSortIcon",void 0),a([i.i(r.Property)(!0)],t.prototype,"showRemoveIcon",void 0),a([i.i(r.Property)(!0)],t.prototype,"showValueTypeIcon",void 0),a([i.i(r.Property)(!0)],t.prototype,"showEditIcon",void 0),a([i.i(r.Property)(!0)],t.prototype,"allowDragAndDrop",void 0),a([i.i(r.Property)()],t.prototype,"dataType",void 0),a([i.i(r.Property)(!1)],t.prototype,"expandAll",void 0),a([i.i(r.Property)()],t.prototype,"groupName",void 0),t}(r.ChildProperty),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(o),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"backgroundColor",void 0),a([i.i(r.Property)()],t.prototype,"color",void 0),a([i.i(r.Property)()],t.prototype,"fontFamily",void 0),a([i.i(r.Property)()],t.prototype,"fontSize",void 0),t}(r.ChildProperty),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)("Include")],t.prototype,"type",void 0),a([i.i(r.Property)()],t.prototype,"items",void 0),a([i.i(r.Property)("DoesNotEquals")],t.prototype,"condition",void 0),a([i.i(r.Property)()],t.prototype,"value1",void 0),a([i.i(r.Property)()],t.prototype,"value2",void 0),a([i.i(r.Property)()],t.prototype,"measure",void 0),a([i.i(r.Property)(1)],t.prototype,"levelCount",void 0),a([i.i(r.Property)()],t.prototype,"selectedField",void 0),t}(r.ChildProperty),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"measure",void 0),a([i.i(r.Property)()],t.prototype,"label",void 0),a([i.i(r.Property)()],t.prototype,"conditions",void 0),a([i.i(r.Property)()],t.prototype,"value1",void 0),a([i.i(r.Property)()],t.prototype,"value2",void 0),a([i.i(r.Property)()],t.prototype,"style",void 0),a([i.i(r.Property)(!0)],t.prototype,"applyGrandTotals",void 0),t}(r.ChildProperty),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)("Ascending")],t.prototype,"order",void 0),a([i.i(r.Property)([])],t.prototype,"membersOrder",void 0),t}(r.ChildProperty),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)()],t.prototype,"minimumFractionDigits",void 0),a([i.i(r.Property)()],t.prototype,"maximumFractionDigits",void 0),a([i.i(r.Property)()],t.prototype,"minimumSignificantDigits",void 0),a([i.i(r.Property)()],t.prototype,"maximumSignificantDigits",void 0),a([i.i(r.Property)(!0)],t.prototype,"useGrouping",void 0),a([i.i(r.Property)()],t.prototype,"skeleton",void 0),a([i.i(r.Property)()],t.prototype,"type",void 0),a([i.i(r.Property)()],t.prototype,"currency",void 0),a([i.i(r.Property)()],t.prototype,"minimumIntegerDigits",void 0),a([i.i(r.Property)()],t.prototype,"format",void 0),t}(r.ChildProperty),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)()],t.prototype,"groupInterval",void 0),a([i.i(r.Property)()],t.prototype,"startingAt",void 0),a([i.i(r.Property)()],t.prototype,"endingAt",void 0),a([i.i(r.Property)("Date")],t.prototype,"type",void 0),a([i.i(r.Property)()],t.prototype,"rangeInterval",void 0),a([i.i(r.Property)()],t.prototype,"caption",void 0),a([i.i(r.Property)()],t.prototype,"customGroups",void 0),t}(r.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"groupName",void 0),a([i.i(r.Property)([])],t.prototype,"items",void 0),t}(r.ChildProperty),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)()],t.prototype,"formula",void 0),a([i.i(r.Property)()],t.prototype,"hierarchyUniqueName",void 0),a([i.i(r.Property)()],t.prototype,"formatString",void 0),t}(r.ChildProperty),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"name",void 0),a([i.i(r.Property)()],t.prototype,"items",void 0),a([i.i(r.Property)()],t.prototype,"delimiter",void 0),t}(r.ChildProperty),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"headerText",void 0),a([i.i(r.Property)(".")],t.prototype,"headerDelimiter",void 0),a([i.i(r.Property)("None")],t.prototype,"sortOrder",void 0),a([i.i(r.Property)()],t.prototype,"measure",void 0),t}(r.ChildProperty),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)()],t.prototype,"userName",void 0),a([i.i(r.Property)()],t.prototype,"password",void 0),t}(r.ChildProperty),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)("Local")],t.prototype,"mode",void 0),a([i.i(r.Property)()],t.prototype,"catalog",void 0),a([i.i(r.Property)()],t.prototype,"cube",void 0),a([i.i(r.Property)()],t.prototype,"roles",void 0),a([i.i(r.Property)("Relational")],t.prototype,"providerType",void 0),a([i.i(r.Property)()],t.prototype,"url",void 0),a([i.i(r.Property)(1033)],t.prototype,"localeIdentifier",void 0),a([i.i(r.Property)()],t.prototype,"dataSource",void 0),a([i.i(r.Collection)([],o)],t.prototype,"rows",void 0),a([i.i(r.Collection)([],o)],t.prototype,"columns",void 0),a([i.i(r.Collection)([],o)],t.prototype,"values",void 0),a([i.i(r.Collection)([],o)],t.prototype,"filters",void 0),a([i.i(r.Collection)([],o)],t.prototype,"fieldMapping",void 0),a([i.i(r.Property)([])],t.prototype,"excludeFields",void 0),a([i.i(r.Property)(!1)],t.prototype,"expandAll",void 0),a([i.i(r.Property)("column")],t.prototype,"valueAxis",void 0),a([i.i(r.Property)(-1)],t.prototype,"valueIndex",void 0),a([i.i(r.Collection)([],d)],t.prototype,"filterSettings",void 0),a([i.i(r.Collection)([],u)],t.prototype,"sortSettings",void 0),a([i.i(r.Property)(!0)],t.prototype,"enableSorting",void 0),a([i.i(r.Property)("JSON")],t.prototype,"type",void 0),a([i.i(r.Property)(!0)],t.prototype,"allowMemberFilter",void 0),a([i.i(r.Property)(!1)],t.prototype,"allowLabelFilter",void 0),a([i.i(r.Property)(!1)],t.prototype,"allowValueFilter",void 0),a([i.i(r.Property)(!0)],t.prototype,"showSubTotals",void 0),a([i.i(r.Property)(!0)],t.prototype,"showRowSubTotals",void 0),a([i.i(r.Property)(!0)],t.prototype,"showColumnSubTotals",void 0),a([i.i(r.Property)("Auto")],t.prototype,"subTotalsPosition",void 0),a([i.i(r.Property)(!0)],t.prototype,"showGrandTotals",void 0),a([i.i(r.Property)("Bottom")],t.prototype,"grandTotalsPosition",void 0),a([i.i(r.Property)(!0)],t.prototype,"showRowGrandTotals",void 0),a([i.i(r.Property)(!0)],t.prototype,"showColumnGrandTotals",void 0),a([i.i(r.Property)(!1)],t.prototype,"alwaysShowValueHeader",void 0),a([i.i(r.Property)(!0)],t.prototype,"showHeaderWhenEmpty",void 0),a([i.i(r.Property)(!0)],t.prototype,"showAggregationOnValueField",void 0),a([i.i(r.Collection)([],h)],t.prototype,"formatSettings",void 0),a([i.i(r.Collection)([],f)],t.prototype,"drilledMembers",void 0),a([i.i(r.Complex)({},v)],t.prototype,"valueSortSettings",void 0),a([i.i(r.Collection)([],m)],t.prototype,"calculatedFieldSettings",void 0),a([i.i(r.Collection)([],p)],t.prototype,"conditionalFormatSettings",void 0),a([i.i(r.Property)()],t.prototype,"emptyCellsTextContent",void 0),a([i.i(r.Collection)([],c)],t.prototype,"groupSettings",void 0),a([i.i(r.Complex)({},S)],t.prototype,"authentication",void 0),t}(r.ChildProperty)},function(e,t,i){"use strict";i.d(t,"a",function(){return f});var r=i(0),n=(i.n(r),i(9)),a=(i.n(n),i(14)),o=i(1),s=i(2),l=i(17),d=i(62),p=i(19),u=i(4),h=(i.n(u),i(3)),c=i(16),g=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),m=this&&this.__decorate||function(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},f=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.pivotChange=!1,r.isRequiredUpdate=!0,r.lastSortInfo={},r.lastFilterInfo={},r.lastAggregationInfo={},r.lastCalcFieldInfo={},r.isPopupView=!1,r.enableValueSorting=!1,r.request=new XMLHttpRequest,r.remoteData=[],r.actionObj={},r.destroyEngine=!1,r.defaultFieldListOrder="None",r.isDeferUpdateApplied=!1,r}return g(t,e),t.prototype.requiredModules=function(){var e=[];return this.allowCalculatedField&&e.push({args:[this],member:"calculatedField"}),e},t.prototype.getAllSummaryType=function(){return["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"]},t.prototype.preRender=function(){this.dataSourceSettings&&"SSAS"===this.dataSourceSettings.providerType?(this.olapEngineModule=new c.a,this.dataType="olap"):(this.engineModule=new a.a,this.dataType="pivot"),this.isAdaptive=r.Browser.isDevice,this.globalize=new r.Internationalization(this.locale),this.renderModule=new d.a(this),this.defaultLocale={staticFieldList:"Pivot Field List",fieldList:"Field List",dropFilterPrompt:"Drop filter here",dropColPrompt:"Drop column here",dropRowPrompt:"Drop row here",dropValPrompt:"Drop value here",addPrompt:"Add field here",adaptiveFieldHeader:"Choose field",centerHeader:"Drag fields between axes below:",add:"add",drag:"Drag",filter:"Filter",filtered:"Filtered",sort:"Sort",remove:"Remove",filters:"Filters",rows:"Rows",columns:"Columns",values:"Values",CalculatedField:"Calculated Field",createCalculatedField:"Create Calculated Field",fieldName:"Enter the field name",error:"Error",invalidFormula:"Invalid formula.",dropText:'Example: ("Sum(Order_Count)" + "Sum(In_Stock)") * 250',dropTextMobile:"Add fields and edit formula here.",dropAction:"Calculated field cannot be place in any other region except value axis.",search:"Search",close:"Close",cancel:"Cancel",delete:"Delete",alert:"Alert",warning:"Warning",ok:"OK",allFields:"All Fields",formula:"Formula",fieldExist:"A field already exists in this name. Please enter a different name.",confirmText:"A calculation field already exists in this name. Do you want to replace it?",noMatches:"No matches",format:"Summaries values by",edit:"Edit",clear:"Clear",clearCalculatedField:"Clear edited field info",editCalculatedField:"Edit calculated field",sortAscending:"Sort ascending order",sortDescending:"Sort descending order",sortNone:"Sort data order",formulaField:"Drag and drop fields to formula",dragField:"Drag field to formula",clearFilter:"Clear",by:"by",enterValue:"Enter value",chooseDate:"Enter date",all:"All",multipleItems:"Multiple items",Equals:"Equals",DoesNotEquals:"Does Not Equal",BeginWith:"Begins With",DoesNotBeginWith:"Does Not Begin With",EndsWith:"Ends With",DoesNotEndsWith:"Does Not End With",Contains:"Contains",DoesNotContains:"Does Not Contain",GreaterThan:"Greater Than",GreaterThanOrEqualTo:"Greater Than Or Equal To",LessThan:"Less Than",LessThanOrEqualTo:"Less Than Or Equal To",Between:"Between",NotBetween:"Not Between",Before:"Before",BeforeOrEqualTo:"Before Or Equal To",After:"After",AfterOrEqualTo:"After Or Equal To",member:"Member",label:"Label",date:"Date",value:"Value",labelTextContent:"Show the items for which the label",dateTextContent:"Show the items for which the date",valueTextContent:"Show the items for which",And:"and",Sum:"Sum",Count:"Count",DistinctCount:"Distinct Count",Product:"Product",Avg:"Avg",Median:"Median",Min:"Min",Max:"Max",Index:"Index",SampleStDev:"Sample StDev",PopulationStDev:"Population StDev",SampleVar:"Sample Var",PopulationVar:"Population Var",RunningTotals:"Running Totals",DifferenceFrom:"Difference From",PercentageOfDifferenceFrom:"% of Difference From",PercentageOfGrandTotal:"% of Grand Total",PercentageOfColumnTotal:"% of Column Total",PercentageOfRowTotal:"% of Row Total",PercentageOfParentTotal:"% of Parent Total",PercentageOfParentColumnTotal:"% of Parent Column Total",PercentageOfParentRowTotal:"% of Parent Row Total",MoreOption:"More...",Years:"Years",Quarters:"Quarters",Months:"Months",Days:"Days",Hours:"Hours",Minutes:"Minutes",Seconds:"Seconds",apply:"Apply",valueFieldSettings:"Value field settings",sourceName:"Field name :",sourceCaption:"Field caption",summarizeValuesBy:"Summarize values by",baseField:"Base field",baseItem:"Base item",example:"e.g:",editorDataLimitMsg:" more items. Search to refine further.",deferLayoutUpdate:"Defer Layout Update",null:"null",undefined:"undefined",groupOutOfRange:"Out of Range",fieldDropErrorAction:"The field you are moving cannot be placed in that area of the report",memberType:"Field Type",selectedHierarchy:"Parent Hierarchy",formatString:"Format",expressionField:"Expression",olapDropText:"Example: [Measures].[Order Quantity] + ([Measures].[Order Quantity] * 0.10)",customFormat:"Enter custom format string",numberFormatString:"Example: C, P, 0000 %, ###0.##0#, etc.",Measure:"Measure",Dimension:"Dimension",Standard:"Standard",Currency:"Currency",Percent:"Percent",Custom:"Custom",blank:"(Blank)",fieldTooltip:'Drag and drop fields to create an expression. And, if you want to edit the existing calculated fields! You can achieve it by simply selecting the field under "Calculated Members".',fieldTitle:"Field Name",QuarterYear:"Quarter Year",caption:"Field Caption",copy:"Copy",of:"of",group:"Group",removeCalculatedField:"Are you sure you want to delete this calculated field?",yes:"Yes",no:"No",None:"None"},this.localeObj=new r.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.isDragging=!1,this.wireEvent()},t.prototype.frameCustomProperties=function(e,t){this.pivotGridModule&&this.pivotGridModule.updatePageSettings(!1);var i=this.pivotGridModule?this.pivotGridModule.pageSettings:this.pageSettings,r=!!this.pivotGridModule&&this.pivotGridModule.enablePaging,n=!!this.pivotGridModule&&this.pivotGridModule.enableVirtualization,a=this.pivotGridModule?this.pivotGridModule.enableHtmlSanitizer:this.enableHtmlSanitizer,o=this.pivotGridModule?this.pivotGridModule.localeObj:this.staticPivotGridModule?this.staticPivotGridModule.localeObj:this.localeObj,s=!this.pivotGridModule||(this.pivotGridModule.allowDrillThrough||this.pivotGridModule.editSettings.allowEditing),l=this.pivotGridModule?this.pivotGridModule.enableValueSorting:void 0,d=!(!this.pivotGridModule||!this.pivotGridModule.allowDataCompression)&&this.pivotGridModule.allowDataCompression;return"olap"===this.dataType?{mode:"",savedFieldList:t||void 0,savedFieldListData:e||void 0,pageSettings:i,enableValueSorting:l,isDrillThrough:s,localeObj:o,enableVirtualization:n,allowDataCompression:d}:{mode:"",savedFieldList:void 0,pageSettings:i,enableValueSorting:l,isDrillThrough:s,localeObj:o,clonedReport:this.clonedReport,globalize:this.globalize,currenyCode:this.currencyCode,enablePaging:r,enableVirtualization:n,enableHtmlSanitizer:a,allowDataCompression:d}},t.prototype.render=function(){if("pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url)if("Server"===this.dataSourceSettings.mode)this.guid=h.a.generateUUID(),this.getEngine("initialRender",null,null,null,null,null,null);else{var e=new r.Fetch(this.dataSourceSettings.url,"GET");e.send().then(function(e){return"string"==typeof e?e:e.text()}).then(this.onReadyStateChange.bind(this))}else this.initialLoad()},t.prototype.getEngine=function(e,t,i,r,n,a,s,l,d){var p=this;this.currentAction=e,this.pivotGridModule&&this.pivotGridModule.updatePageSettings(!1);var u={pageSettings:this.pivotGridModule?JSON.parse(this.pivotGridModule.getPageSettings()).pageSettings:void 0,enableValueSorting:this.pivotGridModule?this.pivotGridModule.enableValueSorting:void 0,enableDrillThrough:!this.pivotGridModule||(this.pivotGridModule.allowDrillThrough||this.pivotGridModule.editSettings.allowEditing),locale:JSON.stringify(h.a.getLocalizedObject(this))};this.request.open("POST",this.dataSourceSettings.url,!0);var c={request:this.request,dataSourceSettings:JSON.parse(this.getPersistData()).dataSourceSettings,action:e,customProperties:{},internalProperties:u,drillItem:t,sortItem:i,aggregatedItem:r,calculatedItem:n,filterItem:a,memberName:s,fetchRawDataArgs:l,editArgs:d,hash:this.guid,isGroupingUpdated:"onRefresh"===this.currentAction&&this.dataSourceSettings.groupSettings.length>0||!(!this.pivotGridModule||!this.pivotGridModule.groupingModule)&&this.pivotGridModule.groupingModule.isUpdate};this.trigger(o._13,c,function(e){p.request=e.request,c.internalProperties=e.internalProperties,c.customProperties=e.customProperties,c.dataSourceSettings=e.dataSourceSettings,c.calculatedItem=e.calculatedItem,c.drillItem=e.drillItem,c.editArgs=e.editArgs,c.fetchRawDataArgs=e.fetchRawDataArgs,c.filterItem=e.filterItem,c.hash=e.hash,c.memberName=e.memberName,c.sortItem=e.sortItem}),this.request.withCredentials=!1,this.request.onreadystatechange=this.onSuccess.bind(this),this.request.setRequestHeader("Content-type","application/json"),this.request.send(JSON.stringify(c))},t.prototype.onSuccess=function(){if(this.request.readyState===XMLHttpRequest.DONE){try{var e={action:this.currentAction,response:this.request.responseText};this.trigger(o._14,e);var t=JSON.parse(this.request.responseText);if("fetchFieldMembers"===this.currentAction){for(var i=JSON.parse(t.members),r=[],n={},a={},s=0;s<i.length;s++)r.push({formattedText:i[s].FormattedText,actualText:i[s].ActualText}),n[i[s].FormattedText]={},a[i[s].ActualText]={};this.engineModule.fieldList[t.memberName].dateMember=r,this.engineModule.fieldList[t.memberName].formattedMembers=n,this.engineModule.fieldList[t.memberName].members=a,this.pivotButtonModule.updateFilterEvents()}else{var l=h.a.formatFieldList(JSON.parse(t.fieldList));if(this.engineModule.fieldList)for(var d=Object.keys(this.engineModule.fieldList),s=0;s<d.length;s++)this.engineModule.fieldList[d[s]]&&l[d[s]]&&(l[d[s]].dateMember=this.engineModule.fieldList[d[s]].dateMember,l[d[s]].formattedMembers=this.engineModule.fieldList[d[s]].formattedMembers,l[d[s]].members=this.engineModule.fieldList[d[s]].members);this.engineModule.fieldList=l,this.engineModule.fields=JSON.parse(t.fields),this.engineModule.rowCount=JSON.parse(t.pivotCount).RowCount,this.engineModule.columnCount=JSON.parse(t.pivotCount).ColumnCount,this.engineModule.rowStartPos=JSON.parse(t.pivotCount).RowStartPosition,this.engineModule.colStartPos=JSON.parse(t.pivotCount).ColumnStartPosition,this.engineModule.rowFirstLvl=JSON.parse(t.pivotCount).RowFirstLevel,this.engineModule.colFirstLvl=JSON.parse(t.pivotCount).ColumnFirstLevel;for(var p=void 0,u=h.a.formatPivotValues(JSON.parse(t.pivotValue)),c=0;c<u.length;c++)if(u[c]&&u[c][0]&&"row"===u[c][0].axis){p=c;break}this.engineModule.headerContent=h.a.frameContent(u,"header",p,this),this.engineModule.pageSettings=this.pivotGridModule?this.pivotGridModule.pageSettings:void 0;var g=JSON.parse(t.dataSourceSettings).ValueSortSettings;this.engineModule.valueSortSettings={headerText:g.HeaderText,headerDelimiter:g.HeaderDelimiter,sortOrder:g.SortOrder,columnIndex:g.ColumnIndex},this.engineModule.pivotValues=u}}catch(e){this.engineModule.pivotValues=[]}"fetchFieldMembers"!==this.currentAction&&(this.initEngine(),this.calculatedFieldModule&&this.calculatedFieldModule.isRequireUpdate&&(this.calculatedFieldModule.endDialog(),this.calculatedFieldModule.isRequireUpdate=!1),this.pivotGridModule&&this.pivotGridModule.calculatedFieldModule&&this.pivotGridModule.calculatedFieldModule.isRequireUpdate&&(this.pivotGridModule.calculatedFieldModule.endDialog(),this.pivotGridModule.calculatedFieldModule.isRequireUpdate=!1))}},t.prototype.onReadyStateChange=function(e){var t=[];if("CSV"===this.dataSourceSettings.type)for(var n=e.split(/\r?\n|\r/),a=0;a<n.length;a++)i.i(r.isNullOrUndefined)(n[a])||""===n[a]||t.push(n[a].split(","));else try{t=JSON.parse(e)}catch(e){t=[]}t&&t.length>0&&this.setProperties({dataSourceSettings:{dataSource:t}},!0),this.initialLoad()},t.prototype.initialLoad=function(){var e=this,t={dataSourceSettings:this.dataSourceSettings,defaultFieldListOrder:this.defaultFieldListOrder};this.trigger(o.a,t,function(n){e.dataSourceSettings=n.dataSourceSettings,e.defaultFieldListOrder=t.defaultFieldListOrder,i.i(r.addClass)([e.element],s._48),e.enableRtl?i.i(r.addClass)([e.element],s._36):i.i(r.removeClass)([e.element],s._36),e.isAdaptive?i.i(r.addClass)([e.element],s._37):i.i(r.removeClass)([e.element],s._37),e.cssClass&&i.i(r.addClass)([e.element],e.cssClass.split(" ")),e.notify(o._18,{})})},t.prototype.wireEvent=function(){this.on(o._18,this.generateData,this),this.on(o._24,this.fieldListRender,this)},t.prototype.unWireEvent=function(){this.pivotGridModule&&this.pivotGridModule.isDestroyed||(this.off(o._18,this.generateData),this.off(o._24,this.fieldListRender))},t.prototype.getPersistData=function(){var e=["dataSourceSettings"];return this.addOnPersist(e)},t.prototype.getModuleName=function(){return"pivotfieldlist"},t.prototype.onPropertyChanged=function(t,n){for(var a=!1,l=0,d=Object.keys(t);l<d.length;l++){var p=d[l];switch(p){case"locale":e.prototype.refresh.call(this);break;case"dataSourceSettings":if((i.i(r.isNullOrUndefined)(t.dataSourceSettings.dataSource)||t.dataSourceSettings.groupSettings&&t.dataSourceSettings.groupSettings.length>0)&&("olap"!==this.dataType||i.i(r.isNullOrUndefined)(t.dataSourceSettings.url))||("olap"!==this.dataType&&(i.i(r.isNullOrUndefined)(this.savedDataSourceSettings)||(h.a.updateDataSourceSettings(this.staticPivotGridModule,this.savedDataSourceSettings),this.savedDataSourceSettings=void 0),t.dataSourceSettings.dataSource&&0===t.dataSourceSettings.dataSource.length&&!i.i(r.isNullOrUndefined)(this.staticPivotGridModule)&&(this.savedDataSourceSettings=h.a.getClonedDataSourceSettings(this.staticPivotGridModule.dataSourceSettings),this.staticPivotGridModule.setProperties({dataSourceSettings:{rows:[],columns:[],values:[],filters:[]}},!0))),"pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[]):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0),i.i(r.isNullOrUndefined)(this.staticPivotGridModule)||(this.staticPivotGridModule.pivotValues=[]),this.initialLoad()),h.a.isButtonIconRefesh(p,n,t)){if(this.isPopupView&&this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule){var u=h.a.cloneFieldSettings(this.dataSourceSettings.filters),c=h.a.cloneFieldSettings(this.dataSourceSettings.values),g=h.a.cloneFieldSettings(this.dataSourceSettings.rows),m=h.a.cloneFieldSettings(this.dataSourceSettings.columns);this.pivotGridModule.setProperties({dataSourceSettings:{rows:g,columns:m,values:c,filters:u}},!0),this.pivotGridModule.axisFieldModule.render()}else if(!this.isPopupView&&this.staticPivotGridModule&&!this.staticPivotGridModule.isDestroyed){var f=this.staticPivotGridModule;if(f.showGroupingBar&&f.groupingBarModule&&f.axisFieldModule.render(),f.showFieldList&&f.pivotFieldListModule){var g=h.a.cloneFieldSettings(f.dataSourceSettings.rows),m=h.a.cloneFieldSettings(f.dataSourceSettings.columns),c=h.a.cloneFieldSettings(f.dataSourceSettings.values),u=h.a.cloneFieldSettings(f.dataSourceSettings.filters);f.pivotFieldListModule.setProperties({dataSourceSettings:{rows:g,columns:m,values:c,filters:u}},!0),f.pivotFieldListModule.axisFieldModule.render(),f.pivotFieldListModule.treeViewModule.fieldTable&&!f.isAdaptive&&f.pivotFieldListModule.notify(o._26,{})}}this.axisFieldModule.render(),this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(o._26,{})}break;case"aggregateTypes":this.axisFieldModule&&this.axisFieldModule.render(),this.pivotGridModule&&this.pivotGridModule.axisFieldModule&&(this.pivotGridModule.setProperties({aggregateTypes:t.aggregateTypes},!0),this.pivotGridModule.axisFieldModule.render());break;case"showValuesButton":this.axisFieldModule&&this.axisFieldModule.render(),this.pivotGridModule&&this.pivotGridModule.showGroupingBar&&this.pivotGridModule.groupingBarModule&&this.pivotGridModule.axisFieldModule&&(this.pivotGridModule.setProperties({showValuesButton:t.showValuesButton},!0),this.pivotGridModule.axisFieldModule.render());break;case"enableRtl":this.enableRtl?i.i(r.addClass)([this.element],s._36):i.i(r.removeClass)([this.element],s._36),a=!0;break;case"enableFieldSearching":this.refresh()}a&&this.fieldListRender()}},t.prototype.initEngine=function(){var e=this;if("pivot"===this.dataType){var t=i.i(r.isNullOrUndefined)(this.dataSourceSettings.dataSource)?i.i(r.isNullOrUndefined)(this.engineModule.data)?void 0:this.engineModule.data[0]:this.dataSourceSettings.dataSource[0];if(t&&this.pivotCommon){var n="[object Array]"===Object.prototype.toString.call(t);if(n&&"JSON"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidJSON"));if(!n&&"CSV"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidCSV"))}}var a={dataSourceSettings:h.a.getClonedDataSourceSettings(this.dataSourceSettings)},s=this.isPopupView?this.pivotGridModule:this;s.trigger(o.b,a,function(t){if(h.a.updateDataSourceSettings(e,t.dataSourceSettings),"pivot"===e.dataType){if(e.dataSourceSettings.groupSettings&&e.dataSourceSettings.groupSettings.length>0){var i=e.dataSourceSettings.dataSource;e.clonedDataSet=e.clonedDataSet?e.clonedDataSet:h.a.getClonedData(i);var r=JSON.parse(e.getPersistData()).dataSourceSettings;r.dataSource=[],e.clonedReport=e.clonedReport?e.clonedReport:r}var n=e.frameCustomProperties();n.enableValueSorting=e.staticPivotGridModule?e.staticPivotGridModule.enableValueSorting:e.enableValueSorting,"Server"!==e.dataSourceSettings.mode&&e.engineModule.renderEngine(e.dataSourceSettings,n,e.aggregateCellInfo?e.getValueCellInfo.bind(e):void 0,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.pivotFieldList=e.engineModule.fieldList;var a={pivotFieldList:e.pivotFieldList,pivotValues:e.engineModule.pivotValues},l=e;s.trigger(o.c,a,function(e){l.pivotFieldList=e.pivotFieldList,l.engineModule.pivotValues=e.pivotValues,l.notify(o._24,{}),l.trigger(o.o)})}else if("olap"===e.dataType){e.olapEngineModule.renderEngine(e.dataSourceSettings,e.frameCustomProperties(e.olapEngineModule.fieldListData,e.olapEngineModule.fieldList),e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.pivotFieldList=e.olapEngineModule.fieldList;var a={pivotFieldList:e.pivotFieldList,pivotValues:e.olapEngineModule.pivotValues},d=e;s.trigger(o.c,a,function(e){d.pivotFieldList=e.pivotFieldList,d.olapEngineModule.pivotValues=e.pivotValues,d.notify(o._24,{}),d.trigger(o.o)})}}),"None"!==this.defaultFieldListOrder&&this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(o._26,{})},t.prototype.generateData=function(){this.pivotFieldList={},this.dataSourceSettings&&(this.dataSourceSettings.dataSource||this.dataSourceSettings.url)?""!==this.dataSourceSettings.url&&"olap"===this.dataType||this.dataSourceSettings.dataSource.length>0?("pivot"===this.dataType&&(this.engineModule.data=this.dataSourceSettings.dataSource),this.initEngine()):this.dataSourceSettings.dataSource instanceof n.DataManager?"pivot"===this.dataType&&this.remoteData.length>0?(this.engineModule.data=this.remoteData,this.initEngine()):setTimeout(this.getData.bind(this),100):this.notify(o._24,{}):(this.notify(o._24,{}),this.trigger(o.o))},t.prototype.getValueCellInfo=function(e){var t=e;return this.trigger(o.X,t),t},t.prototype.getHeaderSortInfo=function(e){var t=e;return this.trigger(o.Y,t),t},t.prototype.getData=function(){this.dataSourceSettings.dataSource.executeQuery(new n.Query).then(this.executeQuery.bind(this))},t.prototype.executeQuery=function(e){this.engineModule.data=e.result,this.initEngine()},t.prototype.fieldListRender=function(){this.element.innerHTML="";var e;"Popup"===this.renderMode&&this.dialogRenderer.fieldListDialog&&!this.dialogRenderer.fieldListDialog.isDestroyed&&(e=this.dialogRenderer.fieldListDialog.visible,this.dialogRenderer.fieldListDialog.destroy(),i.i(r.remove)(document.getElementById(this.element.id+"_Container"))),this.renderModule.render(),"Popup"===this.renderMode?(this.fieldListSpinnerElement=this.dialogRenderer.fieldListDialog.element,e&&this.dialogRenderer.fieldListDialog.show()):this.fieldListSpinnerElement=this.element.querySelector(".e-pivotfieldlist-container"),this.spinnerTemplate?i.i(u.createSpinner)({target:this.fieldListSpinnerElement,template:this.spinnerTemplate,cssClass:this.cssClass?this.cssClass:void 0},this.createElement):i.i(u.createSpinner)({target:this.fieldListSpinnerElement,cssClass:this.cssClass?this.cssClass:void 0},this.createElement);var t={pivotEngine:"olap"===this.dataType?this.olapEngineModule:this.engineModule,dataSourceSettings:this.dataSourceSettings,id:this.element.id,element:document.getElementById(this.element.id+"_Container"),moduleName:this.getModuleName(),enableRtl:this.enableRtl,enableHtmlSanitizer:this.enableHtmlSanitizer,isAdaptive:this.isAdaptive,renderMode:this.renderMode,localeObj:this.localeObj,dataType:this.dataType,cssClass:this.cssClass};this.pivotCommon=new l.a(t),this.pivotCommon.control=this,this.allowDeferLayoutUpdate&&(this.clonedDataSource=i.i(r.extend)({},this.dataSourceSettings,null,!0),"olap"===this.dataType&&(this.clonedFieldListData=h.a.cloneOlapFieldSettings(this.olapEngineModule.fieldListData)),this.clonedFieldList=h.a.getClonedFieldList(this.pivotFieldList))},t.prototype.getFieldCaption=function(e){var t=this.getFields(e),i="olap"===this.dataType?this.olapEngineModule:this.engineModule;if(t.length>0&&i&&i.fieldList)for(var r=t.length;r--;)if(t[r])for(var n=0,a=t[r];n<a.length;n++){var o=a[n];o&&i.fieldList[o.name]&&(o.caption?i.fieldList[o.name].caption=o.caption:i.fieldList[o.name].caption=o.name)}},t.prototype.getFields=function(e){return[e.rows,e.columns,e.values,e.filters]},t.prototype.updateDataSource=function(e,t){this.pivotGridModule&&this.pivotGridModule.showWaitingPopup(),i.i(u.showSpinner)(this.fieldListSpinnerElement);var n=this,a=n.isPopupView?n.pivotGridModule:n,s=!1,l=n.pivotGridModule&&(n.pivotGridModule.enableVirtualization||n.pivotGridModule.enablePaging)?n.pivotGridModule.pageSettings:void 0,d=Object.keys(n.lastCalcFieldInfo).length>0,p=Object.keys(n.lastSortInfo).length>0,c=Object.keys(n.lastAggregationInfo).length>0,g=Object.keys(n.lastFilterInfo).length>0,m={dataSourceSettings:h.a.getClonedDataSourceSettings(n.dataSourceSettings)};a.trigger(o.b,m,function(o){if(l&&(p||g||c||d)||(h.a.updateDataSourceSettings(n,o.dataSourceSettings),h.a.updateDataSourceSettings(n.pivotGridModule,o.dataSourceSettings)),i.i(r.isNullOrUndefined)(t)){if("pivot"===n.dataType){var u=n.frameCustomProperties();p?(n.pivotGridModule&&n.pivotGridModule.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),n.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),u.enableValueSorting=!1):u.enableValueSorting=n.staticPivotGridModule?n.staticPivotGridModule.enableValueSorting:n.enableValueSorting,u.savedFieldList=n.pivotFieldList,l&&(p||g||c||d)&&!n.allowDeferLayoutUpdate?(p&&(n.pivotGridModule.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),"Server"===a.dataSourceSettings.mode?a.getEngine("onSort",null,n.lastSortInfo,null,null,null,null):n.engineModule.onSort(n.lastSortInfo),n.lastSortInfo={}),g&&("Server"===a.dataSourceSettings.mode?a.getEngine("onFilter",null,null,null,null,n.lastFilterInfo,null):n.engineModule.onFilter(n.lastFilterInfo,n.dataSourceSettings),n.lastFilterInfo={}),c&&("Server"===a.dataSourceSettings.mode?a.getEngine("onAggregation",null,null,n.lastAggregationInfo,null,null,null):n.engineModule.onAggregation(n.lastAggregationInfo),n.lastAggregationInfo={}),d&&("Server"===a.dataSourceSettings.mode?a.getEngine("onCalcOperation",null,null,null,n.lastCalcFieldInfo,null,null):n.engineModule.onCalcOperation(n.lastCalcFieldInfo,n.dataSourceSettings),n.lastCalcFieldInfo={})):("Server"===n.dataSourceSettings.mode?p?a.getEngine("onSort",null,n.lastSortInfo,null,null,null,null):c?a.getEngine("onAggregation",null,null,n.lastAggregationInfo,null,null,null):d?a.getEngine("onCalcOperation",null,null,null,n.lastCalcFieldInfo,null,null):g?a.getEngine("onFilter",null,null,null,null,n.lastFilterInfo,null):a.getEngine("onDrop",null,null,null,null,null,null):n.engineModule.renderEngine(n.dataSourceSettings,u,n.aggregateCellInfo?n.getValueCellInfo.bind(n):void 0,n.onHeadersSort?n.getHeaderSortInfo.bind(n):void 0),n.lastSortInfo={},n.lastAggregationInfo={},n.lastCalcFieldInfo={},n.lastFilterInfo={})}else s=n.updateOlapDataSource(n,p,d,s);n.getFieldCaption(n.dataSourceSettings)}else n.axisFieldModule.render(),n.isRequiredUpdate=!1;n.enginePopulatedEventMethod(n,e,s)})},t.prototype.enginePopulatedEventMethod=function(e,t,n){var a=this,s=e.isPopupView?e.pivotGridModule:e,l={dataSourceSettings:e.dataSourceSettings,pivotFieldList:"pivot"===e.dataType?e.engineModule.fieldList:e.olapEngineModule.fieldList,pivotValues:"pivot"===e.dataType?e.engineModule.pivotValues:e.olapEngineModule.pivotValues};s.trigger(o.c,l,function(s){e.dataSourceSettings=s.dataSourceSettings,e.pivotCommon.dataSourceSettings=e.dataSourceSettings,e.pivotFieldList=s.pivotFieldList,"olap"===e.dataType?(e.olapEngineModule.pivotValues=s.pivotValues,e.pivotCommon.engineModule=e.olapEngineModule):(e.engineModule.pivotValues=s.pivotValues,e.pivotCommon.engineModule=e.engineModule),t||!e.treeViewModule.fieldTable||e.isAdaptive||e.notify(o._26,{}),e.isRequiredUpdate?(e.allowDeferLayoutUpdate&&(e.clonedDataSource=i.i(r.extend)({},e.dataSourceSettings,null,!0),"olap"===a.dataType&&(a.clonedFieldListData=h.a.cloneOlapFieldSettings(a.olapEngineModule.fieldListData)),e.clonedFieldList=h.a.getClonedFieldList(e.pivotFieldList)),e.updateView(e.pivotGridModule)):a.isPopupView&&e.allowDeferLayoutUpdate&&(e.pivotGridModule.engineModule=e.engineModule,e.pivotGridModule.setProperties({dataSourceSettings:e.dataSourceSettings.properties},!0),e.pivotGridModule.notify(o._19,e),i.i(u.hideSpinner)(e.fieldListSpinnerElement)),a.isPopupView&&e.pivotGridModule&&e.pivotGridModule.allowDeferLayoutUpdate&&!e.isRequiredUpdate&&(i.i(u.hideSpinner)(e.fieldListSpinnerElement),e.pivotGridModule.hideWaitingPopup()),e.isRequiredUpdate=!0,!e.pivotGridModule||n?i.i(u.hideSpinner)(e.fieldListSpinnerElement):e.pivotGridModule.fieldListSpinnerElement=e.fieldListSpinnerElement});var d=this.getActionCompleteName();this.actionObj.actionName=d,this.actionObj.actionName&&this.actionCompleteMethod()},t.prototype.updateOlapDataSource=function(e,t,i,r){var n=e.frameCustomProperties(e.olapEngineModule.fieldListData,e.olapEngineModule.fieldList);return n.savedFieldList=e.pivotFieldList,i||t?(e.olapEngineModule.savedFieldList=e.pivotFieldList,e.olapEngineModule.savedFieldListData=e.olapEngineModule.fieldListData,i?(e.olapEngineModule.updateCalcFields(e.dataSourceSettings,e.lastCalcFieldInfo),e.lastCalcFieldInfo={},r=!e.olapEngineModule.dataFields[e.lastCalcFieldInfo.name],e.pivotGridModule&&e.pivotGridModule.hideWaitingPopup()):e.olapEngineModule.onSort(e.dataSourceSettings)):e.olapEngineModule.renderEngine(e.dataSourceSettings,n,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.lastSortInfo={},e.lastAggregationInfo={},e.lastCalcFieldInfo={},e.lastFilterInfo={},r},t.prototype.update=function(e){e&&(this.clonedDataSet=e.clonedDataSet,this.clonedReport=e.clonedReport,this.setProperties({dataSourceSettings:e.dataSourceSettings,showValuesButton:e.showValuesButton},!0),this.engineModule=e.engineModule,this.olapEngineModule=e.olapEngineModule,this.dataType=e.dataType,this.pivotFieldList="olap"===this.dataType?e.olapEngineModule.fieldList:e.engineModule.fieldList,this.isPopupView?this.pivotGridModule=e:this.staticPivotGridModule=e,this.getFieldCaption(e.dataSourceSettings),this.pivotCommon.engineModule="olap"===this.dataType?this.olapEngineModule:this.engineModule,this.pivotCommon.dataSourceSettings=this.dataSourceSettings,this.pivotCommon.control=this,this.treeViewModule.fieldTable&&!this.isAdaptive&&this.notify(o._26,{}),this.axisFieldModule.render(),!this.isPopupView&&this.allowDeferLayoutUpdate&&(this.clonedDataSource=i.i(r.extend)({},this.dataSourceSettings,null,!0),"olap"===this.dataType&&(this.clonedFieldListData=h.a.cloneOlapFieldSettings(this.olapEngineModule.fieldListData)),this.clonedFieldList=h.a.getClonedFieldList(this.pivotFieldList)))},t.prototype.updateView=function(e){if(e){var t="Calculated field applied"===this.actionObj.actionName&&"olap"===e.dataType;!e.element.querySelector(".e-spin-hide")||t||this.allowDeferLayoutUpdate&&!this.isDeferUpdateApplied&&!e.isInitial||e.showWaitingPopup(),e.clonedDataSet=this.clonedDataSet,e.clonedReport=this.clonedReport,e.setProperties({dataSourceSettings:this.dataSourceSettings,showValuesButton:this.showValuesButton},!0),e.engineModule=this.engineModule,e.olapEngineModule=this.olapEngineModule,e.dataType=this.dataType,this.pivotChange||(e.pivotValues="olap"===this.dataType?this.olapEngineModule.pivotValues:this.engineModule.pivotValues);var i={dataSourceSettings:h.a.getClonedDataSourceSettings(e.dataSourceSettings),pivotValues:e.pivotValues};e.trigger(o._1,i),this.isPopupView||(this.staticPivotGridModule=e,e.isStaticRefresh=!0),this.isDeferUpdateApplied=!1,this.staticPivotGridModule&&(this.staticPivotGridModule.isServerWaitingPopup=!0),e.dataBind()}},t.prototype.triggerPopulateEvent=function(){var e=this,t=this.isPopupView?this.pivotGridModule:this,i={dataSourceSettings:this.dataSourceSettings,pivotFieldList:"olap"===this.dataType?this.olapEngineModule.fieldList:this.engineModule.fieldList,pivotValues:"olap"===this.dataType?this.olapEngineModule.pivotValues:this.engineModule.pivotValues};t.trigger(o.c,i,function(t){e.dataSourceSettings=t.dataSourceSettings,e.pivotFieldList=t.pivotFieldList,"olap"===e.dataType?e.olapEngineModule.pivotValues=t.pivotValues:e.engineModule.pivotValues=t.pivotValues})},t.prototype.actionBeginMethod=function(){var e={dataSourceSettings:h.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,cancel:!1};return(this.isPopupView?this.pivotGridModule:this).trigger(o._15,e),e.cancel},t.prototype.actionCompleteMethod=function(){var e={dataSourceSettings:h.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,actionInfo:this.actionObj.actionInfo};(this.isPopupView?this.pivotGridModule:this).trigger(o._16,e),this.actionObj.actionName="",this.actionObj.actionInfo=void 0,this.actionObj.fieldInfo=void 0},t.prototype.actionFailureMethod=function(e){var t={actionName:this.actionObj.actionName,errorInfo:e};(this.isPopupView?this.pivotGridModule:this).trigger(o._17,t)},t.prototype.getActionCompleteName=function(){return this.actionObj.actionName===o._73?o._83:this.actionObj.actionName===o._69?o._113:this.actionObj.actionName===o._70?o._114:this.actionObj.actionName===o._71?o._115:this.actionObj.actionName===o._72?o._116:this.actionObj.actionName===o._78?o._117:this.actionObj.actionName===o._68?o._88:this.actionObj.actionName},t.prototype.destroy=function(){this.unWireEvent(),this.engineModule&&!this.destroyEngine&&(this.engineModule.fieldList={},this.engineModule.rMembers=null,this.engineModule.cMembers=null,this.engineModule.valueMatrix=null,this.engineModule.indexMatrix=null,this.engineModule={}),this.olapEngineModule&&!this.destroyEngine&&(this.olapEngineModule.fieldList={},this.olapEngineModule={}),this.pivotFieldList&&(this.pivotFieldList={}),this.contextMenuModule&&this.contextMenuModule.destroy(),this.treeViewModule&&this.treeViewModule.destroy(),this.pivotButtonModule&&this.pivotButtonModule.destroy(),this.pivotCommon&&this.pivotCommon.destroy(),this.dialogRenderer&&this.dialogRenderer.destroy(),this.calculatedFieldModule&&this.calculatedFieldModule.destroy(),e.prototype.destroy.call(this),this.contextMenuModule&&(this.contextMenuModule=null),this.treeViewModule&&(this.treeViewModule=null),this.pivotButtonModule&&(this.pivotButtonModule=null),this.pivotCommon&&(this.pivotCommon=null),this.dialogRenderer&&(this.dialogRenderer=null),this.calculatedFieldModule&&(this.calculatedFieldModule=null),this.axisFieldModule&&(this.axisFieldModule=null),this.axisTableModule&&(this.axisTableModule=null),this.renderModule&&(this.renderModule=null),this.clonedDataSet&&(this.clonedDataSet=null),this.clonedReport&&(this.clonedReport=null),this.clonedFieldList&&(this.clonedFieldList=null),this.clonedFieldListData&&(this.clonedFieldListData=null),this.localeObj&&(this.localeObj=null),this.defaultLocale&&(this.defaultLocale=null),this.element.innerHTML="",i.i(r.removeClass)([this.element],s._48),i.i(r.removeClass)([this.element],s._36),i.i(r.removeClass)([this.element],s._37)},m([i.i(r.Complex)({},p.n)],t.prototype,"dataSourceSettings",void 0),m([i.i(r.Property)("Popup")],t.prototype,"renderMode",void 0),m([i.i(r.Property)()],t.prototype,"target",void 0),m([i.i(r.Property)("")],t.prototype,"cssClass",void 0),m([i.i(r.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),m([i.i(r.Property)(!1)],t.prototype,"allowCalculatedField",void 0),m([i.i(r.Property)(!1)],t.prototype,"enableFieldSearching",void 0),m([i.i(r.Property)(!1)],t.prototype,"showValuesButton",void 0),m([i.i(r.Property)(!1)],t.prototype,"allowDeferLayoutUpdate",void 0),m([i.i(r.Property)(1e3)],t.prototype,"maxNodeLimitInMemberEditor",void 0),m([i.i(r.Property)(!0)],t.prototype,"loadOnDemandInMemberEditor",void 0),m([i.i(r.Property)()],t.prototype,"spinnerTemplate",void 0),m([i.i(r.Property)(["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"])],t.prototype,"aggregateTypes",void 0),m([i.i(r.Property)("USD")],t.prototype,"currencyCode",void 0),m([i.i(r.Event)()],t.prototype,"load",void 0),m([i.i(r.Event)()],t.prototype,"enginePopulating",void 0),m([i.i(r.Event)()],t.prototype,"memberFiltering",void 0),m([i.i(r.Event)()],t.prototype,"enginePopulated",void 0),m([i.i(r.Event)()],t.prototype,"onFieldDropped",void 0),m([i.i(r.Event)()],t.prototype,"fieldDrop",void 0),m([i.i(r.Event)()],t.prototype,"fieldDragStart",void 0),m([i.i(r.Event)()],t.prototype,"aggregateCellInfo",void 0),m([i.i(r.Event)()],t.prototype,"memberEditorOpen",void 0),m([i.i(r.Event)()],t.prototype,"calculatedFieldCreate",void 0),m([i.i(r.Event)()],t.prototype,"aggregateMenuOpen",void 0),m([i.i(r.Event)()],t.prototype,"fieldRemove",void 0),m([i.i(r.Event)()],t.prototype,"dataBound",void 0),m([i.i(r.Event)()],t.prototype,"created",void 0),m([i.i(r.Event)()],t.prototype,"destroyed",void 0),m([i.i(r.Event)()],t.prototype,"beforeServiceInvoke",void 0),m([i.i(r.Event)()],t.prototype,"afterServiceInvoke",void 0),m([i.i(r.Event)()],t.prototype,"actionBegin",void 0),m([i.i(r.Event)()],t.prototype,"actionComplete",void 0),m([i.i(r.Event)()],t.prototype,"actionFailure",void 0),m([i.i(r.Event)()],t.prototype,"onHeadersSort",void 0),t=m([r.NotifyPropertyChanges],t)}(r.Component)},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(2),n=i(1),a=i(29),o=i(9),s=(i.n(o),function(){function e(e){this.parent=e}return e.prototype.render=function(){(!this.parent.pivotButtonModule||this.parent.pivotButtonModule&&this.parent.pivotButtonModule.isDestroyed)&&new a.a(this.parent),this.createPivotButtons()},e.prototype.createPivotButtons=function(){var e=this.parent.dataSourceSettings.rows,t=this.parent.dataSourceSettings.columns,i=this.parent.dataSourceSettings.values,a=this.parent.dataSourceSettings.filters,s=[e,t,i,a],l=this.parent.dialogRenderer.parentElement;if(l.querySelector("."+r._200+"-filters")&&(l.querySelector("."+r._200+"-filters").querySelector("."+r._202).innerHTML=""),l.querySelector("."+r._200+"-rows")&&(l.querySelector("."+r._200+"-rows").querySelector("."+r._202).innerHTML=""),l.querySelector("."+r._200+"-columns")&&(l.querySelector("."+r._200+"-columns").querySelector("."+r._202).innerHTML=""),l.querySelector("."+r._200+"-values")&&(l.querySelector("."+r._200+"-values").querySelector("."+r._202).innerHTML=""),"pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&(this.parent.dataSourceSettings.dataSource.length>0||this.parent.dataSourceSettings.dataSource instanceof o.DataManager)||"olap"===this.parent.dataType&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url)for(var d=["rows","columns","values","filters"],p=0,u=s.length;p<u;p++)if(s[p]){var h={field:s[p],axis:d[p].toString()};this.parent.notify(n._27,h)}},e}())},function(e,t,i){"use strict";var r=i(59);i.d(t,"a",function(){return r.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var r=i(0),n=(i.n(r),function(){function e(){}return e.getCellSets=function(e,t,n,a,o){this.engine=t,this.isMondrian=t.isMondrian,this.isMeasureAvail=t.isMeasureAvail,this.isPaging=t.isPaging,this.pageSettings=t.pageSettings,this.rows=t.rows,this.columns=t.columns,this.values=t.values,this.filters=t.filters,this.allowLabelFilter=t.allowLabelFilter,this.allowValueFilter=t.allowValueFilter,this.valueSortSettings=e.valueSortSettings?e.valueSortSettings:void 0,this.drilledMembers=t.updateDrilledItems(e.drilledMembers),this.calculatedFieldSettings=t.calculatedFieldSettings,this.valueAxis="row"===e.valueAxis?"rows":"columns",a&&(a.axis="row"===a.axis?"rows":"columns"),this.filterMembers=i.i(r.extend)({},t.filterMembers,null,!0),this.fieldDataObj=t.fieldListObj,this.fieldList=t.fieldList,this.cellSetInfo="\nDIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CHILDREN_CARDINALITY, MEMBER_TYPE, MEMBER_VALUE";var s=this.getMeasuresQuery(this.values),l=this.getDimensionsQuery(this.rows,s,"rows",a).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"),d=this.getDimensionsQuery(this.columns,s,"columns",a).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;");if(this.isPaging&&n&&void 0!==this.pageSettings){var p=this.getPagingQuery(l,d);l=p.rowQuery,d=p.columnQuery}else if(this.isPaging&&!n&&void 0!==this.pageSettings){var p=this.getPagingCountQuery(l,d);l=p.rowQuery,d=p.columnQuery}l=l.length>0?l+(this.isPaging&&!n?"":this.cellSetInfo+" ON ROWS"):"",d=d.length>0?d+(this.isPaging&&!n?"":this.cellSetInfo+" ON COLUMNS"):"";var u=this.getSlicersQuery(this.filters,"filters").replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"),h=this.getfilterQuery(this.filterMembers,e.cube).replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"),c=this.getCalculatedFieldQuery(this.calculatedFieldSettings).replace(/\&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"),g=this.frameMDXQuery(l,d,u,h,c,n),m={catalog:e.catalog,cube:e.cube,url:e.url,request:g,LCID:e.localeIdentifier.toString(),roles:e.roles};t.mdxQuery=g.replace(/\&amp;/g,"&").replace(/\&gt;/g,">").replace(/\&lt;/g,"<").replace(/%280/g,'"').replace(/\&apos;/g,"'"),a&&(a.axis="rows"===a.axis?"row":"column"),o||this.getTableCellData(m,this.isPaging&&!n?this.engine.generatePagingData.bind(this.engine):this.engine.generateEngine.bind(this.engine),a?{action:a.action,drillInfo:a}:{dataSourceSettings:e,action:"loadTableElements"})},e.getTableCellData=function(e,t,i){var r=this.engine.getConnectionInfo(e.url,e.LCID),n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"> <Header></Header> <Body> <Execute xmlns="urn:schemas-microsoft-com:xml-analysis"> <Command> <Statement>'+e.request+"</Statement> </Command> <Properties> <PropertyList> <Catalog>"+e.catalog+"</Catalog> <LocaleIdentifier>"+r.LCID+"</LocaleIdentifier>"+(e.roles?"<Roles>"+e.roles+"</Roles>":"")+"</PropertyList> </Properties></Execute> </Body> </Envelope>";this.engine.doAjaxPost("POST",r.url,n,t,i)},e.frameMDXQuery=function(e,t,i,r,n,a){var o=this.isPaging&&!a?""!==n?"":"\nWITH":"\nSelect ";return t.length>0&&(o+=t),e.length>0&&(o=o+(t.length>0?this.isPaging&&!a?"":", ":"")+e),o=n+o+(this.isPaging&&!a?"\nMEMBER [Measures].[3d268ce0-664d-4092-b9cb-fece97175006] AS Count([e16a30d0-2174-4874-8dae-a5085a75a3e2]) MEMBER [Measures].[8d7fe8c1-f09f-410e-b9ba-eaab75a1fc3e] AS Count ([d1876d2b-e50e-4547-85fe-5b8ed9d629de])\nSELECT { [Measures].[3d268ce0-664d-4092-b9cb-fece97175006] , [Measures].[8d7fe8c1-f09f-410e-b9ba-eaab75a1fc3e] } ON AXIS(0)":"")+r+i+"\nCELL PROPERTIES VALUE, FORMAT_STRING, FORMATTED_VALUE\n"},e.getPagingQuery=function(e,t){e=e.replace("NON EMPTY ( ","").slice(0,-1),t=t.replace("NON EMPTY ( ","").slice(0,-1);var i=e,r=(this.pageSettings.currentRowPage-1)*this.pageSettings.rowPageSize,n=(this.pageSettings.currentColumnPage-1)*this.pageSettings.columnPageSize,a=3*this.pageSettings.rowPageSize,o=3*this.pageSettings.columnPageSize;return r=this.engine.rowCount<r+a?this.engine.rowCount>a?this.engine.rowCount-a:0:r,this.engine.pageRowStartPos=r,n=this.engine.columnCount<n+o?this.engine.columnCount>o?this.engine.columnCount-o:0:n,this.engine.pageColStartPos=n,{rowQuery:""!==e?"\nSUBSET ({ "+(this.isMondrian?"":"NONEMPTY")+" ("+e+(this.isMondrian||""===t?"":","+t)+")},"+r+","+a+")":"",columnQuery:""!==t?"\nSUBSET ({ "+(this.isMondrian?"":"NONEMPTY")+" ("+t+(this.isMondrian||""===i?"":","+i)+")},"+n+","+o+")":""}},e.getPagingCountQuery=function(e,t){e=e.replace("NON EMPTY ( ","").slice(0,-1),t=t.replace("NON EMPTY ( ","").slice(0,-1);var i=e;return{rowQuery:""!==e?"SET [d1876d2b-e50e-4547-85fe-5b8ed9d629de] as "+(this.isMondrian?"":"NONEMPTY")+" ("+e+(this.isMondrian||""===t?"":","+t)+")\n":"",columnQuery:""!==t?"\nSET [e16a30d0-2174-4874-8dae-a5085a75a3e2] as "+(this.isMondrian?"":"NONEMPTY")+" ("+t+(this.isMondrian||""===i?"":","+i)+")\n":""}},e.getDimensionsQuery=function(e,t,i,r){var n="";if(e.length>0){n="\nNON EMPTY ( "+(this.drilledMembers.length>0?"HIERARCHIZE ({":"");for(var a=0;a<e.length;){var o="";0===a?"[measures]"===e[a].name.toLowerCase()?""!==t&&(n+=t):(o="({"+this.getDimensionQuery(e[a],i)+"})",n+=o):"[measures]"===e[a].name.toLowerCase()?""!==t&&(n=n+" * "+t):(o="({"+this.getDimensionQuery(e[a],i)+"})",n=n+" * "+o),a++}var s=this.getDrillQuery(e,t,i,r);n=r&&r.axis===i?"\nNON EMPTY ( "+(this.drilledMembers.length>0?"HIERARCHIZE ({":"")+s.query:n+(""!==s.query?",":"")+s.query;var l=this.getAttributeDrillQuery(e,t,i,r);n=(this.valueAxis!==i?this.updateValueSortQuery(n,this.valueSortSettings):n)+(this.isPaging?(""!==l?"-":"")+l:"")+(this.drilledMembers.length>0?"})":"")+(this.isPaging?"":(""!==l?"-":"")+l)+")"}return n},e.getAttributeDrillQuery=function(e,t,i,r){var n="",a=[];a=r&&r.axis===i&&"down"===r.action.toLowerCase()?[{name:r.fieldName,items:[r.memberName],delimiter:"~~"}]:this.drilledMembers;for(var o=i===this.valueAxis?this.getMeasurePos(i):0,s=0,l=a;s<l.length;s++){var d=l[s];if(!!this.engine.fieldList[d.name]&&this.engine.fieldList[d.name].isHierarchy)for(var p=0,u=d.items;p<u.length;p++){for(var h=u[p],c=[],g=h.split(d.delimiter?d.delimiter:"~~"),m=this.getDrillLevel(e,g),f=this.getDimensionPos(i,d.name),v=e.length-(o>f?1:0),S=!!this.isPaging&&this.isAttributeMemberExist(d.name,h.split(d.delimiter?d.delimiter:"~~"),d.delimiter,g,i);m.level>0&&m.isDrill&&f+1!==o&&!S;){for(var y=[],b=0;b<e.length;){if("[measures]"===e[b].name.toLowerCase())""!==t&&y.push(g[b]?"({{"+g[b]+"}})":"("+t+")");else if(g[b]&&(-1!==g[b].indexOf(e[b].name)||e[b].isNamedSet&&this.fieldList[e[b].name]&&-1!==g[b].indexOf(this.fieldList[e[b].name].pid.split("Sets_")[1])))y.push(this.getHierarchyQuery(g[b],!1,!1,!1,m.level,!0));else{if(g[b]||!e[b]){y=[];break}y.push(this.getHierarchyQuery(e[b].name,!!(this.isPaging&&2===m.level||!this.isPaging&&v>b),e[b].isNamedSet,e[b].isCalculatedField,m.level,!1))}b++}y.length>0&&c.push("("+y.join("*")+")"),m.level--,v--}c.length>0&&(n=n+(""!==n?"-":"")+c.join(this.isPaging?"+":"-"))}}return n},e.getDimensionPos=function(e,t){for(var i=0,r="rows"===e?this.rows:this.columns,n=0;n<r.length;n++)if(r[n].name===t){i=n;break}return i},e.getMeasurePos=function(e){for(var t=0,i="rows"===e?this.rows:this.columns,r=0;r<i.length;r++)if(0===i[r].name.indexOf("[Measures]")){t=r;break}return t},e.getDrillLevel=function(e,t){for(var i=e.length,r=!1,n=0;n<e.length;)t[n]&&-1!==t[n].indexOf(e[n].name)?(i-=1,e[n+1]&&!(e[n+1].isNamedSet||0===e[n+1].name.indexOf("[Measures]")||this.fieldList[e[n+1].name]&&!this.fieldList[e[n+1].name].hasAllMember)&&(r=!0)):(e[n].isNamedSet||0===e[n].name.indexOf("[Measures]")||this.fieldList[e[n].name]&&!this.fieldList[e[n].name].hasAllMember)&&(i-=1),n++;return{level:this.isPaging?2:i,isDrill:r}},e.getHierarchyQuery=function(e,t,i,r,n,a){return e=r?this.fieldList[e].tag:e,!this.fieldList[e]||this.fieldList[e].hasAllMember||i||r?i||r?"({"+e+"})":this.isPaging?"({"+e+(t?".CHILDREN})":a||1!==n?"})":".[All]})"):"({DrilldownLevel({"+e+(t?".CHILDREN":"")+"},,,INCLUDE_CALC_MEMBERS)})":"(("+e+").levels(0).AllMembers)"},e.isAttributeMemberExist=function(e,t,i,r,n){t.splice(r.length-1,1);var a=!1;if(""!==t.join(i)&&(!this.isPaging||1!==t.length||"[Measures]"!==t.join(i))&&this.engine.fieldList[e]&&this.engine.fieldList[e].hasAllMember)for(var o=this.getDimensionPos(n,e),s=0;s<this.drilledMembers.length;s++)if(e!==this.drilledMembers[s].name){var l=!!this.engine.fieldList[this.drilledMembers[s].name]&&this.engine.fieldList[this.drilledMembers[s].name].isHierarchy;if(l)for(var d=this.getDimensionPos(n,this.drilledMembers[s].name),p=0;p<this.drilledMembers[s].items.length;p++){var u=this.getDrillLevel("rows"===n?this.rows:this.columns,this.drilledMembers[s].items[p].split(this.drilledMembers[s].delimiter?this.drilledMembers[s].delimiter:"~~"));if((!this.isPaging||d<o&&u.isDrill)&&(0===this.drilledMembers[s].items[p].indexOf(t.join(i))||0===t.join(i).indexOf(this.drilledMembers[s].items[p]))){a=!0;break}}}return a},e.getDrillQuery=function(e,t,i,r){var n="",a=[],o=[],s=!1,l="";r&&r.axis===i&&"down"===r.action.toLowerCase()?(s=!0,o=[{name:r.fieldName,items:[r.memberName],delimiter:"~~"}]):o=this.drilledMembers;for(var d=0,p=o;d<p.length;d++){var u=p[d];if(!(!!this.engine.fieldList[u.name]&&this.engine.fieldList[u.name].isHierarchy))for(var h=0,c=u.items;h<c.length;h++){for(var g=c[h],m=[],f=[],v=0,S=g.split(u.delimiter?u.delimiter:"~~"),y=this.isAttributeMemberExist(u.name,g.split(u.delimiter?u.delimiter:"~~"),u.delimiter?u.delimiter:"~~",S,i);v<e.length&&!y;){if(S[v]&&-1!==S[v].indexOf(e[v].name))-1!==S[S.length-1].indexOf(e[v].name)?s?l=l+(""!==l?" * ":"")+"({"+S[v]+".CHILDREN})":(m.push("("+S[v]+".CHILDREN)"),f.push("("+S[v]+")")):"[measures]"===S[v].toLowerCase()&&""!==t?s?l=l+(""!==l?" * ":"")+"("+t+")":(m.push("("+t+")"),f.push("("+t+")")):-1!==S[v].toLowerCase().indexOf("[measures]")?s?l=l+(""!==l?" * ":"")+"({"+S[v]+"})":(m.push("({"+S[v]+"})"),f.push("({"+S[v]+"})")):s?l=l+(""!==l?" * ":"")+"({"+S[v]+"})":(m.push("("+S[v]+")"),f.push("("+S[v]+")"));else{if(S[v]||!e[v]){m=[];break}"[measures]"===e[v].name.toLowerCase()&&""!==t?s?l=l+(""!==l?" * ":"")+"("+t+")":(m.push("("+t+")"),f.push("("+t+")")):s?l=l+(""!==l?" * ":"")+"({"+this.getDimensionQuery(e[v],i)+"})":(m.push("("+this.getDimensionQuery(e[v],i)+")"),f.push("("+this.getDimensionQuery(e[v],i)+")"))}v++}m.length>0&&m.length<S.length&&(m=[],f=[]),n=n+(""!==n&&m.length>0?",":"")+(m.length>0?"("+m.toString()+")":""),f.length>0&&a.push("("+f.toString()+")")}}return{query:s?l:n,collection:s?[l]:a}},e.updateValueSortQuery=function(e,t){if(t&&t.measure&&""!==t.measure){var i=this.drilledMembers.length>0?"HIERARCHIZE ({":"",r=this.fieldList[t.measure].isCalculatedField?this.fieldList[t.measure].tag:t.measure;switch(t.sortOrder){case"Ascending":e=e.replace("NON EMPTY ( "+i,"NON EMPTY ( "+i+" ORDER ({"),e=e+"},("+r+"), ASC)";break;case"Descending":e=e.replace("NON EMPTY ( "+i,"NON EMPTY ( "+i+" ORDER ({"),e=e+"},("+r+"), DESC)"}}return e},e.getSlicersQuery=function(e,t){var n=this,a="",o=i.i(r.extend)([],this.rows,null,!0);if(o=o.concat(this.columns),e.length>0){for(var s=0;s<e.length;){o.filter(function(t){var i=n.getDimensionUniqueName(t.name),r=n.getDimensionUniqueName(e[s].name);return i===r&&!(n.isMondrian&&""===r&&""===i)}).length>0||(void 0===e[s].name||this.filterMembers[e[s].name]?this.filterMembers[e[s].name]&&(a=a+(""!==a?" * ":"")+"{"+this.filterMembers[e[s].name].toString()+"}"):a=a+(""!==a?" * ":"")+"{"+this.getDimensionQuery(e[s],t)+"}"),s++}a=""===a?"":"\nWHERE ("+a.replace(/DrilldownLevel/g,"")+")"}return a},e.getDimensionQuery=function(e,t){var i=e.isCalculatedField?this.fieldList[e.name].tag:e.name;return this.fieldList[e.name].hasAllMember||e.isNamedSet||e.isCalculatedField?e.isNamedSet||e.isCalculatedField?"{"+i+"}":this.isPaging?i+".CHILDREN":"DrilldownLevel({"+i+"}"+("rows"===t||"columns"===t?",,,INCLUDE_CALC_MEMBERS":"")+")":"(("+i+").levels(0).AllMembers)"},e.getDimensionUniqueName=function(e){var t=this.fieldDataObj.hierarchy,i=[];if(t){for(var r=0,n=t;r<n.length;r++){var a=n[r];a.id.toLowerCase()===e.toLowerCase()&&i.push(a)}return i.length>0?i[0].pid:""}return e.split(".")[0]},e.getMeasuresQuery=function(e){var t="";if(e.length>0){t="{{";for(var i="",r=0,n=e;r<n.length;r++){var a=n[r],o=a.isCalculatedField?this.fieldList[a.name].tag:a.name;i=i.length>0?i+", "+o:o}t=t+i+"}}"}return t},e.getfilterQuery=function(e,t){for(var i="\nFROM ["+t+"]",r="\nFROM( SELECT (",n=[],a=[],o=[],s=[],l=0,d=this.rows;l<d.length;l++){var p=d[l];e[p.name]&&e[p.name].length>0&&("string"==typeof e[p.name][0]?o.push(e[p.name]):(e[p.name][1]=e[p.name][0].type,n.push(e[p.name]),delete e[p.name]))}for(var u=0,h=this.columns;u<h.length;u++){var p=h[u];if(e[p.name]&&e[p.name].length>0)if("string"==typeof e[p.name][0])s.push(e[p.name]);else{var c=e[p.name];c[1]=c[0].type,n.push(e[p.name]),delete e[p.name]}}for(var g=0,m=this.filters;g<m.length;g++){for(var p=m[g],f=!1,v=0,S=this.columns;v<S.length;v++){var y=S[v];f||this.getDimensionUniqueName(y.name)!==this.getDimensionUniqueName(p.name)||e[p.name]&&(s.push(e[p.name]),f=!0)}if(!f)for(var b=0,C=this.rows;b<C.length;b++){var x=C[b];f||this.getDimensionUniqueName(x.name)!==this.getDimensionUniqueName(p.name)||e[p.name]&&(o.push(e[p.name]),f=!0)}}if((this.allowLabelFilter||this.allowValueFilter)&&n.length>0)for(var w=["Value","Label"],T=0,M=w;T<M.length;T++)for(var _=M[T],D=0,O=n;D<O.length;D++){var P=O[D];P&&2===P.length&&"string"==typeof P[1]&&P[1]===_&&a.push(this.getAdvancedFilterQuery(P[0],r,"COLUMNS"))}for(var N=0,E=s.length;N<E;N++)r=0===N?r+"{"+s[N].toString()+"}":r+",{"+s[N].toString()+"}";s.length>0&&(r=o.length>0?r+" ) ON COLUMNS ,(":r+" ) ON COLUMNS");for(var N=0,E=o.length;N<E;N++)r=N>0?r+",{"+o[N].toString()+"}":r+"{"+o[N].toString()+"}";r=s.length>0&&o.length>0?r+=") ON ROWS ":0===s.length&&o.length>0?r+") ON COLUMNS ":r;var I="";return a.length>0&&(I=a.join(" ")+" "+(s.length>0||o.length>0?r:"")+" "+i+Array(a.length+1+(s.length>0||o.length>0?1:0)).join(")")),i=0===s.length&&0===o.length?i:r+i+")",I.length>0?I:i},e.getAdvancedFilterQuery=function(e,t,i){return"\nFROM (SELECT Filter("+e.selectedField+".AllMembers, "+this.getAdvancedFilterCondtions(e.name,e.condition,e.value1,e.value2,e.type,e.measure)+")) on "+i},e.getAdvancedFilterCondtions=function(e,t,i,r,n,a){var o="";switch(t){case"Equals":o="("+("Value"!==n?e+'.CurrentMember.member_caption ="'+i+'"':a+" = "+i);break;case"DoesNotEquals":o="("+("Value"!==n?e+'.CurrentMember.member_caption <>"'+i+'"':a+" <>"+i);break;case"Contains":o="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i+'") >0';break;case"DoesNotContains":o="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i+'")=0';break;case"BeginWith":o="( Left ("+e+".CurrentMember.member_caption,"+i.length+')="'+i+'"';break;case"DoesNotBeginWith":o="( Left ("+e+".CurrentMember.member_caption,"+i.length+') <>"'+i+'"';break;case"EndsWith":o="( Right ("+e+".CurrentMember.member_caption,"+i.length+')="'+i+'"';break;case"DoesNotEndsWith":o="( Right ("+e+".CurrentMember.member_caption,"+i.length+') <>"'+i+'"';break;case"GreaterThan":o="("+("Value"!==n?e+'.CurrentMember.member_caption >"'+i+'"':a+" >"+i);break;case"GreaterThanOrEqualTo":o="("+("Value"!==n?e+'.CurrentMember.member_caption >="'+i+'"':a+" >="+i);break;case"LessThan":o="("+("Value"!==n?e+'.CurrentMember.member_caption <"'+i+'"':a+" <"+i);break;case"LessThanOrEqualTo":o="("+("Value"!==n?e+'.CurrentMember.member_caption <="'+i+'"':a+" <="+i);break;case"Between":o="("+("Value"!==n?e+'.CurrentMember.member_caption >="'+i+'"AND '+e+'.CurrentMember.member_caption <="'+r+'"':a+" >="+i+" AND "+a+" <="+r);break;case"NotBetween":o="("+("Value"!==n?e+'.CurrentMember.member_caption >="'+i+'"OR '+e+'.CurrentMember.member_caption <="'+r+'"':a+" >="+i+" OR "+a+" <="+r);break;default:o="( InStr (1,"+e+'.CurrentMember.member_caption,"'+i+'") >0'}return o},e.getCalculatedFieldQuery=function(e){var t="";if(e.length>0){t="\nWITH";for(var n=0,a=e;n<a.length;n++){var o=a[n],s=o.formula.indexOf("Measure")>-1?"[Measures].":o.hierarchyUniqueName+".",l=s+"["+o.name+"]",d=i.i(r.isNullOrUndefined)(o.formatString)?null:o.formatString;t+="\nMEMBER "+l+"as ("+o.formula+") "+(i.i(r.isNullOrUndefined)(d)?"":', FORMAT_STRING ="'+d.trim()+'"')}}return t},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(1),n=i(17),a=i(0),o=(i.n(a),function(){function e(e){this.parent=e,this.parent.commonModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"common"},e.prototype.initiateCommonModule=function(){if(this.parent.pivotCommon)this.parent.pivotCommon.element=this.parent.element,this.parent.pivotCommon.engineModule="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.parent.pivotCommon.parentID=this.parent.element.id,this.parent.pivotCommon.dataSourceSettings=this.parent.dataSourceSettings.properties?this.parent.dataSourceSettings.properties:this.parent.dataSourceSettings,this.parent.pivotCommon.moduleName=this.parent.getModuleName(),this.parent.pivotCommon.enableRtl=this.parent.enableRtl,this.parent.pivotCommon.isAdaptive=a.Browser.isDevice,this.parent.pivotCommon.renderMode="Popup",this.parent.pivotCommon.localeObj=this.parent.localeObj,this.parent.pivotCommon.dataType=this.parent.dataType,this.parent.pivotCommon.cssClass=this.parent.cssClass;else{var e={pivotEngine:"olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,dataSourceSettings:this.parent.dataSourceSettings.properties?this.parent.dataSourceSettings.properties:this.parent.dataSourceSettings,id:this.parent.element.id,element:this.parent.element,moduleName:this.parent.getModuleName(),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isAdaptive:a.Browser.isDevice,renderMode:"Popup",localeObj:this.parent.localeObj,dataType:this.parent.dataType,cssClass:this.parent.cssClass};this.parent.pivotCommon=new n.a(e)}this.parent.pivotCommon.control=this.parent},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(r._18,this.initiateCommonModule,this),this.parent.on(r._19,this.initiateCommonModule,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(r._18,this.initiateCommonModule),this.parent.off(r._19,this.initiateCommonModule))},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pivotCommon&&(this.parent.pivotCommon.destroy(),this.parent.pivotCommon=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(1),n=i(3),a=i(0),o=(i.n(a),function(){function e(e){this.parent=e}return e.prototype.updateDataSource=function(e,t,o){for(var s,l,d=this,p=-1,u=!0,h=this.parent.dataSourceSettings.rows,c=this.parent.dataSourceSettings.columns,g=this.parent.dataSourceSettings.values,m=this.parent.dataSourceSettings.filters,f=[h,c,g,m],v=0,S=f.length;v<S;v++)if(f[v])for(var y=0,b=f[v].length;y<b;y++)(f[v][y].name===e||"olap"===this.parent.dataType&&"[measures]"===f[v][y].name.toLowerCase()&&f[v][y].name.toLowerCase()===e)&&(l=0===v?"rows":1===v?"columns":2===v?"values":"filters",p=y),l||(l="fieldList");var C={fieldName:e,dropField:n.a.getFieldInfo(e,this.control).fieldItem,dataSourceSettings:n.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:t,dropPosition:o,draggedAxis:l,cancel:!1},x="pivotfieldlist"===this.control.getModuleName()&&this.control.isPopupView?this.control.pivotGridModule:this.control;return x.trigger(r.e,C,function(h){if(h.cancel)u=!1;else{if(t=h.dropAxis,o=h.dropPosition,e=h.dropField?h.dropField.name:h.fieldName,s=h.dropField,d.control&&d.btnElement&&"true"===d.btnElement.getAttribute("isvalue"))switch(t){case"":d.control.setProperties({dataSourceSettings:{values:[]}},!0);break;case"rows":o=o===d.parent.dataSourceSettings.rows.length?-1:o,d.control.setProperties({dataSourceSettings:{valueAxis:"row",valueIndex:o}},!0);break;case"columns":o=o===d.parent.dataSourceSettings.columns.length?-1:o,d.control.setProperties({dataSourceSettings:{valueAxis:"column",valueIndex:o}},!0)}else{if(d.removeFieldFromReport(e.toString()),"pivot"===d.parent.dataType&&d.control.showValuesButton&&d.parent.dataSourceSettings.values.length>1){var c="row"===d.parent.dataSourceSettings.valueAxis&&"rows"===t?d.parent.dataSourceSettings.rows:"column"===d.parent.dataSourceSettings.valueAxis&&"columns"===t?d.parent.dataSourceSettings.columns:void 0;p<d.parent.dataSourceSettings.valueIndex&&("row"===d.parent.dataSourceSettings.valueAxis&&"rows"===l||"column"===d.parent.dataSourceSettings.valueAxis&&"columns"===l)&&d.control.setProperties({dataSourceSettings:{valueIndex:d.parent.dataSourceSettings.valueIndex-1}},!0),i.i(a.isNullOrUndefined)(c)||(-1===o&&-1===d.parent.dataSourceSettings.valueIndex?d.control.setProperties({dataSourceSettings:{valueIndex:c.length}},!0):o>-1&&o<=d.parent.dataSourceSettings.valueIndex?d.control.setProperties({dataSourceSettings:{valueIndex:d.parent.dataSourceSettings.valueIndex+1}},!0):d.parent.dataSourceSettings.valueIndex>-1&&o>d.parent.dataSourceSettings.valueIndex&&(o-=1))}s=d.getNewField(e.toString(),h.dropField),"CalculatedField"===s.type&&""!==t&&(t="values")}if("olap"===d.parent.dataType&&(d.removeFieldFromReport(e.toString()),s=d.getNewField(e.toString(),h.dropField),0===d.parent.dataSourceSettings.values.length&&d.removeFieldFromReport("[measures]"),"CalculatedField"===s.type&&""!==t&&(t="values")),d.control){var g={fieldName:e,droppedField:s,dataSourceSettings:n.a.getClonedDataSourceSettings(d.parent.dataSourceSettings),droppedAxis:t,droppedPosition:o};x.trigger(r.d,g,function(e){if(s=e.droppedField)switch(o=e.droppedPosition,t=e.droppedAxis){case"filters":-1!==o?d.parent.dataSourceSettings.filters.splice(o,0,s):d.parent.dataSourceSettings.filters.push(s);break;case"rows":-1!==o?d.parent.dataSourceSettings.rows.splice(o,0,s):d.parent.dataSourceSettings.rows.push(s);break;case"columns":-1!==o?d.parent.dataSourceSettings.columns.splice(o,0,s):d.parent.dataSourceSettings.columns.push(s);break;case"values":if(-1!==o?d.parent.dataSourceSettings.values.splice(o,0,s):d.parent.dataSourceSettings.values.push(s),!("olap"!==d.parent.dataType||d.parent.engineModule.isMeasureAvail||d.parent.dataSourceSettings.values.length>1)){var i={name:"[Measures]",caption:"Measures",showRemoveIcon:!0,allowDragAndDrop:!0};("row"===d.parent.dataSourceSettings.valueAxis?d.parent.dataSourceSettings.rows:d.parent.dataSourceSettings.columns).push(i)}}})}}}),u},e.prototype.removeFieldFromReport=function(e){for(var t,i=!1,r=this.parent.dataSourceSettings.rows,n=this.parent.dataSourceSettings.columns,a=this.parent.dataSourceSettings.values,o=this.parent.dataSourceSettings.filters,s=[r,n,a,o],l=this.parent.engineModule.fieldList[e],d=0,p=s.length;d<p;d++)if(!i&&s[d])for(var u=0,h=s[d].length;u<h;u++)if(s[d][u].name===e||"olap"===this.parent.dataType&&"[measures]"===s[d][u].name.toLowerCase()&&s[d][u].name.toLowerCase()===e){if(t=s[d][u].properties?s[d][u].properties:s[d][u],t.type=l&&"number"===l.type?t.type:"Count",s[d].splice(u,1),"olap"===this.parent.dataType){var c=this.parent.engineModule;c&&c.fieldList[e]&&(c.fieldList[e].currrentMembers={},c.fieldList[e].searchMembers=[])}i=!0;break}return t},e.prototype.getNewField=function(e,t){var i;if("olap"===this.parent.dataType){var r=this.parent.engineModule.fieldList[e];i={name:t?t.name:e,caption:t?t.caption:r.caption,isNamedSet:t?t.isNamedSet:r.isNamedSets,isCalculatedField:t?t.isCalculatedField:r.isCalculatedField,type:t?void 0===t.type?"number"===r.type?"Sum":"Count":t.type:void 0===r.aggregateType?"number"===r.type?"Sum":"Count":r.aggregateType,showFilterIcon:t?t.showFilterIcon:r.showFilterIcon,showSortIcon:t?t.showSortIcon:r.showSortIcon,showEditIcon:t?t.showEditIcon:r.showEditIcon,showRemoveIcon:t?t.showRemoveIcon:r.showRemoveIcon,showValueTypeIcon:t?t.showValueTypeIcon:r.showValueTypeIcon,allowDragAndDrop:t?t.allowDragAndDrop:r.allowDragAndDrop,showSubTotals:t?t.showSubTotals:r.showSubTotals,expandAll:t?t.expandAll:r.expandAll}}else{var r=this.parent.engineModule.fieldList[e];i={name:t?t.name:e,caption:t?t.caption:r.caption,type:t?void 0===t.type||null===t.type?"number"===r.type?"Sum":"Count":t.type:void 0===r.aggregateType||null===r.aggregateType?"number"===r.type?"Sum":"Count":r.aggregateType,showNoDataItems:t?t.showNoDataItems:r.showNoDataItems,baseField:t?t.baseField:r.baseField,baseItem:t?t.baseItem:r.baseItem,allowDragAndDrop:t?t.allowDragAndDrop:r.allowDragAndDrop,showSubTotals:t?t.showSubTotals:r.showSubTotals,showFilterIcon:t?t.showFilterIcon:r.showFilterIcon,showSortIcon:t?t.showSortIcon:r.showSortIcon,showEditIcon:t?t.showEditIcon:r.showEditIcon,showRemoveIcon:t?t.showRemoveIcon:r.showRemoveIcon,showValueTypeIcon:t?t.showValueTypeIcon:r.showValueTypeIcon,expandAll:t?t.expandAll:r.expandAll}}return i},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),n=(i.n(r),i(2)),a=i(3),o=i(1),s=function(){function e(e){this.searchListItem=[],this.parent=e}return e.prototype.updateSorting=function(e){if(!e.target.classList.contains(n._215)&&!e.target.classList.contains(n._203)){this.parent.filterDialog.dialogPopUp&&this.parent.filterDialog.dialogPopUp.close();var t=e.target,o=void 0,s=void 0,l=void 0;t.id?(o=t.getAttribute("data-uid"),s=[].slice.call(t.querySelectorAll("."+n._211))):(o=t.parentElement.getAttribute("data-uid"),s=[].slice.call(t.parentElement.querySelectorAll("."+n._211))),l=0!==s.length;var d=a.a.getFieldByName(o,this.parent.dataSourceSettings.sortSettings),p=this.parent.engineModule&&this.parent.engineModule.fieldList[o]&&this.parent.engineModule.fieldList[o].membersOrder?this.parent.engineModule.fieldList[o].membersOrder.slice():[];if(i.i(r.isNullOrUndefined)(d)){var u={name:o,order:l?"Ascending":"Descending",membersOrder:d?d.membersOrder:p};this.parent.dataSourceSettings.sortSettings.push(u)}else{for(var h=0;h<this.parent.dataSourceSettings.sortSettings.length;h++)if(this.parent.dataSourceSettings.sortSettings[h].name===o){this.parent.dataSourceSettings.sortSettings.splice(h,1);break}var u={name:o,order:l?"Ascending":"Descending",membersOrder:d?d.membersOrder:p};this.parent.dataSourceSettings.sortSettings.push(u)}this.parent.control.lastSortInfo=this.parent.dataSourceSettings.sortSettings[this.parent.dataSourceSettings.sortSettings.length-1],l?i.i(r.removeClass)([t],n._211):i.i(r.addClass)([t],n._211)}},e.prototype.updateFiltering=function(e){var t=e.target,n=t.parentElement.getAttribute("data-uid"),s=t.parentElement.textContent,l=!1,d=[],p=[];if(this.parent.dataSourceSettings.allowMemberFilter)if("olap"===this.parent.dataType)p=this.getOlapData(n,l);else{var u=this.parent.engineModule.fieldList[n],h=a.a.getClonedData(u.dateMember),c=u&&u.membersOrder?u.membersOrder.slice():[],g=void 0;"Out of Range"===h[0].actualText?(g=h[0],h.splice(0,1)):"Out of Range"===h[h.length-1].actualText&&(g=h[h.length-1],h.splice(h.length-1,1));var m={fieldName:n,sortOrder:u.sort,members:c&&c.length>0?c:Object.keys(h),IsOrderChanged:!1},f=!1,v=!(!u||!u.isAlphanumeric)||void 0;c&&c.length>0?h=a.a.applyCustomSort(m,h,v):(h=a.a.applyHeadersSort(h,m.sortOrder,v),f=!0);var S=a.a.getFilterItemByName(n,this.parent.dataSourceSettings.filterSettings);if(i.i(r.isNullOrUndefined)(S)||(l=!(!this.isValidFilterItemsAvail(n,S)||"Include"!==S.type),d=S.items?S.items:[]),g&&("Ascending"===m.sortOrder?"Grand Total"===h[h.length-1].actualText?h.splice(h.length-1,0,g):h.splice(h.length,0,g):"Grand Total"===h[0].actualText?h.splice(1,0,g):h.splice(0,0,g)),f){for(var y=[],b=0,C=0;b<h.length;b++)"Grand Total"!==h[b].actualText&&(y[C++]=h[b].actualText);m.members=y}this.parent.control.trigger(o.Y,m),m.IsOrderChanged&&(h=a.a.applyCustomSort(m,h,v,!0)),p=this.getTreeData(l,h,d,n)}this.parent.filterDialog.dialogPopUp&&this.parent.filterDialog.dialogPopUp.close();var x=this.parent.control.filterTargetID;i.i(r.isNullOrUndefined)(x)&&(x="pivotfieldlist"!==this.parent.moduleName?this.parent.element:document.getElementById(this.parent.parentID+"_Container")),this.parent.filterDialog.createFilterDialog(p,n,s,x)},e.prototype.isValidFilterItemsAvail=function(e,t){var i=!1,r=["Include","Exclude"];if(t&&r.indexOf(t.type)>=0)if("Include"===t.type&&0===t.items.length)i=!0;else for(var n=this.parent.engineModule,a=n.fieldList[e],o=n.formatFields[e]&&["date","dateTime","time"].indexOf(n.formatFields[e].type)>-1?a.formattedMembers:a.members,s=0,l=t.items;s<l.length;s++){var d=l[s];if(o[d]){i=!0;break}}return i},e.prototype.getOlapData=function(e,t){var n=[],o=[];this.parent.filterDialog.isSearchEnabled=!1;var s=[],l=this.parent.engineModule,d=a.a.getFilterItemByName(e,this.parent.dataSourceSettings.filterSettings);0===l.fieldList[e].filterMembers.length?this.parent.control.loadOnDemandInMemberEditor?d&&d.levelCount>1&&l.fieldList[e].levels.length>1?l.getFilterMembers(this.parent.dataSourceSettings,e,d.levelCount):(l.fieldList[e].levelCount=1,l.getMembers(this.parent.dataSourceSettings,e)):l.getMembers(this.parent.dataSourceSettings,e,!0):(l.fieldList[e].currrentMembers={},l.fieldList[e].searchMembers=[]);var p=l.fieldList[e].isHierarchy;n=l.fieldList[e].filterMembers,i.i(r.isNullOrUndefined)(d)||(t=!d.type||"Include"===d.type,o=d.items?d.items:[]);for(var u={},h={},c=l.fieldList[e].members,g=0,m=o;g<m.length;g++){var f=m[g];u[f]=f,h[f]=f,c[f]&&(h=this.getParentNode(e,f,h))}return n=this.getFilteredTreeNodes(e,n,h,s),n=this.getOlapTreeData(t,a.a.getClonedData(n),u,e,p),n=this.sortOlapFilterData(n,l.fieldList[e].sort)},e.prototype.sortOlapFilterData=function(e,t){if(e.length>0){for(var i=!1,r=[],n=0;n<e.length;n++)r.push(e[n].caption);var a="Grand Total"!==e[0].caption||void 0===e[0].caption?e[0].htmlAttributes["data-fieldName"]:e[1].htmlAttributes["data-fieldName"],s=this.parent.engineModule,l=s.fieldList[a],d=l&&l.membersOrder?l.membersOrder.slice():[],p={fieldName:a,sortOrder:t,members:d&&d.length>0?d:r,IsOrderChanged:!1};if(d&&d.length>0?this.applyFilterCustomSort(e,p):(e="Ascending"===t?e.sort(function(e,t){return e.caption>t.caption?1:t.caption>e.caption?-1:0}):"Descending"===t?e.sort(function(e,t){return e.caption<t.caption?1:t.caption<e.caption?-1:0}):e,i=!0),i){for(var u=[],h=0,c=0;h<e.length;h++)"Grand Total"!==e[h].caption&&(u[c++]=e[h].caption);p.members=u}this.parent.control.trigger(o.Y,p),p.IsOrderChanged&&this.applyFilterCustomSort(e,p,!0)}return e},e.prototype.applyFilterCustomSort=function(e,t,i){var r,n=[],a=[];n=t.IsOrderChanged?t.members:"Ascending"===t.sortOrder||"None"===t.sortOrder||void 0===t.sortOrder?[].concat(t.members):[].concat(t.members).reverse(),"Grand Total"===e[0].caption&&(r=e[0],e.shift());for(var o=0,s=0;o<e.length;o++){var l=e[o].caption;if(n[s]===l){if(e.splice(s++,0,e[o]),e.splice(++o,1),!(s<n.length)){i||a.splice(--s,0,l);break}o=-1}o>=0&&!i&&(a[o]=e[o].caption)}if(!i){for(var o=a.length;o<e.length;o++)a[o]=e[o].caption;"Grand Total"===a[a.length-1]&&a.pop(),t.members=a}return r&&e.splice(0,0,r),e},e.prototype.getParentIDs=function(e,t,i){for(var r,n=e.fields.dataSource,a=0,o=n;a<o.length;a++){var s=o[a];if(s.id===t){r=s.pid;break}}return r&&(i.push(r),this.getParentIDs(e,r,i)),i},e.prototype.getChildIDs=function(e,t,i){for(var r,n=e.fields.dataSource,a=0,o=n;a<o.length;a++){var s=o[a];if(s.pid===t){r=s.id;break}}return r&&(i.push(r),this.getParentIDs(e,r,i)),i},e.prototype.searchTreeNodes=function(e,t,o,s){if(o){for(var l=[],d=[],p=[].slice.call(t.element.querySelectorAll("li")),u=0,h=p;u<h.length;u++){var c=h[u];c.querySelector(".e-list-text").textContent.toLowerCase().indexOf(e.value.toLowerCase())>-1?l.push(c):d.push(c)}if(t.enableNodes(l),i.i(r.removeClass)(l,n._76),t.disableNodes(d),i.i(r.addClass)(d,n._76),l.length>0&&d.length>0)for(var g=0,m=l;g<m.length;g++){var f=m[g],v=f.getAttribute("data-uid"),S=this.getParentIDs(t,v,[]),y=this.getChildIDs(t,v,[]),b=[];if(S.length>0)for(var C=0,x=d;C<x.length;C++){var w=x[C];-1!==a.a.inArray(w.getAttribute("data-uid"),S)&&b.push(w)}if(y.length>0)for(var T=0,M=d;T<M.length;T++){var w=M[T];-1!==a.a.inArray(w.getAttribute("data-uid"),y)&&b.push(w)}t.enableNodes(b),i.i(r.removeClass)(b,n._76)}0===[].slice.call(t.element.querySelectorAll("li."+n._76)).length?t.collapseAll():t.expandAll(void 0,void 0,!0),this.searchListItem=l}else if(this.parent.searchTreeItems=[],"olap"!==this.parent.dataType||s){var l=[],_=0;_=1;for(var D=0,O=this.parent.currentTreeItems;D<O.length;D++){var P=O[D];P.name.toLowerCase().indexOf(e.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(P),_<=this.parent.control.maxNodeLimitInMemberEditor&&l.push(P),_++)}_--,_>this.parent.control.maxNodeLimitInMemberEditor?(this.parent.editorLabelElement.innerText=_-this.parent.control.maxNodeLimitInMemberEditor+this.parent.control.localeObj.getConstant("editorDataLimitMsg"),this.parent.filterDialog.dialogPopUp.height=this.parent.filterDialog.allowExcelLikeFilter?"440px":"400px",this.parent.isDataOverflow=!0):(this.parent.editorLabelElement.innerText="",this.parent.filterDialog.dialogPopUp.height=this.parent.filterDialog.allowExcelLikeFilter?"400px":"350px",this.parent.isDataOverflow=!1),this.parent.isDataOverflow=_>this.parent.control.maxNodeLimitInMemberEditor,this.parent.editorLabelElement.parentElement.style.display=this.parent.isDataOverflow?"block":"none",t.fields={dataSource:l,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},t.dataBind()}else this.updateOlapSearchTree(e,t,s)},e.prototype.updateOlapSearchTree=function(e,t,i){var r=[],n=this.parent.filterDialog.dialogPopUp.element,o=n.getAttribute("data-fieldname");if(""===e.value.toLowerCase()){this.parent.filterDialog.isSearchEnabled=!1,this.parent.engineModule.fieldList[o].searchMembers=[];for(var s=[],l={},d={},p=this.parent.engineModule.fieldList[o].members,u=Object.keys(p),h=[],c=0,g=u;c<g.length;c++){var m=g[c];p[m].isSelected&&(p[m].parent&&p[p[m].parent].isSelected||h.push(m))}for(var f=0,v=h;f<v.length;f++){var m=v[f];l[m]=m,d[m]=m,p[m]&&(d=this.getParentNode(o,m,d))}var S=this.parent.engineModule.fieldList[o].filterMembers;r=this.getFilteredTreeNodes(o,S,d,s),r=this.getOlapTreeData(!0,a.a.getClonedData(r),l,o,i,!0)}else{this.parent.filterDialog.isSearchEnabled=!0;var S=this.parent.engineModule.fieldList[o].searchMembers;r=a.a.getClonedData(S),r=this.getOlapSearchTreeData(!0,r,o)}t.fields={dataSource:r,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},t.dataBind()},e.prototype.getTreeData=function(e,t,i,n){this.parent.currentTreeItems=[],this.parent.searchTreeItems=[],this.parent.currentTreeItemsPos={},this.parent.savedTreeFilterPos={};var a=this.parent.engineModule;this.parent.isDateField=a.formatFields[n]&&["date","dateTime","time"].indexOf(a.formatFields[n].type)>-1;for(var o=[],s=1,l={},d=0,p=i;d<p.length;d++){var u=p[d];l[u]=u}for(var h=n.replace(/[^a-zA-Z0-9 ]/g,"_"),c=0,g=t;c<g.length;c++){var m=g[c],f=a.formatFields[n]?m.formattedText:m.actualText.toString();f=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(f):f;var v=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(m.actualText):m.actualText,S={"data-fieldName":n,"data-memberId":v.toString()},y={id:h+"_"+s,htmlAttributes:S,actualText:v,name:f,isSelected:!e};void 0!==l[v]&&(y.isSelected=!!e),s<=this.parent.control.maxNodeLimitInMemberEditor&&o.push(y),y.isSelected||(this.parent.savedTreeFilterPos[s-1]=f),this.parent.currentTreeItems.push(y),this.parent.searchTreeItems.push(y),this.parent.currentTreeItemsPos[v]={index:s-1,isSelected:y.isSelected},s++}return this.parent.isDataOverflow=s-1>this.parent.control.maxNodeLimitInMemberEditor,o},e.prototype.getOlapTreeData=function(e,t,i,r,n,a){var o=this.parent.engineModule,s=o.fieldList[r];this.parent.currentTreeItems=[],this.parent.searchTreeItems=[],this.parent.currentTreeItemsPos={};for(var l=[],d=1,p=0,u=t;p<u.length;p++){var h=u[p],c=h,g=h.id.toString();a||(c.isSelected=!e),void 0!==i[g]&&(c.isSelected=!!e),!a&&h.hasChildren&&this.updateChildNodeStates(s.filterMembers,r,h.id,c.isSelected),s.members[g].isSelected=c.isSelected,s.currrentMembers&&s.currrentMembers[g]&&(s.currrentMembers[g].isSelected=c.isSelected),d<=this.parent.control.maxNodeLimitInMemberEditor&&n&&l.push(c),this.parent.currentTreeItems.push(c),this.parent.searchTreeItems.push(c),this.parent.currentTreeItemsPos[g]={index:d-1,isSelected:c.isSelected},d++}return this.parent.isDataOverflow=!!n&&d-1>this.parent.control.maxNodeLimitInMemberEditor,n?l:t},e.prototype.getOlapSearchTreeData=function(e,t,i){for(var r=this.parent.engineModule.fieldList[i].members,n=0,a=t;n<a.length;n++){var o=a[n],s=o.id.toString();r[s]&&(o.isSelected=r[s].isSelected),this.parent.searchTreeItems.push(o)}return t},e.prototype.updateChildNodeStates=function(e,t,i,r){for(var n=this.parent.engineModule.fieldList[t].members,a=this.parent.engineModule.fieldList[t].currrentMembers,o=0,s=e;o<s.length;o++){var l=s[o];l.pid&&l.pid.toString()===i&&(n[l.id].isSelected=r,a&&a[l.id]&&(a[l.id].isSelected=r),l.hasChildren&&this.updateChildNodeStates(e,t,l.id,r))}},e.prototype.getParentNode=function(e,t,i){var r=this.parent.engineModule.fieldList[e].members;if(r[t].parent&&t!==r[t].parent){var n=r[t].parent;i[n]=n,this.getParentNode(e,n,i)}return i},e.prototype.getFilteredTreeNodes=function(e,t,n,o){for(var s=[],l=this.parent.engineModule.fieldList[e].members,d=n?Object.keys(n):[],p=0,u=d;p<u.length;p++){var h=u[p],c=l[h]?l[h].parent:void 0;void 0!==c&&-1===a.a.inArray(c,s)&&s.push(c)}for(var g=0,m=t;g<m.length;g++){var f=m[g];i.i(r.isNullOrUndefined)(f.pid)||-1!==a.a.inArray(f.pid,s)?(o.push(f),i.i(r.isNullOrUndefined)(f.pid)&&-1!==a.a.inArray(f.id,s)?l[f.id].isNodeExpand=!0:i.i(r.isNullOrUndefined)(f.pid)||-1===a.a.inArray(f.pid,s)?l[f.id].isNodeExpand=!1:(l[f.id].isNodeExpand=!1,l[f.pid].isNodeExpand=!0)):l[f.id].isNodeExpand=!1}return o},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),n=(i.n(r),i(2)),a=i(4),o=(i.n(a),function(){function e(e){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E",delete:"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow",altJ:"alt+J"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new r.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"shiftF":this.processFilter(e);break;case"shiftS":this.processSort(e);break;case"shiftE":this.processEdit(e);break;case"delete":this.processDelete(e);break;case"enter":this.processEnter(e);break;case"escape":this.processClose(e);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(e);break;case"altJ":this.processComponentFocus(e)}},e.prototype.processComponentFocus=function(e){if(this.parent.element)return this.parent.element.focus(),e.stopPropagation(),void e.preventDefault()},e.prototype.getButtonElement=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll("."+n._39)),i=0,r=t.length;i<r;i++)if(t[i].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[i];return e},e.prototype.processEnter=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._39))return t.querySelector("."+n._210)&&i.i(r.closest)(t,"."+n._184)?t.querySelector("."+n._210).click():t.querySelector("."+n._133)?t.querySelector("."+n._133).click():!t.querySelector("."+n._212)||i.i(r.closest)(t,"."+n._184)||i.i(r.closest)(t,"."+n._179)?t.querySelector("."+n._215)&&!i.i(r.closest)(t,"."+n._184)&&t.querySelector("."+n._215).click():(t.querySelector("."+n._212).click(),this.getButtonElement(t).focus()),void e.preventDefault()},e.prototype.processSort=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._39)&&t.querySelector("."+n._212)&&!i.i(r.closest)(t,"."+n._184)&&!i.i(r.closest)(t,"."+n._179))return t.querySelector("."+n._212).click(),this.getButtonElement(t).focus(),void e.preventDefault()},e.prototype.processEdit=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._39)&&t.querySelector("."+n._133))return t.querySelector("."+n._133).click(),void e.preventDefault()},e.prototype.processFilter=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._39)&&t.querySelector("."+n._215)&&!i.i(r.closest)(t,"."+n._184)){if(t.querySelector("."+n._215).click(),this.parent&&this.parent.control&&"pivotview"===this.parent.moduleName&&this.parent.control.grid&&this.parent.control.showGroupingBar&&this.parent.control.groupingBarModule&&i.i(r.closest)(t,"."+n._68)&&this.parent.filterDialog&&this.parent.filterDialog.dialogPopUp&&!this.parent.filterDialog.dialogPopUp.isDestroyed&&this.parent.filterDialog.dialogPopUp.element){var a=this.parent.filterDialog.dialogPopUp.element,o=this.parent.filterDialog.allowExcelLikeFilter;clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){a&&a.classList.contains("e-popup-open")&&(o&&a.querySelector(".e-dlg-closeicon-btn")?a.querySelector(".e-dlg-closeicon-btn").focus():a.querySelector("input")&&a.querySelector("input").focus())})}return void e.preventDefault()}},e.prototype.processFilterNodeSelection=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._83)&&40===e.keyCode){var a=i.i(r.closest)(t,"."+n._77).querySelector("."+n._84);if(a&&a.querySelector("li")){var o=a.querySelector("li");return a.querySelector("li#_active")&&(i.i(r.removeClass)([a.querySelector("li#_active")],["e-node-focus"]),a.querySelector("li#_active").removeAttribute("id")),o.setAttribute("id","_active"),i.i(r.addClass)([o],["e-node-focus"]),o.focus(),void e.preventDefault()}}else if(t&&i.i(r.closest)(t,"."+n._84)&&38===e.keyCode){var a=i.i(r.closest)(t,"."+n._84);if(a.querySelector("li#_active.e-node-focus")&&a.querySelector("li")&&a.querySelector("li").classList.contains("e-prev-active-node")&&a.querySelector("li")===a.querySelector("li#_active.e-node-focus")){i.i(r.removeClass)(a.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node");var s=i.i(r.closest)(t,"."+n._77).querySelector("."+n._83);if(s&&s.querySelector("li")){var o=s.querySelector("li");return o.setAttribute("id","_active"),i.i(r.addClass)([o],["e-node-focus"]),o.focus(),void e.preventDefault()}}}else t&&t.id===this.parent.parentID+"_inputbox"&&("upArrow"===e.action?t.parentElement.querySelector(".e-spin-up").click():"downArrow"===e.action&&t.parentElement.querySelector(".e-spin-down").click())},e.prototype.processDelete=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._39)&&t.querySelector("."+n._203))return t.querySelector("."+n._203).click(),void e.preventDefault()},e.prototype.processClose=function(e){var t=e.target;if(t&&i.i(r.closest)(t,".e-popup.e-popup-open")){var n=i.i(r.getInstance)(i.i(r.closest)(t,".e-popup.e-popup-open"),a.Dialog);if(n&&!n.closeOnEscape){var o=n.element.getAttribute("data-fieldName");if(n.hide(),this.parent.element)for(var s=[].slice.call(this.parent.element.querySelectorAll(".e-pivot-button")),l=0,d=s;l<d.length;l++){var p=d[l];if(p.getAttribute("data-uid")===o){p.focus();break}}return void e.preventDefault()}}},e.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var r=i(0),n=(i.n(r),i(2)),a=function(){function e(e){this.parent=e}return e.prototype.onStateModified=function(e,t){var a="",o=i.i(r.closest)(e.target,"."+n._196),s=-1;if(this.parent.dataSourceUpdate.btnElement=e.element?e.element.parentElement:void 0,o&&(a=o.classList[1]===n._180?"rows":o.classList[1]===n._182?"columns":o.classList[1]===n._184?"values":o.classList[1]===n._186?"filters":""),"olap"===this.parent.dataType||"pivot"===this.parent.dataType){var l="olap"===this.parent.dataType&&this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isCalculatedField?this.parent.engineModule.fieldList[t].tag:t;if(e.cancel&&""===a)return!1;if(this.parent.dataSourceUpdate.btnElement&&"true"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&("filters"===a||"values"===a)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&l.toLowerCase().indexOf("[measures].")>-1&&"olap"===this.parent.dataType&&("filters"===a||"rows"===a||"columns"===a)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&"olap"===this.parent.dataType&&-1===l.toLowerCase().indexOf("[measures].")&&this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isNamedSets&&("filters"===a||"values"===a)||this.parent.dataSourceUpdate.btnElement&&"false"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&"olap"===this.parent.dataType&&-1===l.toLowerCase().indexOf("[measures].")&&"values"===a){var d=this.parent.localeObj.getConstant("warning"),p=this.parent.localeObj.getConstant("fieldDropErrorAction");return this.parent.errorDialog.createErrorDialog(d,p),!1}}else if(e.cancel&&""===a||this.parent.dataSourceUpdate.btnElement&&"true"===this.parent.dataSourceUpdate.btnElement.getAttribute("isValue")&&("filters"===a||"values"===a||a.indexOf(this.parent.dataSourceSettings.valueAxis)>-1))return!1;if(""!==a){if("olap"===this.parent.dataType||"pivot"===this.parent.dataType){var l="olap"===this.parent.dataType&&this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isCalculatedField?this.parent.engineModule.fieldList[t].tag:t;if(l.toLowerCase().indexOf("[measures].")>-1&&"olap"===this.parent.dataType&&("filters"===a||"rows"===a||"columns"===a)||this.parent.engineModule.fieldList[t]&&this.parent.engineModule.fieldList[t].isNamedSets&&"filters"===a||"olap"===this.parent.dataType&&"values"===a&&-1===l.toLowerCase().indexOf("[measures].")){var d=this.parent.localeObj.getConstant("warning"),p=this.parent.localeObj.getConstant("fieldDropErrorAction");return this.parent.errorDialog.createErrorDialog(d,p),!1}}if("pivot"===this.parent.dataType&&this.parent.engineModule.fieldList[t]&&"CalculatedField"===this.parent.engineModule.fieldList[t].aggregateType&&"values"!==a){var d=this.parent.localeObj.getConstant("warning"),p=this.parent.localeObj.getConstant("dropAction");return this.parent.errorDialog.createErrorDialog(d,p),!1}s=this.getButtonPosition(e.target,a)}else this.parent.engineModule.fieldList[t]&&(this.parent.engineModule.fieldList[t].isSelected=!1,"olap"===this.parent.dataType&&this.parent.engineModule.updateFieldlistData(t));return this.parent.dataSourceUpdate.updateDataSource(t,a,s)},e.prototype.getButtonPosition=function(e,t){var a=-1,o=i.i(r.closest)(e,"."+n._195);if(!i.i(r.isNullOrUndefined)(o)){o=o.querySelector("."+n._39);for(var s=this.parent.element.querySelector(".e-"+t),l=[].slice.call(s.querySelectorAll("."+n._39)),d=0,p=l.length;d<p;d++)if(l[d].id===o.id){a=d;break}}return a},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var r=i(0),n=(i.n(r),i(20)),a=i(2),o=i(1),s=i(11),l=(i.n(s),i(4)),d=(i.n(l),i(18)),p=i(21),u=i(7),h=(i.n(u),i(3)),c=function(){function e(e){this.parent=e,this.menuOption=new d.a(this.parent),this.parent.pivotButtonModule=this,this.addEventListener(),this.parent instanceof n.a&&(this.axisField=new p.a(this.parent)),this.isDestroyed=!1}return e.prototype.renderPivotButton=function(e){var t,n,o=this,l=i.i(r.extend)([],e.field,null,!0),d=e.axis,p=-1,c="pivot"===this.parent.dataType&&("pivotfieldlist"===this.parent.getModuleName()&&this.parent.pivotGridModule?this.parent.pivotGridModule.showValuesButton:this.parent.showValuesButton);if(("row"===this.parent.dataSourceSettings.valueAxis&&"rows"===e.axis||"column"===this.parent.dataSourceSettings.valueAxis&&"columns"===e.axis)&&c&&this.parent.dataSourceSettings.values.length>1&&i.i(r.isNullOrUndefined)(h.a.getFieldByName("[Measures]",l))){var g=h.a.getFieldByName("[Measures]",this.parent.dataSourceSettings.fieldMapping),m={name:"[Measures]",caption:this.parent.localeObj.getConstant("values"),axis:e.axis,showRemoveIcon:!(g&&"showRemoveIcon"in g)||g.showRemoveIcon,allowDragAndDrop:!(g&&"allowDragAndDrop"in g)||g.allowDragAndDrop};-1===this.parent.dataSourceSettings.valueIndex||this.parent.dataSourceSettings.valueIndex>l.length?(p=l.length,l.push(m),this.parent.setProperties({dataSourceSettings:{valueIndex:-1}},!0)):(p=this.parent.dataSourceSettings.valueIndex,l.splice(p,0,m))}if(this.parentElement="pivotview"===this.parent.getModuleName()?this.parent.element:document.getElementById(this.parent.element.id+"_Container"),"pivotfieldlist"===this.parent.getModuleName()){if(this.parentElement=document.getElementById(this.parent.element.id+"_Container"),!this.parentElement.querySelector("."+a._200+"-"+d))return;var f=this.parentElement.querySelector("."+a._200+"-"+d).querySelector("."+a._201);0===l.length?i.i(r.removeClass)([f],a._76):i.i(r.addClass)([f],a._76),n=this.parentElement.querySelector("."+a._200+"-"+d).querySelector("."+a._202)}else this.parentElement=this.parent.element,n=this.parentElement.querySelector(".e-group-"+d);if(n)if("pivotview"===this.parent.getModuleName()&&0===l.length)for(var v=0,S=this.parentElement.querySelectorAll(".e-group-"+d);v<S.length;v++){var y=S[v];if(!y.classList.contains(a._189)&&!y.classList.contains(a._190)){var f=i.i(r.createElement)("span",{className:a._201});f.innerText=this.parent.groupingBarSettings.allowDragAndDrop?"rows"===d?this.parent.localeObj.getConstant("rowAxisPrompt"):"columns"===d?this.parent.localeObj.getConstant("columnAxisPrompt"):"values"===d?this.parent.localeObj.getConstant("valueAxisPrompt"):"filters"===d?this.parent.localeObj.getConstant("filterAxisPrompt"):this.parent.localeObj.getConstant("allFields"):"",y.appendChild(f)}}else{for(var b=0,C=l.length;b<C;b++)for(var x=0,w="pivotfieldlist"===this.parent.getModuleName()?[n]:this.parentElement.querySelectorAll(".e-group-"+d);x<w.length;x++){var y=w[x];y=y;var T="olap"===this.parent.dataType&&("[measures]"===l[b].name.toLowerCase()||"values"===d),M="olap"===this.parent.dataType&&"values"===d;if(!y.classList.contains(a._189)&&!y.classList.contains(a._190)){var _=i.i(r.createElement)("div",{className:a._195+(0===b&&"all-fields"!==d?" e-first-btn":""),attrs:{"data-tag":d+":"+l[b].name}}),D=l[b].caption?l[b].caption:l[b].name;D=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(D):D;var O=i.i(r.createElement)("div",{id:this.parent.element.id+"_"+l[b].name,className:a._39+" "+l[b].name.replace(/[^A-Z0-9]/gi,""),attrs:{"data-uid":l[b].name,tabindex:"pivotview"===this.parent.getModuleName()&&this.parent.grid&&"rows"===d&&!y.classList.contains(a._187)?"-1":"0",isvalue:b===p||T&&!M?"true":"false","aria-disabled":"false","aria-label":D,"data-type":"olap"===this.parent.dataType?M?"isMeasureFieldsAvail":T?"isMeasureAvail":l[b].type:l[b].type,"data-caption":D,"data-basefield":this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(l[b].baseField):l[b].baseField,"data-baseitem":this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(l[b].baseItem):l[b].baseItem,role:"button"}}),P=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:a._197}),N=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:a._197+"-last"}),E=this.createButtonDragIcon(l[b],O),I=this.createButtonText(l,b,d,p);if(O.appendChild(I),"all-fields"!==d){if(T||l[b].isNamedSet||l[b].isCalculatedField||(-1!==["filters","values"].indexOf(d)||p===b||"olap"===this.parent.dataType&&("pivotview"===this.parent.getModuleName()&&this.parent.enableVirtualization||"pivotfieldlist"===this.parent.getModuleName()&&void 0!==this.parent.pivotGridModule&&this.parent.pivotGridModule.enableVirtualization)||this.createSortOption(O,l[b].name,l[b]),"values"!==d&&p!==b&&this.createFilterOption(O,l[b].name,d,l[b]),"values"===d&&this.getTypeStatus(l,b,O)),l[b].isCalculatedField||"CalculatedField"===l[b].type){var F=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("editCalculatedField")},className:a.a+" "+a._133});this.parent.allowCalculatedField&&this.parent.calculatedFieldModule&&(l[b].showEditIcon||void 0===l[b].showEditIcon)?i.i(r.removeClass)([F],a._76):i.i(r.addClass)([F],a._76),O.appendChild(F)}var L=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("remove")},className:a.a+" "+a._203});"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.showRemoveIcon&&(l[b].showRemoveIcon||void 0===l[b].showRemoveIcon)?i.i(r.removeClass)([L],a._76):i.i(r.addClass)([L],a._76):l[b].showRemoveIcon||void 0===l[b].showRemoveIcon?i.i(r.removeClass)([L],a._76):i.i(r.addClass)([L],a._76),O.appendChild(L),_.appendChild(P),_.appendChild(O),_.appendChild(N)}else _.appendChild(P),_.appendChild(O);y.appendChild(_);var A=new s.Button({enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass});A.isStringTemplate=!0,A.appendTo(O),this.unWireEvent(_,b===p&&"all-fields"!==d?"values":d,T),this.wireEvent(_,b===p&&"all-fields"!==d?"values":d,T),("pivotview"===this.parent.getModuleName()&&!this.parent.isAdaptive||"pivotfieldlist"===this.parent.getModuleName())&&(this.createDraggable(l[b],"pivotview"===this.parent.getModuleName()?I:E),O.querySelector("."+a._204).ej2_instances[0].enableAutoScroll=!1)}}if("values"===d)for(var R=i.i(r.select)("."+a._205,this.parentElement)?i.i(r.getInstance)(i.i(r.select)("."+a._205,this.parentElement),u.DropDownList):null,k=this,j=0,H=this.parentElement.querySelectorAll(".e-group-"+d);j<H.length;j++){var y=H[j];!function(e){if(e.classList.contains(a._189)&&k.parent.pivotChartModule){var t=l.map(function(e){return{text:e.caption?e.caption:e.name,value:e.name}}),n=k.parent;if(R&&e.querySelector("."+a._205))R.dataSource=t,R.value=n.chartSettings.enableMultipleAxis?t[0].value:n.pivotChartModule.currentMeasure;else{var o=i.i(r.createElement)("div",{className:a._205});e.appendChild(o),R=new u.DropDownList({dataSource:t,enableRtl:k.parent.enableRtl,locale:k.parent.locale,value:n.chartSettings.enableMultipleAxis?t[0].value:n.pivotChartModule.currentMeasure,width:200,fields:{value:"value",text:"text"},cssClass:a._206+(k.parent.cssClass?" "+k.parent.cssClass:""),change:function(e){e.e&&null!==e.e&&(n.chartSettings.value=e.value)}}),R.isStringTemplate=!0,R.appendTo(o)}}}(y)}else if("columns"===d)for(var q=void 0,V=i.i(r.select)("."+a._207,this.parentElement)?i.i(r.getInstance)(i.i(r.select)("."+a._207,this.parentElement),u.DropDownList):null,B=0,U=this.parentElement.querySelectorAll(".e-group-"+d);B<U.length;B++){var y=U[B];if(y.classList.contains(a._190)&&this.parent.pivotChartModule){for(var G=this.parent.pivotChartModule.currentMeasure,z=this.parent.chartSettings.columnDelimiter?this.parent.chartSettings.columnDelimiter:"-",W=this.parent.chartSettings.columnHeader&&""!==this.parent.chartSettings.columnHeader?this.parent.chartSettings.columnHeader.split(z).join(" - "):"",Q="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,Y=Q.pivotValues,K=this.parent.pivotChartModule.getColumnTotalIndex(Y),X=Object.keys(Y),J=[],Z=!1,$=0,ee=X;$<ee.length;$++){var te=ee[$];if(Z)break;var ie=Number(te);if(Y[ie][0]&&"row"===Y[ie][0].axis&&(0===this.parent.dataSourceSettings.rows.length||"grand sum"!==Y[ie][0].type))for(var re=Y[ie][0],ne="olap"===this.parent.dataType?Q.tupRowInfo[re.ordinal]:void 0,ae=Y[ie],oe=Object.keys(ae),se=0,le=oe;se<le.length;se++){var de=le[se],pe=Number(de),ue=Y[ie][pe],he="olap"===this.parent.dataType&&ne&&ne.measureName?ne.measureName:ue.actualText;if(!K[ue.colIndex]&&"value"===ue.axis&&"header"!==re.type&&""!==he&&he===G){Z=!0;var ce="olap"===this.parent.dataType?ue.columnHeaders.toString().split(/~~|::/).join(" - "):ue.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ");J.push({value:ce,text:ce,title:(t={},t.title=ce,t)}),ce===W&&(q=J.length)}}}if(V&&y.querySelector("."+a._207))V.dataSource=J,V.value=void 0!==q?J[q-1].value:J[0].value;else{var ge=i.i(r.createElement)("div",{className:a._207});y.appendChild(ge),V=new u.DropDownList({dataSource:J,enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:q?J[q-1].value:J[0]?J[0].value:"",width:"200",fields:{value:"value",text:"text",htmlAttributes:"title"},cssClass:a._208+(this.parent.cssClass?" "+this.parent.cssClass:""),change:function(e){if(e.e&&null!==e.e){var t=o.parent.chartSettings.columnDelimiter?o.parent.chartSettings.columnDelimiter:"-";o.parent.chartSettings.columnHeader=e.value.split(" - ").join(t)}}}),V.isStringTemplate=!0,V.appendTo(ge)}}}}},e.prototype.createButtonText=function(e,t,n,o){var s,l;"filters"===n&&(l=this.updateButtontext(e[t].name));var d;d="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,void 0!==d.fieldList[e[t].name]&&(s=d.fieldList[e[t].name].aggregateType,s="DistinctCount"===s||"number"===d.fieldList[e[t].name].type&&"include"!==d.fieldList[e[t].name].type&&"exclude"!==d.fieldList[e[t].name].type?void 0===s?"Sum":d.fieldList[e[t].name].aggregateType:"Count");var p=e[t].caption?e[t].caption:e[t].name;p=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(p):p;var u=i.i(r.createElement)("span",{attrs:{title:"filters"===n?"olap"===this.parent.dataType&&"CalculatedField"===d.fieldList[e[t].name].type?p:p+" ("+l+")":"olap"===this.parent.dataType?p:this.parent.dataSourceSettings.showAggregationOnValueField&&"values"===n&&"CalculatedField"!==s?this.parent.localeObj.getConstant(s)+" "+this.parent.localeObj.getConstant("of")+" "+p:p,tabindex:"-1","aria-disabled":"false",oncontextmenu:"return false;","data-type":o===t?"":s},className:a._72+" "+("pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.allowDragAndDrop&&(e[t].allowDragAndDrop||void 0===e[t].allowDragAndDrop)?"":a._209:"")});return u.innerText="filters"===n?"olap"===this.parent.dataType&&"CalculatedField"===d.fieldList[e[t].name].type?p:p+" ("+l+")":"olap"===this.parent.dataType?p:this.parent.dataSourceSettings.showAggregationOnValueField&&"values"===n&&"CalculatedField"!==s?this.parent.localeObj.getConstant(s)+" "+this.parent.localeObj.getConstant("of")+" "+p:p,u},e.prototype.getTypeStatus=function(e,t,i){var r;r="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var n=r.fieldList[e[t].name];"CalculatedField"!==n.aggregateType&&this.validateDropdown(n.type)&&this.createSummaryType(i,e[t].name,e[t])},e.prototype.validateDropdown=function(e){var t=this.parent.aggregateTypes;if("number"!==e)return t.indexOf("Count")>-1||t.indexOf("DistinctCount")>-1;for(var i=0;i<t.length;i++)if(this.parent.getAllSummaryType().indexOf(t[i])>-1)return!0;return!1},e.prototype.createSummaryType=function(e,t,n){var o=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("format")},className:a.a+" "+a._210});return"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.showValueTypeIcon&&n.showValueTypeIcon?i.i(r.removeClass)([o],a._76):i.i(r.addClass)([o],a._76):n.showValueTypeIcon?i.i(r.removeClass)([o],a._76):i.i(r.addClass)([o],a._76),e.appendChild(o),o},e.prototype.createMenuOption=function(e){this.menuOption.render(e,this.parentElement),this.parent.pivotButtonModule=this},e.prototype.openCalculatedFieldDialog=function(e){var t=e.target.parentElement.getAttribute("data-uid"),n=h.a.getFieldInfo(t,this.parent);if(this.parent.actionObj.actionName=o._69,this.parent.actionObj.fieldInfo=n,!this.parent.actionBeginMethod())try{"pivotview"===this.parent.getModuleName()?this.parent.isAdaptive&&this.parent.showFieldList&&this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed?(this.parent.pivotFieldListModule.element.querySelector("."+a._66).click(),this.parent.pivotFieldListModule.dialogRenderer.adaptiveElement.select(4),this.parent.pivotFieldListModule.calculatedFieldModule.updateAdaptiveCalculatedField(!0,t)):(this.parent.isAdaptive||(this.parent.calculatedFieldModule.buttonCall=!0),this.parent.notify(o._28,{edit:!0,fieldName:t})):"pivotfieldlist"===this.parent.getModuleName()&&(this.parent.isAdaptive?(this.parent.dialogRenderer.adaptiveElement.select(4),this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(!0,t),this.parent.calculatedFieldModule.buttonCall=!0):(this.parent.dialogRenderer.fieldListDialog&&(this.parent.dialogRenderer.fieldListDialog.hide(),i.i(r.addClass)([this.parent.element.querySelector("."+a._66)],a._69)),this.parent.notify(o._28,{edit:!0,fieldName:t}),this.parent.calculatedFieldModule&&(this.parent.calculatedFieldModule.buttonCall=!0)))}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.createDraggable=function(e,t){this.draggable=new r.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!0,helper:this.createDragClone.bind(this),dragStart:this.onDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onDragStop.bind(this),abort:"pivotview"===this.parent.getModuleName()?this.parent.groupingBarSettings.allowDragAndDrop&&e.allowDragAndDrop?"":"."+a._39:e.allowDragAndDrop?"":"."+a._39})},e.prototype.createButtonDragIcon=function(e,t){var n=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"}}),o=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("drag")},className:a.a+" "+a._167+" "+(e.allowDragAndDrop||void 0===e.allowDragAndDrop?"":a._209)});return n.appendChild(o),"pivotfieldlist"===this.parent.getModuleName()&&t.appendChild(n),n},e.prototype.createSortOption=function(e,t,n){var o,s,l;if(l="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.parent.allowDeferLayoutUpdate){o="";for(var d=0;d<this.parent.dataSourceSettings.sortSettings.length;d++)this.parent.dataSourceSettings.sortSettings[d].name===t&&(o="Descending"===this.parent.dataSourceSettings.sortSettings[d].order?a._211:"")}else o="Descending"===l.fieldList[t].sort?a._211:"";return s="None"===l.fieldList[t].sort?i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("sort")},className:a.a}):i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("sort")},className:a.a+" "+a._212+" "+o}),this.parent.dataSourceSettings.enableSorting?"pivotview"===this.parent.getModuleName()?n.showSortIcon&&this.parent.groupingBarSettings.showSortIcon?i.i(r.removeClass)([s],a._76):i.i(r.addClass)([s],a._76):n.showSortIcon?i.i(r.removeClass)([s],a._76):i.i(r.addClass)([s],a._76):i.i(r.addClass)([s],a._76),e.appendChild(s),s},e.prototype.createFilterOption=function(e,t,n,o){var s,l;l="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var d=h.a.getFieldByName(t,this.parent.dataSourceSettings.filterSettings);if(this.parent.allowDeferLayoutUpdate){s=a._213;for(var p=0;p<this.parent.dataSourceSettings.filterSettings.length;p++)this.parent.dataSourceSettings.filterSettings[p].name===t&&(s=a._214)}else l.fieldList[t].filter=null===l.fieldList[t].filter?[]:l.fieldList[t].filter,s="Server"===this.parent.dataSourceSettings.mode&&!d||"Local"===this.parent.dataSourceSettings.mode&&0===l.fieldList[t].filter.length?l.fieldList[t].isExcelFilter?a._214:a._213:a._214;var u=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("filter")},className:a._215+" "+a.a+" "+s});return(this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==n||this.parent.dataSourceSettings.allowMemberFilter?i.i(r.removeClass)([u],a._76):i.i(r.addClass)([u],a._76),"pivotview"===this.parent.getModuleName()?((this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==n||this.parent.dataSourceSettings.allowMemberFilter)&&this.parent.groupingBarSettings.showFilterIcon&&o.showFilterIcon?i.i(r.removeClass)([u],a._76):i.i(r.addClass)([u],a._76):o.showFilterIcon&&((this.parent.dataSourceSettings.allowLabelFilter||this.parent.dataSourceSettings.allowValueFilter)&&"filters"!==n||this.parent.dataSourceSettings.allowMemberFilter)?i.i(r.removeClass)([u],a._76):i.i(r.addClass)([u],a._76),e.appendChild(u),u},e.prototype.updateButtontext=function(e){var t;t="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var i,r=t.fieldList[e].filter.length,n=t.fieldList[e].filterType,a=t.fieldList[e].dateMember.length,o=t.fieldList[e].filter[0];if("olap"===this.parent.dataType)i=this.updateOlapButtonText(t,e,o,r);else if("include"===n)1===r?i=o:r>1&&(i=r===a?this.parent.localeObj.getConstant("all"):this.parent.localeObj.getConstant("multipleItems"));else if("exclude"===n){if(1===r)i=2===a?o!==t.fieldList[e].dateMember[0].actualText?o:t.fieldList[e].dateMember[0].actualText:this.parent.localeObj.getConstant("multipleItems");else if(r>1){var s=void 0,l=Object.keys(t.fieldList[e].members),d=t.fieldList[e].filter;if(r===l.length-1)e:for(s=0;s<l.length;s++){var p=l[s],u=d.indexOf(p);if(-1===u){i=l[s];break e}}else i=this.parent.localeObj.getConstant("multipleItems")}}else i=this.parent.localeObj.getConstant("all");return i},e.prototype.updateOlapButtonText=function(e,t,i,r){var n,a=e.fieldList[t].actualFilter;if(a.length>0){var o=e.fieldList[t].members,s=[];if(e.fieldList[t].filterMembers.length>0){for(var l={},d=0,p=a;d<p.length;d++){var u=p[d];l[u]=u,o[u]&&(l=this.parent.pivotCommon.eventBase.getParentNode(t,u,l))}for(var h=l?Object.keys(l):[],c=0,g=h;c<g.length;c++){var u=g[c];o[u].isSelected&&(o[u].parent&&o[o[u].parent].isSelected||s.push(u))}i=1===s.length?o[s[0]].caption:i}r=0===s.length?r:s.length}return 0===r?n=e.fieldList[t].allMember?e.fieldList[t].allMember:this.parent.localeObj.getConstant("all"):1===r?n=i:r>1&&(n=this.parent.localeObj.getConstant("multipleItems")),n},e.prototype.createDragClone=function(e){var t=i.i(r.closest)(e.element,"."+a._39),n=i.i(r.createElement)("div",{id:this.parent.element.id+"_DragClone",className:a._216+(this.parent.cssClass?" "+this.parent.cssClass:"")}),o=i.i(r.createElement)("span",{className:a._169});return o.innerText=this.parent.enableHtmlSanitizer?r.SanitizeHtmlHelper.sanitize(t.textContent):t.textContent,n.appendChild(o),document.body.appendChild(n),n},e.prototype.onDragStart=function(e){var t=this,n=i.i(r.closest)(e.element,"."+a._39),s=document.getElementById(this.parent.element.id+"_DragClone"),l=h.a.getFieldInfo(n.getAttribute("data-uid"),this.parent),d={fieldName:l.fieldName,fieldItem:l.fieldItem,axis:l.axis,dataSourceSettings:h.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._11,d,function(o){if(o.cancel)t.parent.isDragging=!1,t.draggable.intDestroy(e.event),i.i(r.detach)(s);else{t.parent.isDragging=!0;var l=void 0;l="olap"===t.parent.dataType?t.parent.olapEngineModule:t.parent.engineModule;var d=l.fieldList[n.getAttribute("data-uid")],p=[a._180,a._182,a._186];if(i.i(r.addClass)([n],a._139),s&&"Popup"===("pivotfieldlist"===t.parent.getModuleName()&&t.parent.renderMode)){var u=t.parent;s.style.zIndex=(u.dialogRenderer.fieldListDialog.zIndex+1).toString()}if(d&&"CalculatedField"===d.aggregateType)for(var h=0,c=p;h<c.length;h++){var g=c[h];i.i(r.addClass)([t.parentElement.querySelector("."+g)],a._166)}}})},e.prototype.onDragging=function(e){this.draggable.setProperties({cursorAt:{top:!i.i(r.isNullOrUndefined)(e.event.targetTouches)||r.Browser.isDevice?60:-20}})},e.prototype.onDragStop=function(e){this.parent.isDragging=!1,e.target&&e.element&&i.i(r.closest)(e.element,"."+a._199)&&!i.i(r.closest)(e.target,"."+a._196)&&(e.cancel=!0);var t=i.i(r.closest)(e.element,"."+a._39);i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+a._39)),a._139),i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+a._197)),a._198);for(var n=[a._180,a._182,a._186],o=0,s=n;o<s.length;o++){var l=s[o];i.i(r.removeClass)([this.parentElement.querySelector("."+l)],a._166)}if(this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close(),document.getElementById(this.parent.element.id+"_DragClone")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_DragClone")),document.body.style.cursor="auto",this.isButtonDropped(e.target,t)&&!e.cancel&&(this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.nodeStateModified.onStateModified(e,t.getAttribute("data-uid")))){this.updateDataSource();this.parent.axisFieldModule.render()}},e.prototype.isButtonDropped=function(e,t){var n=i.i(r.closest)(t,"."+a._196),o=i.i(r.closest)(e,"."+a._196),s=!0;if(n&&n===o){for(var l=[].slice.call(n.querySelectorAll("."+a._39)),d=i.i(r.closest)(e,"."+a._195),p=void 0,u=-1,h=0,c=l.length;h<c;h++)if(l[h].id===t.id&&(p=h),d){var g=d.querySelector("."+a._39);l[h].id===g.id&&(u=h)}(p===u||p===l.length-1&&-1===u)&&(i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+a._197)),a._198),s=!1)}return s},e.prototype.updateSorting=function(e){var t=i.i(r.closest)(e.target,"."+a._39),s=h.a.getFieldInfo(t?t.getAttribute("data-uid"):"",this.parent);if(!e.target.classList.contains(a._215)&&!e.target.classList.contains(a._203)&&!e.target.classList.contains(a._167)&&t&&s.fieldItem&&(s.fieldItem.showSortIcon||i.i(r.isNullOrUndefined)(s.fieldItem.showSortIcon))&&!s.fieldItem.isCalculatedField){if(this.parent.actionObj.actionName=o._70,this.parent.actionObj.fieldInfo=s,this.parent.actionBeginMethod())return;try{if((this.parent instanceof n.a||this.parent.groupingBarSettings.showSortIcon)&&this.parent.dataSourceSettings.enableSorting&&("olap"!==this.parent.dataType||!("pivotfieldlist"===this.parent.getModuleName()&&void 0!==this.parent.pivotGridModule&&this.parent.pivotGridModule.enableVirtualization||"pivotview"===this.parent.getModuleName()&&this.parent.enableVirtualization))){if(this.parent.pivotCommon.eventBase.updateSorting(e),this.parent.staticPivotGridModule&&(this.parent.staticPivotGridModule.actionObj=this.parent.actionObj),!this.parent.allowDeferLayoutUpdate||"pivotfieldlist"!==this.parent.getModuleName()){var l={sortInfo:this.parent.lastSortInfo};this.parent.actionObj.actionInfo=l,this.updateDataSource(!0)}var d=this;d.parent instanceof n.a&&d.axisField.render()}}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.updateDataSource=function(e){this.parent.allowDeferLayoutUpdate&&"pivotview"!==this.parent.getModuleName()?"pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView&&this.parent.pivotGridModule?("olap"===this.parent.dataType?this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule:this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.notify(o._19,this),this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0)):this.parent.triggerPopulateEvent():this.parent.updateDataSource(e)},e.prototype.updateFiltering=function(e){var t=this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,r=e.target.parentElement.getAttribute("data-uid"),n=h.a.getFieldInfo(r,this.parent);if(this.parent.actionObj.actionName=o._71,this.parent.actionObj.fieldInfo=n,!this.parent.actionBeginMethod())try{"pivotfieldlist"===t.getModuleName()?i.i(l.showSpinner)(t.fieldListSpinnerElement):t.showWaitingPopup(),t.mouseEventArgs=e,t.filterTargetID="pivotfieldlist"!==this.parent.pivotCommon.moduleName?this.parent.element:document.getElementById(this.parent.pivotCommon.parentID+"_Container"),"Server"===t.dataSourceSettings.mode?this.parent.engineModule.fieldList[r].members&&Object.keys(this.parent.engineModule.fieldList[r].members).length>0?this.updateFilterEvents():t.getEngine("fetchFieldMembers",null,null,null,null,null,r):this.updateFilterEvents()}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.updateFilterEvents=function(){var e=this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent;this.parent.pivotCommon.eventBase.updateFiltering(e.mouseEventArgs);var t=e.mouseEventArgs.target;this.fieldName=t.parentElement.getAttribute("data-uid"),this.parent.pivotCommon.filterDialog.dialogPopUp&&this.bindDialogEvents(),"pivotfieldlist"===e.getModuleName()?i.i(l.hideSpinner)(e.fieldListSpinnerElement):e.hideWaitingPopup()},e.prototype.bindDialogEvents=function(){this.parent.pivotCommon.filterDialog.allowExcelLikeFilter&&this.parent.pivotCommon.filterDialog.tabObj?(this.index=this.parent.pivotCommon.filterDialog.tabObj.selectedItem,this.updateDialogButtonEvents(),this.parent.pivotCommon.filterDialog.dialogPopUp.buttons=this.buttonModel(),this.parent.pivotCommon.filterDialog.dialogPopUp.dataBind(),this.parent.pivotCommon.filterDialog.tabObj.selected=this.tabSelect.bind(this)):this.parent.dataSourceSettings.allowMemberFilter&&(this.index=0,this.updateDialogButtonEvents())},e.prototype.buttonModel=function(){return[{buttonModel:{cssClass:"e-clear-filter-button"+(this.parent.pivotCommon.filterDialog.allowExcelLikeFilter?"":" "+a._76)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:"e-icons e-clear-filter-icon",enableRtl:this.parent.enableRtl,content:this.parent.localeObj.getConstant("clearFilter"),disabled:!this.parent.pivotCommon.filterDialog.filterObject},click:this.ClearFilter.bind(this)},{buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0},click:0===this.index?this.updateFilterState.bind(this,this.fieldName):this.updateCustomFilter.bind(this)},{click:this.parent.pivotCommon.filterDialog.closeFilterDialog.bind(this.parent.pivotCommon.filterDialog),buttonModel:{cssClass:a.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}]},e.prototype.tabSelect=function(e){this.index=e.selectedIndex,this.updateDialogButtonEvents(),i.i(r.removeClass)([].slice.call(this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelectorAll(".e-selected-tab")),"e-selected-tab"),e.selectedIndex>0&&i.i(r.addClass)([this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector(".e-filter-div-content."+(1===e.selectedIndex&&this.parent.dataSourceSettings.allowLabelFilter?"e-label-filter":"e-value-filter"))],"e-selected-tab"),0===e.selectedIndex?this.parent.pivotCommon.filterDialog.updateCheckedState():(this.parent.pivotCommon.filterDialog.dialogPopUp.buttons[0].buttonModel.disabled=!1,this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector("."+a.d).removeAttribute("disabled"))},e.prototype.updateDialogButtonEvents=function(){this.parent.pivotCommon.filterDialog.dialogPopUp.buttons=this.buttonModel(),this.parent.pivotCommon.filterDialog.dialogPopUp.dataBind()},e.prototype.updateCustomFilter=function(){var e,t=this,n=this.parent.pivotCommon.filterDialog.dialogPopUp.element.querySelector(".e-selected-tab"),s=n.getAttribute("data-fieldname"),l=n.getAttribute("data-selectedField"),d=n.getAttribute("data-type"),p=n.getAttribute("data-measure"),u=n.getAttribute("data-operator"),c=n.getAttribute("data-value1"),g=n.getAttribute("data-value2"),m="value"===d?"Value":"date"===d?"Date":"number"===d?"Number":"Label",f={name:s,type:m,measure:p,condition:u,value1:"date"===d?new Date(c):c,value2:"date"===d?new Date(g):g};if("olap"===this.parent.dataType){f.selectedField=l,this.removeDataSourceSettings(s,l,m);for(var v=this.parent.dataSourceSettings.filterSettings,S=0,y=v;S<y.length;S++){var b=y[S];b.name===s&&b.selectedField===l&&(e=b)}}else e=h.a.getFilterItemByName(s,this.parent.dataSourceSettings.filterSettings);if(i.i(r.isNullOrUndefined)(c)||""===c||["Between","NotBetween"].indexOf(u)>-1&&(i.i(r.isNullOrUndefined)(g)||""===g)){var C=m.toLowerCase()+(i.i(r.isNullOrUndefined)(c)||""===c?"_input_option_1":"_input_option_2"),x=i.i(r.select)("#"+this.parent.element.id+"_"+C,n);return i.i(r.addClass)([x],a.f),void x.focus()}var w={cancel:!1,filterSettings:f,dataSourceSettings:h.a.getClonedDataSourceSettings(this.parent.dataSourceSettings)};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._5,w,function(i){i.cancel||(f=i.filterSettings,e?(e=e.properties?e.properties:e,e.type=f.type,e.measure=f.measure,e.condition=f.condition,e.value1=f.value1,e.value2=f.value2,"olap"===t.parent.dataType&&(e.selectedField=f.selectedField)):t.parent.dataSourceSettings.filterSettings.push(f)),"Value"!==m&&(t.parent.lastFilterInfo=h.a.getFilterItemByName(s,t.parent.dataSourceSettings.filterSettings)),t.parent.pivotCommon.filterDialog.dialogPopUp.close(),i.cancel||(t.refreshPivotButtonState(s,!0),t.updateDataSource(!0))})},e.prototype.ClearFilter=function(){var e=this.parent.pivotCommon.filterDialog.dialogPopUp.element,t=e.getAttribute("data-fieldname"),i=e.querySelector(".e-selected-tab");if(this.parent.pivotCommon.filterDialog.dialogPopUp.close(),"olap"===this.parent.dataType&&i){var r=i.getAttribute("data-selectedField");this.removeDataSourceSettings(t,r)}else this.removeDataSourceSettings(t);var n=h.a.getFilterItemByName(t,this.parent.dataSourceSettings.filterSettings);this.refreshPivotButtonState(t,!!n),this.updateDataSource(!0)},e.prototype.removeButton=function(e){var t=this,i=e.target,r=i.parentElement.getAttribute("data-uid"),n=h.a.getFieldInfo(r,this.parent);if(this.parent.actionObj.actionName=o._72,this.parent.actionObj.fieldInfo=n,!this.parent.actionBeginMethod()){var a={cancel:!1,fieldName:r,dataSourceSettings:h.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:n.fieldItem,axis:n.axis};try{("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._8,a,function(e){e.cancel||("true"===i.parentElement.getAttribute("isvalue")?(t.parent.setProperties({dataSourceSettings:{values:[]}},!0),"olap"===t.parent.dataType&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]")):(t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(r),"pivot"===t.parent.dataType&&t.parent.showValuesButton&&t.parent.dataSourceSettings.values.length>1&&n.position<t.parent.dataSourceSettings.valueIndex&&("row"===t.parent.dataSourceSettings.valueAxis&&"rows"===e.axis||"column"===t.parent.dataSourceSettings.valueAxis&&"columns"===e.axis)&&t.parent.setProperties({dataSourceSettings:{valueIndex:t.parent.dataSourceSettings.valueIndex-1}},!0),"olap"===t.parent.dataType&&0===t.parent.dataSourceSettings.values.length&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]")),"pivotfieldlist"===t.parent.getModuleName()&&t.parent.axisFieldModule.render(),t.updateDataSource())})}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.nodeStateModified=function(e){var t=i.i(r.closest)(e.node,"li"),n=t.getAttribute("data-fieldname");if("all"===t.getAttribute("data-memberId"))this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked=null,"check"===e.action?this.parent.pivotCommon.filterDialog.memberTreeView.checkAll():this.parent.pivotCommon.filterDialog.memberTreeView.uncheckAll(),"olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.fieldList[n].isHierarchy&&this.updateNodeStates(this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),n),this.checkedStateAll(e.action),this.parent.pivotCommon.filterDialog.memberTreeView.nodeChecked=this.nodeStateModified.bind(this);else{if("olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.fieldList[n].isHierarchy){var a=this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes();this.updateNodeStates(a,n)}var o=this.parent.pivotCommon.currentTreeItemsPos[t.getAttribute("data-memberId")].index;this.parent.pivotCommon.currentTreeItems[o]&&(this.parent.pivotCommon.currentTreeItems[o].isSelected="check"===e.action,this.parent.pivotCommon.currentTreeItemsPos[t.getAttribute("data-memberId")].isSelected="check"===e.action)}this.parent.pivotCommon.filterDialog.updateCheckedState()},e.prototype.checkedStateAll=function(e){for(var t={},i=0,r=this.parent.pivotCommon.searchTreeItems;i<r.length;i++){var n=r[i];n.isSelected="check"===e,t[n.htmlAttributes["data-memberId"]]=n.htmlAttributes["data-memberId"]}for(var a=0,o=this.parent.pivotCommon.currentTreeItems;a<o.length;a++){var n=o[a];void 0!==t[n.htmlAttributes["data-memberId"]]&&(n.isSelected="check"===e,this.parent.pivotCommon.currentTreeItemsPos[n.htmlAttributes["data-memberId"]].isSelected="check"===e)}},e.prototype.updateNodeStates=function(e,t){var i=this.parent.pivotCommon.engineModule.fieldList[t],r=i.members,n=i.currrentMembers;if(i.searchMembers.length>0){for(var a=Object.keys(n),o=0,s=a;o<s.length;o++){var l=s[o];if(n[l]&&(n[l].isSelected=!1),r[l]&&(r[l].isSelected=!1,this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+l+'"]'))){var d=this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+l+'"]');d&&!d.querySelector("ul")&&this.parent.pivotCommon.eventBase.updateChildNodeStates(i.filterMembers,t,l,!1)}}for(var p=0,u=e;p<u.length;p++){var h=u[p];if(r[h]&&this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+h+'"]')){var d=this.parent.pivotCommon.filterDialog.memberTreeView.element.querySelector('li[data-memberId="'+h+'"]');d&&!d.querySelector("ul")&&(r[h].isSelected=!0,this.parent.pivotCommon.eventBase.updateChildNodeStates(i.filterMembers,t,h,!0))}n[h]&&(n[h].isSelected=!0)}}else{for(var a=Object.keys(r),c=0,g=a;c<g.length;c++){var l=g[c];r[l].isSelected&&(r[l].isSelected=!1)}for(var m=0,f=e;m<f.length;m++){var h=f[m];r[h]&&(r[h].isSelected=!0,this.parent.pivotCommon.eventBase.updateChildNodeStates(i.filterMembers,t,h,!0))}}},e.prototype.updateFilterState=function(e){var t=this,i=!1,r={items:[],name:e,type:"Include"},a="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;if("olap"===this.parent.dataType&&a&&!a.fieldList[e].isHierarchy){var s=a.fieldList[e].members,l=a.fieldList[e].currrentMembers;if(r.items=this.parent.pivotCommon.filterDialog.memberTreeView.getAllCheckedNodes(),r.levelCount=a.fieldList[e].levelCount,i=r.items.length!==this.parent.pivotCommon.filterDialog.memberTreeView.fields.dataSource.length,a.fieldList[e].searchMembers.length>0&&!i){var d=Object.keys(s).length,p=Object.keys(l).length;i=d!==p||d!==r.items.length}for(var u=r.items,c=0,g=u;c<g.length;c++){var m=g[c];a.fieldList[e].searchMembers.length>0&&l[m]?l[m].isSelected=!0:s[m]&&(s[m].isSelected=!0)}}else{for(var f=0,v=this.parent.pivotCommon.searchTreeItems;f<v.length;f++){var S=v[f];S.isSelected&&(this.parent.pivotCommon.isDateField?r.items.push(S.name):r.items.push(S.htmlAttributes["data-memberId"]))}i=r.items.length!==this.parent.pivotCommon.currentTreeItems.length}if("olap"===this.parent.dataType&&this.removeDataSourceSettings(e),this.parent.allowDeferLayoutUpdate){a.fieldList[r.name].filterType=r.type.toLowerCase(),a.fieldList[r.name].filter=[];for(var y=0;y<r.items.length;y++)a.fieldList[r.name].filter.push(r.items[y])}var b={filterSettings:r,dataSourceSettings:h.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(o._5,b,function(a){if(r=a.filterSettings,!a.cancel){if(h.a.getFilterItemByName(e,t.parent.dataSourceSettings.filterSettings))for(var o=0;o<t.parent.dataSourceSettings.filterSettings.length;o++)if(t.parent.dataSourceSettings.filterSettings[o].name===e){t.parent.dataSourceSettings.filterSettings.splice(o,1);break}t.parent.dataSourceSettings.filterSettings.push(r)}if(t.parent.pivotCommon.filterDialog.dialogPopUp.close(),!a.cancel){t.refreshPivotButtonState(e,i),i||(t.removeDataSourceSettings(e),r={}),t.parent.lastFilterInfo=r;var s={filterInfo:t.parent.lastFilterInfo};t.parent.actionObj.actionInfo=s,t.updateDataSource(!0);var l=t;l.parent instanceof n.a&&l.axisField.render()}for(var d=[].slice.call(t.parentElement.querySelectorAll(".e-pivot-button")),p=0,u=d;p<u.length;p++){var c=u[p];if(c.getAttribute("data-uid")===e){c.focus();break}}})},e.prototype.refreshPivotButtonState=function(e,t){for(var n,o=[].slice.call(this.parentElement.querySelectorAll(".e-pivot-button")),s=0,l=o;s<l.length;s++){var d=l[s];if(d.getAttribute("data-uid")===e){n=d.querySelector("."+a._215);break}}t?(i.i(r.removeClass)([n],a._213),i.i(r.addClass)([n],a._214)):(i.i(r.removeClass)([n],a._214),i.i(r.addClass)([n],a._213))},e.prototype.removeDataSourceSettings=function(e,t,i){for(var r=this.parent.dataSourceSettings.filterSettings,n=0,a=r.length;n<a;n++)if("olap"===this.parent.dataType&&t){if(!i&&r[n].name===e&&r[n].selectedField===t){r.splice(n,1);break}i&&r[n].type!==i&&r[n].name===e&&(r.splice(n,1),a--,n--)}else if(r[n].name===e){if(r.splice(n,1),"olap"!==this.parent.dataType)break;a--,n--}},e.prototype.updateDropIndicator=function(e){if(this.parent.isDragging&&(i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+a._197+"-last")),a._198),i.i(r.removeClass)([].slice.call(this.parentElement.querySelectorAll("."+a._197)),a._198),i.i(r.closest)(e.target,"."+a._196))){var t=i.i(r.closest)(e.target,"."+a._195);i.i(r.addClass)([t.querySelector("."+a._197)],a._198)}},e.prototype.wireEvent=function(e,t,i){r.EventHandler.add(e,"mouseover",this.updateDropIndicator,this),i||(-1===["filters","values"].indexOf(t)&&null!==e.querySelector("."+a._39)&&r.EventHandler.add(e.querySelector("."+a._39),"click",this.updateSorting,this),"values"!==t&&null!==e.querySelector("."+a._215)&&r.EventHandler.add(e.querySelector("."+a._215),"click",this.updateFiltering,this),"values"===t&&null!==e.querySelector("."+a._210)&&r.EventHandler.add(e.querySelector("."+a._210),"click",this.createMenuOption,this)),null!==e.querySelector("."+a._133)&&r.EventHandler.add(e.querySelector("."+a._133),"click",this.openCalculatedFieldDialog,this),null!==e.querySelector("."+a._203)&&r.EventHandler.add(e.querySelector("."+a._203),"click",this.removeButton,this)},e.prototype.unWireEvent=function(e,t,i){r.EventHandler.remove(e,"mouseover",this.updateDropIndicator),i||(-1===["filters","values"].indexOf(t)&&null!==e.querySelector("."+a._39)&&r.EventHandler.remove(e.querySelector("."+a._39),"click",this.updateSorting),"values"!==t&&null!==e.querySelector("."+a._215)&&r.EventHandler.remove(e.querySelector("."+a._215),"click",this.updateFiltering),"values"===t&&null!==e.querySelector("."+a._210)&&r.EventHandler.remove(e.querySelector("."+a._210),"click",this.createMenuOption)),null!==e.querySelector("."+a._133)&&r.EventHandler.remove(e.querySelector("."+a._133),"click",this.openCalculatedFieldDialog),null!==e.querySelector("."+a._203)&&r.EventHandler.remove(e.querySelector("."+a._203),"click",this.removeButton)},e.prototype.addEventListener=function(){this.handlers={load:this.renderPivotButton},this.parent.isDestroyed||this.parent.on(o._27,this.handlers.load,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(o._27,this.handlers.load)},e.prototype.destroy=function(){this.menuOption&&this.menuOption.destroy();var e=i.i(r.select)("."+a._205,this.parentElement),t=e?i.i(r.getInstance)(e,u.DropDownList):null;t&&!t.isDestroyed&&t.destroy(),e=i.i(r.select)("."+a._207,this.parentElement);var n=e?i.i(r.getInstance)(e,u.DropDownList):null;n&&!n.isDestroyed&&(n.destroy(),n=null),this.draggable&&!this.draggable.isDestroyed&&(this.draggable.destroy(),this.draggable=null),this.axisField&&(this.axisField=null),this.removeEventListener(),this.isDestroyed=!0},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r;!function(e){e.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.axisTitleFont={size:"14px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.chartTitleFont={size:"15px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.chartSubTitleFont={size:"11px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.crosshairLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.tooltipLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.legendLabelFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.stripLineLabelFont={size:"12px",fontWeight:"Regular",color:"#353535",fontStyle:"Normal",fontFamily:"Segoe UI"},e.stockEventFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"}}(r||(r={}))},function(e,t,i){"use strict";i.d(t,"a",function(){return g});var r=i(4),n=(i.n(r),i(0)),a=(i.n(n),i(11)),o=(i.n(a),i(10)),s=(i.n(o),i(2)),l=i(5),d=(i.n(l),i(1)),p=i(7),u=(i.n(p),i(3)),h="PopulationVar",c="CalculatedField",g=function(){function e(e){this.isFormula=!1,this.isRequireUpdate=!1,this.formatTypes=["Standard","Currency","Percent","Custom","None"],this.parent=e,this.existingReport=null,this.parent.calculatedFieldModule=this,this.removeEventListener(),this.addEventListener(),this.parentID=this.parent.element.id,this.treeObj=null,this.droppable=null,this.newFields=null,this.isFieldExist=!0,this.formulaText=null,this.fieldText=null,this.formatText=null,this.formatType=null,this.fieldType=null,this.parentHierarchy=null,this.isEdit=!1,this.currentFieldName=null}return e.prototype.getModuleName=function(){return"calculatedField"},e.prototype.keyActionHandler=function(e){var t=e.currentTarget.querySelector(".e-node-focus");if(t)switch(e.action){case"moveRight":case"shiftE":"pivot"===this.parent.dataType&&this.displayMenu(t);break;case"delete":"LI"===t.tagName&&!t.querySelector(".e-list-icon.e-format")&&!t.querySelector(".e-list-icon").classList.contains(".e-icons")&&t.querySelector("."+s.B)&&t.querySelector("."+s.B).classList.contains("e-list-icon")&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,t);break;case"enter":var a=t.getAttribute("data-field"),o=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog),l=t.getAttribute("data-type"),d=i.i(n.select)("#"+this.parentID+"droppable",o.element);"pivot"===this.parent.dataType?""===d.value?d.value=l===c?t.getAttribute("data-uid"):'"'+l+"("+a+')"':""!==d.value&&(d.value=l===c?d.value+t.getAttribute("data-uid"):d.value+'"'+l+"("+a+')"'):(this.parent.olapEngineModule&&this.parent.olapEngineModule.fieldList[a]&&this.parent.olapEngineModule.fieldList[a].isCalculatedField&&(a=this.parent.olapEngineModule.fieldList[a].tag),""===d.value?d.value=a:""!==d.value&&(d.value=d.value+a))}},e.prototype.fieldClickHandler=function(e){var t=i.i(n.closest)(e.event.target,"li");(e.event.target.classList.contains(s._132)||e.event.target.classList.contains(s._133)||e.event.target.classList.contains(s._134)||e.event.target.classList.contains(s.B))&&(this.parent.isAdaptive?"olap"===this.parent.dataType&&this.parent.isAdaptive&&("LI"===t.tagName&&t.querySelector(".e-list-edit-icon").classList.contains(s._133)&&e.event.target.classList.contains(s._133)?(this.isEdit=!0,this.currentFieldName=t.getAttribute("data-field"),this.fieldText=t.getAttribute("data-caption"),this.formulaText=t.getAttribute("data-formula"),this.formatType=t.getAttribute("data-formatString"),this.formatText="Custom"===this.formatType?t.getAttribute("data-customformatstring"):null,this.fieldType=t.getAttribute("data-membertype"),this.parentHierarchy="Dimension"===this.fieldType?t.getAttribute("data-hierarchy"):null,i.i(n.addClass)([t.querySelector(".e-list-edit-icon")],s._134),i.i(n.removeClass)([t.querySelector(".e-list-edit-icon")],s._133),this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)):"LI"===t.tagName&&t.querySelector(".e-list-edit-icon").classList.contains(s._134)&&e.event.target.classList.contains(s._134)?(this.isEdit=!1,this.fieldText=this.formatText=this.formulaText=this.currentFieldName=null,this.parentHierarchy=this.fieldType=this.formatType=null,i.i(n.addClass)([t.querySelector(".e-list-edit-icon")],s._133),i.i(n.removeClass)([t.querySelector(".e-list-edit-icon")],s._134)):"LI"===t.tagName&&t.querySelector("."+s.B).classList.contains("e-icons")&&e.event.target.classList.contains(s.B)&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,e.node)):this.displayMenu(t,e.node,e.event.target))},e.prototype.accordionClickHandler=function(e){if(e.item&&-1!==e.item.iconCss.indexOf("e-list-icon")&&i.i(n.closest)(e.originalEvent.target,".e-acrdn-header-icon")){var t=i.i(n.closest)(e.originalEvent.target,".e-acrdn-header").querySelector("."+s._135),r=t.getAttribute("data-field"),a=t.getAttribute("data-caption"),o=u.a.getFieldByName(r,this.parent.dataSourceSettings.formatSettings),l=i.i(n.closest)(e.originalEvent.target,".e-acrdn-header-icon");if(o){var d=this.getFormat(o.format),p=d?this.formatTypes.indexOf(d)>-1?o.format:"Custom":"None";this.formatType=p}l.querySelector("."+s._133)&&e.originalEvent.target.classList.contains(s._133)?(this.isEdit=!0,this.currentFieldName=r,this.fieldText=a||r,this.formulaText=this.parent.engineModule.fieldList[r].formula,this.formatText=o?o.format:"",i.i(n.addClass)([l.querySelector(".e-list-icon")],s._134),i.i(n.removeClass)([l.querySelector(".e-list-icon")],s._133),this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)):l.querySelector("."+s._134)&&e.originalEvent.target.classList.contains(s._134)?(this.isEdit=!1,this.fieldText=this.formatText=this.formulaText=this.currentFieldName=null,i.i(n.addClass)([l.querySelector(".e-list-icon")],s._133),i.i(n.removeClass)([l.querySelector(".e-list-icon")],s._134)):l.querySelector("."+s.B)&&e.originalEvent.target.classList.contains(s.B)&&this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),{},!0,t)}},e.prototype.accordionCreated=function(){for(var e=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"accordDiv",document),l.Accordion),t=e.element.querySelectorAll(".e-acrdn-item"),r=0;r<t.length;r++)if(t[r].querySelector("."+s._133)||t[r].querySelector("."+s._134)){var a=i.i(n.createElement)("span",{className:"e-list-icon "+s.B+" e-icons"});i.i(n.append)([a],t[r].querySelector(".e-acrdn-header-icon")),i.i(n.addClass)([t[r]],s._136)}},e.prototype.clearFormula=function(){this.treeObj&&this.treeObj.element.querySelector("li")&&(i.i(n.removeClass)(this.treeObj.element.querySelectorAll("li"),"e-active"),this.displayMenu(this.treeObj.element.querySelector("li")))},e.prototype.displayMenu=function(e,t,a){var u=!a||a.classList.contains(s._133),h=!a||a.classList.contains(s._134),g=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog),m=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox);try{if("pivot"!==this.parent.dataType||!e.querySelector(".e-list-icon.e-format")||!e.querySelector(".e-list-icon.e-format").classList.contains(s.a)||e.querySelector(".e-list-icon").classList.contains(s._134)||e.querySelector(".e-list-icon").classList.contains(s.B)||e.querySelector(".e-list-icon").classList.contains(s._133)||"LI"!==e.tagName){if("LI"===e.tagName&&(e.querySelector("."+s._133)&&e.querySelector("."+s._133).classList.contains("e-list-icon")&&u||"olap"===this.parent.dataType&&e.getAttribute("data-type")===c&&e.classList.contains("e-active")&&(a&&!a.classList.contains(s.B)||!a))){this.isEdit=!0;var f=e.getAttribute("data-field"),v=e.getAttribute("data-caption");this.currentFieldName=f,m.value=v,m.dataBind();var S=e.getAttribute("data-formatString"),y=g.element,b=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Format_Div",y),p.DropDownList),C=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Custom_Format_Element",y),o.MaskedTextBox),x=e.getAttribute("data-customformatstring");if("olap"===this.parent.dataType){var w=e.getAttribute("data-membertype"),T=e.getAttribute("data-hierarchy"),M=e.getAttribute("data-formula"),_=i.i(n.select)("#"+this.parentID+"_FieldNameTitle",y),D=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Member_Type_Div",y),p.DropDownList),O=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",y),p.DropDownList);_.innerText=this.parent.localeObj.getConstant("caption"),i.i(n.select)("#"+this.parentID+"droppable",document).value=M,D.readonly=!0,D.value=w,D.dataBind(),"Dimension"===w&&(O.value=T)}else i.i(n.addClass)(this.treeObj.element.querySelectorAll("."+s._134),s._133),i.i(n.removeClass)(this.treeObj.element.querySelectorAll("."+s._134),s._134),i.i(n.addClass)([e.querySelector(".e-list-icon")],s._134),i.i(n.removeClass)([e.querySelector(".e-list-icon")],s._133),e.querySelector("."+s._134).setAttribute("title",this.parent.localeObj.getConstant("clearCalculatedField")),i.i(n.select)("#"+this.parentID+"droppable",document).value=e.getAttribute("data-uid");""!==S&&(b.value=S,b.dataBind()),C.value=x,C.dataBind()}else if("LI"===e.tagName&&(e.querySelector("."+s._134)&&e.querySelector("."+s._134).classList.contains("e-list-icon")&&h||"olap"===this.parent.dataType&&!e.classList.contains("e-active"))){this.isEdit=!1,m.value="",m.dataBind();var y=g.element,C=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Custom_Format_Element",y),o.MaskedTextBox);if(C.value="",C.dataBind(),"olap"===this.parent.dataType){var O=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",y),p.DropDownList),b=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Format_Div",y),p.DropDownList),D=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Member_Type_Div",y),p.DropDownList),_=i.i(n.select)("#"+this.parentID+"_FieldNameTitle",y);_.innerText=this.parent.localeObj.getConstant("fieldTitle"),O.index=0,O.dataBind(),b.index=0,b.dataBind(),D.index=0,D.readonly=!1,D.dataBind()}else i.i(n.addClass)(this.treeObj.element.querySelectorAll("."+s._134),s._133),i.i(n.removeClass)(this.treeObj.element.querySelectorAll("."+s._134),s._134),e.querySelector("."+s._133).setAttribute("title",this.parent.localeObj.getConstant("edit"));i.i(n.select)("#"+this.parentID+"droppable",document).value=""}else if("LI"===e.tagName&&e.querySelector("."+s.B)&&e.querySelector("."+s.B).classList.contains("e-list-icon")&&!u&&!h){if(this.parent.actionObj.actionName=d._72,this.parent.actionBeginMethod())return;var P=i.i(n.select)("#"+this.parentID+"droppable",document),N={name:this.isEdit?this.currentFieldName:m.value,caption:m.value,formula:P.value};this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeCalculatedField"),N,!0,t)}}else{var E=i.i(n.select)("#"+this.parentID+"CalcContextmenu",document)?i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"CalcContextmenu",document),l.ContextMenu):null;E&&!E.isDestroyed&&E.destroy(),this.curMenu=e.querySelector("."+s._137),this.openContextMenu(e)}}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.removeCalcField=function(e){var t,r=this.parent.dataSourceSettings,a=e.getAttribute("data-field"),s=r.calculatedFieldSettings;if("pivot"===this.parent.dataType)if(this.parent.isAdaptive){var d=parseInt(e.getAttribute("id").split(this.parentID+"_")[1],10);if("number"==typeof d){var p=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"accordDiv",document),l.Accordion);p.hideItem(d)}}else this.treeObj.removeNodes([e]);for(var u=0;u<s.length;u++)if(s[u]&&s[u].name===a){s.splice(u,1);break}if("olap"===this.parent.dataType){t=this.parent.olapEngineModule;for(var h=t.fieldListData?t.fieldListData:[],c=0,g=Object.keys(h);c<g.length;c++){var m=g[c];if(h[m].name===a){var d=parseInt(m,10);if("number"==typeof d){h.splice(d,1);break}}}var f=this.treeObj.getNode(e).parentID;this.treeObj.removeNodes([e]),s.length<=0&&this.treeObj.removeNodes([f])}else t=this.parent.engineModule;if(t.fields)for(var u=0;u<t.fields.length;u++)if(t.fields[u]===a){t.fields.splice(u,1);break}t.savedFieldList&&t.savedFieldList[a]&&delete t.savedFieldList[a],t.fieldList&&t.fieldList[a]&&delete t.fieldList[a];for(var v=r.formatSettings,u=0;u<v.length;u++)if(v[u]&&v[u].name===a){v.splice(u,1);break}for(var S=[r.values,r.rows,r.columns,r.filters],u=0,y=S.length;u<y;u++)for(var b=0,C=S[u].length;b<C;b++)if(S[u][b].name===a){S[u].splice(b,1);break}if(this.isEdit&&this.currentFieldName===a){var x=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox);this.isEdit=!1,x.value="",this.currentFieldName=this.formatText=this.fieldText=this.formatType=null,this.formulaText=this.fieldType=this.parentHierarchy=null}this.parent.allowDeferLayoutUpdate&&"pivotfieldlist"===this.parent.getModuleName()||this.parent.updateDataSource(),this.closeErrorDialog()},e.prototype.openContextMenu=function(e){var t=this,r=e.getAttribute("data-field"),a="number"!==this.parent.engineModule.fieldList[r].type?"string":"number",o="string"===a?this.getValidSummaryType().slice(0,2):this.getValidSummaryType(),s={cancel:!1,fieldName:r,aggregateTypes:this.getMenuItems(a).slice()};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(d._10,s,function(r){if(!r.cancel){for(var a=[],s=[],d=0,p=r.aggregateTypes;d<p.length;d++){var u=p[d];o.indexOf(u)>-1&&-1===a.indexOf(u)&&(a.push(u),s.push({id:t.parent.element.id+"Calc_"+u,text:t.parent.localeObj.getConstant(u)}))}t.createMenu(s,e);var h=e.getBoundingClientRect(),c=window.scrollY||document.documentElement.scrollTop,g=i.i(n.getInstance)(i.i(n.select)("#"+t.parentID+"CalcContextmenu",document),l.ContextMenu);t.parent.enableRtl?g.open(h.top+c,h.left-100):g.open(h.top+c,h.left+150)}})},e.prototype.selectContextMenu=function(e){if(null!==e.element.textContent){var t=i.i(n.closest)(this.curMenu,".e-list-item").getAttribute("data-caption");i.i(n.closest)(this.curMenu,".e-list-item").setAttribute("data-type",e.element.id.split("_").pop()),this.curMenu.textContent=t+" ("+e.element.textContent+")",i.i(n.addClass)([this.curMenu.parentElement.parentElement],["e-node-focus","e-hover"]),this.curMenu.parentElement.parentElement.setAttribute("tabindex","0"),this.curMenu.parentElement.parentElement.focus()}},e.prototype.createMenu=function(e,t){var a,o=this,s={cssClass:this.parentID+"calculatedmenu"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:e,enableRtl:this.parent.enableRtl,locale:this.parent.locale,select:this.selectContextMenu.bind(this),onClose:function(){o.treeObj.element.focus(),i.i(n.addClass)([t],["e-hover","e-node-focus"])}};a=i.i(n.select)("#"+this.parentID+"CalcContextmenu",document)?i.i(n.select)("#"+this.parentID+"CalcContextmenu",document):i.i(n.createElement)("ul",{id:this.parentID+"CalcContextmenu"}),i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog).element.appendChild(a);var d=new l.ContextMenu(s);d.isStringTemplate=!0,d.appendTo(a)},e.prototype.applyFormula=function(){var e=this,t=this,r=!1;i.i(n.removeClass)([document.getElementById(this.parentID+"ddlelement")],s.f);var a=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox);this.newFields=i.i(n.extend)([],this.parent.dataSourceSettings.calculatedFieldSettings,null,!0);var l={fieldName:this.isEdit?this.currentFieldName:a.value,calculatedField:this.getCalculatedFieldInfo(),calculatedFieldSettings:u.a.cloneCalculatedFieldSettings(this.parent.dataSourceSettings.calculatedFieldSettings),cancel:!1};("pivotfieldlist"===this.parent.getModuleName()&&this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(d._6,l,function(a){if(a.cancel)e.endDialog(),e.parent.lastCalcFieldInfo={},e.isFormula=!1;else{var l=a.calculatedField;if(!e.isEdit)if("olap"===t.parent.dataType){var d=l.name;t.parent.olapEngineModule.fieldList[d]&&"CalculatedField"!==t.parent.olapEngineModule.fieldList[d].type&&(r=!0)}else for(var p=0,u=Object.keys(t.parent.engineModule.fieldList);p<u.length;p++){var h=u[p];l.name&&l.name===h&&"CalculatedField"!==t.parent.engineModule.fieldList[h].aggregateType&&(r=!0)}if(r)return void t.parent.pivotCommon.errorDialog.createErrorDialog(t.parent.localeObj.getConstant("error"),t.parent.localeObj.getConstant("fieldExist"));e.existingReport=i.i(n.extend)({},e.parent.dataSourceSettings,null,!0);var g=e.parent.dataSourceSettings;if(i.i(n.isNullOrUndefined)(l.name)||""===l.name||i.i(n.isNullOrUndefined)(l.caption)||""===l.caption||!l.formula||""===l.formula)if(i.i(n.isNullOrUndefined)(l.name)||""===l.name||i.i(n.isNullOrUndefined)(l.caption)||""===l.caption){var m=i.i(n.getInstance)(i.i(n.select)("#"+e.parentID+"ddlelement",document),o.MaskedTextBox);m.value="",i.i(n.addClass)([document.getElementById(e.parentID+"ddlelement")],s.f),document.getElementById(e.parentID+"ddlelement").focus()}else e.parent.pivotCommon.errorDialog.createErrorDialog(e.parent.localeObj.getConstant("error"),e.parent.localeObj.getConstant("invalidFormula"));else{var d=void 0;if("olap"===e.parent.dataType){if(d={name:l.name,formula:l.formula,formatString:l.formatString},i.i(n.isNullOrUndefined)(l.hierarchyUniqueName)||(d.hierarchyUniqueName=l.hierarchyUniqueName),e.isFieldExist=!1,e.isEdit){for(var f=0;f<g.calculatedFieldSettings.length;f++)if(g.calculatedFieldSettings[f].name===d.name&&e.isEdit){g.calculatedFieldSettings[f].hierarchyUniqueName=l.hierarchyUniqueName,e.parent.olapEngineModule.fieldList[d.name].caption=l.caption,g.calculatedFieldSettings[f].formatString=d.formatString,g.calculatedFieldSettings[f].formula=d.formula,d=g.calculatedFieldSettings[f],e.isFieldExist=!0;break}for(var v=[g.rows,g.columns,g.values,g.filters],S=!1,y=0,b=v;y<b.length;y++){for(var C=b[y],x=0,w=C;x<w.length;x++){var T=w[x];if(T.isCalculatedField&&null!==d.name&&T.name===d.name&&e.isEdit){T.caption=l.caption,e.isFieldExist=!0,S=!0;break}}if(S)break}}else for(var f=0;f<g.calculatedFieldSettings.length;f++)if(g.calculatedFieldSettings[f].name===d.name)return void e.createConfirmDialog(t.parent.localeObj.getConstant("alert"),t.parent.localeObj.getConstant("confirmText"),l);e.isFieldExist||g.calculatedFieldSettings.push(d),e.parent.lastCalcFieldInfo=d}else{d={name:l.name,caption:l.caption,type:"CalculatedField"};var M={name:l.name,formula:l.formula};if(i.i(n.isNullOrUndefined)(l.formatString)||(M.formatString=l.formatString),e.isFieldExist=!0,e.isEdit){for(var f=0;f<g.values.length;f++)if(g.values[f].type===c&&null!==d.name&&g.values[f].name===d.name&&e.isEdit)for(var _=0;_<g.calculatedFieldSettings.length;_++)g.calculatedFieldSettings[_].name===d.name&&(g.values[f].caption=l.caption,e.currentFormula=g.calculatedFieldSettings[_].formula,g.calculatedFieldSettings[_].formula=l.formula,e.parent.engineModule.fieldList[d.name].caption=l.caption,e.updateFormatSettings(g,d.name,l.formatString),e.isFieldExist=!1)}else for(var f=0;f<g.values.length;f++)if(g.values[f].type===c&&g.values[f].name===d.name){for(var _=0;_<g.calculatedFieldSettings.length;_++)if(g.calculatedFieldSettings[_].name===d.name)return void e.createConfirmDialog(t.parent.localeObj.getConstant("alert"),t.parent.localeObj.getConstant("confirmText"),l);e.isFieldExist=!1}e.isFieldExist&&(g.values.push(d),g.calculatedFieldSettings.push(M),e.updateFormatSettings(g,d.name,l.formatString)),e.parent.lastCalcFieldInfo=M}e.addFormula(g,d.name)}}})},e.prototype.getCalculatedFieldInfo=function(){var e=i.i(n.select)("#"+this.parentID+"calculateddialog",document),t=e?i.i(n.getInstance)(e,r.Dialog):void 0,a=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox),s=i.i(n.select)("#"+this.parentID+"droppable",document),l=this.parent.isAdaptive?this.parent.dialogRenderer.adaptiveElement.element:t.element,d=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Custom_Format_Element",l),o.MaskedTextBox),u={name:this.isEdit?this.currentFieldName:a.value,caption:a.value,formula:s.value},h=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Format_Div",l),p.DropDownList);if(u.formatString="Custom"===h.value?d.value:"None"===h.value?null:h.value,"olap"===this.parent.dataType){var c=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Member_Type_Div",l),p.DropDownList),g=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",l),p.DropDownList);"Dimension"===c.value&&(u.hierarchyUniqueName=g.value)}return u},e.prototype.updateFormatSettings=function(e,t,r){for(var a={name:t,format:r,useGrouping:!0},o=!1,s=0;s<e.formatSettings.length;s++)if(e.formatSettings[s].name===t){if("undefined"===r||void 0===r||""===r){e.formatSettings.splice(s,1),o=!0;break}var l=e.formatSettings[s].properties?e.formatSettings[s].properties:e.formatSettings[s];l.format=r,e.formatSettings.splice(s,1,l),o=!0;break}o||""===r||i.i(n.isNullOrUndefined)(r)||e.formatSettings.push(a)},e.prototype.addFormula=function(e,t){this.isFormula=!0,this.field=t,"Server"===this.parent.dataSourceSettings.mode?u.a.updateDataSourceSettings(this.parent,u.a.getClonedDataSourceSettings(e)):this.parent.setProperties({dataSourceSettings:e},!0),"pivotfieldlist"===this.parent.getModuleName()&&this.parent.allowDeferLayoutUpdate&&(this.parent.isRequiredUpdate=!1);try{var i={calculatedFieldInfo:this.parent.lastCalcFieldInfo};this.parent.actionObj.actionInfo=i;var r=this.parent.actionObj.actionName===d._69?d._113:d._83;this.parent.actionObj.actionName=r,this.parent.updateDataSource(!1);var n="pivotfieldlist"===this.parent.getModuleName()&&this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent;n&&"Server"!==n.dataSourceSettings.mode?this.endDialog():this.isRequireUpdate=!0,"pivotfieldlist"===this.parent.getModuleName()&&"Fixed"===this.parent.renderMode&&this.parent.allowDeferLayoutUpdate&&(this.parent.pivotChange=!0)}catch(e){this.showError()}},e.prototype.endDialog=function(){this.isEdit=!1;var e=i.i(n.select)("#"+this.parentID+"calculateddialog",document),t=e?i.i(n.getInstance)(e,r.Dialog):void 0;if(t)t.close();else{i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox).value="",this.currentFieldName=this.formatText=this.fieldText=this.formatType=null,this.formulaText=this.fieldType=this.parentHierarchy=null;var a=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:t.element;if(this.parent.dialogRenderer.parentElement.querySelector("."+s._138).value="",i.i(n.select)("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement).value="",i.i(n.select)("#"+this.parentID+"Custom_Format_Element",this.parent.dialogRenderer.parentElement).value="","olap"===this.parent.dataType){var l=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Member_Type_Div",a),p.DropDownList),d=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",a),p.DropDownList);l.index=0,l.readonly=!1,l.dataBind(),d.index=0,d.enabled=!1,d.dataBind()}var u=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Custom_Format_Element",a),o.MaskedTextBox),h=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Format_Div",a),p.DropDownList);h.index="olap"===this.parent.dataType?0:4,h.dataBind(),u.enabled=!1,u.dataBind()}},e.prototype.showError=function(){if(this.parent.engineModule.fieldList[this.field]&&delete this.parent.engineModule.fieldList[this.field],this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("invalidFormula")),this.parent.setProperties({dataSourceSettings:this.existingReport},!0),this.isEdit){for(var e=this.parent.dataSourceSettings.calculatedFieldSettings,t=0;e&&t<e.length;t++)if(e[t].name===this.field){e[t].formula=this.currentFormula;break}}else if(this.parent.engineModule.fields)for(var t=0;t<this.parent.engineModule.fields.length;t++)if(this.parent.engineModule.fields[t]===this.field){this.parent.engineModule.fields.splice(t,1);break}this.parent.lastCalcFieldInfo={},this.parent.updateDataSource(!1),this.isFormula=!1},e.prototype.getFieldListData=function(e){var t=[];if("olap"===this.parent.dataType){t=u.a.getClonedData(e.olapEngineModule.fieldListData?e.olapEngineModule.fieldListData:[]);for(var i=0,r=t;i<r.length;i++){var a=r[i];a.spriteCssClass&&(a.spriteCssClass.indexOf("e-attributeCDB-icon")>-1||a.spriteCssClass.indexOf("e-level-members")>-1)?a.hasChildren=!0:a.spriteCssClass&&a.spriteCssClass.indexOf("e-namedSetCDB-icon")>-1?a.hasChildren=!1:a.spriteCssClass&&a.spriteCssClass.indexOf("e-calcMemberGroupCDB")>-1&&(a.expanded=this.isEdit)}}else for(var o=0,l=e.engineModule.fieldList?Object.keys(e.engineModule.fieldList):[];o<l.length;o++){var d=l[o],p=null,h=null,c=e.engineModule.fieldList[d];h="number"===c.type&&"include"!==e.engineModule.fieldList[d].type&&"exclude"!==e.engineModule.fieldList[d].type||"DistinctCount"===c.aggregateType?void 0!==c.aggregateType?c.aggregateType:"Sum":"Count",p=this.parent.localeObj.getConstant(h),t.push({index:c.index,name:(this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(c.caption):c.caption)+" ("+p+")",type:h,icon:s._132+" "+s.a,formula:this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(c.formula):c.formula,field:this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(d):d,caption:this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(c.caption?c.caption:d):c.caption?c.caption:d})}return t},e.prototype.fieldDropped=function(e){e.cancel=!0;var t=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog),a=i.i(n.select)("#"+this.parentID+"droppable",t.element);i.i(n.removeClass)([a],"e-copy-drop"),i.i(n.removeClass)([e.draggedNode.querySelector("."+s._137)],s._139);var o=e.draggedNode.getAttribute("data-field");if("olap"===this.parent.dataType)if(this.parent.olapEngineModule.fieldList[o]&&this.parent.olapEngineModule.fieldList[o].isCalculatedField&&(o=this.parent.olapEngineModule.fieldList[o].tag),e.target.id===this.parentID+"droppable"&&""===a.value)a.value=o,a.focus();else if(e.target.id===this.parentID+"droppable"&&""!==a.value){var l=a.value,d=a.selectionStart,p=l.substring(d,l.length),u=l.substring(0,d),h=u+o;a.value=u+o+p,a.focus(),a.setSelectionRange(h.length,h.length)}else e.cancel=!0;else{var g=e.draggedNode.getAttribute("data-type");if(e.target.id===this.parentID+"droppable"&&""===a.value)a.value=g===c?e.draggedNodeData.id.toString():'"'+g+"("+o+')"',a.focus();else if(e.target.id===this.parentID+"droppable"&&""!==a.value){var h=void 0,d=a.selectionStart,l=a.value,u=l.substring(0,d),p=l.substring(d,l.length);g===c?(h=u+e.draggedNodeData.id.toString(),a.value=u+e.draggedNodeData.id.toString()+p):(h=u+'"'+g+"("+o+')"',a.value=u+'"'+g+"("+o+')"'+p),a.focus(),a.setSelectionRange(h.length,h.length)}else e.cancel=!0}},e.prototype.createDialog=function(){var e=this;if(null!==i.i(n.select)("#"+this.parentID+"calculateddialog",document))for(i.i(n.remove)(i.i(n.select)("#"+this.parentID+"calculateddialog",document));!i.i(n.isNullOrUndefined)(document.querySelector("."+this.parentID+"calculatedmenu"));)i.i(n.remove)(document.querySelector("."+this.parentID+"calculatedmenu"));this.parent.element.appendChild(i.i(n.createElement)("div",{id:this.parentID+"calculateddialog",className:s._140+" "+("olap"===this.parent.dataType?s._141:"")}));var t=[{click:this.applyFormula.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("ok"),isPrimary:!0,cssClass:this.parent.cssClass}},{click:this.cancelClick.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel"),cssClass:this.parent.cssClass}}];if("olap"===this.parent.dataType){var a={click:this.clearFormula.bind(this),buttonModel:{cssClass:"e-calc-clear-btn"+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("clear")}};t.splice(0,0,a)}var o=new r.Dialog({allowDragging:!0,position:{X:"center",Y:"center"},buttons:t,close:this.closeDialog.bind(this),beforeOpen:this.beforeOpen.bind(this),open:function(){i.i(n.select)("#"+e.parentID+"ddlelement",o.element)&&i.i(n.select)("#"+e.parentID+"ddlelement",o.element).focus()},animationSettings:{effect:"Zoom"},width:"25%",isModal:!0,closeOnEscape:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,showCloseIcon:!0,header:this.parent.localeObj.getConstant("createCalculatedField"),target:document.body,cssClass:this.parent.cssClass});o.isStringTemplate=!0,o.appendTo("#"+this.parentID+"calculateddialog")},e.prototype.cancelClick=function(){i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog).close(),this.isEdit=!1},e.prototype.beforeOpen=function(){i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog).element.querySelector(".e-dlg-header").setAttribute("title",this.parent.localeObj.getConstant("createCalculatedField"))},e.prototype.closeDialog=function(){"pivotfieldlist"===this.parent.getModuleName()&&(this.parent.axisFieldModule.render(),"Fixed"!==this.parent.renderMode&&(i.i(n.addClass)([this.parent.element.querySelector("."+s._66)],s._69),this.parent.dialogRenderer.fieldListDialog.show())),this.destroy(),i.i(n.isNullOrUndefined)(document.getElementById(this.parentID+"calculateddialog"))||i.i(n.remove)(document.getElementById(this.parentID+"calculateddialog")),i.i(n.isNullOrUndefined)(document.querySelector("."+this.parentID+"calculatedmenu"))||i.i(n.remove)(document.querySelector("."+this.parentID+"calculatedmenu"));var e="pivotview"===this.parent.getModuleName()||"pivotfieldlist"===this.parent.getModuleName()&&"Fixed"===this.parent.renderMode?0:500;this.buttonCall&&(this.buttonCall=!1,setTimeout(this.setFocus.bind(this),e))},e.prototype.setFocus=function(){var e;if("pivotview"===this.parent.getModuleName()&&this.parent.element?e=this.parent.element:document.getElementById(this.parent.element.id+"_Container")&&(e=document.getElementById(this.parent.element.id+"_Container")),e)for(var t=[].slice.call(e.querySelectorAll(".e-pivot-button")),i=0,r=t;i<r.length;i++){var n=r[i];if(n.getAttribute("data-uid")===this.currentFieldName){n.focus();break}}},e.prototype.renderDialogElements=function(){var e=i.i(n.createElement)("div",{id:this.parentID+"outerDiv",className:("olap"===this.parent.dataType?s._142+" ":"")+s._143}),t=i.i(n.createElement)("div",{id:this.parentID+"Olap_Tree_Div",className:"e-olap-field-tree-div"}),a=i.i(n.createElement)("div",{id:this.parentID+"Pivot_Calc_Div",className:"e-pivot-calculated-div"});if("pivotfieldlist"===this.parent.getModuleName()&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._144)&&this.parent.isAdaptive){var o=i.i(n.createElement)("div",{id:this.parentID+"accordDiv",className:s._145});e.appendChild(o);var l=i.i(n.createElement)("div",{id:this.parentID+"buttonDiv",className:s._146}),d=i.i(n.createElement)("button",{id:this.parentID+"addBtn",className:s._147,attrs:{type:"button"}});d.innerText=this.parent.localeObj.getConstant("add");var p=i.i(n.createElement)("button",{id:this.parentID+"cancelBtn",className:s._148,attrs:{type:"button"}});p.innerText=this.parent.localeObj.getConstant("cancel"),l.appendChild(p),l.appendChild(d),e.appendChild(l)}else{if(!this.parent.isAdaptive&&"olap"===this.parent.dataType){var u=i.i(n.createElement)("div",{className:s._149,id:this.parentID+"_FieldNameTitle"});u.innerText=this.parent.localeObj.getConstant("fieldTitle"),a.appendChild(u)}var h=i.i(n.createElement)("div",{id:this.parentID+"innerDiv",className:s._150}),c=i.i(n.createElement)("input",{id:this.parentID+"ddlelement",attrs:{type:"text"},className:s._138});h.appendChild(c),"olap"!==this.parent.dataType||this.parent.isAdaptive?e.appendChild(h):a.appendChild(h);var g=i.i(n.createElement)("div",{id:this.parentID+"control_container",className:s._151});if(!this.parent.isAdaptive){var m=i.i(n.createElement)("div",{className:s._152});if(m.innerText="olap"===this.parent.dataType?this.parent.localeObj.getConstant("allFields"):this.parent.localeObj.getConstant("formulaField"),"olap"===this.parent.dataType){var f=i.i(n.createElement)("div",{className:s._152+"-container"});f.appendChild(m);var v=i.i(n.createElement)("span",{attrs:{tabindex:"0","aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("fieldTooltip"),role:"button"},className:s.a+" "+s._153});f.appendChild(v);new r.Tooltip({content:this.parent.localeObj.getConstant("fieldTooltip"),position:this.parent.enableRtl?"RightCenter":"LeftCenter",target:"."+s._153,offsetY:(this.parent.enableRtl,-10),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:220,cssClass:this.parent.cssClass}).appendTo(f),g.appendChild(f)}else e.appendChild(m)}var S=i.i(n.createElement)("div",{className:s._154+"-outer-div"});if(g.appendChild(S),S.appendChild(i.i(n.createElement)("div",{id:this.parentID+"tree",className:s._154})),"olap"!==this.parent.dataType||this.parent.isAdaptive?e.appendChild(g):t.appendChild(g),!this.parent.isAdaptive){var u=i.i(n.createElement)("div",{className:s._155});u.innerText="olap"===this.parent.dataType?this.parent.localeObj.getConstant("expressionField"):this.parent.localeObj.getConstant("formula"),"olap"===this.parent.dataType?a.appendChild(u):e.appendChild(u)}var y=i.i(n.createElement)("textarea",{id:this.parentID+"droppable",className:s._144+" e-control e-textbox e-input",attrs:{placeholder:this.parent.isAdaptive?this.parent.localeObj.getConstant("dropTextMobile"):"olap"===this.parent.dataType?this.parent.localeObj.getConstant("olapDropText"):this.parent.localeObj.getConstant("dropText")}});if("olap"!==this.parent.dataType||this.parent.isAdaptive?e.appendChild(y):a.appendChild(y),this.parent.isAdaptive){var l=i.i(n.createElement)("div",{id:this.parentID+"buttonDiv",className:s._146}),b=i.i(n.createElement)("button",{id:this.parentID+"okBtn",className:s._156,attrs:{type:"button"}});b.innerText=this.parent.localeObj.getConstant("apply"),l.appendChild(b),e.appendChild(l)}if("olap"===this.parent.dataType){if(!this.parent.isAdaptive){var C=i.i(n.createElement)("div",{className:s._157});C.innerText=this.parent.localeObj.getConstant("memberType"),a.appendChild(C)}var x=i.i(n.createElement)("div",{id:this.parentID+"Member_Type_Div",className:s._158});if(this.parent.isAdaptive)e.appendChild(x);else{a.appendChild(x);var w=i.i(n.createElement)("div",{className:s._159});w.innerText=this.parent.localeObj.getConstant("selectedHierarchy"),a.appendChild(w)}var T=i.i(n.createElement)("div",{id:this.parentID+"Hierarchy_List_Div",className:s._160});this.parent.isAdaptive?e.appendChild(T):a.appendChild(T)}if(!this.parent.isAdaptive){var M=i.i(n.createElement)("div",{className:s._161});M.innerText=this.parent.localeObj.getConstant("formatString"),a.appendChild(M)}var _=i.i(n.createElement)("div",{id:this.parentID+"Format_Div",className:s._162});this.parent.isAdaptive?e.appendChild(_):a.appendChild(_);var D=i.i(n.createElement)("div",{id:this.parentID+"custom_Format_Div",className:s._163}),O=i.i(n.createElement)("input",{id:this.parentID+"Custom_Format_Element",attrs:{type:"text"},className:s._164});if(D.appendChild(O),a.appendChild(D),this.parent.isAdaptive?e.appendChild(D):a.appendChild(D),"pivotfieldlist"===this.parent.getModuleName()&&null===this.parent.dialogRenderer.parentElement.querySelector("."+s._144)&&this.parent.isAdaptive){var b=e.querySelector("."+s._156);e.appendChild(b)}else"olap"===this.parent.dataType&&e.appendChild(t),e.appendChild(a)}return e},e.prototype.renderAdaptiveLayout=function(e){var t=this.parent.dialogRenderer.adaptiveElement;if(e){if(i.i(n.select)("#"+this.parentID+"droppable",t.element)){var r=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox);this.formulaText=i.i(n.select)("#"+this.parentID+"droppable",document).value,this.fieldText=r.value}if(t.element.querySelector("."+s._158)){var a=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Member_Type_Div",t.element),p.DropDownList);this.fieldType=a.value}if(t.element.querySelector("."+s._160)){var l=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",t.element),p.DropDownList);this.parentHierarchy="Dimension"===this.fieldType?l.value:null}if(t.element.querySelector("."+s._162)){var d=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Format_Div",t.element),p.DropDownList);this.formatType=d.value}if(t.element.querySelector("."+s._164)){var u=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Custom_Format_Element",t.element),o.MaskedTextBox);this.formatText="Custom"===("olap"===this.parent.dataType?this.formatType:this.getFormat(this.formatType))?u.value:null}}else this.currentFieldName=this.formulaText=this.fieldText=this.formatText=null,this.fieldType=this.formatType=this.parentHierarchy=null;this.renderMobileLayout(t)},e.prototype.updateAdaptiveCalculatedField=function(e,t){var r=this.parent.dialogRenderer.adaptiveElement.element;this.isEdit=e;var a=e?"pivot"===this.parent.dataType?this.parent.engineModule.fieldList[t]:this.parent.olapEngineModule.fieldList[t]:{id:null,caption:null,formula:null,fieldType:"Measure",formatString:"pivot"===this.parent.dataType?null:"Standard",parentHierarchy:null};this.currentFieldName=a.id;var l=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"ddlelement",document),o.MaskedTextBox);if(i.i(n.select)("#"+this.parentID+"droppable",document)&&(this.formulaText=i.i(n.select)("#"+this.parentID+"droppable",document).value=a.formula,this.fieldText=l.value=a.caption,l.dataBind()),r.querySelector("."+s._158)){var d=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Member_Type_Div",r),p.DropDownList);this.fieldType=d.value=a.fieldType,d.readonly=!!e,d.dataBind()}if(r.querySelector("."+s._160)){var h=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",r),p.DropDownList);"Dimension"===this.fieldType?this.parentHierarchy=h.value=a.parentHierarchy:(this.parentHierarchy=null,h.index=0),h.dataBind()}if(r.querySelector("."+s._162)){var c=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Format_Div",r),p.DropDownList);this.formatType=c.value=this.formatTypes.indexOf(a.formatString)>-1?a.formatString:"Custom"}if(r.querySelector("."+s._164)){var g=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"Custom_Format_Element",r),o.MaskedTextBox),m=u.a.getFieldByName(t,this.parent.dataSourceSettings.formatSettings);"pivot"===this.parent.dataType?this.formatText=g.value=m?m.format:null:this.formatText=g.value="Custom"===this.formatType?a.formatString:null,g.dataBind()}},e.prototype.createDropElements=function(){for(var e=this,t=i.i(n.select)("#"+this.parentID+"calculateddialog",document)?i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog):null,a=this.parent.isAdaptive?this.parent.dialogRenderer.parentElement:t.element,l=[],d=[],h=0,c=this.formatTypes;h<c.length;h++){var g=c[h];l.push({value:"pivot"===this.parent.dataType?this.getFormat(g):g,text:this.parent.localeObj.getConstant(g)})}if("olap"===this.parent.dataType){for(var m=[],f=["Measure","Dimension"],v=0,S=f;v<S.length;v++){var y=S[v];m.push({value:y,text:this.parent.localeObj.getConstant(y)})}for(var b=u.a.getClonedData(this.parent.olapEngineModule.fieldListData),C=0,x=b;C<x.length;C++){var w=x[C];w.spriteCssClass&&(w.spriteCssClass.indexOf("e-attributeCDB-icon")>-1||w.spriteCssClass.indexOf("e-hierarchyCDB-icon")>-1)&&d.push({value:w.id,text:w.caption})}var T=new p.DropDownList({dataSource:m,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:null!==this.fieldType?this.fieldType:m[0].value,readonly:this.isEdit,cssClass:s._165+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){M.enabled="Dimension"===t.value,e.fieldType=t.value,e.formulaText=i.i(n.select)("#"+e.parentID+"droppable",document).value,M.dataBind()}});T.isStringTemplate=!0,T.appendTo(i.i(n.select)("#"+this.parentID+"Member_Type_Div",a));var M=new p.DropDownList({dataSource:d,enableRtl:this.parent.enableRtl,locale:this.parent.locale,allowFiltering:!0,enabled:"Dimension"===T.value,filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+d[0].text.toString(),fields:{value:"value",text:"text"},value:null!==this.parentHierarchy&&"Dimension"===T.value?this.parentHierarchy:d[0].value,cssClass:s._165+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){e.parentHierarchy=t.value,e.formulaText=i.i(n.select)("#"+e.parentID+"droppable",document).value}});M.isStringTemplate=!0,M.appendTo(i.i(n.select)("#"+this.parentID+"Hierarchy_List_Div",a))}var _=new p.DropDownList({dataSource:l,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.isAdaptive&&null!==this.formatType?this.formatType:"olap"===this.parent.dataType?l[0].value:l[4].value,cssClass:s._165+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(t){D.enabled="Custom"===t.value,e.formatType=t.value,e.formulaText=i.i(n.select)("#"+e.parentID+"droppable",document).value,D.dataBind()}});_.isStringTemplate=!0,_.appendTo(i.i(n.select)("#"+this.parentID+"Format_Div",a));var D=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("customFormat"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,value:null!==this.formatText&&"Custom"===_.value?this.formatText:null,enabled:"Custom"===_.value,change:function(t){e.formatText=t.value,e.formulaText=i.i(n.select)("#"+e.parentID+"droppable",document).value},cssClass:this.parent.cssClass});D.isStringTemplate=!0,D.appendTo("#"+this.parentID+"Custom_Format_Element")},e.prototype.getFormat=function(e){var t=e;switch(t){case"Standard":t="N";break;case"Currency":t="C";break;case"Percent":t="P";break;case"N":t="Standard";break;case"C":t="Currency";break;case"P":t="Percent"}return t},e.prototype.createTreeView=function(){var e=this;"olap"===this.parent.dataType?this.treeObj=new l.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"id",text:"caption",parentID:"pid",iconCss:"spriteCssClass"},allowDragAndDrop:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,nodeDragStart:this.dragStart.bind(this),nodeDragging:function(e){e.event.target&&e.event.target.classList.contains(s._144)?(i.i(n.removeClass)([e.clonedNode],s._166),i.i(n.addClass)([e.event.target],"e-copy-drop")):(i.i(n.addClass)([e.clonedNode],s._166),i.i(n.removeClass)([e.event.target],"e-copy-drop"),e.dropIndicator="e-no-drop",i.i(n.addClass)([e.clonedNode.querySelector("."+s.a)],"e-icon-expandable"),i.i(n.removeClass)([e.clonedNode.querySelector("."+s.a)],"e-list-icon"))},nodeClicked:this.fieldClickHandler.bind(this),nodeSelected:function(t){t.node.getAttribute("data-type")===c?e.displayMenu(t.node):(i.i(n.removeClass)([t.node],"e-active"),t.cancel=!0)},nodeDragStop:this.fieldDropped.bind(this),drawNode:this.drawTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),sortOrder:"None",cssClass:this.parent.cssClass}):this.treeObj=new l.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"formula",text:"name",iconCss:"icon"},allowDragAndDrop:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,cssClass:this.parent.cssClass,nodeCollapsing:this.nodeCollapsing.bind(this),nodeDragStart:this.dragStart.bind(this),nodeClicked:this.fieldClickHandler.bind(this),nodeDragStop:this.fieldDropped.bind(this),drawNode:this.drawTreeNode.bind(this),keyPress:function(e){39===e.event.keyCode&&(e.cancel=!0)},sortOrder:"Ascending"}),this.treeObj.isStringTemplate=!0,this.treeObj.appendTo("#"+this.parentID+"tree")},e.prototype.updateNodeIcon=function(e){if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-icon-expandable.e-process")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(n.removeClass)([t],"e-folderCDB-icon"),i.i(n.addClass)([t],"e-folderCDB-open-icon")}else if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-icon-expandable")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-open-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(n.removeClass)([t],"e-folderCDB-open-icon"),i.i(n.addClass)([t],"e-folderCDB-icon")}else{for(var r=this.treeObj.fields.dataSource,a=r,o=[],s=0,l=a;s<l.length;s++){var d=l[s];d.pid===e.nodeData.id.toString()&&o.push(d)}if(0!==o.length)return;this.parent.olapEngineModule.calcChildMembers=[],this.parent.olapEngineModule.getCalcChildMembers(this.parent.dataSourceSettings,e.nodeData.id.toString()),o=this.parent.olapEngineModule.calcChildMembers,this.parent.olapEngineModule.calcChildMembers=[];for(var p=0,u=o;p<u.length;p++){var t=u[p];t.pid=e.nodeData.id.toString(),t.hasChildren=!1,t.spriteCssClass="e-level-members",t.caption=""===t.caption?this.parent.localeObj.getConstant("blank"):t.caption,r.push(t)}this.treeObj.addNodes(o,e.node)}},e.prototype.nodeCollapsing=function(e){e.cancel=!0},e.prototype.dragStart=function(e){var t=!1,a=e.clonedNode;if(a&&("olap"===this.parent.dataType&&(a.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||a.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||a.querySelector(".e-level-members,.e-namedSetCDB-icon"))||"pivot"===this.parent.dataType&&e.event.target.classList.contains(s._167))&&(t=!0),t){i.i(n.addClass)([e.draggedNode.querySelector("."+s._137)],s._139),i.i(n.addClass)([a],s._168);var o=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog);a.style.zIndex=(o.zIndex+1).toString(),a.style.display="inline"}else e.cancel=!0},e.prototype.drawTreeNode=function(e){if("olap"===this.parent.dataType){e.node.querySelector(".e-measure-icon")&&(e.node.querySelector(".e-list-icon").style.display="none");var t=e.nodeData;e.node.setAttribute("data-field",t.id),e.node.setAttribute("data-caption",t.caption);var r=e.node.querySelector("."+s._169);if(e.nodeData&&e.nodeData.type===c&&r&&e.node.querySelector(".e-list-icon.e-calc-member")){e.node.setAttribute("data-type",t.type),e.node.setAttribute("data-membertype",t.fieldType),e.node.setAttribute("data-hierarchy",t.parentHierarchy?t.parentHierarchy:""),e.node.setAttribute("data-formula",t.formula);var a=t.formatString?this.formatTypes.indexOf(t.formatString)>-1?t.formatString:"Custom":"None";e.node.setAttribute("data-formatString",a),e.node.setAttribute("data-customformatstring","Custom"===a?t.formatString:"");var o=i.i(n.createElement)("span",{className:s.B+" e-icons e-list-icon"});if(r.classList.add("e-calcfieldmember"),this.parent.isAdaptive){var l=i.i(n.createElement)("span",{className:"e-list-edit-icon"+(this.isEdit&&this.currentFieldName===t.id?" e-edited ":" e-edit ")+s.a}),d=i.i(n.createElement)("div",{className:"e-list-header-icon"});d.appendChild(l),d.appendChild(o),r.appendChild(d)}else r.appendChild(o)}if(this.parent.isAdaptive){var p=e.node.querySelector("."+s._169);if(e.node&&e.node.querySelector(".e-list-icon")&&p){var h=e.node.querySelector(".e-list-icon");p.insertBefore(h,e.node.querySelector(".e-list-text"))}e.node&&e.node.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon")&&(e.node.querySelector(".e-checkbox-wrapper").style.display="none"),e.node&&e.node.querySelector(".e-level-members")&&(e.node.querySelector(".e-list-icon").style.display="none")}}else{var t=e.nodeData.field;e.node.setAttribute("data-field",t),e.node.setAttribute("data-caption",e.nodeData.caption),e.node.setAttribute("data-type",e.nodeData.type);var g=u.a.getFieldByName(t,this.parent.dataSourceSettings.formatSettings);if(e.node.setAttribute("data-formatString",g?g.format:""),g){var m=this.getFormat(g.format),a=m?this.formatTypes.indexOf(m)>-1?g.format:"Custom":"None";e.node.setAttribute("data-customformatstring","Custom"===a?m:""),e.node.setAttribute("data-formatString",g?a:"")}var f=i.i(n.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:this.parent.localeObj.getConstant("dragField")},className:s.a+" e-drag"}),v=i.i(n.createElement)("div",{className:" e-iconspace"});i.i(n.prepend)([f],e.node.querySelector("."+s._169)),i.i(n.append)([v,e.node.querySelector("."+s._132)],e.node.querySelector("."+s._169)),this.getMenuItems(this.parent.engineModule.fieldList[t].type).length<=0?i.i(n.removeClass)([e.node.querySelector("."+s._132)],s.a):e.node.querySelector("."+s._132).setAttribute("title",this.parent.localeObj.getConstant("format")),this.parent.engineModule.fieldList[t].aggregateType===c&&(e.node.querySelector("."+s._132).setAttribute("title",this.parent.localeObj.getConstant("remove")),i.i(n.addClass)([e.node.querySelector("."+s._132)],s.B),i.i(n.addClass)([e.node.querySelector(".e-iconspace")],[s._133,s.a,"e-list-icon"]),e.node.querySelector("."+s._133).setAttribute("title",this.parent.localeObj.getConstant("edit")),e.node.querySelector("."+s._133).setAttribute("aria-disabled","false"),e.node.querySelector("."+s._133).setAttribute("tabindex","-1"),i.i(n.removeClass)([e.node.querySelector("."+s._132)],s._132),i.i(n.removeClass)([e.node.querySelector(".e-iconspace")],"e-iconspace"))}},e.prototype.createTypeContainer=function(e){for(var t=i.i(n.createElement)("div",{id:this.parentID+"control_container",className:s._151}),r=this.getMenuItems(this.parent.engineModule.fieldList[e].type),a=0;a<r.length;a++){var o=i.i(n.createElement)("input",{id:this.parentID+"radio"+e+r[a],attrs:{type:"radio","data-ftxt":e,"data-value":r[a]},className:s._170});t.appendChild(o)}return t},e.prototype.getMenuItems=function(e,t){for(var r=i.i(n.isNullOrUndefined)(t)?this.parent.aggregateTypes:t,a=[],o=this.getValidSummaryType(),s=0;s<r.length;s++)o.indexOf(r[s])>-1&&a.indexOf(r[s])<0&&(("Count"!==r[s]&&"DistinctCount"!==r[s]||"number"===e)&&"number"!==e||a.push(r[s]));return a},e.prototype.getValidSummaryType=function(){return["Count","DistinctCount","Sum","Avg","Median","Min","Max","Product","SampleStDev","PopulationStDev","SampleVar",h]},e.prototype.getAccordionData=function(e){for(var t=[],i=Object.keys(e.engineModule.fieldList),r=0,n=i.length;r<n;r++){var a=i[r];t.push({header:"<input id="+this.parentID+"_"+r+" class="+s._135+' type="checkbox" data-field='+a+' data-caption="'+this.parent.engineModule.fieldList[a].caption+'" data-type='+this.parent.engineModule.fieldList[a].type+"/>",content:this.parent.engineModule.fieldList[a].aggregateType===c||this.getMenuItems(this.parent.engineModule.fieldList[a].type).length<1?"":this.createTypeContainer(a).outerHTML,iconCss:this.parent.engineModule.fieldList[a].aggregateType===c?"e-list-icon "+(this.isEdit&&this.currentFieldName===a?"e-edited":"e-edit"):""})}return t},e.prototype.renderMobileLayout=function(e){var t=this;e.items[4].content=this.renderDialogElements().outerHTML,e.dataBind(),this.parent.isAdaptive&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._144)&&this.createDropElements();var r=new a.Button({cssClass:s._131+(this.parent.cssClass?" "+this.parent.cssClass:""),isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});if(r.isStringTemplate=!0,r.appendTo("#"+this.parentID+"cancelBtn"),r.element&&(r.element.onclick=this.cancelBtnClick.bind(this)),null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._144)&&this.parent.isAdaptive){var d=new a.Button({cssClass:s._131+" "+s._171+(this.parent.cssClass?" "+this.parent.cssClass:""),isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});d.isStringTemplate=!0,d.appendTo("#"+this.parentID+"okBtn");var p=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("fieldName"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:function(e){t.fieldText=e.value,t.formulaText=i.i(n.select)("#"+t.parentID+"droppable",document).value},cssClass:this.parent.cssClass});if(p.isStringTemplate=!0,p.appendTo("#"+this.parentID+"ddlelement"),null!==this.formulaText&&null!==i.i(n.select)("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement)){i.i(n.select)("#"+this.parentID+"droppable",this.parent.dialogRenderer.parentElement).value=this.formulaText}null!==this.fieldText&&null!==this.parent.dialogRenderer.parentElement.querySelector("."+s._138)&&(this.parent.dialogRenderer.parentElement.querySelector("."+s._138).value=this.fieldText,p.value=this.fieldText),d.element&&(d.element.onclick=this.applyFormula.bind(this))}else if(this.parent.isAdaptive){var u=new a.Button({cssClass:s._131+(this.parent.cssClass?" "+this.parent.cssClass:""),isPrimary:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});if(u.isStringTemplate=!0,u.appendTo("#"+this.parentID+"addBtn"),"olap"===this.parent.dataType)this.treeObj=new l.TreeView({fields:{dataSource:this.getFieldListData(this.parent),id:"id",text:"caption",parentID:"pid",iconCss:"spriteCssClass"},showCheckBox:!0,autoCheck:!1,sortOrder:"None",enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeClicked:this.fieldClickHandler.bind(this),drawNode:this.drawTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(e){i.i(n.removeClass)([e.node],"e-active"),e.cancel=!0},cssClass:this.parent.cssClass}),this.treeObj.isStringTemplate=!0,this.treeObj.appendTo("#"+this.parentID+"accordDiv");else{var h=new l.Accordion({items:this.getAccordionData(this.parent),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,expanding:this.accordionExpand.bind(this),clicked:this.accordionClickHandler.bind(this),created:this.accordionCreated.bind(this)});h.isStringTemplate=!0,h.appendTo("#"+this.parentID+"accordDiv"),this.updateType()}u.element&&(u.element.onclick=this.addBtnClick.bind(this))}},e.prototype.accordionExpand=function(e){if(0===e.element.querySelectorAll(".e-radio-wrapper").length)for(var t=Object.keys(this.parent.engineModule.fieldList),i=0,r=t.length;i<r;i++){var n=t[i],o="number"!==this.parent.engineModule.fieldList[n].type?["Count","DistinctCount"]:["Sum","Count","Avg","Median","Min","Max","DistinctCount","Product","SampleStDev","PopulationStDev","SampleVar",h],s=void 0;if(n===e.element.querySelector("[data-field").getAttribute("data-field"))for(var l=0;l<o.length;l++)s=new a.RadioButton({label:this.parent.localeObj.getConstant(o[l]),name:"AggregateType"+n,checked:e.element.querySelector("[data-type").getAttribute("data-type")===o[l],change:this.onChange.bind(this),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass}),s.isStringTemplate=!0,s.appendTo("#"+this.parentID+"radio"+n+o[l])}},e.prototype.onChange=function(e){var t=e.event.target.parentElement.querySelector(".e-label").innerText,i=e.event.target.closest(".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption");e.event.target.closest(".e-acrdn-item").querySelector(".e-label").innerText=i+" ("+t+")",e.event.target.closest(".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",e.event.target.getAttribute("data-value"))},e.prototype.updateType=function(){for(var e=Object.keys(this.parent.engineModule.fieldList),t=0,r=e.length;t<r;t++){var o=e[t],s=null;s="number"===this.parent.engineModule.fieldList[o].type&&"include"!==this.parent.engineModule.fieldList[o].type&&"exclude"!==this.parent.engineModule.fieldList[o].type||"DistinctCount"===this.parent.engineModule.fieldList[o].aggregateType?void 0!==this.parent.engineModule.fieldList[o].aggregateType?this.parent.engineModule.fieldList[o].aggregateType:"Sum":"Count";var l=new a.CheckBox({label:this.parent.engineModule.fieldList[o].caption+" ("+this.parent.localeObj.getConstant(s)+")",locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass});l.isStringTemplate=!0,l.appendTo("#"+this.parentID+"_"+t),i.i(n.select)("#"+this.parentID+"_"+t,document).setAttribute("data-field",o),i.i(n.select)("#"+this.parentID+"_"+t,document).setAttribute("data-type",s)}},e.prototype.cancelBtnClick=function(){this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)},e.prototype.addBtnClick=function(){var e="",t=null,i=null;if("pivot"===this.parent.dataType){for(var r=document.querySelectorAll(".e-accordion .e-check"),n=0;n<r.length;n++)if(t=r[n].parentElement.querySelector("[data-field]").getAttribute("data-field"),i=r[n].parentElement.querySelector("[data-field]").getAttribute("data-type"),-1===i.indexOf(c))e=e+'"'+i+"("+t+')"';else for(var a=0;a<this.parent.dataSourceSettings.calculatedFieldSettings.length;a++)if(this.parent.dataSourceSettings.calculatedFieldSettings[a].name===t){e+=this.parent.dataSourceSettings.calculatedFieldSettings[a].formula;break}}else for(var o=this.treeObj.getAllCheckedNodes(),s=this.parent.olapEngineModule,l=0,d=o;l<d.length;l++){var p=d[l];e+=s.fieldList[p]&&s.fieldList[p].type===c?s.fieldList[p].tag:p}this.formulaText=null!==this.formulaText?this.formulaText+e:e,this.renderMobileLayout(this.parent.dialogRenderer.adaptiveElement)},e.prototype.createCalculatedFieldDialog=function(e){if(this.parent.isAdaptive&&"pivotfieldlist"===this.parent.getModuleName())this.renderAdaptiveLayout(!e||void 0===e.edit||e.edit),this.isEdit=e&&void 0!==e.edit?e.edit:this.isEdit;else if(!this.parent.isAdaptive){if(this.isEdit=!(!e||void 0===e.edit)&&e.edit,this.renderDialogLayout(),e&&e.edit){var t=this.treeObj.element.querySelector('li[data-field="'+e.fieldName+'"]');if(t)if(i.i(n.addClass)([t],["e-active","e-node-focus"]),t.setAttribute("aria-selected","true"),t.id=this.treeObj.element.id+"_active","pivot"===this.parent.dataType){var a={event:{target:t.querySelector(".e-list-icon.e-edit.e-icons")}};this.fieldClickHandler(a)}else this.displayMenu(t)}var o=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog);o.element.style.top=parseInt(o.element.style.top,10)<0?"0px":o.element.style.top}},e.prototype.renderDialogLayout=function(){this.newFields=i.i(n.extend)([],this.parent.dataSourceSettings.calculatedFieldSettings,null,!0),this.createDialog();var e=i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"calculateddialog",document),r.Dialog);e.content=this.renderDialogElements(),e.refresh();var t=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("fieldName"),locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass});t.isStringTemplate=!0,t.appendTo("#"+this.parentID+"ddlelement"),this.createDropElements(),this.createTreeView(),this.droppable=new n.Droppable(i.i(n.select)("#"+this.parentID+"droppable")),this.keyboardEvents=new n.KeyboardEvents(e.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{moveRight:"rightarrow",enter:"enter",shiftE:"shift+E",delete:"delete"},eventName:"keydown"})},e.prototype.createConfirmDialog=function(e,t,a,o,l){var d=i.i(n.createElement)("div",{id:this.parentID+"_CalculatedFieldErrorDialog",className:s.Q});this.parent.element.appendChild(d);var p=new r.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:o?this.removeCalcField.bind(this,l):this.replaceFormula.bind(this,a),buttonModel:{cssClass:s.d+" "+s._172+(this.parent.cssClass?" "+this.parent.cssClass:""),content:o?this.parent.localeObj.getConstant("yes"):this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.closeErrorDialog.bind(this),buttonModel:{cssClass:s.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:o?this.parent.localeObj.getConstant("no"):this.parent.localeObj.getConstant("cancel"),isPrimary:!0}}],header:e,content:t,isModal:!0,visible:!0,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass,close:this.removeErrorDialog.bind(this)});p.isStringTemplate=!0,p.appendTo(d)},e.prototype.replaceFormula=function(e){var t=this.parent.dataSourceSettings;if("olap"===this.parent.dataType){for(var r=0;r<t.calculatedFieldSettings.length;r++)if(t.calculatedFieldSettings[r].name===e.name){i.i(n.isNullOrUndefined)(e.hierarchyUniqueName)||(t.calculatedFieldSettings[r].hierarchyUniqueName=e.hierarchyUniqueName),t.calculatedFieldSettings[r].formatString=e.formatString,t.calculatedFieldSettings[r].formula=e.formula,this.parent.lastCalcFieldInfo=t.calculatedFieldSettings[r];break}}else for(var a=0;a<t.values.length;a++)if(t.values[a].type===c&&t.values[a].name===e.name)for(var r=0;r<t.calculatedFieldSettings.length;r++)t.calculatedFieldSettings[r].name===e.name&&(t.calculatedFieldSettings[r].formula=e.formula,this.parent.lastCalcFieldInfo=t.calculatedFieldSettings[r],this.updateFormatSettings(t,e.name,e.formatString));this.addFormula(t,e.name),this.removeErrorDialog()},e.prototype.removeErrorDialog=function(){var e=i.i(n.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document),t=e?i.i(n.getInstance)(e,r.Dialog):null;t&&!t.isDestroyed&&t.destroy(),null!==i.i(n.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document)&&i.i(n.remove)(i.i(n.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document))},e.prototype.closeErrorDialog=function(){i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document),r.Dialog).close()},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(d._28,this.createCalculatedFieldDialog,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(d._28,this.createCalculatedFieldDialog)},e.prototype.destroy=function(){this.treeObj&&!this.treeObj.isDestroyed&&this.treeObj.destroy(),this.treeObj&&(this.treeObj=null),this.newFields&&(this.newFields=null),this.curMenu&&(this.curMenu=null),this.droppable&&(this.droppable=null),this.keyboardEvents&&(this.keyboardEvents=null);var e=i.i(n.select)("#"+this.parentID+"calculateddialog",document);e&&i.i(n.getInstance)(e,r.Dialog).destroy(),e=i.i(n.select)("#"+this.parentID+"ddlelement",document),e&&i.i(n.getInstance)(e,o.MaskedTextBox).destroy(),e=i.i(n.select)("#"+this.parentID+"CalcContextmenu",document),e&&i.i(n.getInstance)(e,l.ContextMenu).destroy(),e=i.i(n.select)("#"+this.parentID+"accordDiv",document),e&&i.i(n.getInstance)(e,l.Accordion).destroy(),(e=i.i(n.select)("#"+this.parentID+"_CalculatedFieldErrorDialog",document))&&i.i(n.getInstance)(e,r.Dialog).destroy()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),n=(i.n(r),i(2)),a=i(5),o=(i.n(a),function(){function e(e){this.parent=e,this.parent.contextMenuModule=this}return e.prototype.render=function(){this.renderContextMenu()},e.prototype.renderContextMenu=function(){var e=[{text:this.parent.localeObj.getConstant("addToFilter"),id:this.parent.element.id+"_Filters"},{text:this.parent.localeObj.getConstant("addToRow"),id:this.parent.element.id+"_Rows"},{text:this.parent.localeObj.getConstant("addToColumn"),id:this.parent.element.id+"_Columns"},{text:this.parent.localeObj.getConstant("addToValue"),id:this.parent.element.id+"_Values"}],t={cssClass:n._73+(this.parent.cssClass?" "+this.parent.cssClass:""),items:e,enableRtl:this.parent.enableRtl,locale:this.parent.locale,beforeOpen:this.onBeforeMenuOpen.bind(this),select:this.onSelectContextMenu.bind(this)},o=i.i(r.createElement)("ul",{id:this.parent.element.id+"_PivotContextMenu"});this.parent.element.appendChild(o),this.menuObj=new a.ContextMenu(t),this.menuObj.isStringTemplate=!0,this.menuObj.appendTo(o)},e.prototype.onBeforeMenuOpen=function(e){var t=[].slice.call(e.element.querySelectorAll("li")),a="olap"===this.parent.dataType?this.fieldElement.getAttribute("data-type"):this.fieldElement.querySelector("."+n._72).getAttribute("data-type");if(i.i(r.removeClass)(t,n.E),"CalculatedField"===a||"isMeasureFieldsAvail"===a)for(var o=0,s=t;o<s.length;o++){var l=s[o];l.textContent!==this.parent.localeObj.getConstant("addToValue")&&i.i(r.addClass)([l],n.E)}else if("isMeasureAvail"===a)for(var d=0,p=t;d<p.length;d++){var l=p[d];l.textContent!==this.parent.localeObj.getConstant("addToRow")&&l.textContent!==this.parent.localeObj.getConstant("addToColumn")&&i.i(r.addClass)([l],n.E)}else if("olap"===this.parent.dataType)for(var u=0,h=t;u<h.length;u++){var l=h[u];if(l.textContent===this.parent.localeObj.getConstant("addToValue")){i.i(r.addClass)([l],n.E);break}}},e.prototype.onSelectContextMenu=function(e){if(null!==e.element.textContent){var t=this.fieldElement.getAttribute("data-uid"),i=e.item.id.replace(this.parent.element.id+"_","").toLowerCase();this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.dataSourceUpdate.btnElement=this.fieldElement,this.parent.pivotCommon.dataSourceUpdate.updateDataSource(t,i,-1),this.parent.updateDataSource(!0),this.fieldElement=void 0}},e.prototype.destroy=function(){this.parent.isDestroyed&&this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),i.i(r.select)("#"+this.parent.element.id+"_PivotContextMenu",document)&&i.i(r.remove)(i.i(r.select)("#"+this.parent.element.id+"_PivotContextMenu",document)))},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),n=(i.n(r),i(2)),a=i(4),o=(i.n(a),function(){function e(e){this.parent=e}return e.prototype.createErrorDialog=function(e,t,o){var s=i.i(r.createElement)("div",{id:this.parent.parentID+"_ErrorDialog",className:n.Q});this.parent.element.appendChild(s);var l=o?Number(o.style.zIndex)+1:"pivotfieldlist"===this.parent.moduleName&&"Popup"===this.parent.renderMode&&this.parent.control?this.parent.control.dialogRenderer.fieldListDialog.zIndex+1:"pivotfieldlist"===this.parent.moduleName&&"Fixed"===this.parent.renderMode&&this.parent.control?1000002:"pivotview"===this.parent.moduleName&&this.parent.control?1000002:1000001;this.errorPopUp=new a.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:e,content:t,isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",zIndex:l,position:{X:"center",Y:"center"},buttons:[{click:this.closeErrorDialog.bind(this),buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}}],cssClass:this.parent.cssClass,closeOnEscape:!0,target:document.body,close:this.removeErrorDialog.bind(this)}),this.errorPopUp.isStringTemplate=!0,this.errorPopUp.appendTo(s)},e.prototype.closeErrorDialog=function(){this.errorPopUp.close()},e.prototype.removeErrorDialog=function(){this.errorPopUp&&!this.errorPopUp.isDestroyed&&this.errorPopUp.destroy(),document.getElementById(this.parent.parentID+"_ErrorDialog")&&i.i(r.remove)(document.getElementById(this.parent.parentID+"_ErrorDialog"))},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return m});var r=i(0),n=(i.n(r),i(2)),a=i(5),o=(i.n(a),i(4)),s=(i.n(o),i(10)),l=(i.n(s),i(8)),d=(i.n(l),i(7)),p=(i.n(d),i(43)),u=(i.n(p),i(73)),h=(i.n(u),i(3)),c=i(1),g=i(11),m=(i.n(g),function(){function e(e){this.parent=e}return e.prototype.createFilterDialog=function(e,t,a,s){var l=this,d=i.i(r.createElement)("div",{id:this.parent.parentID+"_EditorTreeView",className:n._74+" "+("olap"===this.parent.dataType?"e-olap-editor-dialog":"")+(this.parent.isDataOverflow?" "+n._75:""),attrs:{"data-fieldName":t,"aria-label":a}}),p=this.parent.engineModule.fieldList[t].caption,u=this.parent.localeObj.getConstant("filter")+' "'+a+'" '+this.parent.localeObj.getConstant("by");this.filterObject=this.getFilterObject(t),this.isSearchEnabled=!1,this.allowExcelLikeFilter=this.isExcelFilter(t),this.parent.element.appendChild(d),this.dialogPopUp=new o.Dialog({animationSettings:{effect:this.allowExcelLikeFilter?"None":"Fade"},allowDragging:!1,header:this.allowExcelLikeFilter?u:p,content:"",isModal:!0,visible:!0,showCloseIcon:!!this.allowExcelLikeFilter,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:this.parent.isDataOverflow?this.allowExcelLikeFilter?"440px":"400px":this.allowExcelLikeFilter?"400px":"350px",position:{X:"center",Y:"center"},buttons:[{buttonModel:{cssClass:"e-clear-filter-button"+(this.allowExcelLikeFilter?"":" "+n._76)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:"e-icons e-clear-filter-icon",enableRtl:this.parent.enableRtl,content:this.parent.localeObj.getConstant("clearFilter"),disabled:!this.filterObject}},{buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.closeFilterDialog.bind(this),buttonModel:{cssClass:n.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:"Popup"!==this.parent.renderMode,target:s,cssClass:this.parent.cssClass,close:this.removeFilterDialog.bind(this)}),this.dialogPopUp.isStringTemplate=!0,this.dialogPopUp.appendTo(d);var h={cancel:!1,fieldName:t,fieldMembers:this.parent.dataSourceSettings.allowMemberFilter?e:[],filterSetting:this.filterObject};("pivotfieldlist"===this.parent.moduleName&&this.parent.control.isPopupView?this.parent.control.pivotGridModule:this.parent.control).trigger(c._7,h,function(n){n.cancel?(l.dialogPopUp.close(),l.dialogPopUp=void 0):(e=n.fieldMembers,l.allowExcelLikeFilter?(l.createTabMenu(e,a,t),i.i(r.addClass)([l.dialogPopUp.element],"e-excel-filter"),l.updateCheckedState()):(l.dialogPopUp.content=l.createTreeView(e,a,t),l.updateCheckedState()),i.i(r.setStyleAttribute)(l.dialogPopUp.element,{visibility:"visible"}),l.allowExcelLikeFilter&&l.dialogPopUp.element.querySelector(".e-dlg-closeicon-btn").focus(),l.memberTreeView.nodeChecked=l.parent.control.pivotButtonModule.nodeStateModified.bind(l.parent.control.pivotButtonModule),l.allMemberSelect.nodeChecked=l.parent.control.pivotButtonModule.nodeStateModified.bind(l.parent.control.pivotButtonModule))})},e.prototype.createTreeView=function(e,t,o){var l=this,d=i.i(r.createElement)("div",{id:this.parent.parentID+"EditorDiv",className:n._77+(this.allowExcelLikeFilter?" e-excelfilter":"")}),p=i.i(r.createElement)("button",{id:this.parent.parentID+"_LevelDiv",className:"e-level-container-class",attrs:{type:"button"}}),u=i.i(r.createElement)("div",{id:this.parent.parentID+"_SearchDiv",attrs:{tabindex:"-1"},className:n._78}),h=this.parent.engineModule.fieldList[o].caption,c=i.i(r.createElement)("input",{attrs:{type:"text",className:n._79}}),g=this.parent.isDataOverflow?this.parent.currentTreeItems.length-this.parent.control.maxNodeLimitInMemberEditor+this.parent.control.localeObj.getConstant("editorDataLimitMsg"):"",m=i.i(r.createElement)("div",{id:this.parent.parentID+"_LabelDiv",attrs:{tabindex:"-1",title:g},className:n._80});this.parent.editorLabelElement=i.i(r.createElement)("label",{className:n._81}),this.parent.editorLabelElement.innerText=g,m.style.display=this.parent.isDataOverflow?"block":"none",m.appendChild(this.parent.editorLabelElement),u.appendChild(c),this.createSortOptions(o,u,e);var f=i.i(r.createElement)("div",{id:this.parent.parentID+"_AllDiv",attrs:{tabindex:"-1"},className:n._82}),v=i.i(r.createElement)("div",{id:this.parent.parentID+"_SelectAllContainer",className:n._83}),S=i.i(r.createElement)("div",{className:n._84+"-outer-div"}),y=i.i(r.createElement)("div",{className:n._84}),b=i.i(r.createElement)("div",{className:n._85+" "+n._76});b.innerText=this.parent.localeObj.getConstant("noMatches"),"olap"!==this.parent.dataType||!this.parent.control.loadOnDemandInMemberEditor||this.parent.engineModule.fieldList[o].isHierarchy||this.parent.engineModule.fieldList[o].isNamedSets||(u.appendChild(p),this.createLevelWrapper(p,o)),f.appendChild(v),d.appendChild(u),d.appendChild(f),d.appendChild(b),this.editorSearch=new s.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("search")+" &#8220"+h+"&#8220",enableRtl:this.parent.enableRtl,cssClass:n._86+(this.parent.cssClass?" "+this.parent.cssClass:""),showClearButton:!0,change:function(e){if("olap"===l.parent.dataType)l.searchOlapTreeView(e,b);else{l.parent.eventBase.searchTreeNodes(e,l.memberTreeView,!1);var t=l.dialogPopUp.element;0===[].slice.call(l.memberTreeView.element.querySelectorAll("li")).length?(l.allMemberSelect.disableNodes([l.allMemberSelect.element.querySelector("li")]),t.querySelector("."+n.d).setAttribute("disabled","disabled"),i.i(r.removeClass)([b],n._76)):(l.allMemberSelect.enableNodes([l.allMemberSelect.element.querySelector("li")]),t.querySelector("."+n.d).removeAttribute("disabled"),i.i(r.addClass)([b],n._76)),l.updateCheckedState()}}}),this.editorSearch.isStringTemplate=!0,this.editorSearch.appendTo(c);var C={"data-fieldName":o,"data-memberId":"all"},x=[{id:"all",name:this.parent.localeObj.getConstant("all"),isSelected:!0,htmlAttributes:C}];if(this.allMemberSelect=new a.TreeView({fields:{dataSource:x,id:"id",text:"name",isChecked:"isSelected"},showCheckBox:!0,expandOn:"None",enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeClicked:this.nodeCheck.bind(this,!0),keyPress:this.nodeCheck.bind(this,!0),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0},cssClass:this.parent.cssClass}),this.allMemberSelect.isStringTemplate=!0,!i.i(r.isNullOrUndefined)(this.parent.currentTreeItems))for(var w=0;w<this.parent.currentTreeItems.length;w++)(this.parent.currentTreeItems[w].id.indexOf("\n")||this.parent.currentTreeItems[w].id.startsWith("\n"))&&(this.parent.currentTreeItems[w].id=this.parent.currentTreeItems[w].id.replace("\n"," "));return this.allMemberSelect.appendTo(v),S.appendChild(y),d.appendChild(S),this.memberTreeView=new a.TreeView({fields:{dataSource:e,id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},showCheckBox:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeChecking:this.validateTreeNode.bind(this),nodeClicked:this.nodeCheck.bind(this,!1),keyPress:this.nodeCheck.bind(this,!1),nodeExpanding:this.updateChildNodes.bind(this),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0},expandOn:"None",cssClass:this.parent.cssClass}),this.memberTreeView.isStringTemplate=!0,this.memberTreeView.appendTo(y),this.parent.isDataOverflow&&this.parent.control.maxNodeLimitInMemberEditor<this.parent.currentTreeItems.length&&d.appendChild(m),d},e.prototype.createSortOptions=function(e,t,a){if("pivot"===this.parent.dataType&&a&&a.length>0){var o=this.parent.engineModule.fieldList[e].sort,s=i.i(r.createElement)("div",{className:n._87+" e-btn-group"+(this.parent.enableRtl?" "+n._36:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),id:this.parent.element.id+"_Member_Sort"});this.parent.element.appendChild(s);var l=i.i(r.createElement)("button",{className:("Ascending"===o?n._88+" ":"")+n._89,id:this.parent.element.id+"_Sort_Ascend",attrs:{type:"button","aria-label":"button"}}),d=i.i(r.createElement)("button",{className:("Descending"===o?n._88+" ":"")+n._89,id:this.parent.element.id+"_Sort_Descend",attrs:{type:"button","aria-label":"button"}}),p=new g.Button({iconCss:n.a+" "+n._90,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});p.appendTo(l),p=new g.Button({iconCss:n.a+" "+n._91,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),p.appendTo(d),s.appendChild(l),s.appendChild(d),t.appendChild(s),this.unWireEvent(l),this.unWireEvent(d),this.wireEvent(l,e),this.wireEvent(d,e)}},e.prototype.createLevelWrapper=function(e,t){for(var a=this,o=this.parent.engineModule,s=o.fieldList[t].levels,l=o.fieldList[t].levelCount,d=[],p=0,h=s.length;p<h;p++)d.push({id:s[p].id,text:s[p].name});this.dropMenu=new u.DropDownButton({cssClass:"e-level-drop e-caret-hide"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:d,iconCss:"e-icons e-dropdown-icon",disabled:l===s.length,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeOpen:function(e){var o=[].slice.call(e.element.querySelectorAll("li")),s=a.parent.engineModule,l=s.fieldList[t].levelCount;i.i(r.removeClass)(o,n.E);for(var d=0,p=o.length;d<p;d++)d<l&&i.i(r.addClass)([o[d]],n.E)},select:function(e){for(var t,i=a.dialogPopUp.element.getAttribute("data-fieldname"),r=a.parent.engineModule,n=0,o=d.length;n<o;n++)d[n].id===e.item.id&&(t=n);r.getFilterMembers(a.parent.dataSourceSettings,i,t+1,!1,!0)},close:function(){var e=a.parent.engineModule,i=e.fieldList[t].levels;e.fieldList[t].levelCount===i.length?(a.dropMenu.disabled=!0,a.dropMenu.dataBind()):a.dropMenu.disabled=!1}}),this.dropMenu.appendTo(e)},e.prototype.searchOlapTreeView=function(e,t){var a=this;clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){var o=a.parent.engineModule,s=a.dialogPopUp.element,l=s.getAttribute("data-fieldname"),d=a.parent.control.maxNodeLimitInMemberEditor?a.parent.control.maxNodeLimitInMemberEditor:5e3;if(o.fieldList[l].isHierarchy)a.parent.eventBase.searchTreeNodes(e,a.memberTreeView,!1,!0);else{if(a.dropMenu&&""!==e.value?a.dropMenu.disabled=!0:a.dropMenu.disabled=!1,a.parent.control.loadOnDemandInMemberEditor){var p=o.fieldList[l].levelCount?o.fieldList[l].levelCount:1;o.getSearchMembers(a.parent.dataSourceSettings,l,e.value.toLowerCase(),d,!1,p)}else o.getSearchMembers(a.parent.dataSourceSettings,l,e.value.toLowerCase(),d,!0);a.parent.eventBase.searchTreeNodes(e,a.memberTreeView,!1,!1)}0===[].slice.call(a.memberTreeView.element.querySelectorAll("li")).length?(a.allMemberSelect.disableNodes([a.allMemberSelect.element.querySelector("li")]),s.querySelector("."+n.d).setAttribute("disabled","disabled"),i.i(r.removeClass)([t],n._76)):(a.allMemberSelect.enableNodes([a.allMemberSelect.element.querySelector("li")]),s.querySelector("."+n.d).removeAttribute("disabled"),i.i(r.addClass)([t],n._76)),a.updateCheckedState()},500)},e.prototype.nodeCheck=function(e,t){var n=[t.node];if(t.event.target.classList.contains("e-fullrow")||"Enter"===t.event.key){var a=e?this.allMemberSelect:this.memberTreeView;"true"===a.getNode(t.node).isChecked?a.uncheckAll(n):a.checkAll(n)}else 38!==t.event.keyCode||e||(i.i(r.removeClass)(this.memberTreeView.element.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),i.i(r.addClass)(n,"e-prev-active-node"))},e.prototype.applySorting=function(e,t){var a=i.i(r.closest)(t.target,"."+n._89);if(a){var o=[].slice.call(i.i(r.closest)(a,"."+n._87).querySelectorAll("."+n._89));a.querySelector("."+n._90)&&!a.classList.contains(n._88)?(this.updateFilterMembers("Ascending",e),i.i(r.addClass)([a],n._88),i.i(r.removeClass)([o[1]],n._88)):a.querySelector("."+n._91)&&!a.classList.contains(n._88)?(this.updateFilterMembers("Descending",e),i.i(r.addClass)([a],n._88),i.i(r.removeClass)([o[0]],n._88)):(this.updateFilterMembers("None",e),i.i(r.removeClass)(o,n._88))}},e.prototype.updateFilterMembers=function(e,t){var i=this.parent.engineModule.fieldList[t],r="None"===e?h.a.getClonedData(i.dateMember):this.parent.currentTreeItems.slice(),n=!!i.isAlphanumeric||void 0,a=!1,o=i&&i.membersOrder?i.membersOrder.slice():[],s={fieldName:t,sortOrder:e,members:o&&o.length>0?o:Object.keys(r),IsOrderChanged:!1};o&&o.length>0?r=h.a.applyCustomSort(s,r,n):(r=h.a.applyHeadersSort(r,s.sortOrder,n),a=!0);var l="pivotfieldlist"===this.parent.moduleName&&this.parent.control.isPopupView?this.parent.control.pivotGridModule:this.parent.control;if(a){for(var d=[],p=0,u=0;p<r.length;p++)"Grand Total"!==r[p].actualText&&(d[u++]=r[p].actualText);s.members=d}l.trigger(c.Y,s),s.IsOrderChanged&&(r=h.a.applyCustomSort(s,r,n,!0)),this.parent.currentTreeItems=[],this.parent.searchTreeItems=[];for(var g=[],m=t.replace(/[^a-zA-Z0-9 ]/g,"_"),f=0,v=r.length;f<v;f++){if("None"===e){var S=(this.parent.isDateField?r[f].formattedText:r[f].actualText).toString(),y={"data-fieldName":t,"data-memberId":r[f].actualText.toString()},b={id:m+"_"+(f+1),htmlAttributes:y,actualText:r[f].actualText,name:S,isSelected:this.parent.currentTreeItemsPos[r[f].actualText].isSelected};this.parent.currentTreeItems.push(b),""!==this.editorSearch.value?b.name.toLowerCase().indexOf(this.editorSearch.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(b),g.push(b)):(this.parent.searchTreeItems.push(b),g.push(b))}else this.parent.currentTreeItems.push(r[f]),""!==this.editorSearch.value?r[f].name.toLowerCase().indexOf(this.editorSearch.value.toLowerCase())>-1&&(this.parent.searchTreeItems.push(r[f]),g.push(r[f])):(this.parent.searchTreeItems.push(r[f]),g.push(r[f]));this.parent.currentTreeItemsPos[r[f].actualText].index=f}var C=this.memberTreeView.fields.dataSource.length;this.memberTreeView.fields={dataSource:g.slice(0,C),id:"id",text:"name",isChecked:"isSelected",parentID:"pid"},this.memberTreeView.dataBind()},e.prototype.updateChildNodes=function(e){if("olap"===this.parent.dataType){var t=this.parent.engineModule,n=e.node.getAttribute("data-fieldname"),a=t.fieldList[n],o=[];if(a&&a.filterMembers.length>0&&!this.isSearchEnabled&&!a.members[e.nodeData.id].isNodeExpand){for(var s=[],l=0,d=a.filterMembers;l<d.length;l++){var p=d[l];p.pid===e.nodeData.id.toString()&&s.push(p)}0===s.length&&(a.childMembers=[],t.getChildMembers(this.parent.dataSourceSettings,e.nodeData.id.toString(),n),s=a.childMembers,a.childMembers=[]);var u=h.a.getClonedData(s),c=this.memberTreeView.fields.dataSource,g=!1;i.i(r.isNullOrUndefined)(this.filterObject)||(g="Include"===this.filterObject.type,o=this.filterObject.items?this.filterObject.items:[]),u=this.updateChildData(g,u,o,n,e.nodeData),u=this.parent.eventBase.sortOlapFilterData(u,t.fieldList[n].sort);for(var m=0,f=u;m<f.length;m++){var v=f[m];c.push(v)}a.members[e.nodeData.id].isNodeExpand=!0,this.memberTreeView.addNodes(u,e.node)}}},e.prototype.updateChildData=function(e,t,i,r,n){for(var a=Object.keys(this.parent.currentTreeItemsPos).length,o=this.parent.engineModule.fieldList[r],s=[],l=1,d=0,p=t;d<p.length;d++){var u=p[d],h=u,c=u.id.toString();o.members[c].isNodeExpand=!1,u.isSelected="true"===n.isChecked,l<=this.parent.control.maxNodeLimitInMemberEditor&&s.push(h),this.parent.currentTreeItems.push(h),this.parent.searchTreeItems.push(h),this.parent.currentTreeItemsPos[c]={index:a,isSelected:h.isSelected},a++,l++}return this.parent.isDataOverflow=!1,s},e.prototype.createTabMenu=function(e,t,o){var s=i.i(r.createElement)("div",{id:this.parent.parentID+"_FilterTabContainer",className:n._92,attrs:{tabindex:"-1"}});this.dialogPopUp.content=s,this.dialogPopUp.dataBind();for(var l=["Label","Value","Include","Exclude"],d="((-|\\+)?[0-9]+(\\.[0-9]+)?)+",p=Object.keys(this.parent.engineModule.fieldList[o].members)[0],u=this.parent.engineModule.fieldList[o].type,c=h.a.getFieldByName(o,this.parent.dataSourceSettings.formatSettings),g=[{header:{text:this.parent.localeObj.getConstant("member"),iconCss:this.filterObject&&l.indexOf(this.filterObject.type)>1?n._93:""},content:this.createTreeView(e,t,o)}],m=0,f=l;m<f.length;m++){var v=f[m];if("Label"===v&&this.parent.dataSourceSettings.allowLabelFilter||"Value"===v&&this.parent.dataSourceSettings.allowValueFilter){var S="Label"===v&&p&&p.match(d)&&p.match(d)[0].length===p.length&&"number"===u?"Number":"Label"===v&&p&&"Invalid Date"!==new Date(p).toString()&&(c&&c.type||this.filterObject&&"Date"===this.filterObject.type)?"Date":v,y={header:{text:"Number"===S?this.parent.localeObj.getConstant("label"):this.parent.localeObj.getConstant(S.toLowerCase()),iconCss:this.filterObject&&this.filterObject.type===S?n._93:""},content:this.createCustomFilter(o,this.filterObject&&this.filterObject.type===S?this.filterObject:void 0,S.toLowerCase())};g.push(y)}}var b=this.filterObject?["Label","Date","Number"].indexOf(this.filterObject.type)>=0?1:"Value"===this.filterObject.type?this.parent.dataSourceSettings.allowLabelFilter&&this.parent.dataSourceSettings.allowValueFilter?2:1:0:0;b=this.parent.dataSourceSettings.allowMemberFilter||0!==b?b:1,this.tabObj=new a.Tab({heightAdjustMode:"Auto",items:g,height:"100%",selectedItem:b,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass}),this.tabObj.isStringTemplate=!0,this.tabObj.appendTo(s),this.parent.dataSourceSettings.allowMemberFilter||this.tabObj.hideTab(0),b>0&&i.i(r.addClass)([this.dialogPopUp.element.querySelector(".e-filter-div-content."+(1===b&&this.parent.dataSourceSettings.allowLabelFilter?"e-label-filter":"e-value-filter"))],"e-selected-tab")},e.prototype.createCustomFilter=function(e,t,a){for(var o=[],s=[],l=[],d=this.parent.dataSourceSettings.values,p="DoesNotEquals",u=0,h=0,c={label:["Equals","DoesNotEquals","BeginWith","DoesNotBeginWith","EndsWith","DoesNotEndsWith","Contains","DoesNotContains","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween"],date:["Equals","DoesNotEquals","Before","BeforeOrEqualTo","After","AfterOrEqualTo","Between","NotBetween"],value:["Equals","DoesNotEquals","GreaterThan","GreaterThanOrEqualTo","LessThan","LessThanOrEqualTo","Between","NotBetween"]},g=["Between","NotBetween"],m="label"===a?c.label:"date"===a?c.date:c.value,f=0,v=m;f<v.length;f++){var S=v[f];p=t&&S===t.condition?m.indexOf(t.condition)>=0?t.condition:m[0]:p,o.push({value:S,text:this.parent.localeObj.getConstant(S)})}for(var y=d.length;y--;)s.unshift({value:d[y].name,text:d[y].caption?d[y].caption:d[y].name}),u=t&&"Value"===t.type&&t.measure===d[y].name&&t.condition===p?y:u;if("olap"===this.parent.dataType){var b=this.parent.engineModule,C=b.fieldList[e].levels;if(this.parent.engineModule.fieldList[e].isHierarchy){for(var x=void 0,w=this.parent.engineModule.fieldListData,T=0,M=w;T<M.length;T++){var _=M[T];if(_&&_.pid===e){x=_;break}}l.push({value:x?x.id:e,text:x?x.caption:b.fieldList[e].name}),h=0,t&&t.name===e&&t.type.toLowerCase()===a&&(l[l.length-1].iconClass=n.a+" "+n._94)}else for(var D=0,O=C.length;D<O;D++){h=t&&t.selectedField===C[D].id?D:h,l.push({value:C[D].id,text:C[D].name});for(var P=0,N=this.parent.dataSourceSettings.filterSettings;P<N.length;P++){var E=N[P];if(E.name===e&&E.selectedField===C[D].id&&E.type.toLowerCase()===a){l[l.length-1].iconClass=n.a+" "+n._94;break}}}}var I=i.i(r.createElement)("div",{className:n._95+" e-"+(["date","number"].indexOf(a)>=0?"label":a)+"-filter"+(this.parent.isDataOverflow?" "+n._75:""),id:this.parent.parentID+"_"+a+"_filter_div_content",attrs:{"data-type":a,"data-fieldName":e,"data-operator":p,"data-selectedField":"olap"===this.parent.dataType&&l.length>0?l[h].value.toString():"","data-measure":this.parent.dataSourceSettings.values.length>0?this.parent.dataSourceSettings.values[u].name:"","data-value1":t&&p===t.condition&&t.value1?t.value1.toString():"","data-value2":t&&p===t.condition&&t.value2?t.value2.toString():""}}),F=i.i(r.createElement)("div",{className:n._96});F.innerText=this.parent.localeObj.getConstant(a+"TextContent");var L=i.i(r.createElement)("div",{className:n._97+" "+(-1===g.indexOf(p)?n._76:"")});L.innerText=this.parent.localeObj.getConstant("And");var A=i.i(r.createElement)("div",{className:n._98}),R=i.i(r.createElement)("div",{className:n._99}),k=i.i(r.createElement)("div",{className:"e-level-option-container "+("olap"===this.parent.dataType?"":n._76)}),j=i.i(r.createElement)("div",{className:"e-measure-option-container "+(["label","date","number"].indexOf(a)>=0?n._76:"")}),H=i.i(r.createElement)("div",{className:"e-condition-option-container"}),q=i.i(r.createElement)("div",{className:n._100}),V=i.i(r.createElement)("div",{id:this.parent.parentID+"_"+a+"_level_option_container"}),B=i.i(r.createElement)("div",{id:this.parent.parentID+"_"+a+"_measure_option_container"}),U=i.i(r.createElement)("div",{id:this.parent.parentID+"_"+a+"_contition_option_container"}),G=i.i(r.createElement)("div",{className:n._101}),z=i.i(r.createElement)("div",{className:n._102+" "+(-1===g.indexOf(p)?n._76:"")}),W=i.i(r.createElement)("input",{id:this.parent.parentID+"_"+a+"_input_option_1",attrs:{type:"text"}}),Q=i.i(r.createElement)("input",{id:this.parent.parentID+"_"+a+"_input_option_2",attrs:{type:"text"}});return G.appendChild(W),z.appendChild(Q),k.appendChild(V),k.appendChild(A.cloneNode(!0)),j.appendChild(B),j.appendChild(A),H.appendChild(U),R.appendChild(k),R.appendChild(j),R.appendChild(H),q.appendChild(G),q.appendChild(L),q.appendChild(z),this.createElements(t,g,B,U,W,Q,s,o,u,p,a,V,l,h),I.appendChild(F),I.appendChild(R),I.appendChild(q),I},e.prototype.createElements=function(e,t,a,o,u,h,c,g,m,f,v,S,y,b){var C=this;if("olap"===this.parent.dataType){var x=new d.DropDownList({dataSource:y,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text",iconCss:"iconClass"},index:b,cssClass:n._103+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab"),n=t.getAttribute("data-fieldName"),a=t.getAttribute("data-type");if(!i.i(r.isNullOrUndefined)(t)){C.updateInputValues(t,a,u,h),i.i(l.setStyleAndAttributes)(t,{"data-selectedField":e.value});for(var o,d=0,p=C.parent.dataSourceSettings.filterSettings;d<p.length;d++){var g=p[d];if(g.name===n&&g.selectedField===e.value){o=g;break}}if(o){"value"===a&&o.measure&&""!==o.measure&&(w.value=o.measure?o.measure:c[0].value),o.condition?T.value=o.condition?o.condition:"DoesNotEquals":T.value="DoesNotEquals";var m=void 0,f=void 0;"value"===a?(m=i.i(r.getInstance)(u,s.NumericTextBox),f=i.i(r.getInstance)(h,s.NumericTextBox),m&&(m.value=o.value1?parseInt(o.value1,10):void 0),f&&(f.value=o.value2?parseInt(o.value2,10):void 0)):(m=i.i(r.getInstance)(u,s.MaskedTextBox),f=i.i(r.getInstance)(h,s.MaskedTextBox),m&&(m.value=o.value1?o.value1:""),f&&(f.value=o.value2?o.value2:""))}C.updateInputValues(t,a,u,h)}}});x.isStringTemplate=!0,x.appendTo(S)}var w=new d.DropDownList({dataSource:c,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text"},index:m,cssClass:n._70+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||(C.updateInputValues(t,v,u,h),i.i(l.setStyleAndAttributes)(t,{"data-measure":e.value}))}});w.isStringTemplate=!0,w.appendTo(a);var T=new d.DropDownList({dataSource:g,enableRtl:this.parent.enableRtl,fields:{value:"value",text:"text"},value:f,cssClass:n._71+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:function(e){var a=C.dialogPopUp.element.querySelector(".e-selected-tab");if(!i.i(r.isNullOrUndefined)(a)){C.updateInputValues(a,v,u,h);for(var o=[n._97,n._102],s=0,d=o;s<d.length;s++){var p=d[s];t.indexOf(e.value)>=0?i.i(r.removeClass)([a.querySelector("."+p)],n._76):i.i(r.addClass)([a.querySelector("."+p)],n._76)}i.i(l.setStyleAndAttributes)(a,{"data-operator":e.value})}}});if(T.isStringTemplate=!0,T.appendTo(o),"date"===v){var M=new p.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,format:"dd/MM/yyyy hh:mm:ss a",showClearButton:!0,value:e&&f===e.condition?"string"==typeof e.value1?new Date(e.value1):e.value1:null,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":e.value,"data-value2":_.value})},width:"100%",cssClass:this.parent.cssClass}),_=new p.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,format:"dd/MM/yyyy hh:mm:ss a",showClearButton:!0,value:e&&f===e.condition?"string"==typeof e.value2?new Date(e.value2):e.value2:null,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":M.value,"data-value2":e.value})},width:"100%",cssClass:this.parent.cssClass});M.isStringTemplate=!0,M.appendTo(u),_.isStringTemplate=!0,_.appendTo(h)}else if("value"===v){var D=new s.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,format:"###.##",value:e&&f===e.condition?parseInt(e.value1,10):void 0,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":e.value?e.value.toString():"0","data-value2":O.value?O.value.toString():"0"})},width:"100%",cssClass:this.parent.cssClass}),O=new s.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,format:"###.##",value:e&&f===e.condition?parseInt(e.value2,10):void 0,change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":D.value?D.value.toString():"0","data-value2":e.value?e.value.toString():"0"})},width:"100%",cssClass:this.parent.cssClass});D.isStringTemplate=!0,D.appendTo(u),O.isStringTemplate=!0,O.appendTo(h)}else{var P=new s.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,value:e&&f===e.condition?e.value1:"",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":e.value,"data-value2":N.value})},width:"100%",cssClass:this.parent.cssClass}),N=new s.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,showClearButton:!0,value:e&&f===e.condition?e.value2:"",change:function(e){var t=C.dialogPopUp.element.querySelector(".e-selected-tab");i.i(r.isNullOrUndefined)(t)||i.i(l.setStyleAndAttributes)(t,{"data-value1":P.value,"data-value2":e.value})},width:"100%",cssClass:this.parent.cssClass});P.isStringTemplate=!0,P.appendTo(u),N.isStringTemplate=!0,N.appendTo(h)}},e.prototype.updateInputValues=function(e,t,n,a){var o=i.i(r.getInstance)(n,"date"===t?p.DateTimePicker:"value"===t?s.NumericTextBox:s.MaskedTextBox),d=i.i(r.getInstance)(a,"date"===t?p.DateTimePicker:"value"===t?s.NumericTextBox:s.MaskedTextBox),u=i.i(r.isNullOrUndefined)(o.value)?"":o.value.toString(),h=i.i(r.isNullOrUndefined)(d.value)?"":d.value.toString();i.i(l.setStyleAndAttributes)(e,{"data-value1":u,"data-value2":h})},e.prototype.validateTreeNode=function(e){e.node.classList.contains(n._76)&&(e.cancel=!0)},e.prototype.updateCheckedState=function(){var e=this.dialogPopUp.element,t=[].slice.call(this.memberTreeView.element.querySelectorAll("li")),a=e.getAttribute("data-fieldname"),o=this.getUnCheckedNodes(a),s=this.getCheckedNodes(a),l=this.allMemberSelect.element.querySelector("li").querySelector("span."+n._104);t.length>0?s>0?(o>0?(i.i(r.removeClass)([l],n._105),i.i(r.addClass)([l],n._106)):0===o&&(i.i(r.removeClass)([l],n._106),i.i(r.addClass)([l],n._105)),this.dialogPopUp.buttons[0].buttonModel.disabled=!1,e.querySelector("."+n.d).removeAttribute("disabled")):o>0&&0===s&&(i.i(r.removeClass)([l],[n._105,n._106]),this.getCheckedNodes(a)===s&&(this.dialogPopUp.buttons[0].buttonModel.disabled=!0,e.querySelector("."+n.d).setAttribute("disabled","disabled"))):(this.dialogPopUp.buttons[0].buttonModel.disabled=!0,e.querySelector("."+n.d).setAttribute("disabled","disabled"))},e.prototype.getCheckedNodes=function(e){var t=this.parent.engineModule,i=[],r=[];if("olap"===this.parent.dataType&&t&&!t.fieldList[e].isHierarchy)return i=this.memberTreeView.getAllCheckedNodes(),i.length;for(var n=0,a=this.parent.searchTreeItems;n<a.length;n++){var o=a[n];o.isSelected&&r.push(o)}return r.length},e.prototype.getUnCheckedNodes=function(e){var t=[],i=[],r=this.parent.engineModule;if("olap"===this.parent.dataType&&r&&!r.fieldList[e].isHierarchy)return i=this.memberTreeView.getAllCheckedNodes(),this.memberTreeView.fields.dataSource.length-i.length;for(var n=0,a=this.parent.searchTreeItems;n<a.length;n++){var o=a[n];o.isSelected||t.push(o)}return t.length},e.prototype.isExcelFilter=function(e){for(var t=!1,i=0,r=this.parent.dataSourceSettings.filters;i<r.length;i++){if(r[i].name===e){t=!0;break}}return!(t||!this.parent.dataSourceSettings.allowLabelFilter&&!this.parent.dataSourceSettings.allowValueFilter)},e.prototype.getFilterObject=function(e){var t=h.a.getFilterItemByName(e,h.a.cloneFilterSettings(this.parent.dataSourceSettings.filterSettings));if(t&&(["Label","Date","Number"].indexOf(t.type)>=0&&this.parent.dataSourceSettings.allowLabelFilter||"Value"===t.type&&this.parent.dataSourceSettings.allowValueFilter||["Include","Exclude"].indexOf(t.type)>=0&&this.parent.eventBase.isValidFilterItemsAvail(e,t)))return t},e.prototype.wireEvent=function(e,t){r.EventHandler.add(e,"click",this.applySorting.bind(this,t),this)},e.prototype.unWireEvent=function(e){r.EventHandler.remove(e,"click",this.applySorting)},e.prototype.closeFilterDialog=function(){this.allowExcelLikeFilter&&this.tabObj&&!this.tabObj.isDestroyed&&this.tabObj.destroy(),this.dropMenu&&!this.dropMenu.isDestroyed&&this.dropMenu.destroy(),this.memberTreeView&&!this.memberTreeView.isDestroyed&&this.memberTreeView.destroy(),this.allMemberSelect&&!this.allMemberSelect.isDestroyed&&this.allMemberSelect.destroy(),this.editorSearch&&!this.editorSearch.isDestroyed&&this.editorSearch.destroy(),document.getElementById(this.parent.parentID+"_LevelDiv-popup")&&i.i(r.remove)(document.getElementById(this.parent.parentID+"_LevelDiv-popup")),this.dialogPopUp.close()},e.prototype.removeFilterDialog=function(){this.dialogPopUp&&!this.dialogPopUp.isDestroyed&&(this.dialogPopUp.destroy(),setTimeout(this.setFocus.bind(this))),document.getElementById(this.parent.parentID+"_EditorTreeView")&&i.i(r.remove)(document.getElementById(this.parent.parentID+"_EditorTreeView"))},e.prototype.setFocus=function(){if(this.parent.control.pivotButtonModule.parentElement)for(var e=[].slice.call(this.parent.control.pivotButtonModule.parentElement.querySelectorAll(".e-pivot-button")),t=0,i=e;t<i.length;t++){var r=i[t];if(r.getAttribute("data-uid")===this.parent.control.pivotButtonModule.fieldName){r.focus();break}}},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var r=i(0),n=(i.n(r),i(2)),a=function(){function e(e){this.parent=e}return e.prototype.render=function(){if(!this.parent.isAdaptive){var e=i.i(r.createElement)("div",{className:n._217+" "+("olap"===this.parent.dataType?n._218:"")});this.leftAxisPanel=i.i(r.createElement)("div",{className:n._173}),this.rightAxisPanel=i.i(r.createElement)("div",{className:n._174}),this.parent.dialogRenderer.parentElement.appendChild(e),e.appendChild(this.leftAxisPanel),e.appendChild(this.rightAxisPanel),this.axisTable=e,this.renderAxisTable()}this.parent.axisFieldModule.render()},e.prototype.renderAxisTable=function(){for(var e=["filters","rows","columns","values"],t=0,a=e.length;t<a;t++){var o=i.i(r.createElement)("div",{className:n._200+"-"+e[t]}),s=i.i(r.createElement)("div",{className:n._176+"-container"}),l=i.i(r.createElement)("div",{className:n._219,attrs:{title:this.parent.localeObj.getConstant(e[t])}});l.innerText=this.parent.localeObj.getConstant(e[t]),s.appendChild(this.getIconupdate(e[t])),s.appendChild(l);var d=i.i(r.createElement)("div",{className:n._202+" e-"+e[t]}),p=void 0;p="rows"===e[t]?this.parent.localeObj.getConstant("dropRowPrompt"):"columns"===e[t]?this.parent.localeObj.getConstant("dropColPrompt"):"values"===e[t]?this.parent.localeObj.getConstant("dropValPrompt"):this.parent.localeObj.getConstant("dropFilterPrompt");var u=i.i(r.createElement)("span",{className:n._201});u.innerText=p;new r.Droppable(d,{});o.appendChild(s),o.appendChild(d),o.appendChild(u),t<=1?this.leftAxisPanel.appendChild(o):this.rightAxisPanel.appendChild(o),this.unWireEvent(d),this.wireEvent(d)}},e.prototype.getIconupdate=function(e){var t=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:n._176+"-icon-container"}),a=i.i(r.createElement)("span",{attrs:{tabindex:"-1","aria-disabled":"false"},className:n.a+" "+n._176+"-"+e});return t.appendChild(a),t},e.prototype.wireEvent=function(e){r.EventHandler.add(e,"mouseover",this.updateDropIndicator,this),r.EventHandler.add(e,"mouseleave",this.updateDropIndicator,this)},e.prototype.unWireEvent=function(e){r.EventHandler.remove(e,"mouseover",this.updateDropIndicator),r.EventHandler.remove(e,"mouseleave",this.updateDropIndicator)},e.prototype.updateDropIndicator=function(e){var t=this.parent.dialogRenderer.parentElement;if(this.parent.isDragging&&e.target.classList.contains(n._202)&&"mouseover"===e.type){i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+n._197)),n._198),i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+n._197+"-last")),n._198);var a=[].slice.call(e.target.querySelectorAll("."+n._195));a.length>0&&i.i(r.addClass)([a[a.length-1].querySelector("."+n._197+"-last")],n._198)}else this.parent.isDragging&&(e.target.classList.contains(n._196)||"mouseleave"!==e.type)||(i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+n._197)),n._198),i.i(r.removeClass)([].slice.call(t.querySelectorAll("."+n._197+"-last")),n._198))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return p});var r=i(0),n=(i.n(r),i(2)),a=i(4),o=(i.n(a),i(11)),s=(i.n(o),i(5)),l=(i.n(s),i(1)),d=i(3),p=function(){function e(e){this.parent=e}return e.prototype.render=function(){var e=i.i(r.createElement)("div",{id:this.parent.element.id+"_Container",className:n._238+" "+("olap"===this.parent.dataType?n._239:""),styles:"width:"+this.parent.element.style.width});this.parent.isAdaptive?i.i(r.addClass)([e],n._37):i.i(r.removeClass)([e],n._37),this.parent.enableRtl?i.i(r.addClass)([e],n._36):i.i(r.removeClass)([e],n._36),this.parent.cssClass&&i.i(r.addClass)([e],this.parent.cssClass.split(" ")),this.parent.enableFieldSearching?i.i(r.addClass)([e],n._240):i.i(r.removeClass)([e],n._240),this.parentElement=i.i(r.createElement)("div",{className:n._241}),this.parent.element.appendChild(e),this.parent.isAdaptive&&(e.removeAttribute("style"),this.parentElement=i.i(r.createElement)("div",{className:n._242}),this.renderAdaptiveLayout(e)),"Popup"===this.parent.renderMode?(this.renderFieldListDialog(e),this.unWireDialogEvent(this.parent.element.querySelector("."+n._66)),this.wireDialogEvent(this.parent.element.querySelector("."+n._66))):this.renderStaticLayout(e)},e.prototype.renderStaticLayout=function(e){if(!this.parent.isAdaptive){var t=i.i(r.createElement)("div",{className:n._243}),a=i.i(r.createElement)("div",{className:n._244});a.innerText=this.parent.localeObj.getConstant("staticFieldList"),t.appendChild(a),t.appendChild(this.createCalculatedButton()),i.i(r.addClass)([e],n._245),e.appendChild(t),e.appendChild(this.parentElement),i.i(r.addClass)([e],n._245),this.parent.allowDeferLayoutUpdate&&(e.appendChild(this.createDeferUpdateButtons()),this.renderDeferUpdateButtons())}},e.prototype.renderDeferUpdateButtons=function(){this.parent.allowDeferLayoutUpdate&&(this.deferUpdateCheckBox=new o.CheckBox({label:this.parent.localeObj.getConstant("deferLayoutUpdate"),checked:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,change:this.onCheckChange.bind(this),cssClass:this.parent.cssClass}),this.deferUpdateCheckBox.isStringTemplate=!0,this.deferUpdateCheckBox.appendTo("#"+this.parent.element.id+"DeferUpdateCheckBox"),this.deferUpdateApplyButton=new o.Button({cssClass:n._246+" "+n._247+("Popup"===this.parent.renderMode?" "+n._248:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isPrimary:!0}),this.deferUpdateApplyButton.isStringTemplate=!0,this.deferUpdateApplyButton.appendTo("#"+this.parent.element.id+"_DeferUpdateButton1"),this.deferUpdateApplyButton.element.onclick="Fixed"===this.parent.renderMode?this.applyButtonClick.bind(this):this.onDeferUpdateClick.bind(this)),this.deferUpdateCancelButton=new o.Button({cssClass:n._249+" "+n.e+("Popup"===this.parent.renderMode?" "+n._248:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.allowDeferLayoutUpdate?this.parent.localeObj.getConstant("cancel"):this.parent.localeObj.getConstant("close"),enableRtl:this.parent.enableRtl,isPrimary:!this.parent.allowDeferLayoutUpdate,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),this.deferUpdateCancelButton.isStringTemplate=!0,this.deferUpdateCancelButton.appendTo("#"+this.parent.element.id+"_DeferUpdateButton2"),this.deferUpdateCancelButton.element.onclick=this.onCloseFieldList.bind(this)},e.prototype.createDeferUpdateButtons=function(){var e=i.i(r.createElement)("div",{className:n._250});if(this.parent.allowDeferLayoutUpdate){var t=i.i(r.createElement)("div",{className:n._251,attrs:{title:this.parent.localeObj.getConstant("deferLayoutUpdate")}}),a=i.i(r.createElement)("input",{id:this.parent.element.id+"DeferUpdateCheckBox"});t.appendChild(a),e.appendChild(t)}var o=i.i(r.createElement)("div",{className:n._252});if(this.parent.allowDeferLayoutUpdate){var s=i.i(r.createElement)("button",{id:this.parent.element.id+"_DeferUpdateButton1",attrs:{type:"button",title:this.parent.localeObj.getConstant("apply")}});o.appendChild(s)}var l=i.i(r.createElement)("button",{id:this.parent.element.id+"_DeferUpdateButton2",attrs:{type:"button",title:this.parent.localeObj.getConstant("cancel")}});return o.appendChild(l),e.appendChild(o),e},e.prototype.onCheckChange=function(e){e.checked&&(this.parent.clonedDataSource=i.i(r.extend)({},this.parent.dataSourceSettings,null,!0),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=d.a.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),this.parent.clonedFieldList=d.a.getClonedFieldList(this.parent.pivotFieldList)),this.parent.allowDeferLayoutUpdate=!this.parent.allowDeferLayoutUpdate,"Fixed"===this.parent.renderMode?(this.deferUpdateApplyButton.setProperties({disabled:!this.parent.allowDeferLayoutUpdate}),this.deferUpdateCancelButton.setProperties({disabled:!this.parent.allowDeferLayoutUpdate})):this.parent.allowDeferLayoutUpdate?(this.deferUpdateApplyButton.element.style.display="",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("cancel")}),this.deferUpdateCancelButton.isPrimary=!1):(this.deferUpdateApplyButton.element.style.display="none",this.deferUpdateCancelButton.setProperties({content:this.parent.localeObj.getConstant("close")}),this.deferUpdateCancelButton.isPrimary=!0),this.onCloseFieldList(null,!0)},e.prototype.applyButtonClick=function(){"pivotfieldlist"===this.parent.getModuleName()&&this.parent.allowDeferLayoutUpdate&&(this.parent.pivotChange=!1),this.parent.isDeferUpdateApplied=!0,this.parent.updateDataSource(!1);var e=this.parent;e.axisFieldModule.render(),e.clonedDataSource=i.i(r.extend)({},e.dataSourceSettings,null,!0),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=d.a.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),e.clonedFieldList=d.a.getClonedFieldList(e.pivotFieldList)},e.prototype.onCloseFieldList=function(e,t){if((this.parent.allowDeferLayoutUpdate||t)&&(!this.parent.isPopupView||this.parent.pivotGridModule&&""!==this.parent.pivotGridModule.actionObj.actionName||""!==this.parent.actionObj.actionName)){if(this.parent.setProperties({dataSourceSettings:this.parent.clonedDataSource.properties},!0),"olap"===this.parent.dataType)if(this.parent.olapEngineModule.fieldList=d.a.getClonedFieldList(this.parent.clonedFieldList),this.parent.olapEngineModule.fieldListData=d.a.cloneOlapFieldSettings(this.parent.clonedFieldListData),this.parent.isPopupView)this.parent.isPopupView&&this.parent.clonedFieldListData&&Object.keys(this.parent.clonedFieldListData).length>0&&(this.parent.olapEngineModule.fieldListData=this.parent.clonedFieldListData);else for(var i=0,r=Object.keys(this.parent.clonedFieldList);i<r.length;i++){var n=r[i],a=this.parent.clonedFieldList[n];this.parent.olapEngineModule.updateFieldlistData(a.id,a.isSelected)}else this.parent.engineModule.fieldList=d.a.getClonedFieldList(this.parent.clonedFieldList);this.parent.updateDataSource(!1,!0)}if(!this.parent.allowDeferLayoutUpdate&&t&&(this.parent.pivotChange=!1),this.parent.allowDeferLayoutUpdate&&this.parent.isPopupView&&this.parent.pivotGridModule&&!this.parent.isAdaptive&&(this.parent.pivotGridModule.actionObj.actionName="",this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule,this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.clonedDataSource.properties},!0)),this.parent.allowDeferLayoutUpdate&&this.parent.allowCalculatedField&&"pivot"===this.parent.dataType&&!this.parent.isAdaptive){this.parent.engineModule.fieldList=this.parent.pivotFieldList=d.a.getClonedFieldList(this.parent.clonedFieldList);var o=Object.keys(this.parent.engineModule.fieldList);if(this.parent.allowCalculatedField&&o.length!==this.parent.engineModule.fields.length){var s=[];this.parent.engineModule.fields.forEach(function(e){-1!==o.indexOf(e)&&(s[s.length]=e)}),this.parent.engineModule.fields=s}}"Popup"!==this.parent.renderMode||t?this.parent.actionObj.actionName=l._127:(this.parent.dialogRenderer.fieldListDialog.hide(),this.parent.actionObj.actionName=l._87),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()},e.prototype.renderFieldListDialog=function(e){var t=i.i(r.createElement)("div",{className:n._66+" "+n.a+" "+n._253,attrs:{tabindex:"0",title:this.parent.localeObj.getConstant("fieldList"),"aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("fieldList"),role:"button"}});if(this.parent.element.appendChild(t),this.parent.isAdaptive){var o="<div class="+n._254+'><span class="'+n.a+" "+n._255+'"></span><div class='+n._256+">"+this.parent.localeObj.getConstant("fieldList")+"</div></div>",s=[{click:this.showFieldListDialog.bind(this),buttonModel:{cssClass:n._257+" "+n._258+" "+n._259+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:n.a+" "+n._110,isPrimary:!0}},{click:this.showCalculatedField.bind(this),buttonModel:{cssClass:n._260+" "+n._258+" "+n._259+" "+n._76+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:n.a+" "+n._110,enableRtl:this.parent.enableRtl,isPrimary:!0}}];this.fieldListDialog=new a.Dialog({animationSettings:{effect:this.parent.enableRtl?"SlideRight":"SlideLeft"},header:o,content:this.parentElement,isModal:!0,showCloseIcon:!1,visible:!1,allowDragging:!1,closeOnEscape:!1,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"100%",height:"100%",position:{X:"center",Y:"center"},buttons:s,target:document.body,cssClass:this.parent.cssClass,close:this.removeFieldListIcon.bind(this),open:this.dialogOpen.bind(this)}),this.fieldListDialog.isStringTemplate=!0,this.fieldListDialog.appendTo(e),i.i(r.setStyleAttribute)(i.i(r.select)("#"+e.id+"_dialog-content",e),{padding:"0"});var l=e.querySelector("."+n._261);i.i(r.addClass)([l],n._262),i.i(r.removeClass)([l.querySelector("."+n._260)],n._248),i.i(r.removeClass)([l.querySelector("."+n._257)],n._248),this.fieldListDialog.element.querySelector("."+n._255).onclick=this.parent.allowDeferLayoutUpdate?this.onDeferUpdateClick.bind(this):this.onCloseFieldList.bind(this)}else{var d=this.createDeferUpdateButtons().outerHTML,o="<div class="+n._263+"><div class="+n._264+">"+this.parent.localeObj.getConstant("fieldList")+"</div></div>";this.fieldListDialog=new a.Dialog({animationSettings:{effect:"Zoom"},header:o,content:this.parentElement,isModal:!1,showCloseIcon:!1,visible:!1,allowDragging:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:this.parent.element.style.width,position:{X:"center",Y:this.parent.element.offsetTop},footerTemplate:d,closeOnEscape:!1,cssClass:this.parent.cssClass,target:i.i(r.isNullOrUndefined)(this.parent.target)?document.body:"string"==typeof this.parent.target?document.querySelector(this.parent.target):this.parent.target,close:this.removeFieldListIcon.bind(this)}),this.fieldListDialog.isStringTemplate=!0,this.fieldListDialog.appendTo(e),this.renderDeferUpdateButtons(),i.i(r.setStyleAttribute)(i.i(r.select)("#"+e.id+"_title",e),{width:"100%"}),e.querySelector("."+n._263).appendChild(this.createCalculatedButton())}},e.prototype.dialogOpen=function(){4===this.lastTabIndex?(this.adaptiveElement.items[this.lastTabIndex].content="",this.adaptiveElement.dataBind(),this.parent.notify(l._28,{})):this.adaptiveElement.refresh()},e.prototype.updateDataSource=function(e){for(var t=["filters","columns","rows","values"],i=0,r=e;i<r.length;i++){var n=r[i],a=n,o=t[this.adaptiveElement.selectedItem];this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.dataSourceUpdate.updateDataSource(a,o,-1)}this.parent.axisFieldModule.render(),this.parent.allowDeferLayoutUpdate?this.parent.triggerPopulateEvent():this.parent.updateDataSource(!0)},e.prototype.onDeferUpdateClick=function(){this.parent.updateDataSource(),this.parent.dialogRenderer.fieldListDialog.hide()},e.prototype.renderAdaptiveLayout=function(e){var t=i.i(r.createElement)("div",{className:n._262});e.appendChild(this.parentElement);var a=[{header:{text:this.parent.localeObj.getConstant("filters")},content:this.createAxisTable("filters")},{header:{text:this.parent.localeObj.getConstant("columns")},content:this.createAxisTable("columns")},{header:{text:this.parent.localeObj.getConstant("rows")},content:this.createAxisTable("rows")},{header:{text:this.parent.localeObj.getConstant("values")},content:this.createAxisTable("values")},{header:{text:this.parent.localeObj.getConstant("createCalculatedField")},content:"Calculated Field Related UI"}];this.parent.allowCalculatedField||a.pop(),this.adaptiveElement=new s.Tab({heightAdjustMode:"Auto",items:a,height:"100%",enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,selected:this.tabSelect.bind(this),cssClass:this.parent.cssClass}),"Fixed"===this.parent.renderMode?(t.appendChild(this.createAddButton()),i.i(r.addClass)([e],n._245),this.adaptiveElement.isStringTemplate=!0,this.adaptiveElement.appendTo(this.parentElement),this.parentElement.appendChild(t)):(this.adaptiveElement.isStringTemplate=!0,this.adaptiveElement.appendTo(this.parentElement))},e.prototype.tabSelect=function(e){var t=i.i(r.closest)(this.parentElement,"."+n._238);this.lastTabIndex=e.selectedIndex,t&&t.querySelector("."+n._257)&&(4!==e.selectedIndex?(i.i(r.addClass)([t.querySelector("."+n._260)],n._76),i.i(r.removeClass)([t.querySelector("."+n._257)],n._76)):(i.i(r.removeClass)([t.querySelector("."+n._260)],n._76),i.i(r.addClass)([t.querySelector("."+n._257)],n._76))),4===e.selectedIndex?(this.adaptiveElement.items[4].content="",this.adaptiveElement.dataBind(),this.parent.notify(l._28,{})):this.parent.axisFieldModule.render()},e.prototype.createCalculatedButton=function(){var e=i.i(r.createElement)("button",{id:this.parent.element.id+"_CalculatedField",attrs:{type:"button",tabindex:"0","aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("CalculatedField")}}),t=new o.Button({cssClass:n._265+" "+n._76+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("CalculatedField"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});return t.isStringTemplate=!0,t.appendTo(e),this.parent.calculatedFieldModule&&i.i(r.removeClass)([e],n._76),t.element.onclick=this.showCalculatedField.bind(this),e},e.prototype.createAddButton=function(){var e=i.i(r.createElement)("div",{className:n._262+"-content"}),t=i.i(r.createElement)("div",{}),a=i.i(r.createElement)("div",{}),s=new o.Button({cssClass:n._260+" "+n._258+" "+n._259+" "+n._76+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:n.a+" "+n._110,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),l=new o.Button({cssClass:n._257+" "+n._258+" "+n._259+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:n.a+" "+n._110,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});return l.isStringTemplate=!0,l.appendTo(t),s.isStringTemplate=!0,s.appendTo(a),e.appendChild(t),e.appendChild(a),s.element.onclick=this.showCalculatedField.bind(this),l.element.onclick=this.showFieldListDialog.bind(this),e},e.prototype.createAxisTable=function(e){var t=i.i(r.createElement)("div",{className:n._200+"-"+e}),a=i.i(r.createElement)("div",{className:n._202+" e-"+e}),o=i.i(r.createElement)("span",{className:n._201});return o.innerText=this.parent.localeObj.getConstant("addPrompt"),t.appendChild(a),t.appendChild(o),t},e.prototype.showCalculatedField=function(e){try{if(!this.parent.isAdaptive){if(this.parent.actionObj.actionName=l._73,this.parent.actionBeginMethod())return;this.parent.dialogRenderer.fieldListDialog&&(this.parent.dialogRenderer.fieldListDialog.hide(),i.i(r.addClass)([this.parent.element.querySelector("."+n._66)],n._69))}this.parent.notify(l._28,{})}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.showFieldListDialog=function(e){var t=this.adaptiveElement.selectedItem;this.parent.treeViewModule.render(t)},e.prototype.onShowFieldList=function(){if(this.parent.actionObj.actionName=l._46,!this.parent.actionBeginMethod()){this.parent.actionObj.actionName="";try{this.parent.allowDeferLayoutUpdate&&(this.parent.isAdaptive&&this.parent.axisFieldModule.render(),this.parent.clonedDataSource=i.i(r.extend)({},this.parent.dataSourceSettings,null,!0),"olap"===this.parent.dataType&&(this.parent.clonedFieldListData=d.a.cloneOlapFieldSettings(this.parent.olapEngineModule.fieldListData)),this.parent.clonedFieldList=d.a.getClonedFieldList(this.parent.pivotFieldList)),i.i(r.addClass)([this.parent.element.querySelector("."+n._66)],n._69),this.parent.dialogRenderer.fieldListDialog.show(),this.parent.dialogRenderer.fieldListDialog.element.style.top=parseInt(this.parent.dialogRenderer.fieldListDialog.element.style.top,10)<0?"0px":this.parent.dialogRenderer.fieldListDialog.element.style.top}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.removeFieldListIcon=function(){this.parent.isAdaptive&&this.parent.allowCalculatedField&&this.parent.calculatedFieldModule&&this.adaptiveElement&&4===this.adaptiveElement.selectedItem&&(i.i(r.select)("#"+this.parent.element.id+"droppable",this.adaptiveElement.element)?this.parent.calculatedFieldModule.updateAdaptiveCalculatedField(!1):this.parent.notify(l._28,{edit:!1})),document.getElementById(this.parent.element.id+"calculateddialog")||i.i(r.removeClass)([this.parent.element.querySelector("."+n._66)],n._69)},e.prototype.keyPress=function(e){if(13===e.keyCode&&e.target)return e.target.click(),void e.preventDefault()},e.prototype.wireDialogEvent=function(e){r.EventHandler.add(e,"keydown",this.keyPress,this),r.EventHandler.add(e,"click",this.onShowFieldList,this)},e.prototype.unWireDialogEvent=function(e){r.EventHandler.remove(e,"keydown",this.keyPress),r.EventHandler.remove(e,"click",this.onShowFieldList)},e.prototype.destroy=function(){"Popup"===this.parent.renderMode&&this.unWireDialogEvent(this.parent.element.querySelector("."+n._66)),this.deferUpdateCheckBox&&!this.deferUpdateCheckBox.isDestroyed&&(this.deferUpdateCheckBox.destroy(),this.deferUpdateCheckBox=null),this.deferUpdateApplyButton&&!this.deferUpdateApplyButton.isDestroyed&&(this.deferUpdateApplyButton.destroy(),this.deferUpdateApplyButton=null),this.deferUpdateCancelButton&&!this.deferUpdateCancelButton.isDestroyed&&(this.deferUpdateCancelButton.destroy(),this.deferUpdateCancelButton=null),"Popup"===this.parent.renderMode&&(this.fieldListDialog&&!this.fieldListDialog.isDestroyed&&(this.fieldListDialog.destroy(),this.fieldListDialog=null),document.getElementById(this.parent.element.id+"_Container")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_Container")))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return p});var r=i(0),n=(i.n(r),i(2)),a=i(1),o=i(5),s=(i.n(o),i(4)),l=(i.n(s),i(10)),d=(i.n(l),i(3)),p=function(){function e(e){this.selectedNodes=[],this.isSearching=!1,this.parentIDs=[],this.parent=e,this.addEventListener()}return e.prototype.render=function(e){if(this.parentElement=this.parent.dialogRenderer.parentElement,this.fieldListSort=this.parent.pivotGridModule?this.parent.pivotGridModule.defaultFieldListOrder:this.parent.defaultFieldListOrder,this.fieldListSort="Ascending"===this.fieldListSort?"Ascend":"Descending"===this.fieldListSort?"Descend":"None",this.parent.isAdaptive)this.renderTreeDialog(e);else{var t=i.i(r.createElement)("div",{className:n._220+" "+("olap"===this.parent.dataType?n._221:"")}),a=i.i(r.createElement)("div",{className:n._222});a.innerText=this.parent.localeObj.getConstant("allFields");var o=i.i(r.createElement)("div",{id:this.parent.element.id+"_SearchDiv",attrs:{tabindex:"-1"},className:n._223}),s=i.i(r.createElement)("input",{attrs:{type:"text"}});o.appendChild(s),this.fieldSearch=new l.TextBox({placeholder:this.parent.localeObj.getConstant("search"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:n._224+(this.parent.cssClass?" "+this.parent.cssClass:""),input:this.textChange.bind(this),showClearButton:!0}),this.fieldSearch.isStringTemplate=!0,this.fieldSearch.appendTo(s),this.fieldSearch.addIcon("append",n._225+" "+n.a);var d=i.i(r.createElement)("div",{className:n._85+" "+n._76});d.innerText=this.parent.localeObj.getConstant("noMatches");var p=i.i(r.createElement)("div",{className:n._226+" "+n._227});this.treeViewElement=i.i(r.createElement)("div",{id:this.parent.element.id+"_TreeView",className:n._200+" "+("olap"===this.parent.dataType?n._228:"")});var u=i.i(r.createElement)("div",{className:n._229});if(u.appendChild(a),t.appendChild(u),this.updateSortElements(u),this.parent.enableFieldSearching&&(t.appendChild(o),t.appendChild(d)),p.appendChild(this.treeViewElement),t.appendChild(p),this.parentElement.appendChild(t),"Fixed"===this.parent.renderMode){var h=i.i(r.createElement)("div",{className:n._230}),c=i.i(r.createElement)("div",{className:n._231});c.innerText=this.parent.localeObj.getConstant("centerHeader"),this.parentElement.appendChild(h),this.parentElement.appendChild(c)}this.renderTreeView()}},e.prototype.updateSortElements=function(e){for(var t={None:"sortNone",Ascend:"sortAscending",Descend:"sortDescending"},a=Object.keys(t),o=0,s=a;o<s.length;o++){var l=s[o],d=i.i(r.createElement)("span",{attrs:{tabindex:"0","aria-disabled":"false","aria-label":"Sort "+l,"data-sort":l,title:this.parent.localeObj.getConstant(t[l]),role:"button"},className:n.a+" e-sort-"+l.toLowerCase()+" "+(this.fieldListSort===l?"e-selected":"")});e.appendChild(d),this.unWireFieldListEvent(d),this.wireFieldListEvent(d)}},e.prototype.renderTreeView=function(){this.fieldTable=new o.TreeView({fields:{dataSource:this.getTreeData(),id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},nodeChecked:this.nodeStateChange.bind(this),cssClass:n._232+(this.parent.cssClass?" "+this.parent.cssClass:""),showCheckBox:!0,allowDragAndDrop:!0,sortOrder:"None",autoCheck:!1,loadOnDemand:"olap"!==this.parent.dataType,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeDragStart:this.dragStart.bind(this),nodeDragStop:this.dragStop.bind(this),drawNode:this.updateTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0}}),this.treeViewElement.innerHTML="",this.fieldTable.isStringTemplate=!0,this.fieldTable.appendTo(this.treeViewElement);var e="Fixed"===this.parent.renderMode?this.parent.element:this.parentElement;i.i(r.isNullOrUndefined)(e.querySelector("."+n._200))||(e.querySelector("."+n._200).ej2_instances[0].dragObj.enableAutoScroll=!1)},e.prototype.updateNodeIcon=function(e){if("olap"===this.parent.dataType)if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(r.removeClass)([t],"e-folderCDB-icon"),i.i(r.addClass)([t],"e-folderCDB-open-icon")}else if(e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-list-icon").className.indexOf("e-folderCDB-open-icon")>-1){var t=e.node.querySelector(".e-list-icon");i.i(r.removeClass)([t],"e-folderCDB-open-icon"),i.i(r.addClass)([t],"e-folderCDB-icon")}},e.prototype.updateTreeNode=function(e){var t=!1;"olap"===this.parent.dataType?t=this.updateOlapTreeNode(e):e.nodeData.hasChildren?(t=!1,e.node.querySelector(".e-checkbox-wrapper").style.display="none",i.i(r.addClass)([e.node],n._233)):t=!0,i.i(r.isNullOrUndefined)(e.nodeData.pid)||i.i(r.addClass)([e.node],n._234);var a=e.node.querySelector("."+n._169);if(e.node.querySelector(".e-list-icon")&&a){var o=e.node.querySelector(".e-list-icon");a.insertBefore(o,e.node.querySelector(".e-list-text"))}if(t&&!this.parent.isAdaptive){var s=d.a.getFieldInfo(e.nodeData.id,this.parent);t=!1;var l=i.i(r.createElement)("span",{attrs:{tabindex:"-1",title:s.fieldItem?s.fieldItem.allowDragAndDrop?this.parent.localeObj.getConstant("drag"):"":this.parent.localeObj.getConstant("drag"),"aria-disabled":"false"},className:n.a+" "+n._167+" "+(s.fieldItem?s.fieldItem.allowDragAndDrop?"":n._209:"")});e.node.querySelector(".e-checkbox-wrapper")&&!e.node.querySelector(".cls.DRAG_CLASS")&&a&&a.insertBefore(l,e.node.querySelector(".e-checkbox-wrapper"))}if(e.node.querySelector("."+n._105)&&i.i(r.addClass)([e.node.querySelector("."+n._137)],n._235),this.parent.enableFieldSearching&&this.isSearching){var p=e.node;if("olap"===this.parent.dataType)for(var u=p.getAttribute("data-uid"),h=this.parent.pivotCommon.eventBase.searchListItem,c=0;c<this.parentIDs.length;c++){u===this.parentIDs[c]&&i.i(r.addClass)([p],n._76);for(var g=0,m=h;g<m.length;g++){var f=m[g],v=this.parent.pivotCommon.eventBase.getParentIDs(this.fieldTable,f.getAttribute("data-uid"),[]);if(d.a.inArray(u,v)>-1){i.i(r.removeClass)([p],n._76);break}}}else for(var c=0;c<this.nonSearchList.length;c++){if(p.textContent===this.nonSearchList[c].textContent){i.i(r.addClass)([p],n._76);break}if(p.innerText===this.nonSearchList[c].textContent){i.i(r.addClass)([p],n._76);break}}}},e.prototype.updateOlapTreeNode=function(e){var t=!1;return"olap"===this.parent.dataType?(e.node&&e.node.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon,.e-folderCDB-open-icon,.e-dimensionCDB-icon,.e-kpiCDB-icon")&&(e.node.querySelector(".e-checkbox-wrapper").style.display="none"),e.node&&e.node.querySelector(".e-list-icon")&&e.node.querySelector(".e-list-icon").className.indexOf("e-level-members")>-1&&(this.parent.isAdaptive?e.node.querySelector(".e-checkbox-wrapper").style.display="none":e.node.querySelector(".e-checkbox-wrapper").style.visibility="hidden"),e.node&&(e.node.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||e.node.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||e.node.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))&&(e.node.querySelector(".e-measure-icon")?(e.node.querySelector(".e-list-icon").style.display="none",t=!0):t=!0)):t=!0,t},e.prototype.renderTreeDialog=function(e){var t=i.i(r.createElement)("div",{id:this.parent.element.id+"_FieldListTreeView",className:n._236+" "+("olap"===this.parent.dataType?"e-olap-editor-dialog":"")});this.parentElement.appendChild(t),this.fieldDialog=new s.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:this.parent.localeObj.getConstant("adaptiveFieldHeader"),content:this.createTreeView(this.getTreeData(e)),isModal:!0,visible:!0,showCloseIcon:!1,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,locale:this.parent.locale,width:"320px",height:"350px",position:{X:"center",Y:"center"},buttons:[{click:this.closeTreeDialog.bind(this),buttonModel:{cssClass:n.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}},{click:this.onFieldAdd.bind(this),buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("add"),isPrimary:!0}}],closeOnEscape:!1,cssClass:this.parent.cssClass,target:this.parentElement.parentElement,close:this.dialogClose.bind(this)}),this.fieldDialog.isStringTemplate=!0,this.fieldDialog.appendTo(t)},e.prototype.dialogClose=function(){document.getElementById(this.parent.element.id+"_FieldListTreeView")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_FieldListTreeView"))},e.prototype.createTreeView=function(e){var t=i.i(r.createElement)("div",{id:this.parent.element.id+"EditorDiv",className:n._77}),a=i.i(r.createElement)("div",{id:this.parent.element.id+"_SearchDiv",attrs:{tabindex:"-1"},className:n._78}),s=i.i(r.createElement)("input",{attrs:{type:"text"}});a.appendChild(s);var d=i.i(r.createElement)("div",{className:n._226}),p=i.i(r.createElement)("div",{className:n._84+" "+("olap"===this.parent.dataType?"e-olap-field-list-tree":"")});t.appendChild(a),this.editorSearch=new l.MaskedTextBox({showClearButton:!0,placeholder:this.parent.localeObj.getConstant("search"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:n._86+(this.parent.cssClass?" "+this.parent.cssClass:""),change:this.textChange.bind(this)}),this.editorSearch.isStringTemplate=!0,this.editorSearch.appendTo(s);var u=i.i(r.createElement)("div",{className:n._85+" "+n._76});return u.innerText=this.parent.localeObj.getConstant("noMatches"),t.appendChild(u),d.appendChild(p),t.appendChild(d),this.fieldTable=new o.TreeView({fields:{dataSource:e,id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},showCheckBox:!0,autoCheck:!1,loadOnDemand:"olap"!==this.parent.dataType,sortOrder:"olap"===this.parent.dataType?"None":"Ascending",enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,nodeChecked:this.addNode.bind(this),drawNode:this.updateTreeNode.bind(this),nodeExpanding:this.updateNodeIcon.bind(this),nodeCollapsed:this.updateNodeIcon.bind(this),nodeSelected:function(e){i.i(r.removeClass)([e.node],"e-active"),e.cancel=!0}}),this.fieldTable.isStringTemplate=!0,this.fieldTable.appendTo(p),t},e.prototype.textChange=function(e){this.parent.pivotCommon.eventBase.searchTreeNodes(e,this.fieldTable,!0);var t,a;this.parent.isAdaptive?t=this.fieldDialog.element.querySelector("."+n._85):(t=this.parentElement.querySelector("."+n._85),a=this.parentElement.querySelector("."+n._227));var o=[].slice.call(this.fieldTable.element.querySelectorAll("li")),s=[].slice.call(this.fieldTable.element.querySelectorAll("li."+n._76));if(o.length===s.length?(i.i(r.removeClass)([t],n._76),this.parent.isAdaptive||(i.i(r.addClass)([a],n._76),i.i(r.removeClass)([a],n._237))):(i.i(r.addClass)([t],n._76),this.parent.isAdaptive||(i.i(r.removeClass)([a],n._76),i.i(r.addClass)([a],n._237))),this.isSearching=s.length>0,this.nonSearchList=s,"olap"===this.parent.dataType){this.parentIDs=[];for(var l=0;l<o.length;l++)if(o[l].classList.contains("e-level-1")){var d=o[l].getAttribute("data-uid");this.parentIDs.push(d)}}},e.prototype.dragStart=function(e){var t=this;if(e.event.target.classList.contains(n._167)&&!e.event.target.classList.contains(n._209)){var o=d.a.getFieldInfo(e.draggedNode.getAttribute("data-uid"),this.parent),s={fieldName:o.fieldName,fieldItem:o.fieldItem,axis:o.axis,dataSourceSettings:this.parent.dataSourceSettings,cancel:!1};(this.parent.isPopupView?this.parent.pivotGridModule:this.parent).trigger(a._11,s,function(a){if(a.cancel)t.parent.isDragging=!1,e.cancel=!0;else{t.parent.isDragging=!0,i.i(r.addClass)([e.draggedNode.querySelector("."+n._137)],n._139);var o=void 0;o="olap"===t.parent.dataType?t.parent.olapEngineModule.fieldList[e.draggedNode.getAttribute("data-uid")]:t.parent.engineModule.fieldList[e.draggedNode.getAttribute("data-uid")];var s=[n._180,n._182,n._186];if(o&&"CalculatedField"===o.aggregateType)for(var l=0,d=s;l<d.length;l++){var p=d[l];i.i(r.addClass)([t.parentElement.querySelector("."+p)],n._166)}var u=e.clonedNode;u&&"Popup"===("pivotfieldlist"===t.parent.getModuleName()&&t.parent.renderMode)&&(u.style.zIndex=(t.parent.dialogRenderer.fieldListDialog.zIndex+1).toString())}})}else this.parent.isDragging=!1,e.cancel=!0},e.prototype.dragStop=function(e){e.cancel=!0,this.parent.isDragging=!1;for(var t=[n._180,n._182,n._186],a=0,o=t;a<o.length;a++){var s=o[a];i.i(r.removeClass)([this.parentElement.querySelector("."+s)],n._166)}i.i(r.removeClass)([e.draggedNode.querySelector("."+n._137)],n._139),this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close();var l=e.draggedNodeData.id.toString();if(this.isNodeDropped(e,l)){var d=this.parent.pivotFieldList,p=d[l];if(this.parent.pivotCommon.dataSourceUpdate.control="pivotview"===this.parent.getModuleName()?this.parent:this.parent.pivotGridModule?this.parent.pivotGridModule:this.parent,this.parent.pivotCommon.nodeStateModified.onStateModified(e,l)){this.parent.allowDeferLayoutUpdate?(p.isSelected=!0,this.updateDataSource()):this.parent.updateDataSource();this.parent.axisFieldModule.render()}}},e.prototype.isNodeDropped=function(e,t){var a=!0;if("true"===e.draggedNodeData.isChecked){var o=this.getButton(t),s=i.i(r.closest)(o,"."+n._196),l=i.i(r.closest)(e.target,"."+n._196);if(o&&s===l){for(var d=[].slice.call(s.querySelectorAll("."+n._39)),p=i.i(r.closest)(e.target,"."+n._195),u=void 0,h=-1,c=0,g=d.length;c<g;c++)if(d[c].id===o.id&&(u=c),p){var m=p.querySelector("."+n._39);d[c].id===m.id&&(h=c)}if(u===h||u===d.length-1&&-1===h){var f=document.getElementById(this.parent.element.id+"_Container");i.i(r.removeClass)([].slice.call(f.querySelectorAll("."+n._197)),n._198),a=!1}}}return a},e.prototype.getButton=function(e){for(var t,i=document.getElementById(this.parent.element.id+"_Container"),r=[].slice.call(i.querySelectorAll("."+n._39)),a=0,o=r.length;a<o;a++)if(r[a].getAttribute("data-uid")===e){t=r[a];break}return t},e.prototype.nodeStateChange=function(e){var t=this;if(e.isInteracted){var o=i.i(r.closest)(e.node,"."+n._169);if(!i.i(r.isNullOrUndefined)(o)){var s=i.i(r.closest)(o,"li"),l=s.getAttribute("data-uid");this.parent.pivotCommon.filterDialog.dialogPopUp&&this.parent.pivotCommon.filterDialog.dialogPopUp.close();var p=this.parent.pivotFieldList,u=p[l],h=d.a.getFieldInfo(l,this.parent),c=this.parent.isPopupView?this.parent.pivotGridModule:this.parent,g=o.closest("."+n._233);if("check"===e.action){var m={fieldName:l,dropField:h.fieldItem,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:"number"===u.type||"CalculatedField"===u.type&&u.formula&&u.formula.indexOf("Measure")>-1&&"olap"===this.parent.dataType?"values":"rows",dropPosition:h.position,draggedAxis:"fieldlist",cancel:!1};c.trigger(a.e,m,function(a){if(a.cancel)t.updateCheckState(u,e.action);else{i.i(r.addClass)([o.querySelector("."+n._137)],n._235),g&&i.i(r.addClass)([g.querySelector("."+n._137)],n._235),t.updateSelectedNodes(s,e.action);var d=t.parent.pivotCommon.dataSourceUpdate.getNewField(l,h.fieldItem);t.updateReportSettings(d,a),t.updateNodeStateChange(l,e,u)}})}else{var f={cancel:!1,fieldName:l,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:h.fieldItem,axis:h.axis};c.trigger(a._8,f,function(a){a.cancel?t.updateCheckState(u,e.action):(i.i(r.removeClass)([o.querySelector("."+n._137)],n._235),g&&i.i(r.isNullOrUndefined)(g.querySelector("."+n._234+" ."+n._105))&&i.i(r.removeClass)([g.querySelector("."+n._137)],n._235),t.updateSelectedNodes(s,e.action),t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport(l),"pivot"===t.parent.dataType&&t.parent.showValuesButton&&t.parent.dataSourceSettings.values.length>1&&h&&h.position<t.parent.dataSourceSettings.valueIndex&&("row"===t.parent.dataSourceSettings.valueAxis&&"rows"===h.axis||"column"===t.parent.dataSourceSettings.valueAxis&&"columns"===h.axis)&&c.setProperties({dataSourceSettings:{valueIndex:t.parent.dataSourceSettings.valueIndex-1}},!0),"olap"===t.parent.dataType&&0===t.parent.dataSourceSettings.values.length&&t.parent.pivotCommon.dataSourceUpdate.removeFieldFromReport("[Measures]"),t.updateNodeStateChange(l,e,u))})}}}},e.prototype.updateReportSettings=function(e,t){var n=t.dropPosition,a=t.dropAxis;if("pivot"===this.parent.dataType&&this.parent.showValuesButton&&this.parent.dataSourceSettings.values.length>1){var o="row"===this.parent.dataSourceSettings.valueAxis&&"rows"===a?this.parent.dataSourceSettings.rows:"column"===this.parent.dataSourceSettings.valueAxis&&"columns"===a?this.parent.dataSourceSettings.columns:void 0;i.i(r.isNullOrUndefined)(o)||(-1===n&&-1===this.parent.dataSourceSettings.valueIndex?this.parent.setProperties({dataSourceSettings:{valueIndex:o.length}},!0):n>-1&&n<=this.parent.dataSourceSettings.valueIndex?this.parent.setProperties({dataSourceSettings:{valueIndex:this.parent.dataSourceSettings.valueIndex+1}},!0):this.parent.dataSourceSettings.valueIndex>-1&&n>this.parent.dataSourceSettings.valueIndex&&(n-=1))}switch(a){case"filters":-1!==n?this.parent.dataSourceSettings.filters.splice(n,0,e):this.parent.dataSourceSettings.filters.push(e);break;case"rows":-1!==n?this.parent.dataSourceSettings.rows.splice(n,0,e):this.parent.dataSourceSettings.rows.push(e);break;case"columns":-1!==n?this.parent.dataSourceSettings.columns.splice(n,0,e):this.parent.dataSourceSettings.columns.push(e);break;case"values":if(-1!==n?this.parent.dataSourceSettings.values.splice(n,0,e):this.parent.dataSourceSettings.values.push(e),"olap"===this.parent.dataType&&this.parent.olapEngineModule&&!this.parent.olapEngineModule.isMeasureAvail&&!(this.parent.dataSourceSettings.values.length>1)){var s={name:"[Measures]",caption:"Measures",baseField:void 0,baseItem:void 0};("row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.rows:this.parent.dataSourceSettings.columns).push(s)}}},e.prototype.updateCheckState=function(e,t){for(var i=this.fieldTable.element.querySelectorAll(".e-checkbox-wrapper"),r=this.fieldTable.element.querySelectorAll(".e-list-text"),n=0;n<i.length;n++)e.caption===r[n].textContent&&("check"===t?this.fieldTable.uncheckAll([e.id]):this.fieldTable.checkAll([e.id]))},e.prototype.updateNodeStateChange=function(e,t,n){this.parent.allowDeferLayoutUpdate?(n.isSelected="check"===t.action,"olap"===this.parent.dataType&&this.parent.olapEngineModule.updateFieldlistData(e,"check"===t.action),this.updateDataSource()):this.parent.updateDataSource(!0);var a=this.treeViewElement.querySelector('[data-uid="'+e+'"]');a.focus(),i.i(r.removeClass)([a],"e-hover");var o=this.parent;setTimeout(function(){o.axisFieldModule.render()})},e.prototype.updateSelectedNodes=function(e,t){if(e&&e.querySelector("ul"))for(var a=0,o=[].slice.call(e.querySelectorAll("li"));a<o.length;a++){var s=o[a];"check"===t?i.i(r.addClass)([s.querySelector("."+n._137)],n._235):i.i(r.removeClass)([s.querySelector("."+n._137)],n._235)}},e.prototype.updateDataSource=function(){this.parent.isPopupView?("olap"===this.parent.dataType?this.parent.pivotGridModule.olapEngineModule=this.parent.olapEngineModule:this.parent.pivotGridModule.engineModule=this.parent.engineModule,this.parent.pivotGridModule.setProperties({dataSourceSettings:this.parent.dataSourceSettings.properties},!0),this.parent.pivotGridModule.notify(a._19,this)):this.parent.triggerPopulateEvent()},e.prototype.addNode=function(e){var t=this;if(e.isInteracted){var i=this.parent.pivotFieldList,r=i[e.data[0].id.toString()],n=d.a.getFieldInfo(r.id.toString(),this.parent),o=this.parent.isPopupView?this.parent.pivotGridModule:this.parent;if("check"===e.action){var s=["filters","columns","rows","values"],l={fieldName:n.fieldName,dropField:n.fieldItem,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),dropAxis:s[this.parent.dialogRenderer.adaptiveElement.selectedItem],draggedAxis:"fieldlist",cancel:!1};o.trigger(a.e,l,function(i){i.cancel?t.updateCheckState(r,e.action):t.selectedNodes.push(r.id.toString())})}else{var p={cancel:!1,fieldName:n.fieldName,dataSourceSettings:d.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),fieldItem:n.fieldItem,axis:n.axis};o.trigger(a._8,p,function(i){if(i.cancel)t.updateCheckState(r,e.action);else for(var n=t.selectedNodes.length;n--;)if(t.selectedNodes[n]===r.id.toString()){t.selectedNodes.splice(n,1);break}})}}},e.prototype.refreshTreeView=function(){if(this.fieldTable){var e=this.getUpdatedData();this.fieldTable.fields={dataSource:e,id:"id",text:"caption",isChecked:"isSelected",parentID:"pid",iconCss:"spriteCssClass"},this.fieldTable.dataBind()}},e.prototype.getUpdatedData=function(){var e=this.getTreeData(),t=this.fieldTable.expandedNodes;return this.updateExpandedNodes(e,t),this.applySorting(e,this.fieldListSort)},e.prototype.getTreeData=function(e){var t=[];if("olap"===this.parent.dataType)t=this.getOlapTreeData(e);else{for(var n=this.parent.pivotFieldList?Object.keys(this.parent.pivotFieldList):[],a={},o=0,s=n;o<s.length;o++){var l=s[o],d=this.parent.pivotFieldList[l];if(a[l]={id:d.id,pid:d.pid,caption:d.caption,isSelected:d.isSelected},!i.i(r.isNullOrUndefined)(d.pid)&&!a[l].hasChildren){var p=d.pid+"_group_name";a[l].pid=p,a[p]={id:p,caption:d.pid,isSelected:a[p]&&a[p].isSelected?a[p].isSelected:d.isSelected,hasChildren:!0}}}if(this.parent.isAdaptive){for(var u=[this.parent.dataSourceSettings.filters,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.values],h=u[e],c=n.length;c--;)a[n[c]].isSelected=!1;for(var g=0,m=h;g<m.length;g++){a[m[g].name].isSelected=!0}}for(var f=Object.keys(a),v=0,S=f;v<S.length;v++){var d=S[v],y=a[d];t.push(y)}}return t},e.prototype.getOlapTreeData=function(e){var t=[],n=this.parent.olapEngineModule.fieldListData?this.parent.olapEngineModule.fieldListData:[];if(this.parent.isAdaptive)for(var a=[this.parent.dataSourceSettings.filters,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.values],o=a[e],s=0;s<n.length;){var l=n[s],p=void 0;if(3===e){if("[measures]"!==l.id.toLowerCase()&&(0===l.id.toLowerCase().indexOf("[measures]")||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-measureCDB"))||"[calculated members].[_0]"===l.id.toLowerCase()||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-calc-measure-icon")){p={id:l.id,caption:l.caption,hasChildren:l.hasChildren,type:l.type,aggregateType:l.aggregateType,isSelected:l.isSelected,pid:l.pid,spriteCssClass:l.spriteCssClass},p.isSelected=!1,p.spriteCssClass&&-1!==p.spriteCssClass.indexOf("e-measureCDB")&&(p.spriteCssClass=p.spriteCssClass.replace("e-folderCDB-icon","e-measureGroupCDB-icon"),p.pid=void 0);for(var u=0,h=o;u<h.length;u++){var c=h[u];if(p.id===c.name){p.isSelected=!0;break}}t.push(p)}}else if(!(0===l.id.toLowerCase().indexOf("[measures]")||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-measureCDB")||l.spriteCssClass&&-1!==l.spriteCssClass.indexOf("e-calc-measure-icon"))){p={id:l.id,caption:l.caption,hasChildren:l.hasChildren,type:l.type,aggregateType:l.aggregateType,isSelected:l.isSelected,pid:l.pid,spriteCssClass:l.spriteCssClass},p.isSelected=!1;for(var g=0,m=o;g<m.length;g++){var f=m[g];if(p.id===f.name){p.isSelected=!0;break}}t.push(p)}s++}else t=i.i(r.isNullOrUndefined)(this.parent.olapEngineModule.fieldListData)?[]:d.a.getClonedData(this.parent.olapEngineModule.fieldListData);return t},e.prototype.updateExpandedNodes=function(e,t){if(t.length>0)for(var i=0,r=0,n=e;r<n.length;r++){var a=n[r];if(t.indexOf(a.id)>-1&&(i++,a.expanded=!0,a.spriteCssClass=a.spriteCssClass&&a.spriteCssClass.toString().indexOf("e-folderCDB-icon")>-1?a.spriteCssClass.toString().replace("e-folderCDB-icon","e-folderCDB-open-icon"):a.spriteCssClass,i===t.length))break}},e.prototype.updateSorting=function(e){var t=e.target,n=t.getAttribute("data-sort");if(this.parent.actionObj.actionName=a._68,!this.parent.actionBeginMethod()){try{if(-1===t.className.indexOf("e-selected")){switch(n){case"None":this.fieldListSort="None",i.i(r.addClass)([t],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-ascend")],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-descend")],"e-selected");break;case"Ascend":this.fieldListSort="Ascend",i.i(r.addClass)([t],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-none")],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-descend")],"e-selected");break;case"Descend":this.fieldListSort="Descend",i.i(r.addClass)([t],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-ascend")],"e-selected"),i.i(r.removeClass)([this.parentElement.querySelector(".e-sort-none")],"e-selected")}this.refreshTreeView()}}catch(e){this.parent.actionFailureMethod(e)}this.parent.actionObj.actionName=this.parent.getActionCompleteName(),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}},e.prototype.applySorting=function(e,t){if(e.length>0)if("olap"===this.parent.dataType){var i=void 0,r=void 0;this.parent.dataSourceSettings.calculatedFieldSettings.length>0&&"[calculated members].[_0]"===e[0].id.toLowerCase()?(r=e[0],i=e[1],e.splice(0,2)):(i=e[0],e.splice(0,1)),e="Ascend"===t?e.sort(function(e,t){return e.caption>t.caption?1:t.caption>e.caption?-1:0}):"Descend"===t?e.sort(function(e,t){return e.caption<t.caption?1:t.caption<e.caption?-1:0}):e,r?e.splice(0,0,r,i):e.splice(0,0,i)}else this.fieldTable.sortOrder="Ascend"===t?"Ascending":"Descend"===t?"Descending":"None";return e},e.prototype.onFieldAdd=function(e){this.parent.dialogRenderer.updateDataSource(this.selectedNodes),this.closeTreeDialog()},e.prototype.closeTreeDialog=function(){this.selectedNodes=[],this.fieldDialog.hide()},e.prototype.keyPress=function(e){if(13===e.keyCode&&e.target)return e.target.click(),void e.preventDefault()},e.prototype.wireFieldListEvent=function(e){r.EventHandler.add(e,"keydown",this.keyPress,this),r.EventHandler.add(e,"click",this.updateSorting,this)},e.prototype.unWireFieldListEvent=function(e){r.EventHandler.remove(e,"keydown",this.keyPress),r.EventHandler.remove(e,"click",this.updateSorting)},e.prototype.addEventListener=function(){this.parent.on(a._26,this.refreshTreeView,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(a._26,this.refreshTreeView)},e.prototype.destroy=function(){this.removeEventListener(),this.fieldTable&&!this.fieldTable.isDestroyed&&(this.fieldTable.destroy(),this.fieldTable=null),this.fieldDialog&&!this.fieldDialog.isDestroyed&&(this.fieldDialog.destroy(),this.fieldDialog=null),this.editorSearch&&!this.editorSearch.isDestroyed&&(this.editorSearch.destroy(),this.editorSearch=null),this.fieldSearch&&!this.fieldSearch.isDestroyed&&(this.fieldSearch.destroy(),this.fieldSearch=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(1),n=i(53),a=i(0),o=(i.n(a),function(){function e(e){this.parent=e,this.drillThroughDialog=new n.a(this.parent),this.addInternalEvents()}return e.prototype.getModuleName=function(){return"drillThrough"},e.prototype.addInternalEvents=function(){this.parent.on(r._23,this.wireEvents,this)},e.prototype.wireEvents=function(){this.unWireEvents(),a.EventHandler.add(this.parent.element,"dblclick",this.mouseClickHandler,this)},e.prototype.unWireEvents=function(){this.parent.isDestroyed||a.EventHandler.remove(this.parent.element,"dblclick",this.mouseClickHandler)},e.prototype.mouseClickHandler=function(e){var t=e.target,i=null;if(t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")?i=t.parentElement:t.classList.contains("e-headercell")||t.classList.contains("e-rowcell")?i=t:t.classList.contains("e-headertext")&&(i=t.parentElement.parentElement),i&&(this.parent.allowDrillThrough&&i.classList.contains("e-valuescontent")||this.parent.editSettings.allowEditing)){var r=Number(i.getAttribute("data-colindex")),n=Number(i.getAttribute("index"));this.executeDrillThrough(this.parent.pivotValues[n][r],n,r,i)}},e.prototype.executeDrillThrough=function(e,t,i,r){this.parent.drillThroughElement=r,this.parent.drillThroughValue=e;var n="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,a="",o="",s=[];if(void 0!==e.rowHeaders&&void 0!==e.columnHeaders){if("olap"===this.parent.dataType){var l=void 0;l="row"===this.parent.dataSourceSettings.valueAxis?n.tupRowInfo[e.rowOrdinal]:n.tupColumnInfo[e.colOrdinal];var d=l?n.getUniqueName(l.measureName):e.actualText;if(n.fieldList[d]&&n.fieldList[d].isCalculatedField)return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("drillError"));a=n.fieldList[d||e.actualText].caption,o=n.fieldList[d||e.actualText].aggregateType,this.parent.olapEngineModule.getDrillThroughData(e,this.parent.maxRowsInDrillThrough);try{s=JSON.parse(n.gridJSON)}catch(e){return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),n.gridJSON)}}else if(a=n.fieldList[e.actualText.toString()]?n.fieldList[e.actualText.toString()].caption:e.actualText.toString(),o=n.fieldList[e.actualText]?n.fieldList[e.actualText].aggregateType:"","Server"===this.parent.dataSourceSettings.mode)this.parent.getEngine("fetchRawData",null,null,null,null,null,null,{rowIndex:t,columnIndex:i});else if(this.parent.allowDataCompression){var p=Object.keys(e.indexObject);this.drillThroughDialog.indexString=[];for(var u=0,h=p;u<h.length;u++)for(var c=h[u],g=0,m=this.parent.engineModule.groupRawIndex[Number(c)];g<m.length;g++){var f=m[g];s.push(this.parent.engineModule.actualData[f]),this.drillThroughDialog.indexString.push(f.toString())}}else for(var p=Object.keys(e.indexObject),v=0,S=p;v<S.length;v++){var y=S[v];s.push(this.parent.engineModule.data[Number(y)])}"Server"!==this.parent.dataSourceSettings.mode&&this.triggerDialog(a,o,s,e,r)}},e.prototype.getCalcualtedFieldValue=function(e,t){for(var r=0;r<e.length;r++){var n={};n[e[r]]=e[r];for(var o=0;o<this.parent.dataSourceSettings.calculatedFieldSettings.length;o++){for(var s=void 0,l=this.parent.engineModule.fields.length-1;l>=0;l--)if(this.parent.engineModule.fields[l]===this.parent.dataSourceSettings.calculatedFieldSettings[o].name){s=l;break}if(!i.i(a.isNullOrUndefined)(t[r])){var d=this.parent.engineModule.getAggregateValue([Number(e[r])],n,s,"calculatedfield",!1);t[r][this.parent.dataSourceSettings.calculatedFieldSettings[o].name]=isNaN(d)&&i.i(a.isNullOrUndefined)(d)?"#DIV/0!":d}}}return t},e.prototype.frameData=function(e){for(var t=0,i=0,r=[];i<e.rawData.length;){for(var n={};t<e.gridColumns.length;)n[e.gridColumns[t].field]="Server"===this.parent.dataSourceSettings.mode?e.rawData[i][-1!==this.parent.engineModule.fields.indexOf(e.gridColumns[t].field)?this.parent.engineModule.fields.indexOf(e.gridColumns[t].field):0]:e.rawData[i][this.parent.engineModule.fieldKeys[e.gridColumns[t].field]],t++;r.push(n),i++,t=0}return e.rawData=r,e},e.prototype.triggerDialog=function(e,t,i,n,o){var s="CalculatedField"===t?e.toString():""!==t?this.parent.localeObj.getConstant(t)+" "+this.parent.localeObj.getConstant("of")+" "+e:e;s=this.parent.enableHtmlSanitizer?a.SanitizeHtmlHelper.sanitize(s):s;var l="row"===this.parent.dataSourceSettings.valueAxis?this.parent.getRowText(Number(o.getAttribute("index")),0):""===n.rowHeaders?"":n.rowHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),d={currentTarget:o,currentCell:n,rawData:i,rowHeaders:l,columnHeaders:""===n.columnHeaders?"":n.columnHeaders.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - "),value:s+"("+n.formattedText+")",gridColumns:this.drillThroughDialog.frameGridColumns(i),cancel:!1};"CSV"===this.parent.dataSourceSettings.type&&(d=this.frameData(d));var p=this;this.parent.trigger(r.v,d,function(e){d.cancel||p.drillThroughDialog.showDrillThroughDialog(e)})},e.prototype.destroy=function(){this.unWireEvents(),this.drillThroughDialog&&(this.drillThroughDialog.destroy(),this.drillThroughDialog=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),n=(i.n(r),i(2)),a=i(1),o=function(){function e(e){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftUp:"shift+upArrow",shiftDown:"shift+downArrow",shiftLeft:"shift+leftArrow",shiftRight:"shift+rightArrow",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",upArrow:"upArrow",downArrow:"downArrow",leftArrow:"leftArrow",rightArrow:"rightArrow",escape:"escape",ctrlShiftF:"ctrl+shift+f"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.pivotViewKeyboardModule=new r.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"tab":this.processTab(e);break;case"shiftTab":this.processShiftTab(e);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(e);break;case"shiftUp":case"shiftDown":case"shiftLeft":case"shiftRight":case"upArrow":case"downArrow":case"leftArrow":case"rightArrow":this.processSelection(e);break;case"escape":this.clearSelection();break;case"ctrlShiftF":this.toggleFieldList(e)}},e.prototype.getNextButton=function(e){var t=this.allpivotButtons(e);if(i.i(r.removeClass)(t,"e-btn-focused"),this.parent.grid.element.querySelector("."+n._39))for(var a=t.length,o=0;o<a;o++)if(t[o].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[o+1]?t[o+1]:e;return e},e.prototype.getPrevButton=function(e){var t=this.allpivotButtons(e);if(i.i(r.removeClass)(t,"e-btn-focused"),this.parent.grid.element.querySelector("."+n._39))for(var a=t.length,o=0;o<a;o++)if(t[o].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[o-1]?t[o-1]:e;return e},e.prototype.allpivotButtons=function(e){var t=[];if(e&&this.parent.showGroupingBar){var a=i.i(r.closest)(e,"."+n._56),o=i.i(r.closest)(e,"."+n._65),s=i.i(r.closest)(e,"."+n._42),l=e.classList.contains(n._20),d=void 0,p=void 0,u=void 0;if(null!==a?p=a.classList.contains(n._56):null!==o?u=o.classList.contains(n._65):null!==s&&(d=s.classList.contains(n._42)),p||u||l){var h=[].slice.call(this.parent.element.querySelector("."+n._56).querySelectorAll("."+n._39)),c=[].slice.call(this.parent.element.querySelector("."+n._65).querySelectorAll("."+n._39));t=h.concat(c)}else d&&(t=[].slice.call(this.parent.element.querySelector("."+n._42).querySelectorAll("."+n._39)))}return t},e.prototype.processTab=function(e){var t=e.target;if(t&&(i.i(r.closest)(t,"."+n._39)||t.classList.contains("e-group-row"))){if(this.parent.grid){var a=this.parent.grid.serviceLocator.getService("focus");if(t.classList.contains("e-group-row")&&t.querySelector(".e-btn-focused"))t=t.querySelector(".e-btn-focused");else if(t.classList.contains("e-group-row")){a.focus();var o=a.getFocusedElement();return i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),void e.preventDefault()}var s=this.getNextButton(t);if(s.getAttribute("data-uid")!==t.getAttribute("data-uid"))this.parent.element.querySelector(".e-focused")?(this.parent.element.querySelector(".e-focused").setAttribute("tabindex","-1"),i.i(r.removeClass)(this.parent.element.querySelectorAll(".e-focus"),"e-focus"),i.i(r.removeClass)(this.parent.element.querySelectorAll(".e-focused"),"e-focused"),a.setFocusedElement(this.parent.element.querySelector(".e-headercell")),this.parent.element.querySelector(".e-headercell").setAttribute("tabindex","0")):a.currentInfo.skipAction=!0,i.i(r.addClass)([s],"e-btn-focused"),s.focus();else{a.focus();var o=a.getFocusedElement();i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0")}return void e.preventDefault()}}else if(!this.parent.showGroupingBar&&this.parent.showFieldList&&t&&i.i(r.closest)(t,"."+n._66)){if(this.parent.grid){var a=this.parent.grid.serviceLocator.getService("focus");a.focus();var o=a.getFocusedElement();return i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),void e.preventDefault()}}else if(this.parent.showGroupingBar||this.parent.showFieldList||!t||!i.i(r.closest)(t,"."+n._67)||i.i(r.closest)(t,".e-popup.e-popup-open")){if(t&&i.i(r.closest)(t,"."+n.v)&&this.parent.toolbar&&this.parent.toolbarModule)clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){i.i(r.removeClass)(i.i(r.closest)(t,"."+n.v).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),document.activeElement&&document.activeElement.classList.contains("e-menu-item")&&i.i(r.addClass)([document.activeElement],"e-focused")});else if(t.classList.contains("e-numerictextbox")){var a=this.parent.grid.serviceLocator.getService("focus");a.focus();var o=a.getFocusedElement();i.i(r.removeClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),e.preventDefault()}}else if(this.parent.grid){var l=i.i(r.closest)(t,"."+n._67),a=this.parent.grid.serviceLocator.getService("focus"),d=[].slice.call(l.getElementsByTagName("tr"));if(t.innerHTML!==d[d.length-1].lastChild.innerHTML){a.focus();var o=a.getFocusedElement();return i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0"),void e.preventDefault()}a.currentInfo.skipAction=!0}},e.prototype.processShiftTab=function(e){var t=e.target;if(t&&(i.i(r.closest)(t,"."+n._39)||t.classList.contains("e-group-row"))){if(this.parent.grid){var a=this.parent.grid.serviceLocator.getService("focus");if(t.classList.contains("e-group-row")&&t.querySelector(".e-btn-focused"))t=t.querySelector(".e-btn-focused");else if(t.classList.contains("e-group-row")){t=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector("."+n._56);var o=this.allpivotButtons(t);if(o.length>0&&o[o.length-1])return a.currentInfo.skipAction=!0,o[o.length-1].focus(),i.i(r.removeClass)(o,"e-btn-focused"),i.i(r.addClass)([o[o.length-1]],"e-btn-focused"),void e.preventDefault()}var s=this.getPrevButton(t);if(s.getAttribute("data-uid")!==t.getAttribute("data-uid"))return a.currentInfo.skipAction=!0,s.focus(),void e.preventDefault()}}else if(t&&this.parent.grid&&(t.classList.contains("e-movablefirst")||t.classList.contains("e-rowsheader")&&i.i(r.closest)(t,"tr").getAttribute("data-uid")===this.parent.grid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){var a=this.parent.grid.serviceLocator.getService("focus");if(t.classList.contains("e-movablefirst")){t=this.parent.element.querySelector("."+n._68+" .e-btn-focused")?this.parent.element.querySelector("."+n._68+" .e-btn-focused"):this.parent.element.querySelector("."+n._68);var l=a.getFocusedElement();i.i(r.removeClass)([l],["e-focused","e-focus"])}var d=this.allpivotButtons(t);if(d.length>0)return a.currentInfo.skipAction=!0,setTimeout(function(){d[d.length-1].focus()}),i.i(r.removeClass)(d,"e-btn-focused"),i.i(r.addClass)([d[d.length-1]],"e-btn-focused"),void e.preventDefault()}else if(t&&i.i(r.closest)(t,"."+n.v)&&this.parent.toolbar&&this.parent.toolbarModule)clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){i.i(r.removeClass)(i.i(r.closest)(t,"."+n.v).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),document.activeElement&&document.activeElement.classList.contains("e-menu-item")&&i.i(r.addClass)([document.activeElement],"e-focused")});else if(t.classList.contains("e-numerictextbox")){var a=this.parent.grid.serviceLocator.getService("focus");a.focus();var l=a.getFocusedElement();i.i(r.removeClass)([l],["e-focused","e-focus"]),l.setAttribute("tabindex","0"),e.preventDefault()}},e.prototype.processEnter=function(e){var t=e.target;if(t&&i.i(r.closest)(t,"."+n._31)){var a=this.parent.grid.serviceLocator.getService("focus");if(13!==e.keyCode||e.shiftKey||e.ctrlKey)if(13===e.keyCode&&e.shiftKey&&!e.ctrlKey){if(this.parent.enableValueSorting){this.event=e,t.click(),a.focus();var o=a.getFocusedElement();i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0")}}else 13===e.keyCode&&!e.shiftKey&&e.ctrlKey&&this.parent.hyperlinkSettings&&t.querySelector("a")&&t.querySelector("a").click();else if(t.querySelector("."+n.a)){this.event=e,t.querySelector("."+n.a).click(),a.focus();var o=a.getFocusedElement();i.i(r.addClass)([o],["e-focused","e-focus"]),o.setAttribute("tabindex","0")}else if(t.classList.contains("e-valuescontent"))t.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),t.querySelector(".e-numerictextbox")&&t.click();else if(t.classList.contains("e-numerictextbox")){a.focus();var o=a.getFocusedElement();i.i(r.removeClass)([o],["e-focused","e-focus"])}return void e.preventDefault()}},e.prototype.clearSelection=function(){var e=this.parent;i.i(r.removeClass)(e.element.querySelectorAll("."+n.b+",."+n.c),[n.c,n.b,n._38]),this.parent.renderModule.selected()},e.prototype.processSelection=function(e){var t=e.target;if(this.parent.grid&&this.parent.gridSettings.allowSelection&&"Row"!==this.parent.gridSettings.selectionSettings.mode&&!t.classList.contains("e-numerictextbox")){var o,s=this.parent,l=Number(e.target.getAttribute("data-colindex")),d=Number(e.target.getAttribute("index"));if("TH"!==t.nodeName&&"TD"!==t.nodeName||(o="shiftUp"===e.action||"upArrow"===e.action?0===d||0===l||"TH"!==t.nodeName&&s.renderModule.rowStartPos!==d?null:this.getParentElement(s,o,l,d-1):"shiftDown"===e.action||"downArrow"===e.action?s.element.querySelector('th[data-colindex="'+l+'"][index="'+(d+1)+'"]'):"shiftLeft"===e.action||"leftArrow"===e.action?e.target.previousSibling:e.target.nextSibling),i.i(r.isNullOrUndefined)(o))"upArrow"===e.action?(o=s.element.querySelector('[data-colindex="'+l+'"][index="'+(d-1)+'"]'),d--):"downArrow"===e.action&&(o=s.element.querySelector('[data-colindex="'+l+'"][index="'+(d+1)+'"]'),d++),i.i(r.isNullOrUndefined)(o)||s.clearSelection(o,e,l,d);else if("Both"===s.gridSettings.selectionSettings.mode&&o.classList.contains(n._45))s.clearSelection(o,e,l,d);else{l=Number(o.getAttribute("data-colindex")),d=Number(o.getAttribute("index"));var p=Number(o.getAttribute("aria-colspan"));s.clearSelection(o,e,l,d);var u={cancel:!1,isCellClick:!0,currentCell:o,data:s.pivotValues[d][l]};s.trigger(a.y,u,function(t){t.cancel||s.applyColumnSelection(e,o,l,l+(p>0?p-1:0),d)})}}else if(t&&(37===e.keyCode||38===e.keyCode)&&this.parent&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&!t.classList.contains("e-numerictextbox")){if(this.parent.grid&&this.parent.element.querySelector(".e-frozenheader")&&this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focus").length>0){i.i(r.removeClass)(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focus"),"e-focus"),i.i(r.removeClass)(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-focused"),"e-focused"),this.parent.element.querySelector(".e-headercell").setAttribute("tabindex","-1");var h=this.parent.grid.serviceLocator.getService("focus");return h.setFocusedElement(t),i.i(r.addClass)([t],["e-focused","e-focus"]),t.setAttribute("tabindex","0"),t.focus(),void e.preventDefault()}}else!t.classList.contains("e-numerictextbox")||"rightArrow"!==e.action&&"leftArrow"!==e.action||t.click()},e.prototype.getParentElement=function(e,t,i,r){for(;!t;)t=e.element.querySelector('[data-colindex="'+i+'"][index="'+r+'"]'),i--;return t},e.prototype.toggleFieldList=function(e){if(this.parent&&!this.parent.isDestroyed&&this.parent.showFieldList&&this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed&&this.parent.element.querySelector("."+n._66)){if(!this.parent.element.querySelector("."+n._66).classList.contains(n._69))return this.parent.element.querySelector("."+n._66).click(),void e.preventDefault();this.parent.element.querySelector("."+n._66).classList.contains(n._69)&&this.parent.pivotFieldListModule.dialogRenderer&&this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog&&!this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog.isDestroyed&&this.parent.pivotFieldListModule.dialogRenderer.fieldListDialog.hide()}},e.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(0),n=(i.n(r),i(1)),a=i(2),o=i(3),s=function(){function e(e){this.previousValues={top:0,left:0},this.frozenPreviousValues={top:0,left:0},this.eventType="",this.isFireFox=r.Browser.userAgent.toLowerCase().indexOf("firefox")>-1,this.parent=e,this.addInternalEvents()}return e.prototype.getModuleName=function(){return"virtualscroll"},e.prototype.addInternalEvents=function(){this.parent.on(n._23,this.wireEvents,this)},e.prototype.wireEvents=function(){if(this.engineModule="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,"Chart"!==this.parent.displayOption.view){var e=this.parent.element.querySelector("."+a._22),t=this.parent.element.querySelector("."+a._25),i=this.parent.element.querySelector("."+a._24),n=t.querySelector("."+a._28);if(r.EventHandler.clearEvents(e),this.isFireFox&&r.EventHandler.clearEvents(i),this.engineModule){var o=this.parent.isAdaptive?e:t.querySelector("."+a._28);r.EventHandler.add(o,"scroll touchmove pointermove",this.onHorizondalScroll(i,e),this),r.EventHandler.add(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(e.parentElement),this),this.isFireFox?(r.EventHandler.add(o,"mouseup touchend scroll",this.common(i,e),this),this.parent.isAdaptive||r.EventHandler.add(e.parentElement,"mouseup touchend scroll",this.common(i,e.parentElement),this)):(r.EventHandler.add(o,"mouseup touchend",this.common(i,e),this),this.parent.isAdaptive||r.EventHandler.add(e.parentElement,"mouseup touchend",this.common(i,e.parentElement),this)),r.EventHandler.add(n,"scroll",this.onCustomScrollbarScroll(e,i),this),r.EventHandler.add(e,"scroll",this.onCustomScrollbarScroll(n,i),this),r.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(n,e),this),r.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),r.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(i,e),this),r.EventHandler.add(e,"touchstart pointerdown",this.setPageXY(),this),r.EventHandler.add(e,"touchmove pointermove",this.onTouchScroll(i,e),this)}this.parent.grid.on("check-scroll-reset",function(e){e.cancel=!0}),this.parent.grid.on("prevent-frozen-scroll-refresh",function(e){e.cancel=!0}),this.parent.grid.isPreventScrollEvent=!0}},e.prototype.onWheelScroll=function(e){var t=this,i=e;return function(e){var r=i.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.frozenPreviousValues.top!==r&&(e.preventDefault(),t.frozenPreviousValues.top=r,t.eventType=e.type)}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.onCustomScrollbarScroll=function(e,t){var i=this,r=e,n=t;return function(e){if(null!==i.parent.element.querySelector("."+a._23).querySelector("tbody")){var t=e.target,o=t.scrollLeft;i.previousValues.left===o||i.isFireFox&&t.classList.contains(a._24)||(r.scrollLeft=o,n.scrollLeft=o,i.parent.isDestroyed)}}},e.prototype.onTouchScroll=function(e,t){var i=this,r=t;return function(n){if("mouse"!==n.pointerType){var o=i.getPointXY(n),s=i.parent.element.querySelector("."+a._31+" ."+a._23).scrollTop+(i.pageXY.y-o.y),l=i.parent.isAdaptive?t:r.parentElement.parentElement.querySelector("."+a._28),d=l.scrollLeft+(i.pageXY.x-o.x);i.frozenPreviousValues.left===d||d<0||(e.scrollLeft=d,l.scrollLeft=d,i.pageXY.x=o.x,i.frozenPreviousValues.left=d,i.frozenPreviousValues.top===s||s<0||(i.pageXY.y=o.y,i.frozenPreviousValues.top=s,i.eventType=n.type))}}},e.prototype.update=function(e,t,i){var r=this;this.parent.isScrolling=!0;var a="pivot"===this.parent.dataType?this.parent.engineModule:this.parent.olapEngineModule,s={dataSourceSettings:o.a.getClonedDataSourceSettings(this.parent.dataSourceSettings)};if(this.parent.pageSettings&&a.pageSettings){if("vertical"===this.direction){var l="pivot"===this.parent.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,d=this.parent.pageSettings.rowPageSize*l*this.parent.gridSettings.rowHeight,p=Math.ceil(e/d);if(this.parent.scrollPosObject.vertical===p||a.pageSettings.rowPageSize>=a.rowCount)return;this.parent.actionObj.actionName=n._21,this.parent.actionBeginMethod(),this.parent.showWaitingPopup(),this.parent.scrollPosObject.vertical=p,this.parent.pageSettings.currentRowPage=a.pageSettings.currentRowPage=p>1?p:1;var u=0;this.parent.trigger(n.b,s,function(e){"pivot"===r.parent.dataType?"Server"===r.parent.dataSourceSettings.mode?r.parent.getEngine("onScroll",null,null,null,null,null,null):(r.parent.engineModule.generateGridData(r.parent.dataSourceSettings,!0,r.parent.engineModule.headerCollection),u=r.parent.engineModule.rowStartPos):(r.parent.olapEngineModule.scrollPage(),u=r.parent.olapEngineModule.pageRowStartPos),r.enginePopulatedEventMethod(a)});var h=Math.ceil(u/(this.parent.pageSettings.rowPageSize*l)),c=d*h-a.rowFirstLvl*l*this.parent.gridSettings.rowHeight;this.parent.scrollPosObject.verticalSection=c}else{var g="pivot"===this.parent.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,d=this.parent.pageSettings.columnPageSize*g*this.parent.gridSettings.columnWidth,p=Math.ceil(Math.abs(t)/d);if(this.parent.scrollPosObject.horizontal===p)return;this.parent.actionObj.actionName=n._22,this.parent.actionBeginMethod(),this.parent.showWaitingPopup();var m=this.parent;m.scrollPosObject.horizontal=p,this.parent.pageSettings.currentColumnPage=a.pageSettings.currentColumnPage=p>1?p:1;var f=0;this.parent.trigger(n.b,s,function(e){"pivot"===m.dataType?"Server"===r.parent.dataSourceSettings.mode?r.parent.getEngine("onScroll",null,null,null,null,null,null):(m.engineModule.generateGridData(m.dataSourceSettings,!0,m.engineModule.headerCollection),f=m.engineModule.colStartPos):(m.olapEngineModule.scrollPage(),f=m.olapEngineModule.pageColStartPos),r.enginePopulatedEventMethod(a)});var h=Math.ceil(f/(m.pageSettings.columnPageSize*g)),c=d*h-a.colFirstLvl*g*m.gridSettings.columnWidth;m.scrollPosObject.horizontalSection=c}this.parent.actionObj.actionName=this.parent.getActionCompleteName(),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}},e.prototype.enginePopulatedEventMethod=function(e,t){var i=this,r=t||this.parent,a={dataSourceSettings:r.dataSourceSettings,pivotValues:e.pivotValues};r.trigger(n.c,a,function(e){i.parent.pivotValues=e.pivotValues})},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.common=function(e,t){var i=this;return function(e){var r=i.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+a._28);i.update(i.parent.element.querySelector("."+a._31+" ."+a._23).scrollTop*i.parent.verticalScrollScale,r.scrollLeft*i.parent.horizontalScrollScale,e)}},e.prototype.onHorizondalScroll=function(e,t){var n,o=this,s=this.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+a._28),l=Math.abs(s.scrollLeft),d=l*this.parent.horizontalScrollScale,p=d-this.parent.scrollPosObject.horizontalSection-l;p=this.parent.enableRtl?p:-p;for(var u=0,h=this.parent.element.querySelectorAll("."+a._30);u<h.length;u++)this.parent.enableRtl?h[u].style.right=Number(p)+"px":h[u].style.left=Number(-p)+"px";return function(u){if(l=Math.abs(s.scrollLeft),d=l*o.parent.horizontalScrollScale,"wheel"!==u.type&&"touchmove"!==u.type&&"wheel"!==o.eventType&&"touchmove"!==o.eventType||(clearTimeout(n),n=setTimeout(function(){d="touchmove"===u.type?l:d,o.update(t.parentElement.scrollTop*o.parent.verticalScrollScale,d,u)},300)),o.previousValues.left!==d){o.parent.scrollDirection=o.direction="horizondal",p=d-o.parent.scrollPosObject.horizontalSection-l,p=o.parent.enableRtl?p:-p;var h=t.querySelector("."+a._26).style.transform.split(",").length>1?t.querySelector("."+a._26).style.transform.split(",")[1].trim():"0px)";if(l<o.parent.scrollerBrowserLimit){i.i(r.setStyleAttribute)(t.querySelector("."+a._26),{transform:"translate("+p+"px,"+h}),i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:"translate("+p+"px,0px)"});for(var c=0,g=o.parent.element.querySelectorAll("."+a._30);c<g.length;c++)o.parent.enableRtl?g[c].style.right=Number(p)+"px":g[c].style.left=Number(-p)+"px"}var m=o.parent.scrollPosObject.horizontalSection>d?-(o.parent.scrollPosObject.horizontalSection-d):d+(e.offsetWidth-e.querySelector(".e-headercell.e-leftfreeze").offsetWidth)-(o.parent.scrollPosObject.horizontalSection+(t.querySelector("."+a._26).offsetWidth-t.querySelector("."+a._26).querySelector(".e-leftfreeze.e-rowsheader").offsetWidth)),f=Math.ceil(o.parent.scrollPosObject.horizontalSection/o.parent.horizontalScrollScale)<o.parent.scrollerBrowserLimit;if(o.parent.scrollPosObject.horizontalSection>d||m>1&&f){d>e.clientWidth?(o.parent.scrollPosObject.left<1&&(o.parent.scrollPosObject.left=e.clientWidth),o.parent.scrollPosObject.left=o.parent.scrollPosObject.left-50,m=o.parent.scrollPosObject.horizontalSection>d?m-o.parent.scrollPosObject.left:m+o.parent.scrollPosObject.left):m=-o.parent.scrollPosObject.horizontalSection,p=-(d-(o.parent.scrollPosObject.horizontalSection+m)-t.parentElement.parentElement.querySelector("."+a._28).scrollLeft);var v=o.parent.gridSettings.columnWidth*o.engineModule.columnCount;v>o.parent.scrollerBrowserLimit&&(o.parent.horizontalScrollScale=v/o.parent.scrollerBrowserLimit,v=o.parent.scrollerBrowserLimit),p>v&&p>d&&(p=d,m=0),i.i(r.setStyleAttribute)(t.querySelector("."+a._26),{transform:"translate("+p+"px,"+h}),i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:"translate("+p+"px,0px)"});for(var c=0,g=o.parent.element.querySelectorAll("."+a._30);c<g.length;c++)o.parent.enableRtl?g[c].style.right=Number(p)+"px":g[c].style.left=Number(-p)+"px";o.parent.scrollPosObject.horizontalSection=o.parent.scrollPosObject.horizontalSection+m}var S=s.scrollWidth-(l+(s.offsetWidth-o.parent.element.querySelector("."+a._31).querySelector("."+a._32+"."+a._30).offsetWidth));if(S<=0){var y=t.querySelector("."+a._27);y.style.display="none";var b=t.scrollWidth-(t.scrollLeft+t.offsetWidth);y.style.display="";var C=t.scrollWidth-(t.scrollLeft+t.offsetWidth);o.parent.scrollPosObject.horizontalSection-=b>S?b:-C,p=l>o.parent.scrollerBrowserLimit?Number(t.querySelector("."+a._26).style.transform.split(",")[0].split("px")[0].trim()):-(l*o.parent.horizontalScrollScale-o.parent.scrollPosObject.horizontalSection-l),i.i(r.setStyleAttribute)(t.querySelector("."+a._26),{transform:"translate("+p+"px,"+h}),i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:"translate("+p+"px,0px)"});for(var c=0,g=o.parent.element.querySelectorAll("."+a._30);c<g.length;c++)o.parent.enableRtl?g[c].style.right=Number(p)+"px":g[c].style.left=Number(-p)+"px"}o.previousValues.left=d,o.frozenPreviousValues.left=d,o.eventType="",e.scrollLeft=s.scrollLeft,t.scrollLeft=s.scrollLeft}}},e.prototype.onVerticalScroll=function(e){var t,n=this;return function(o){var s=e.scrollTop*n.parent.verticalScrollScale;if("wheel"===o.type||"touchmove"===o.type||"wheel"===n.eventType||"touchmove"===n.eventType||"keyup"===o.type||"keydown"===o.type){var l=n.parent.isAdaptive?e:e.parentElement.parentElement.querySelector("."+a._28);clearTimeout(t),t=setTimeout(function(){var t=0;if(n.parent.isAdaptive){var i=l.querySelector("."+a._22);t=l.scrollLeft===i.scrollLeft?l.scrollLeft:i.scrollLeft}else t=l.scrollLeft;n.update(e.scrollTop*n.parent.verticalScrollScale,t*n.parent.horizontalScrollScale,o)},300)}if(n.previousValues.top!==s){n.parent.scrollPosObject.horizontalSection<0&&(n.parent.scrollPosObject.horizontalSection=0),n.parent.scrollDirection=n.direction="vertical";var d=-(s-n.parent.scrollPosObject.verticalSection-e.scrollTop),p=e.querySelector("."+a._26).style.transform.split(",")[0].trim();d>n.parent.virtualDiv.clientHeight&&(d=n.parent.virtualDiv.clientHeight),e.scrollTop<n.parent.scrollerBrowserLimit&&(i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:"translate(0px,"+d+"px)"}),i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:p+","+d+"px)"}));var u=n.parent.scrollPosObject.verticalSection>s?-(n.parent.scrollPosObject.verticalSection-s):s+e.clientHeight-(n.parent.scrollPosObject.verticalSection+e.querySelector("."+a._26).offsetHeight),h=Math.ceil(n.parent.scrollPosObject.verticalSection/n.parent.verticalScrollScale)<n.parent.scrollerBrowserLimit;if(n.parent.scrollPosObject.verticalSection>s||u>1&&h){s>e.clientHeight?(n.parent.scrollPosObject.top<1&&(n.parent.scrollPosObject.top=e.clientHeight),n.parent.scrollPosObject.top=n.parent.scrollPosObject.top-50,u=n.parent.scrollPosObject.verticalSection>s?u-n.parent.scrollPosObject.top:u+n.parent.scrollPosObject.top):u=-n.parent.scrollPosObject.verticalSection;var c=n.parent.element.querySelector("."+a._23).querySelector("."+a._26);d=-(s-(n.parent.scrollPosObject.verticalSection+u)-e.scrollTop);var g=n.parent.gridSettings.rowHeight*n.engineModule.rowCount+.1-c.clientHeight;g>n.parent.scrollerBrowserLimit&&(n.parent.verticalScrollScale=g/n.parent.scrollerBrowserLimit,g=n.parent.scrollerBrowserLimit),d>g&&d>s&&(d=s,u=0),d>n.parent.virtualDiv.clientHeight&&(d=n.parent.virtualDiv.clientHeight),i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:"translate(0px,"+d+"px)"}),i.i(r.setStyleAttribute)(e.querySelector("."+a._26),{transform:p+","+d+"px)"}),n.parent.scrollPosObject.verticalSection=n.parent.scrollPosObject.verticalSection+u}n.previousValues.top=s,n.frozenPreviousValues.top=s,n.eventType=""}}},e.prototype.removeInternalEvents=function(){this.parent.isDestroyed||this.parent.off(n._23,this.wireEvents)},e.prototype.destroy=function(){this.removeInternalEvents()},e}()},function(e,t,i){"use strict";i.d(t,"b",function(){return D}),i.d(t,"c",function(){return O}),i.d(t,"d",function(){return P}),i.d(t,"e",function(){return N}),i.d(t,"f",function(){return E}),i.d(t,"g",function(){return I}),i.d(t,"h",function(){return F}),i.d(t,"a",function(){return L});var r=i(0),n=(i.n(r),i(14)),a=i(4),o=(i.n(a),i(1)),s=i(2),l=i(42),d=i(24),p=i(19),u=i(69),h=i(8),c=(i.n(h),i(39)),g=i(32),m=i(9),f=(i.n(m),i(40)),v=i(38),S=i(3),y=i(22),b=i(68),C=i(12),x=(i.n(C),i(16)),w=i(58),T=i(72),M=(i.n(T),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),_=this&&this.__decorate||function(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(!0)],t.prototype,"showFilterIcon",void 0),_([i.i(r.Property)(!0)],t.prototype,"showSortIcon",void 0),_([i.i(r.Property)(!0)],t.prototype,"showRemoveIcon",void 0),_([i.i(r.Property)(!0)],t.prototype,"showValueTypeIcon",void 0),_([i.i(r.Property)("Both")],t.prototype,"displayMode",void 0),_([i.i(r.Property)(!0)],t.prototype,"allowDragAndDrop",void 0),_([i.i(r.Property)(!1)],t.prototype,"showFieldsPanel",void 0),t}(r.ChildProperty),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(!1)],t.prototype,"allowAdding",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowEditing",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDeleting",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowCommandColumns",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowInlineEditing",void 0),_([i.i(r.Property)("Normal")],t.prototype,"mode",void 0),_([i.i(r.Property)(!0)],t.prototype,"allowEditOnDblClick",void 0),_([i.i(r.Property)(!0)],t.prototype,"showConfirmDialog",void 0),_([i.i(r.Property)(!1)],t.prototype,"showDeleteConfirmDialog",void 0),t}(r.ChildProperty),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)()],t.prototype,"measure",void 0),_([i.i(r.Property)()],t.prototype,"label",void 0),_([i.i(r.Property)("NotEquals")],t.prototype,"conditions",void 0),_([i.i(r.Property)()],t.prototype,"value1",void 0),_([i.i(r.Property)()],t.prototype,"value2",void 0),t}(r.ChildProperty),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(!1)],t.prototype,"showHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showRowHeaderHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showColumnHeaderHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showValueCellHyperlink",void 0),_([i.i(r.Property)(!1)],t.prototype,"showSummaryCellHyperlink",void 0),_([i.i(r.Collection)([],P)],t.prototype,"conditionalSettings",void 0),_([i.i(r.Property)()],t.prototype,"headerText",void 0),_([i.i(r.Property)("")],t.prototype,"cssClass",void 0),t}(r.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)(5)],t.prototype,"columnPageSize",void 0),_([i.i(r.Property)(5)],t.prototype,"rowPageSize",void 0),_([i.i(r.Property)(1)],t.prototype,"currentColumnPage",void 0),_([i.i(r.Property)(1)],t.prototype,"currentRowPage",void 0),t}(r.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)("Bottom")],t.prototype,"position",void 0),_([i.i(r.Property)(!1)],t.prototype,"isInversed",void 0),_([i.i(r.Property)(!0)],t.prototype,"showRowPager",void 0),_([i.i(r.Property)(!0)],t.prototype,"showColumnPager",void 0),_([i.i(r.Property)(!0)],t.prototype,"showRowPageSize",void 0),_([i.i(r.Property)(!0)],t.prototype,"showColumnPageSize",void 0),_([i.i(r.Property)([10,50,100,200])],t.prototype,"rowPageSizes",void 0),_([i.i(r.Property)([5,10,20,50,100])],t.prototype,"columnPageSizes",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableCompactView",void 0),_([i.i(r.Property)()],t.prototype,"template",void 0),t}(r.ChildProperty),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),_([i.i(r.Property)("Table")],t.prototype,"view",void 0),_([i.i(r.Property)("Table")],t.prototype,"primary",void 0),t}(r.ChildProperty),L=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.verticalScrollScale=1,a.horizontalScrollScale=1,a.scrollerBrowserLimit=8e6,a.lastSortInfo={},a.lastFilterInfo={},a.lastAggregationInfo={},a.lastCalcFieldInfo={},a.isScrolling=!1,a.allowEngineExport=!1,a.isInitial=!0,a.shiftLockedPos=[],a.savedSelectedCellsPos=[],a.cellSelectionPos=[],a.isPopupClicked=!1,a.isMouseDown=!1,a.isMouseUp=!1,a.fieldsType={},a.remoteData=[],a.defaultItems={},a.isCellBoxMultiSelection=!1,a.gridHeaderCellInfo=[],a.gridCellCollection={},a.rowRangeSelection={enable:!1,startIndex:0,endIndex:0},a.isStaticRefresh=!1,a.resizeInfo={},a.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},a.pivotColumns=[],a.totColWidth=0,a.posCount=0,a.isModified=!1,a.isInitialRendering=!1,a.needsID=!0,a.pivotRefresh=r.Component.prototype.refresh,a.request=new XMLHttpRequest,a.isServerWaitingPopup=!1,a.actionObj={},a.defaultFieldListOrder="None",a.destroyEngine=!1,a.pivotView=a,i.i(r.setValue)("mergePersistData",a.mergePersistPivotData,a),a}return M(t,e),t.prototype.requiredModules=function(){var e=[];return this.showGroupingBar&&e.push({args:[this],member:"groupingBar"}),this.allowConditionalFormatting&&e.push({args:[this],member:"conditionalFormatting"}),this.allowNumberFormatting&&e.push({args:[this],member:"numberFormatting"}),this.allowCalculatedField&&e.push({args:[this],member:"calculatedField"}),this.showToolbar&&(this.toolbar.length>0||this.toolbarTemplate)&&e.push({args:[this],member:"toolbar"}),this.showFieldList&&e.push({args:[this],member:"fieldList"}),this.allowExcelExport&&e.push({args:[this],member:"excelExport"}),this.allowPdfExport&&(e.push({args:[this],member:"pdfExport"}),e.push({args:[this],member:"chartExport"})),this.enableVirtualization&&e.push({args:[this],member:"virtualscroll"}),this.allowGrouping&&e.push({args:[this],member:"grouping"}),(this.allowDrillThrough||this.editSettings&&this.editSettings.allowEditing)&&e.push({args:[this],member:"drillThrough"}),"Table"!==this.displayOption.view&&e.push({args:[this],member:"pivotChart"}),this.enablePaging&&e.push({args:[this],member:"pager"}),e},t.prototype.preRender=function(){this.dataSourceSettings&&"SSAS"===this.dataSourceSettings.providerType?(this.dataType="olap",this.olapEngineModule=new x.a):(this.dataType="pivot",this.engineModule=new n.a),this.isAdaptive=r.Browser.isDevice,r.Browser.isIE||"edge"===r.Browser.info.name?this.scrollerBrowserLimit=15e5:"chrome"===r.Browser.info.name&&(this.scrollerBrowserLimit=15e6),this.isTouchMode=!!i.i(r.closest)(this.element,"e-bigger"),this.initProperties(),this.renderToolTip(),this.keyboardModule=new c.a(this),this.contextMenuModule=new g.a(this),this.globalize=new r.Internationalization(this.locale),(this.showFieldList||this.showGroupingBar||this.allowNumberFormatting||this.allowCalculatedField||this.toolbar||this.allowGrouping||this.gridSettings.contextMenuItems)&&(this.commonModule=new d.a(this)),!this.allowPdfExport||"Both"!==this.displayOption.view&&"Chart"!==this.displayOption.view||(this.chartExportModule=new w.a(this)),this.defaultLocale={grandTotal:"Grand Total",total:"Total",value:"Value",noValue:"No value",row:"Row",column:"Column",collapse:"Collapse",expand:"Expand",rowAxisPrompt:"Drop row here",columnAxisPrompt:"Drop column here",valueAxisPrompt:"Drop value here",filterAxisPrompt:"Drop filter here",filter:"Filter",filtered:"Filtered",sort:"Sort",filters:"Filters",rows:"Rows",columns:"Columns",values:"Values",close:"Close",cancel:"Cancel",delete:"Delete",CalculatedField:"Calculated Field",createCalculatedField:"Create Calculated Field",fieldName:"Enter the field name",error:"Error",invalidFormula:"Invalid formula.",dropText:'Example: ("Sum(Order_Count)" + "Sum(In_Stock)") * 250',dropTextMobile:"Add fields and edit formula here.",dropAction:"Calculated field cannot be place in any other region except value axis.",alert:"Alert",warning:"Warning",ok:"OK",search:"Search",drag:"Drag",remove:"Remove",allFields:"All Fields",formula:"Formula",addToRow:"Add to Row",addToColumn:"Add to Column",addToValue:"Add to Value",addToFilter:"Add to Filter",emptyData:"No records to display",fieldExist:"A field already exists in this name. Please enter a different name.",confirmText:"A calculation field already exists in this name. Do you want to replace it?",noMatches:"No matches",format:"Summaries values by",edit:"Edit",clear:"Clear",sortAscending:"Sort ascending order",sortDescending:"Sort descending order",sortNone:"Sort data order",clearCalculatedField:"Clear edited field info",editCalculatedField:"Edit calculated field",formulaField:"Drag and drop fields to formula",dragField:"Drag field to formula",clearFilter:"Clear",by:"by",all:"All",multipleItems:"Multiple items",member:"Member",label:"Label",date:"Date",enterValue:"Enter value",chooseDate:"Enter date",Before:"Before",BeforeOrEqualTo:"Before Or Equal To",After:"After",AfterOrEqualTo:"After Or Equal To",labelTextContent:"Show the items for which the label",dateTextContent:"Show the items for which the date",valueTextContent:"Show the items for which",Equals:"Equals",DoesNotEquals:"Does Not Equal",BeginWith:"Begins With",DoesNotBeginWith:"Does Not Begin With",EndsWith:"Ends With",DoesNotEndsWith:"Does Not End With",Contains:"Contains",DoesNotContains:"Does Not Contain",GreaterThan:"Greater Than",GreaterThanOrEqualTo:"Greater Than Or Equal To",LessThan:"Less Than",LessThanOrEqualTo:"Less Than Or Equal To",Between:"Between",NotBetween:"Not Between",And:"and",Sum:"Sum",Count:"Count",DistinctCount:"Distinct Count",Product:"Product",Avg:"Avg",Median:"Median",Min:"Min",SampleVar:"Sample Var",PopulationVar:"Population Var",RunningTotals:"Running Totals",Max:"Max",Index:"Index",SampleStDev:"Sample StDev",PopulationStDev:"Population StDev",PercentageOfRowTotal:"% of Row Total",PercentageOfParentTotal:"% of Parent Total",PercentageOfParentColumnTotal:"% of Parent Column Total",PercentageOfParentRowTotal:"% of Parent Row Total",DifferenceFrom:"Difference From",PercentageOfDifferenceFrom:"% of Difference From",PercentageOfGrandTotal:"% of Grand Total",PercentageOfColumnTotal:"% of Column Total",MoreOption:"More...",NotEquals:"Not Equals",AllValues:"All Values",conditionalFormating:"Conditional Formatting",apply:"Apply",condition:"Add Condition",formatLabel:"Format",valueFieldSettings:"Value field settings",baseField:"Base field",baseItem:"Base item",summarizeValuesBy:"Summarize values by",sourceName:"Field name :",sourceCaption:"Field caption",example:"e.g:",editorDataLimitMsg:" more items. Search to refine further.",details:"Details",manageRecords:"Manage Records",Years:"Years",Quarters:"Quarters",Months:"Months",Days:"Days",Hours:"Hours",Minutes:"Minutes",Seconds:"Seconds",save:"Save a report",new:"Create a new report",load:"Load",saveAs:"Save as current report",rename:"Rename a current report",deleteReport:"Delete a current report",export:"Export",subTotals:"Sub totals",grandTotals:"Grand totals",reportName:"Report Name :",pdf:"PDF",excel:"Excel",csv:"CSV",png:"PNG",jpeg:"JPEG",svg:"SVG",mdxQuery:"MDX Query",showSubTotals:"Show subtotals",doNotShowSubTotals:"Do not show subtotals",showSubTotalsRowsOnly:"Show subtotals rows only",showSubTotalsColumnsOnly:"Show subtotals columns only",showGrandTotals:"Show grand totals",doNotShowGrandTotals:"Do not show grand totals",showGrandTotalsRowsOnly:"Show grand totals rows only",showGrandTotalsColumnsOnly:"Show grand totals columns only",fieldList:"Show fieldlist",grid:"Show table",toolbarFormatting:"Conditional formatting",chart:"Chart",reportMsg:"Please enter vaild report name!!!",reportList:"Report list",removeConfirm:"Are you sure you want to delete this report?",emptyReport:"No reports found!!",bar:"Bar",pie:"Pie",funnel:"Funnel",doughnut:"Doughnut",pyramid:"Pyramid",stackingcolumn:"Stacked Column",stackingarea:"Stacked Area",stackingbar:"Stacked Bar",stackingline:"Stacked Line",stepline:"Step Line",steparea:"Step Area",splinearea:"Spline Area",spline:"Spline",stackingcolumn100:"100% Stacked Column",stackingbar100:"100% Stacked Bar",stackingarea100:"100% Stacked Area",stackingline100:"100% Stacked Line",bubble:"Bubble",pareto:"Pareto",radar:"Radar",line:"Line",area:"Area",scatter:"Scatter",polar:"Polar",of:"of",emptyFormat:"No format found!!!",emptyInput:"Enter a value",newReportConfirm:"Do you want to save the changes to this report?",emptyReportName:"Enter a report name",qtr:"Qtr",null:"null",undefined:"undefined",groupOutOfRange:"Out of Range",fieldDropErrorAction:"The field you are moving cannot be placed in that area of the report",aggregate:"Aggregate",drillThrough:"Drill Through",ascending:"Ascending",descending:"Descending",number:"Number",currency:"Currency",percentage:"Percentage",formatType:"Format Type",customText:"Currency Symbol",symbolPosition:"Symbol Position",left:"Left",right:"Right",grouping:"Grouping",true:"True",false:"False",decimalPlaces:"Decimal Places",numberFormat:"Number Formatting",memberType:"Field Type",formatString:"Format",expressionField:"Expression",customFormat:"Enter custom format string",numberFormatString:"Example: C, P, 0000 %, ###0.##0#, etc.",selectedHierarchy:"Parent Hierarchy",olapDropText:"Example: [Measures].[Order Quantity] + ([Measures].[Order Quantity] * 0.10)",Percent:"Percent",Currency:"Currency",Custom:"Custom",Measure:"Measure",Dimension:"Dimension",Standard:"Standard",blank:"(Blank)",fieldTooltip:'Drag and drop fields to create an expression. And, if you want to edit the existing calculated fields! You can achieve it by simply selecting the field under "Calculated Members".',fieldTitle:"Field Name",QuarterYear:"Quarter Year",drillError:"Cannot show the raw items of calculated fields.",caption:"Field Caption",copy:"Copy",defaultReport:"Sample Report",customFormatString:"Custom Format",invalidFormat:"Invalid Format.",group:"Group",unGroup:"Ungroup",invalidSelection:"Cannot group that selection.",groupName:"Enter the caption to display in header",captionName:"Enter the caption for group field",selectedItems:"Selected items",groupFieldCaption:"Field caption",groupTitle:"Group name",startAt:"Starting at",endAt:"Ending at",groupBy:"Interval by",selectGroup:"Select groups",multipleAxes:"Multiple Axis",showLegend:"Show Legend",exit:"Exit",chartTypeSettings:"Chart Type Settings",ChartType:"Chart Type",yes:"Yes",no:"No",numberFormatMenu:"Number Formatting...",conditionalFormatingMenu:"Conditional Formatting...",removeCalculatedField:"Are you sure you want to delete this calculated field?",replaceConfirmBefore:"A report named ",replaceConfirmAfter:" already exists. Do you want to replace it?",invalidJSON:"Invalid JSON data",invalidCSV:"Invalid CSV data",stacked:"Stacked",single:"Single",combined:"Combined",multipleAxisMode:"Multiple Axis Mode",grandTotalPosition:"Grand totals position",top:"Top",bottom:"Bottom",None:"None",rowPage:"Row pager",rowPerPage:"Rows per page",columnPage:"Column pager",columnPerPage:"Columns per page",goToFirstPage:"Go to first page",goToPreviousPage:"Go to previous page",goToNextPage:"Go to next page",goToLastPage:"Go to last page",subTotalPosition:"Subtotals position",auto:"Auto"},this.localeObj=new r.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.renderContextMenu(),this.isDragging=!1,this.addInternalEvents()},t.prototype.onBeforeTooltipOpen=function(e){e.element.classList.add("e-pivottooltipwrap")},t.prototype.renderToolTip=function(){this.showTooltip?(this.tooltipTemplate?this.tooltip=new a.Tooltip({target:"td.e-valuescontent",cssClass:"e-pivottooltiptemplate"+(this.cssClass?" "+this.cssClass:""),showTipPointer:!1,position:"BottomRight",mouseTrail:!0,enableRtl:this.enableRtl,locale:this.locale,enableHtmlSanitizer:this.enableHtmlSanitizer,beforeRender:this.setToolTip.bind(this),beforeOpen:this.onBeforeTooltipOpen}):this.tooltip=new a.Tooltip({target:"td.e-valuescontent",cssClass:this.cssClass,showTipPointer:!1,position:"BottomRight",mouseTrail:!0,enableRtl:this.enableRtl,locale:this.locale,enableHtmlSanitizer:this.enableHtmlSanitizer,beforeRender:this.setToolTip.bind(this),beforeOpen:this.onBeforeTooltipOpen}),this.tooltip.isStringTemplate=!0,this.tooltip.appendTo(this.element)):this.tooltip&&this.tooltip.destroy()},t.prototype.renderContextMenu=function(){if(this.gridSettings.contextMenuItems||this.allowGrouping&&"pivot"===this.dataType){var e=[],t=[],i=[],r=[],n=[],a=[],o=[];if(this.gridSettings.contextMenuItems)for(var s=0,l=this.gridSettings.contextMenuItems;s<l.length;s++){var d=l[s];if("string"==typeof d&&-1!==this.getDefaultItems().indexOf(d))if(-1!==d.toString().toLowerCase().indexOf("aggregate")&&"pivot"===this.dataType){o=[{text:this.localeObj.getConstant("Sum")}];var p=this.buildDefaultItems("Aggregate");p.items=o,n.push(p)}else-1!==d.toString().toLowerCase().indexOf("export")?r.push(this.buildDefaultItems(d)):e.push(this.buildDefaultItems(d));else"string"!=typeof d&&i.push(d)}if(this.allowGrouping&&"pivot"===this.dataType&&(this.getFieldByID(this.element.id+"_custom_group",this.gridSettings.contextMenuItems)||t.push(this.buildDefaultItems("Group")),this.getFieldByID(this.element.id+"_custom_ungroup",this.gridSettings.contextMenuItems)||t.push(this.buildDefaultItems("Ungroup"))),r.length>0){var u=this.buildDefaultItems("export");u.items=r,a.push(u)}var h=[];Array.prototype.push.apply(h,n),Array.prototype.push.apply(h,e),Array.prototype.push.apply(h,t),Array.prototype.push.apply(h,a),Array.prototype.push.apply(h,i),this.setProperties({gridSettings:{contextMenuItems:h}},!0)}},t.prototype.getFieldByID=function(e,t){return new m.DataManager({json:t}).executeLocal((new m.Query).where("id","equal",e))[0]},t.prototype.getAllSummaryType=function(){return["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"]},t.prototype.getDefaultItems=function(){return["Drillthrough","Expand","Collapse","Pdf Export","Excel Export","Csv Export","Sort Ascending","Sort Descending","Aggregate","CalculatedField"]},t.prototype.buildDefaultItems=function(e){var t;switch(e){case"Aggregate":t={text:this.localeObj.getConstant("aggregate"),target:"th.e-valuesheader,td.e-valuescontent,.e-stot.e-rowsheader",id:this.element.id+"_aggregate"};break;case"CalculatedField":t={text:this.localeObj.getConstant("CalculatedField"),target:"td.e-valuescontent",id:this.element.id+"_CalculatedField"};break;case"Drillthrough":t={text:this.localeObj.getConstant("drillThrough"),target:"td.e-valuescontent",id:this.element.id+"_drillthrough_menu",iconCss:s._11+" "+s.a};break;case"export":t={text:this.localeObj.getConstant("export"),target:"td.e-valuescontent",id:this.element.id+"_exporting",iconCss:s._12+" "+s.a};break;case"Pdf Export":t={text:this.localeObj.getConstant("pdf"),id:this.element.id+"_pdf",iconCss:s.U+" "+s.a};break;case"Excel Export":t={text:this.localeObj.getConstant("excel"),id:this.element.id+"_excel",iconCss:s.V+" "+s.a};break;case"Csv Export":t={text:this.localeObj.getConstant("csv"),id:this.element.id+"_csv",iconCss:s.W+" "+s.a};break;case"Expand":t={text:this.localeObj.getConstant("expand"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_expand",iconCss:s._13+" "+s.a};break;case"Collapse":t={text:this.localeObj.getConstant("collapse"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_collapse",iconCss:s._14+" "+s.a};break;case"Sort Ascending":t={text:this.localeObj.getConstant("ascending"),target:"th.e-valuesheader,.e-stot",id:this.element.id+"_sortasc",iconCss:s._15+" "+s.a};break;case"Sort Descending":t={text:this.localeObj.getConstant("descending"),target:"th.e-valuesheader,.e-stot",id:this.element.id+"_sortdesc",iconCss:s._16+" "+s.a};break;case"Group":t={text:this.localeObj.getConstant("group"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_custom_group",iconCss:s._17+" "+s.a};break;case"Ungroup":t={text:this.localeObj.getConstant("unGroup"),target:"td.e-rowsheader,.e-columnsheader",id:this.element.id+"_custom_ungroup",iconCss:s._18+" "+s.a}}return this.defaultItems[e]={text:t.text,id:t.id,target:t.target,iconCss:t.iconCss},this.defaultItems[e]},t.prototype.initProperties=function(){this.pivotRefresh=r.Component.prototype.refresh,this.minHeight=i.i(r.isNullOrUndefined)(this.minHeight)?300:this.minHeight<10?10:this.minHeight,this.isScrolling=!1,this.allowServerDataBinding=!1,this.isStaticRefresh=!1,this.setProperties({pivotValues:[]},!0),delete this.bulkChanges.pivotValues,this.allowServerDataBinding=!0,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},this.queryCellInfo=this.gridSettings.queryCellInfo?this.gridSettings.queryCellInfo.bind(this):void 0,this.headerCellInfo=this.gridSettings.headerCellInfo?this.gridSettings.headerCellInfo.bind(this):void 0,this.resizing=this.gridSettings.resizing?this.gridSettings.resizing.bind(this):void 0,this.resizeStop=this.gridSettings.resizeStop?this.gridSettings.resizeStop.bind(this):void 0,this.pdfHeaderQueryCellInfo=this.gridSettings.pdfHeaderQueryCellInfo?this.gridSettings.pdfHeaderQueryCellInfo:void 0,this.pdfQueryCellInfo=this.gridSettings.pdfQueryCellInfo?this.gridSettings.pdfQueryCellInfo:void 0,this.excelHeaderQueryCellInfo=this.gridSettings.excelHeaderQueryCellInfo?this.gridSettings.excelHeaderQueryCellInfo:void 0,this.excelQueryCellInfo=this.gridSettings.excelQueryCellInfo?this.gridSettings.excelQueryCellInfo:void 0,this.columnDragStart=this.gridSettings.columnDragStart?this.gridSettings.columnDragStart.bind(this):void 0,this.columnDrag=this.gridSettings.columnDrag?this.gridSettings.columnDrag.bind(this):void 0,this.columnDrop=this.gridSettings.columnDrop?this.gridSettings.columnDrop.bind(this):void 0,this.beforeColumnsRender=this.gridSettings.columnRender?this.gridSettings.columnRender:void 0,this.selected=this.gridSettings.cellSelected?this.gridSettings.cellSelected:void 0,this.cellDeselected=this.gridSettings.cellDeselected?this.gridSettings.cellDeselected:void 0,this.rowSelected=this.gridSettings.rowSelected?this.gridSettings.rowSelected:void 0,this.rowDeselected=this.gridSettings.rowDeselected?this.gridSettings.rowDeselected:void 0,this.chartTooltipRender=this.chartSettings.tooltipRender?this.chartSettings.tooltipRender:void 0,this.chartLegendClick=this.chartSettings.legendClick?this.chartSettings.legendClick:void 0,this.chartLoaded=this.chartSettings.loaded?this.chartSettings.loaded:void 0,this.chartLoad=this.chartSettings.load?this.chartSettings.load:void 0,this.chartResized=this.chartSettings.resized?this.chartSettings.resized:void 0,this.chartAxisLabelRender=this.chartSettings.axisLabelRender?this.chartSettings.axisLabelRender:void 0,this.multiLevelLabelClick=this.chartSettings.multiLevelLabelClick?this.chartSettings.multiLevelLabelClick:void 0,this.chartPointClick=this.chartSettings.pointClick?this.chartSettings.pointClick:void 0,this.contextMenuClick=this.gridSettings.contextMenuClick?this.gridSettings.contextMenuClick:void 0,this.contextMenuOpen=this.gridSettings.contextMenuOpen?this.gridSettings.contextMenuOpen:void 0,this.beforePdfExport=this.gridSettings.beforePdfExport?this.gridSettings.beforePdfExport.bind(this):void 0,this.beforeExcelExport=this.gridSettings.beforeExcelExport?this.gridSettings.beforeExcelExport.bind(this):void 0,this.multiLevelLabelRender=this.chartSettings.multiLevelLabelRender?this.chartSettings.multiLevelLabelRender:void 0,null===this.gridSettings.rowHeight&&(this.isTouchMode?this.setProperties({gridSettings:{rowHeight:36}},!0):this.setProperties({gridSettings:{rowHeight:this.isAdaptive?36:30}},!0)),this.chartSettings&&this.chartSettings.showMemberSeries&&!this.chartSettings.showPointColorByMembers&&this.setProperties({chartSettings:{showPointColorByMembers:!0}},!0),this.element.style.height="100%",this.enableVirtualization&&this.updatePageSettings(!0),this.isCellBoxMultiSelection=this.gridSettings.allowSelection&&"Box"===this.gridSettings.selectionSettings.cellSelectionMode&&"Cell"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type,this.allowGrouping&&!this.isCellBoxMultiSelection&&(this.isCellBoxMultiSelection=!0,this.setProperties({gridSettings:{allowSelection:!0,selectionSettings:{cellSelectionMode:"Box",mode:"Cell",type:"Multiple"}}},!0)),"Table"!==this.displayOption.view&&(this.pivotChartModule=new y.a),this.currentView=this.currentView?this.currentView:"Both"===this.displayOption.view?this.displayOption.primary:this.displayOption.view},t.prototype.updatePageSettings=function(e){if(this.enableVirtualization){var t=1,i=1;this.dataSourceSettings.values.length>1&&"pivot"===this.dataType&&("row"===this.dataSourceSettings.valueAxis?i=this.dataSourceSettings.values.length:t=this.dataSourceSettings.values.length);var r=this.getHeightAsNumber();isNaN(r)&&(r=this.element.offsetHeight),this.pageSettings={currentColumnPage:e?1:this.pageSettings.currentColumnPage,currentRowPage:e?1:this.pageSettings.currentRowPage,columnPageSize:Math.ceil((Math.floor(this.getWidthAsNumber()/this.gridSettings.columnWidth)-1)/t),rowPageSize:Math.ceil(Math.floor(r/this.gridSettings.rowHeight)/i)}}},t.prototype.render=function(){this.loadData()},t.prototype.loadData=function(){if(this.dataSourceSettings.formatSettings.length>0)for(var e=this.dataSourceSettings.formatSettings,t=0;t<e.length;t++)i.i(r.isNullOrUndefined)(e[t].maximumFractionDigits)&&i.i(r.isNullOrUndefined)(e[t].minimumFractionDigits)||null!==e[t].format.match(/^(P|N|C|P[0-9]|C[0-9]|N[0-9])$/g)||(e[t].maximumFractionDigits=void 0,e[t].minimumIntegerDigits=void 0);if("pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url)if("Server"===this.dataSourceSettings.mode)this.guid=S.a.generateUUID(),this.initialLoad(),"Chart"!==this.displayOption.view&&this.renderEmptyGrid(),this.showWaitingPopup();else{var n=new r.Fetch(this.dataSourceSettings.url,"GET");n.send().then(function(e){return"string"==typeof e?e:e.text()}).then(this.onReadyStateChange.bind(this))}else this.initialLoad()},t.prototype.onSuccess=function(e){if(this.request.readyState===XMLHttpRequest.DONE)if("onExcelExport"===this.currentAction||"onCsvExport"===this.currentAction){if("OK"===this.request.statusText){var t=this.request.response,n=i.i(r.isNullOrUndefined)(e.fileName)?"onExcelExport"===this.currentAction?"default.xlsx":"default.csv":e.fileName;T.Save.save(n,t)}}else{this.isServerWaitingPopup=!0;try{var a={action:this.currentAction,response:this.request.responseText};this.trigger(o._14,a);var s=JSON.parse(this.request.responseText);if("fetchFieldMembers"===this.currentAction){for(var l=JSON.parse(s.members),d=[],p={},u={},h=0;h<l.length;h++)d.push({formattedText:l[h].FormattedText,actualText:l[h].ActualText}),p[l[h].FormattedText]={},u[l[h].ActualText]={};this.engineModule.fieldList[s.memberName].dateMember=d,this.engineModule.fieldList[s.memberName].formattedMembers=p,this.engineModule.fieldList[s.memberName].members=u,this.showGroupingBar?this.pivotButtonModule.updateFilterEvents():this.pivotFieldListModule.pivotButtonModule.updateFilterEvents()}else if("fetchRawData"===this.currentAction){for(var c=this.engineModule.fieldList[this.drillThroughValue.actualText.toString()]?this.engineModule.fieldList[this.drillThroughValue.actualText.toString()].caption:this.drillThroughValue.actualText.toString(),g=this.engineModule.fieldList[this.drillThroughValue.actualText]?this.engineModule.fieldList[this.drillThroughValue.actualText].aggregateType:"",m=JSON.parse(s.rawData),f=JSON.parse(s.indexObject),v={},y=0;y<f.length;y++)v[f[y].Key]=f[y].Value;this.drillThroughValue.indexObject=v,this.drillThroughModule.triggerDialog(c,g,m,this.drillThroughValue,this.drillThroughElement),this.hideWaitingPopup()}else{var b=S.a.formatFieldList(JSON.parse(s.fieldList));if(this.engineModule.fieldList)for(var C=Object.keys(this.engineModule.fieldList),h=0;h<C.length;h++)this.engineModule.fieldList[C[h]]&&b[C[h]]&&(b[C[h]].dateMember=this.engineModule.fieldList[C[h]].dateMember,b[C[h]].formattedMembers=this.engineModule.fieldList[C[h]].formattedMembers,b[C[h]].members=this.engineModule.fieldList[C[h]].members);this.engineModule.fieldList=b,this.engineModule.fields=JSON.parse(s.fields),this.engineModule.rowCount=JSON.parse(s.pivotCount).RowCount,this.engineModule.columnCount=JSON.parse(s.pivotCount).ColumnCount,this.engineModule.rowStartPos=JSON.parse(s.pivotCount).RowStartPosition,this.engineModule.colStartPos=JSON.parse(s.pivotCount).ColumnStartPosition,this.engineModule.rowFirstLvl=JSON.parse(s.pivotCount).RowFirstLevel,this.engineModule.colFirstLvl=JSON.parse(s.pivotCount).ColumnFirstLevel,this.engineModule.columnPageCount=JSON.parse(s.pivotCount).ColumnPageCount,this.engineModule.rowPageCount=JSON.parse(s.pivotCount).RowPageCount;for(var x=void 0,w=S.a.formatPivotValues(JSON.parse(s.pivotValue)),M=0;M<w.length;M++)if(w[M]&&w[M][0]&&"row"===w[M][0].axis){x=M;break}this.engineModule.headerContent=S.a.frameContent(w,"header",x,this),this.engineModule.pageSettings=this.pageSettings,this.dataSourceSettings.groupSettings.length>0&&S.a.updateReport(this,JSON.parse(s.dataSourceSettings));var _=JSON.parse(s.dataSourceSettings).ValueSortSettings;this.engineModule.valueSortSettings={headerText:_.HeaderText,headerDelimiter:_.HeaderDelimiter,sortOrder:_.SortOrder,columnIndex:_.ColumnIndex},this.engineModule.pivotValues=w,this.engineModule.isEmptyData=0===this.dataSourceSettings.values.length}}catch(e){this.engineModule.pivotValues=[]}if("onScroll"===this.currentAction)if("vertical"===this.scrollDirection){var D="row"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,O=this.pageSettings.rowPageSize*D*this.gridSettings.rowHeight,P=Math.ceil(this.engineModule.rowStartPos/(this.pageSettings.rowPageSize*D)),N=O*P-this.engineModule.rowFirstLvl*D*this.gridSettings.rowHeight;this.scrollPosObject.verticalSection=N}else if("horizondal"===this.scrollDirection){var E="column"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,O=this.pageSettings.columnPageSize*E*this.gridSettings.columnWidth,P=Math.ceil(this.engineModule.colStartPos/(this.pageSettings.columnPageSize*E)),N=O*P-this.engineModule.colFirstLvl*E*this.gridSettings.columnWidth;this.scrollPosObject.horizontalSection=N}"fetchFieldMembers"!==this.currentAction&&"fetchRawData"!==this.currentAction&&(this.initEngine(),this.calculatedFieldModule&&this.calculatedFieldModule.isRequireUpdate&&(this.calculatedFieldModule.endDialog(),this.calculatedFieldModule.isRequireUpdate=!1),this.pivotFieldListModule&&this.pivotFieldListModule.calculatedFieldModule&&this.pivotFieldListModule.calculatedFieldModule.isRequireUpdate&&(this.pivotFieldListModule.calculatedFieldModule.endDialog(),this.pivotFieldListModule.calculatedFieldModule.isRequireUpdate=!1))}},t.prototype.getEngine=function(e,t,i,r,n,a,s,l,d,p){var u=this;this.engineModule.isEmptyData=!1,this.element.querySelector(".e-spin-hide")&&"onExcelExport"!==e&&"onCsvExport"!==e&&this.showWaitingPopup(),this.currentAction=e,this.isServerWaitingPopup=!1;var h={pageSettings:JSON.parse(this.getPageSettings()).pageSettings,enableValueSorting:this.enableValueSorting,enablePaging:this.enablePaging,enableVirtualization:this.enableVirtualization,enableDrillThrough:this.allowDrillThrough||this.editSettings.allowEditing,locale:JSON.stringify(S.a.getLocalizedObject(this))};this.request.open("POST",this.dataSourceSettings.url,!0);var c={request:this.request,dataSourceSettings:JSON.parse(this.getPersistData()).dataSourceSettings,action:e,customProperties:{},internalProperties:h,drillItem:t,sortItem:i,aggregatedItem:r,calculatedItem:n,filterItem:a,memberName:s,fetchRawDataArgs:l,editArgs:d,hash:this.guid,excelExportProperties:p,exportAllPages:this.exportAllPages,isGroupingUpdated:"onRefresh"===this.currentAction&&this.dataSourceSettings.groupSettings.length>0||!!this.groupingModule&&this.groupingModule.isUpdate};this.trigger(o._13,c,function(e){u.request=e.request,c.internalProperties=e.internalProperties,c.customProperties=e.customProperties,c.dataSourceSettings=e.dataSourceSettings,c.calculatedItem=e.calculatedItem,c.drillItem=e.drillItem,c.editArgs=e.editArgs,c.fetchRawDataArgs=e.fetchRawDataArgs,c.filterItem=e.filterItem,c.hash=e.hash,c.memberName=e.memberName,c.sortItem=e.sortItem,c.excelExportProperties=e.excelExportProperties,c.exportAllPages=e.exportAllPages}),this.request.withCredentials=!1,this.request.onreadystatechange=this.onSuccess.bind(this,c.excelExportProperties),"onExcelExport"===c.action||"onCsvExport"===c.action?this.request.responseType="blob":this.request.responseType="",this.request.setRequestHeader("Content-type","application/json"),this.request.send(JSON.stringify(c))},t.prototype.getChartSettings=function(){var e=["chartSettings"],t=this.chartSettings.load,i=this.chartSettings.loaded,r=this.chartSettings.textRender,n=this.chartSettings.pointRender,a=this.chartSettings.seriesRender,o=this.chartSettings.legendRender,s=this.chartSettings.pointClick,l=this.chartSettings.tooltipRender,d=this.chartSettings.legendClick,p=this.chartSettings.multiLevelLabelRender;this.chartSettings.tooltipRender=void 0,this.chartSettings.legendClick=void 0,this.chartSettings.multiLevelLabelRender=void 0,this.chartSettings.load=void 0,this.chartSettings.loaded=void 0,this.chartSettings.textRender=void 0,this.chartSettings.pointRender=void 0,this.chartSettings.seriesRender=void 0,this.chartSettings.legendRender=void 0,this.chartSettings.pointClick=void 0;var u=this.addOnPersist(e);return this.chartSettings.load=t,this.chartSettings.loaded=i,this.chartSettings.textRender=r,this.chartSettings.pointRender=n,this.chartSettings.seriesRender=a,this.chartSettings.legendRender=o,this.chartSettings.pointClick=s,this.chartSettings.tooltipRender=l,this.chartSettings.legendClick=d,this.chartSettings.multiLevelLabelRender=p,u},t.prototype.getPageSettings=function(){var e=["pageSettings"];return this.addOnPersist(e)},t.prototype.onReadyStateChange=function(e){var t=[];if("CSV"===this.dataSourceSettings.type)for(var n=e.split(/\r?\n|\r/),a=0;a<n.length;a++)i.i(r.isNullOrUndefined)(n[a])||""===n[a]||t.push(n[a].split(","));else try{t=JSON.parse(e)}catch(e){t=[]}t&&t.length>0&&this.setProperties({dataSourceSettings:{dataSource:t}},!0),this.initialLoad()},t.prototype.initialLoad=function(){var e=this;try{this.cellTemplateFn=this.templateParser(this.cellTemplate),this.tooltipTemplateFn=this.templateParser(this.tooltipTemplate),this.spinnerTemplate?i.i(a.createSpinner)({target:this.element,template:this.spinnerTemplate,cssClass:this.cssClass?this.cssClass:void 0},this.createElement):i.i(a.createSpinner)({target:this.element,cssClass:this.cssClass?this.cssClass:void 0},this.createElement);var t={dataSourceSettings:this.dataSourceSettings,pivotview:this,fieldsType:{},defaultFieldListOrder:this.defaultFieldListOrder};this.trigger(o.a,t,function(i){e.dataSourceSettings=i.dataSourceSettings,e.fieldsType=i.fieldsType,e.defaultFieldListOrder=t.defaultFieldListOrder,e.updateClass(),e.notify(o._25,{}),"Server"!==e.dataSourceSettings.mode&&e.notify(o._18,{}),e.isAdaptive&&e.contextMenuModule.render(),e.notify(o._30,{}),e.notify(o._31,{})})}catch(e){this.actionFailureMethod(e)}},t.prototype.addInternalEvents=function(){this.on(o._18,this.generateData,this),this.on(o._24,this.renderPivotGrid,this),this.on(o._23,this.onContentReady,this)},t.prototype.removeInternalEvents=function(){this.off(o._18,this.generateData),this.off(o._24,this.renderPivotGrid),this.off(o._23,this.onContentReady)},t.prototype.getPersistData=function(e){var t=["dataSourceSettings","pivotValues","gridSettings","chartSettings","displayOption","pageSettings"],i=this.gridSettings.columnRender,r=this.gridSettings.excelQueryCellInfo,n=this.gridSettings.excelHeaderQueryCellInfo,a=this.gridSettings.pdfQueryCellInfo,o=this.gridSettings.pdfHeaderQueryCellInfo,s=this.chartSettings.load,l=this.chartSettings.loaded,d=this.chartSettings.textRender,p=this.chartSettings.pointRender,u=this.chartSettings.seriesRender,h=this.chartSettings.legendRender,c=this.chartSettings.pointClick,g=this.chartSettings.tooltipRender,f=this.chartSettings.legendClick,v=this.chartSettings.multiLevelLabelRender;this.gridSettings.columnRender=void 0,this.gridSettings.excelQueryCellInfo=void 0,this.gridSettings.excelHeaderQueryCellInfo=void 0,this.gridSettings.pdfQueryCellInfo=void 0,this.gridSettings.pdfHeaderQueryCellInfo=void 0,this.chartSettings.tooltipRender=void 0,this.chartSettings.legendClick=void 0,this.chartSettings.multiLevelLabelRender=void 0,this.chartSettings.load=void 0,this.chartSettings.loaded=void 0,this.chartSettings.textRender=void 0,this.chartSettings.pointRender=void 0,this.chartSettings.seriesRender=void 0,this.chartSettings.legendRender=void 0,this.chartSettings.pointClick=void 0;var S=[];e&&(S=!this.dataSourceSettings.dataSource||this.dataSourceSettings.dataSource instanceof m.DataManager?this.dataSourceSettings.dataSource:this.dataSourceSettings.dataSource.slice(),this.setProperties({dataSourceSettings:{dataSource:[]}},!0));var y=this.addOnPersist(t);return this.gridSettings.columnRender=i,this.gridSettings.excelQueryCellInfo=r,this.gridSettings.excelHeaderQueryCellInfo=n,this.gridSettings.pdfQueryCellInfo=a,this.gridSettings.pdfHeaderQueryCellInfo=o,this.chartSettings.load=s,this.chartSettings.loaded=l,this.chartSettings.textRender=d,this.chartSettings.pointRender=p,this.chartSettings.seriesRender=u,this.chartSettings.legendRender=h,this.chartSettings.pointClick=c,this.chartSettings.tooltipRender=g,this.chartSettings.legendClick=f,this.chartSettings.multiLevelLabelRender=v,e&&this.setProperties({dataSourceSettings:{dataSource:S}},!0),y},t.prototype.loadPersistData=function(e){var t=JSON.parse(e);this.allowServerDataBinding=!1,this.setProperties({gridSettings:t.gridSettings,pivotValues:t.pivotValues,chartSettings:t.chartSettings,displayOption:t.displayOption},!0),"Chart"===t.displayOption.primary?this.currentView="Chart":this.currentView="Table",delete this.bulkChanges.pivotValues,this.allowServerDataBinding=!0,this.dataSourceSettings=t.dataSourceSettings},t.prototype.mergePersistPivotData=function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);i.i(r.isNullOrUndefined)(e)||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.showConditionalFormattingDialog=function(){this.conditionalFormattingModule&&this.conditionalFormattingModule.showConditionalFormattingDialog()},t.prototype.createCalculatedFieldDialog=function(){this.calculatedFieldModule&&this.calculatedFieldModule.createCalculatedFieldDialog()},t.prototype.getModuleName=function(){return"pivotview"},t.prototype.copy=function(e){this.grid.copy(e)},t.prototype.onPropertyChanged=function(t,n){for(var a=!1,s=0,l=Object.keys(t);s<l.length;s++){var d=l[s];switch(d){case"dataSourceSettings":case"hyperlinkSettings":case"allowDrillThrough":case"editSettings":case"allowDataCompression":if(t.dataSourceSettings&&1===Object.keys(t.dataSourceSettings).length&&t.dataSourceSettings.groupSettings&&"pivot"===this.dataType&&this.updateGroupingReport(t.dataSourceSettings.groupSettings,"Date"),t.dataSourceSettings&&1===Object.keys(t.dataSourceSettings).length&&"dataSource"===Object.keys(t.dataSourceSettings)[0])!i.i(r.isNullOrUndefined)(this.savedDataSourceSettings)&&this.dataSourceSettings.dataSource.length>0&&(S.a.updateDataSourceSettings(this,this.savedDataSourceSettings),this.savedDataSourceSettings=void 0),0===(t.dataSourceSettings.dataSource&&t.dataSourceSettings.dataSource).length&&(this.savedDataSourceSettings=S.a.getClonedDataSourceSettings(this.dataSourceSettings),this.setProperties({dataSourceSettings:{rows:[]}},!0),this.setProperties({dataSourceSettings:{columns:[]}},!0),this.setProperties({dataSourceSettings:{values:[]}},!0),this.setProperties({dataSourceSettings:{filters:[]}},!0)),this.isStaticRefresh||(this.pivotValues=[],"pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[]):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0)),this.dataSourceSettings.groupSettings.length>0&&(this.clonedDataSet=t.dataSourceSettings.dataSource,this.updateGroupingReport(this.dataSourceSettings.groupSettings,"Date")),this.showWaitingPopup(),this.notify(o._18,{});else if(S.a.isButtonIconRefesh(d,n,t)){if(this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule){var p=S.a.cloneFieldSettings(this.dataSourceSettings.rows),u=S.a.cloneFieldSettings(this.dataSourceSettings.columns),h=S.a.cloneFieldSettings(this.dataSourceSettings.values),c=S.a.cloneFieldSettings(this.dataSourceSettings.filters);this.pivotFieldListModule.setProperties({dataSourceSettings:{rows:p,columns:u,values:h,filters:c}},!0),this.pivotFieldListModule.axisFieldModule.render(),this.pivotFieldListModule.treeViewModule.fieldTable&&!this.isAdaptive&&this.pivotFieldListModule.notify(o._26,{})}}else this.remoteData=[],"pivot"===this.dataType&&this.dataSourceSettings.url&&""!==this.dataSourceSettings.url&&("type"in t.dataSourceSettings||"url"in t.dataSourceSettings)?(this.engineModule.fieldList=null,this.loadData()):(t.dataSourceSettings&&("pivot"===this.dataType&&"dataSource"in t.dataSourceSettings||"olap"===this.dataType&&"url"in t.dataSourceSettings)&&(this.isStaticRefresh||("pivot"===this.dataType?(this.engineModule.fieldList=null,this.engineModule.isEmptyData=!0,this.engineModule.data=[]):"olap"===this.dataType&&(this.olapEngineModule.fieldList={},this.olapEngineModule.fieldListData=void 0,this.olapEngineModule.isEmptyData=!0),this.pivotValues=[])),this.notify(o._18,{}));break;case"height":case"width":this.layoutRefresh();break;case"pivotValues":case"displayOption":!this.showToolbar&&t.displayOption&&1===Object.keys(t.displayOption).length&&t.displayOption.view?(this.currentView="Both"===t.displayOption.view?this.displayOption.primary:t.displayOption.view,(this.showGroupingBar||this.showFieldList)&&(this.showFieldList&&this.pivotFieldListModule&&(this.pivotFieldListModule.destroyEngine=!0,this.pivotFieldListModule.destroy(),null!==i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)),this.pivotFieldListModule.destroyEngine=!1),this.notify(o._25,this)),this.grid||"Chart"===t.displayOption.view?this.pivotChartModule||"Table"===this.displayOption.view||(this.grid&&(this.grid.destroy(),this.grid=void 0),this.pivotChartModule=new y.a):(this.renderEmptyGrid(),"Table"===t.displayOption.view&&this.pivotChartModule&&(this.destroyEngine=!0,this.pivotChartModule.destroy(),this.destroyEngine=!1,this.chart=void 0,this.pivotChartModule=void 0))):this.showToolbar&&!i.i(r.isNullOrUndefined)(t.displayOption)&&t.displayOption.view&&(this.currentView="Both"===t.displayOption.view?this.displayOption.primary:t.displayOption.view);var g="pivot"===this.dataType?this.engineModule:this.olapEngineModule;i.i(r.isNullOrUndefined)(g.fieldList)&&i.i(r.isNullOrUndefined)(g.pivotValues)||this.notify(o._24,{});break;case"gridSettings":this.lastGridSettings=t.gridSettings,this.isCellBoxMultiSelection=this.gridSettings.allowSelection&&"Box"===this.gridSettings.selectionSettings.cellSelectionMode&&"Cell"===this.gridSettings.selectionSettings.mode&&"Multiple"===this.gridSettings.selectionSettings.type,this.allowGrouping&&this.groupingModule&&!this.isCellBoxMultiSelection&&(this.setProperties({gridSettings:{allowSelection:!0,selectionSettings:{cellSelectionMode:"Box",mode:"Cell",type:"Multiple"}}},!0),this.isCellBoxMultiSelection=!0),this.renderModule.updateGridSettings();break;case"chartSettings":this.showGroupingBar&&this.groupingBarModule&&(-1!==Object.keys(t.chartSettings).indexOf("enableMultipleAxis")||t.chartSettings.chartSeries&&-1!==Object.keys(t.chartSettings.chartSeries).indexOf("type"))&&this.groupingBarModule.renderLayout(),i.i(r.isNullOrUndefined)(this.pivotChartModule)&&"Table"!==this.displayOption.view&&(this.pivotChartModule=new y.a);var m="pivot"===this.dataType?this.engineModule:this.olapEngineModule;i.i(r.isNullOrUndefined)(this.pivotChartModule)||i.i(r.isNullOrUndefined)(m.pivotValues)||this.pivotChartModule.loadChart(this,this.chartSettings),i.i(r.isNullOrUndefined)(m.pivotValues)||i.i(r.isNullOrUndefined)(m.fieldList)||this.notify(o._19,this);break;case"locale":case"currencyCode":case"enableRtl":if(this.tooltip&&this.tooltip.destroy(),this.dataSourceSettings.groupSettings&&this.dataSourceSettings.groupSettings.length>0&&this.clonedDataSet){var f=S.a.getClonedData(this.clonedDataSet);this.setProperties({dataSourceSettings:{dataSource:f}},!0)}e.prototype.refresh.call(this),this.updateClass();break;case"enableValueSorting":this.enableValueSorting=t.enableValueSorting,this.updateDataSource();break;case"showGroupingBar":this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").remove():this.groupingBarModule&&this.groupingBarModule.renderLayout(),i.i(r.isNullOrUndefined)(t.showFieldList)&&this.renderPivotGrid();break;case"showFieldList":this.initialLoad();break;case"groupingBarSettings":this.showGroupingBar&&this.groupingBarModule&&(t.groupingBarSettings&&Object.keys(t.groupingBarSettings).indexOf("showFieldsPanel")>-1?(this.groupingBarModule.RefreshFieldsPanel(),this.layoutRefresh()):this.axisFieldModule.render());break;case"showValuesButton":this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.axisFieldModule&&(this.pivotFieldListModule.setProperties({showValuesButton:t.showValuesButton},!0),this.pivotFieldListModule.axisFieldModule.render());break;case"showTooltip":this.renderToolTip();break;case"toolbar":this.toolbarModule&&this.toolbarModule.refreshToolbar();break;case"chartTypes":this.toolbarModule&&this.toolbarModule.createChartMenu();break;case"aggregateTypes":this.showGroupingBar&&this.groupingBarModule&&this.axisFieldModule&&this.axisFieldModule.render(),this.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.axisFieldModule&&(this.pivotFieldListModule.setProperties({aggregateTypes:t.aggregateTypes},!0),this.pivotFieldListModule.axisFieldModule.render());break;case"enableFieldSearching":this.pivotFieldListModule&&(this.pivotFieldListModule.enableFieldSearching=this.enableFieldSearching);break;case"pageSettings":this.enableVirtualization||(this.engineModule.pageSettings=this.pageSettings,this.refreshPageData());break;case"pagerSettings":case"enablePaging":this.notify(o._31,this);break;case"cellTemplate":this.cellTemplateFn=this.templateParser(this.cellTemplate),a=!0;break;case"tooltipTemplate":this.tooltipTemplateFn=this.templateParser(this.tooltipTemplate),a=!0}}a&&this.grid&&this.grid.refreshColumns()},t.prototype.templateParser=function(e){if(e)try{return"function"!=typeof e&&document.querySelectorAll(e).length?i.i(r.compile)(document.querySelector(e).innerHTML.trim()):i.i(r.compile)(e)}catch(t){return i.i(r.compile)(e)}},t.prototype.getCellTemplate=function(){return this.cellTemplateFn},t.prototype.appendHtml=function(e,t){var n=document.createElement("div");return n.innerHTML=t,i.i(r.isNullOrUndefined)(n.firstChild)||e.appendChild(n.firstChild),e},t.prototype.renderPivotGrid=function(){this.clearTemplate(),this.pivotChartModule&&(this.pivotChartModule.engineModule=this.engineModule,this.pivotChartModule.loadChart(this,this.chartSettings),this.enableRtl&&this.chart&&"rtl"!==document.body.getAttribute("dir")&&i.i(r.addClass)([this.chart.element],s._19)),(this.showFieldList||this.showGroupingBar||this.allowNumberFormatting||this.allowCalculatedField||this.toolbar||this.allowGrouping||this.gridSettings.contextMenuItems)&&(this.notify(o._19,this),this.pivotFieldListModule&&this.allowDeferLayoutUpdate&&(this.pivotFieldListModule.clonedDataSource=i.i(r.extend)({},this.dataSourceSettings,null,!0))),this.enableVirtualization&&(this.virtualscrollModule=new f.a(this)),(this.allowDrillThrough||this.editSettings.allowEditing)&&(this.drillThroughModule=new v.a(this)),this.enablePaging&&this.notify(o._31,this),"Chart"!==this.displayOption.view?(this.hyperlinkSettings&&(this.isRowCellHyperlink=!!this.hyperlinkSettings.showRowHeaderHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isColumnCellHyperlink=!!this.hyperlinkSettings.showColumnHeaderHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isValueCellHyperlink=!!this.hyperlinkSettings.showValueCellHyperlink||!!this.hyperlinkSettings.showHyperlink,this.isSummaryCellHyperlink=!!this.hyperlinkSettings.showSummaryCellHyperlink||!!this.hyperlinkSettings.showHyperlink,this.applyHyperlinkSettings()),this.renderModule=this.renderModule?this.renderModule:new l.a(this),this.renderModule.render(!0)):this.grid&&i.i(r.remove)(this.grid.element),this.allowConditionalFormatting&&this.applyFormatting(this.pivotValues),this.showToolbar&&"Both"===this.displayOption.view&&this.chart&&this.grid&&(this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+s.w)&&this.groupingBarModule.refreshUI(),this.toolbarModule&&this.toolbarModule.toolbar&&(this.toolbarModule.toolbar.width=this.getGridWidthAsNumber()-2),this.chartSettings.enableScrollOnMultiAxis&&this.chartSettings.enableMultipleAxis&&(this.element.querySelector("."+s._10).style.width=i.i(r.formatUnit)(this.getGridWidthAsNumber())),this.chart.width=i.i(r.formatUnit)(this.getGridWidthAsNumber()),"Table"===this.currentView?(this.grid.element.style.display="",this.chart.element.style.display="none",this.chartSettings.enableMultipleAxis&&this.chartSettings.enableScrollOnMultiAxis&&(this.element.querySelector(".e-pivotchart").style.display="none")):(this.grid.element.style.display="none",this.chart.element.style.display="",this.chartSettings.enableMultipleAxis&&this.chartSettings.enableScrollOnMultiAxis&&(this.element.querySelector(".e-pivotchart").style.display=""))),this.toolbarModule&&(this.showFieldList&&i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)&&(this.toolbar&&-1!==this.toolbar.indexOf("FieldList")?i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element).style.display="none":(i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element).style.top=this.element.querySelector("."+s.v).offsetHeight.toString()+"px",i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element).style.position="relative")),this.toolbar&&-1!==this.toolbar.indexOf("FieldList")&&this.showToolbar&&this.element.querySelector(".e-toggle-field-list")&&(this.element.querySelector(".e-toggle-field-list").style.display="none"),this.toolbarModule&&"New"!==this.toolbarModule.action&&"Load"!==this.toolbarModule.action&&"Remove"!==this.toolbarModule.action&&(this.isModified=!0),this.isInitialRendering||(this.isModified=!1,this.isInitialRendering=!this.isInitialRendering),this.toolbarModule.action="")},t.prototype.showWaitingPopup=function(){this.grid&&this.grid.element&&!this.spinnerTemplate&&"Table"===this.currentView?i.i(a.showSpinner)(this.grid.element):i.i(a.showSpinner)(this.element)},t.prototype.hideWaitingPopup=function(){this.grid&&this.grid.element&&!this.spinnerTemplate&&"Table"===this.currentView?i.i(a.hideSpinner)(this.grid.element):i.i(a.hideSpinner)(this.element)},t.prototype.updateDataSource=function(){var e=this;this.showWaitingPopup();var t=this,i=Object.keys(t.lastSortInfo).length>0,r=Object.keys(t.lastFilterInfo).length>0,n=Object.keys(t.lastAggregationInfo).length>0,a=Object.keys(t.lastCalcFieldInfo).length>0,s={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings)};t.trigger(o.b,s,function(o){if((t.enableVirtualization||t.enablePaging)&&(i||r||n||a)||S.a.updateDataSourceSettings(t,o.dataSourceSettings),t.updatePageSettings(!1),"pivot"===t.dataType&&(t.enableVirtualization||t.enablePaging)&&(i||r||n||a))i&&(t.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),"Server"===e.dataSourceSettings.mode?t.getEngine("onSort",null,t.lastSortInfo,null,null,null,null):t.engineModule.onSort(t.lastSortInfo),t.lastSortInfo={}),n&&("Server"===e.dataSourceSettings.mode?t.getEngine("onAggregation",null,null,t.lastAggregationInfo,null,null,null):t.engineModule.onAggregation(t.lastAggregationInfo),t.lastAggregationInfo={}),a&&("Server"===e.dataSourceSettings.mode?t.getEngine("onCalcOperation",null,null,null,t.lastCalcFieldInfo,null,null):t.engineModule.onCalcOperation(t.lastCalcFieldInfo,t.dataSourceSettings),t.lastCalcFieldInfo={}),r&&("Server"===e.dataSourceSettings.mode?t.getEngine("onFilter",null,null,null,null,t.lastFilterInfo,null):t.engineModule.onFilter(t.lastFilterInfo,t.dataSourceSettings),t.lastFilterInfo={}),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),delete t.bulkChanges.pivotValues,t.allowServerDataBinding=!0,"Server"!==t.dataSourceSettings.mode&&t.enginePopulatedEventMethod("updateDataSource");else if("olap"===t.dataType){var s={mode:"",savedFieldList:t.olapEngineModule.fieldList,savedFieldListData:t.olapEngineModule.fieldListData,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,enableVirtualization:e.enableVirtualization};a||i?(t.olapEngineModule.savedFieldList=t.olapEngineModule.fieldList,t.olapEngineModule.savedFieldListData=t.olapEngineModule.fieldListData,a?(t.olapEngineModule.updateCalcFields(t.dataSourceSettings,t.lastCalcFieldInfo),t.lastCalcFieldInfo={}):(t.olapEngineModule.onSort(t.dataSourceSettings),t.lastSortInfo={})):t.olapEngineModule.renderEngine(t.dataSourceSettings,s,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.olapEngineModule.pivotValues},!0),delete t.bulkChanges.pivotValues,t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("updateDataSource")}else{var s={mode:"",savedFieldList:t.engineModule.fieldList,pageSettings:t.pageSettings,enableValueSorting:t.enableValueSorting,isDrillThrough:t.allowDrillThrough||t.editSettings.allowEditing,localeObj:t.localeObj,fieldsType:t.fieldsType,clonedReport:t.clonedReport,globalize:t.globalize,currenyCode:t.currencyCode,enablePaging:e.enablePaging,enableVirtualization:e.enableVirtualization,allowDataCompression:e.allowDataCompression,enableHtmlSanitizer:e.enableHtmlSanitizer};"Server"===t.dataSourceSettings.mode?i?t.getEngine("onSort",null,t.lastSortInfo,null,null,null,null):n?t.getEngine("onAggregation",null,null,t.lastAggregationInfo,null,null,null):a?t.getEngine("onCalcOperation",null,null,null,t.lastCalcFieldInfo,null,null):r?t.getEngine("onFilter",null,null,null,null,t.lastFilterInfo,null):t.getEngine("onDrop",null,null,null,null,null,null):(i&&""!==t.dataSourceSettings.valueSortSettings.headerText&&t.setProperties({dataSourceSettings:{valueSortSettings:{headerText:""}}},!0),t.engineModule.renderEngine(t.dataSourceSettings,s,t.aggregateCellInfo?t.getValueCellInfo.bind(t):void 0,t.onHeadersSort?t.getHeaderSortInfo.bind(t):void 0),t.allowServerDataBinding=!1,t.setProperties({pivotValues:t.engineModule.pivotValues},!0),delete t.bulkChanges.pivotValues,t.allowServerDataBinding=!0,t.enginePopulatedEventMethod("updateDataSource")),t.lastSortInfo={},t.lastAggregationInfo={},t.lastCalcFieldInfo={},t.lastFilterInfo={}}})},t.prototype.refreshPageData=function(){var e={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings)};this.actionBeginMethod(),this.showWaitingPopup(),this.trigger(o.b,e),"pivot"===this.dataType&&("Server"===this.dataSourceSettings.mode?this.getEngine("onPageChange",null,null,null,null,null,null):this.engineModule.generateGridData(this.dataSourceSettings,!0,this.engineModule.headerCollection),this.setProperties({pivotValues:this.engineModule.pivotValues},!0),this.enginePopulatedEventMethod("updateDataSource")),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionCompleteMethod()},t.prototype.excelExport=function(e,t,i,r,n){if(n&&"Server"===this.dataSourceSettings.mode)this.getEngine("onExcelExport",null,null,null,null,null,null,null,null,e);else{(this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0)&&"Server"!==this.dataSourceSettings.mode?this.excelExportModule.exportToExcel("Excel",e,r):(this.exportType="Excel",this.grid.excelExport(e,t,i,r)),this.actionObj.actionName=this.getActionCompleteName();var a={exportInfo:{type:this.exportType,info:e}};this.actionObj.actionInfo=a,this.actionObj.actionName&&this.actionCompleteMethod()}},t.prototype.csvExport=function(e,t,i,r,n){if(n&&"Server"===this.dataSourceSettings.mode)this.getEngine("onCsvExport",null,null,null,null,null,null,null,null,e);else{(this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0)&&"Server"!==this.dataSourceSettings.mode?this.excelExportModule.exportToExcel("CSV",e,r):(this.exportType="CSV",this.grid.csvExport(e,t,i,r)),this.actionObj.actionName=this.getActionCompleteName();var a={exportInfo:{type:this.exportType,info:e}};this.actionObj.actionInfo=a,this.actionObj.actionName&&this.actionCompleteMethod()}},t.prototype.gridPdfExport=function(e,t,i,r){var n={pdfExportProperties:e,isMultipleExport:t,isBlob:r,pdfDoc:i,currentExportView:"Table",pdfMargins:{}},a=null;this.trigger(o.h,n),this.pdfExportModule&&(this.pdfExportModule.exportProperties=n),a=(this.enableVirtualization||this.enablePaging||this.allowEngineExport||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0||n.height||n.width||Object.keys(n.pdfMargins).length>0)&&("Server"!==this.dataSourceSettings.mode||this.allowConditionalFormatting&&this.dataSourceSettings.conditionalFormatSettings.length>0&&(this.enableVirtualization||this.enablePaging)&&"Server"===this.dataSourceSettings.mode)?this.pdfExportModule.exportToPDF(n.pdfExportProperties,n.isMultipleExport,n.pdfDoc,n.isBlob):this.grid.pdfExport(n.pdfExportProperties,n.isMultipleExport,n.pdfDoc,n.isBlob),this.actionObj.actionName=this.getActionCompleteName();var s={exportInfo:{type:"PDF",info:e}};return this.actionObj.actionInfo=s,this.actionObj.actionName&&this.actionCompleteMethod(),a},t.prototype.chartExport=function(e,t,n,a,s){var l={pdfExportProperties:t,isMultipleExport:n,isBlob:s,pdfDoc:a,type:e,currentExportView:"Chart",pdfMargins:{}};this.trigger(o.h,l),this.chartExportModule.exportProperties=l;var d,p=l.fileName?l.fileName:i.i(r.isNullOrUndefined)(t)||i.i(r.isNullOrUndefined)(t.fileName)?"default":t.fileName;if("PDF"===e)d=this.chartExportModule.pdfChartExport(l.pdfExportProperties,l.pdfDoc,l.isMultipleExport,l.isBlob);else{var u=0===l.orientation||l.orientation?l.orientation:i.i(r.isNullOrUndefined)(t)||i.i(r.isNullOrUndefined)(t.pageOrientation)?C.PdfPageOrientation.Landscape:"Landscape"===t.pageOrientation?C.PdfPageOrientation.Landscape:C.PdfPageOrientation.Portrait;d=this.chart.exportModule.export(l.type,p,u,null)}this.actionObj.actionName=this.getActionCompleteName();var h={exportInfo:{type:e,info:p}};return this.actionObj.actionInfo=h,this.actionObj.actionName&&this.actionCompleteMethod(),d},t.prototype.pdfExport=function(e,t,i,r,n){var a=this,o=null;return new Promise(function(s){if(n&&"Both"===a.displayOption.view)if("Chart"===a.displayOption.primary){var l=a.chartExport("PDF",e,!0,i,!1);l.then(function(i){o=a.gridPdfExport(e,t,i,r),s(o)})}else{var d=a.gridPdfExport(e,!0,i,!1);d.then(function(i){o=a.chartExport("PDF",e,t,i,r),s(o)})}else{var p=a.gridPdfExport(e,t,i,r);s(p)}})},t.prototype.printChart=function(){this.chart&&this.chart.print()},t.prototype.onDrill=function(e,t){var n=this,a=this.dataSourceSettings.drilledMembers[0]&&this.dataSourceSettings.drilledMembers[0].delimiter?this.dataSourceSettings.drilledMembers[0].delimiter:"**",l="",d="",p="";if(t?(l=t.fieldName,d=t.cell.axis,p=t.isDrilled?"up":"down"):(d=e.parentElement.classList.contains(s._20)?"row":"column",l="row"===d?i.i(r.closest)(e,"td").getAttribute("fieldname"):i.i(r.closest)(e,"th").getAttribute("fieldname"),p=e.classList.contains(s._21)?"up":"down"),"pivot"===this.dataType){var u=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),h="row"===d?Number(i.i(r.closest)(e,"td").getAttribute("data-colindex")):Number(i.i(r.closest)(e,"th").getAttribute("data-colindex")),c="row"===d?Number(i.i(r.closest)(e,"td").getAttribute("index")):Number(i.i(r.closest)(e,"th").getAttribute("index")),g=t?t.cell:this.engineModule.pivotValues[c][h],m=g.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(a),f=!1;if(0===this.dataSourceSettings.drilledMembers.length)this.setProperties({dataSourceSettings:{drilledMembers:[{name:l,items:[m],delimiter:a}]}},!0);else{for(var v=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers),y=0;y<v.length;y++){var b=v[y];if(m=m.split(a).join(b.delimiter?b.delimiter:a),a=b.delimiter=b.delimiter?b.delimiter:a,b.name===l){f=!0;var C=b.items.indexOf(m);C>-1?b.items.splice(C,1):b.items.push(m)}}this.setProperties({dataSourceSettings:{drilledMembers:v}},!0),f||this.dataSourceSettings.drilledMembers.push({name:l,items:[m],delimiter:a})}this.showWaitingPopup();var x=this,w={fieldName:l,memberName:m,delimiter:a,axis:d,action:p,currentCell:g},T={drillInfo:w,pivotview:x,cancel:!1};x.trigger(o.z,T,function(e){if(e.cancel)n.hideWaitingPopup(),n.setProperties({dataSourceSettings:{drilledMembers:u}},!0);else{var t={dataSourceSettings:S.a.getClonedDataSourceSettings(n.dataSourceSettings)};x.trigger(o.b,t),x.setProperties({dataSourceSettings:t.dataSourceSettings},!0),x.enableVirtualization||x.enablePaging?"Server"===n.dataSourceSettings.mode?n.getEngine("onDrill",w,null,null,null,null,null):(x.engineModule.drilledMembers=x.dataSourceSettings.drilledMembers,x.engineModule.onDrill(w)):"Server"===n.dataSourceSettings.mode?n.getEngine("onDrill",w,null,null,null,null,null):x.engineModule.generateGridData(x.dataSourceSettings,!0),x.allowServerDataBinding=!1,x.setProperties({pivotValues:x.engineModule.pivotValues},!0),delete x.bulkChanges.pivotValues,x.allowServerDataBinding=!0;var i={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:n.pivotValues};n.trigger(o.c,i),x.engineModule.pivotValues=i.pivotValues;var r={drillInfo:w};n.actionObj.actionInfo=r,x.renderPivotGrid()}})}else this.onOlapDrill(l,d,p,a,e,t)},t.prototype.onOlapDrill=function(e,t,n,a,s,l){var d,p=this,u=this,h=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers);if(l)d=l.cell;else{var c="row"===t?Number(i.i(r.closest)(s,"td").getAttribute("data-colindex")):Number(i.i(r.closest)(s,"th").getAttribute("data-colindex")),g="row"===t?Number(i.i(r.closest)(s,"td").getAttribute("index")):Number(i.i(r.closest)(s,"th").getAttribute("index"));d=this.olapEngineModule.pivotValues[g][c]}var m="row"===t?this.olapEngineModule.tupRowInfo[d.ordinal]:this.olapEngineModule.tupColumnInfo[d.ordinal],f={axis:t,action:n,fieldName:e,delimiter:"~~",memberName:m.uNameCollection,currentCell:d};this.showWaitingPopup();var v={drillInfo:f,pivotview:u,cancel:!1},y=this.olapEngineModule.fieldList[f.fieldName]&&this.olapEngineModule.fieldList[f.fieldName].isHierarchy,b=m.drillInfo.map(function(e){return e.hierarchy}).indexOf(d.hierarchy.toString()),C=S.a.cloneDrillMemberSettings(this.dataSourceSettings.drilledMembers);if(f&&"down"===f.action){for(var x=m.drillInfo.map(function(e){return e.uName}),w="",T=0;T<=b;T++){var M=x[T],_=M.split("~~");w=w+(""!==w?"~~":"")+_[_.length-1]}for(var D=this.olapEngineModule.getDrilledSets(f.memberName,d,this.olapEngineModule.fieldList[d.hierarchy]&&!this.olapEngineModule.fieldList[d.hierarchy].hasAllMember?d.valueSort.levelName.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length-1:b,t),O=Object.keys(D),P=0,N=O;P<N.length;P++)for(var E=N[P],I=D[E],F=0,L=C.length;F<L;F++){var A=C[F],R=I;A.delimiter&&(R=R.replace(/~~/g,A.delimiter));for(var k=[],j=0;j<A.items.length;j++)0!==A.items[j].indexOf(R)&&(k[k.length]=A.items[j]);A.items=k}this.olapEngineModule.drilledSets[d.actualText]=m.members[b],f.memberName=w;for(var H=[],q=0,V=C;q<V.length;q++){var M=V[q];M.name===f.fieldName&&H.push(M)}if(H.length>0){H[0].delimiter&&(w=w.replace(/~~/g,H[0].delimiter));var B=S.a.inArray(w,H[0].items);if(-1===B&&H[0].items.push(w),y)for(var F=0;F<H[0].items.length;)H[0].items[F]===w?H[0].items.splice(F,1):++F}else if(!y){var U={name:f.fieldName,items:[w],delimiter:"~~"};C?C.push(U):C=[U]}v.drillInfo.memberName=w,this.setProperties({dataSourceSettings:{drilledMembers:C}},!0),u.trigger(o.z,v,function(e){if(e.cancel)p.hideWaitingPopup(),p.setProperties({dataSourceSettings:{drilledMembers:h}},!0);else{var t={dataSourceSettings:S.a.getClonedDataSourceSettings(p.dataSourceSettings)};p.trigger(o.b,t),p.setProperties({dataSourceSettings:t.dataSourceSettings},!0),p.olapEngineModule.updateDrilledInfo(p.dataSourceSettings),p.allowServerDataBinding=!1,p.setProperties({pivotValues:p.olapEngineModule.pivotValues},!0),delete p.bulkChanges.pivotValues,p.allowServerDataBinding=!0;var i={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:u.olapEngineModule.pivotValues};p.trigger(o.c,i),p.olapEngineModule.pivotValues=i.pivotValues,p.renderPivotGrid()}})}else{delete this.olapEngineModule.drilledSets[d.actualText];for(var D=this.olapEngineModule.getDrilledSets(f.memberName,d,b,t),O=Object.keys(D),x=m.drillInfo.map(function(e){return e.uName}),w="",T=0;T<=b;T++){var M=x[T],_=M.split("~~");w=w+(""!==w?"~~":"")+_[_.length-1]}for(var G=0,z=O;G<z.length;G++){for(var E=z[G],I=D[E],W=[],F=0,L=C.length;F<L;F++){var H=C[F],Q=I;if(H.name===f.fieldName&&W.push(H),H.delimiter&&(Q=I.replace(/~~/g,H.delimiter)),!y){for(var k=[],j=0;j<H.items.length;j++)0!==H.items[j].indexOf(Q)&&(k[k.length]=H.items[j]);H.items=k}}if(y)if(W.length>0){W[0].delimiter&&(w=w.replace(/~~/g,W[0].delimiter));var B=S.a.inArray(w,W[0].items);-1===B&&W[0].items.push(w)}else{var U={name:f.fieldName,items:[w],delimiter:"~~"};C?C.push(U):C=[U]}}for(var Y=[],K=0,X=C;K<X.length;K++){var J=X[K];J.items.length>0&&Y.push(J)}this.setProperties({dataSourceSettings:{drilledMembers:C}},!0),u.trigger(o.z,v,function(e){if(e.cancel)p.hideWaitingPopup(),p.setProperties({dataSourceSettings:{drilledMembers:h}},!0);else{var t={dataSourceSettings:S.a.getClonedDataSourceSettings(p.dataSourceSettings)};p.trigger(o.b,t),p.setProperties({dataSourceSettings:t.dataSourceSettings},!0),p.setProperties({dataSourceSettings:{drilledMembers:Y}},!0),p.olapEngineModule.updateDrilledInfo(p.dataSourceSettings),p.allowServerDataBinding=!1,p.setProperties({pivotValues:p.olapEngineModule.pivotValues},!0),delete p.bulkChanges.pivotValues,p.allowServerDataBinding=!0;var i={dataSourceSettings:S.a.getClonedDataSourceSettings(t.dataSourceSettings),pivotValues:u.olapEngineModule.pivotValues};p.trigger(o.c,i),p.olapEngineModule.pivotValues=i.pivotValues,p.renderPivotGrid()}})}},t.prototype.onContentReady=function(){var e=i.i(h.getScrollBarWidth)();this.isPopupClicked=!1,this.showFieldList&&this.pivotFieldListModule?(this.pivotFieldListModule.element.style.display="block",i.i(a.hideSpinner)(this.pivotFieldListModule.fieldListSpinnerElement)):this.fieldListSpinnerElement&&i.i(a.hideSpinner)(this.fieldListSpinnerElement),this.isEmptyGrid?(this.isEmptyGrid=!1,this.notEmpty=!0):("Server"===this.dataSourceSettings.mode&&this.isServerWaitingPopup||"Local"===this.dataSourceSettings.mode)&&this.hideWaitingPopup();var t=this.element.querySelector("."+s._22)?this.element.querySelector("."+s._22):this.element.querySelector("."+s._23),n=this.element.querySelector("."+s._24);if(this.grid){var l=this.element.querySelector("."+s._25),d=t.parentElement.offsetWidth<t.querySelector("."+s._26).offsetWidth,p="pivot"===this.dataType?this.engineModule:this.olapEngineModule;if(this.enableVirtualization&&p){this.element.querySelector("."+s._23)&&!this.element.querySelector("."+s._23).querySelector("."+s._27)&&(this.virtualDiv=i.i(r.createElement)("div",{className:s._27}),this.element.querySelector("."+s._23).appendChild(this.virtualDiv)),this.element.querySelector("."+s._24)&&!this.element.querySelector("."+s._24).querySelector("."+s._27)?(this.virtualHeaderDiv=i.i(r.createElement)("div",{className:s._27}),this.element.querySelector("."+s._24).appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=this.element.querySelector("."+s._24).querySelector("."+s._27);var u=l.querySelector("."+s._28);if(l&&!u){this.virtualTableDiv=i.i(r.createElement)("div",{className:s._28}),l.appendChild(this.virtualTableDiv),u=l.querySelector("."+s._28),this.virtualScrollDiv=i.i(r.createElement)("div",{className:s._29}),u.appendChild(this.virtualScrollDiv),i.i(r.setStyleAttribute)(u,{minHeight:e+"px",maxHeight:e+"px",overflowX:"scroll"}),i.i(r.setStyleAttribute)(this.virtualScrollDiv,{height:"0.1px"});var c=i.i(r.createElement)("div",{className:s._22});c.append.apply(c,t.childNodes),t.appendChild(c),c.scrollLeft=0}var g=this.element.querySelector("."+s._23).querySelector("."+s._26),m=this.gridSettings.rowHeight*p.rowCount+.1-g.clientHeight;m>this.scrollerBrowserLimit&&(this.verticalScrollScale=m/this.scrollerBrowserLimit,m=this.scrollerBrowserLimit);var f=this.gridSettings.columnWidth*p.columnCount;f>this.scrollerBrowserLimit&&(this.horizontalScrollScale=f/this.scrollerBrowserLimit,f=this.scrollerBrowserLimit),i.i(r.setStyleAttribute)(this.virtualDiv,{height:(m>.1?m:.1)+"px",width:(f>.1?f:.1)+"px"}),i.i(r.setStyleAttribute)(this.virtualHeaderDiv,{height:0,width:(f>.1?f:.1)+"px"}),this.isAdaptive&&(t.style.minHeight="1px",t.style.minHeight="1px");var v=this.isAdaptive?t:l.querySelector("."+s._28)?l.querySelector("."+s._28):t,S=t.parentElement.scrollTop>this.scrollerBrowserLimit?t.querySelector("."+s._26).style.transform.split(",")[1].trim():-(t.parentElement.scrollTop*this.verticalScrollScale-this.scrollPosObject.verticalSection-t.parentElement.scrollTop)+"px)",y=Math.abs(v.scrollLeft),b=y>this.scrollerBrowserLimit?t.querySelector("."+s._26).style.transform.split(",")[0].trim()+",":"translate("+(this.enableRtl?1:-1)*(y*this.horizontalScrollScale-this.scrollPosObject.horizontalSection-y)+"px,";i.i(r.setStyleAttribute)(t.querySelector("."+s._26),{transform:b+S}),i.i(r.setStyleAttribute)(n.querySelector("."+s._26),{transform:b+0+"px)"}),!d&&l&&u||this.isAdaptive?u.style.display="none":u.style.display="block";for(var C=Number(-t.querySelector("."+s._26).style.transform.split("(")[1].split(",")[0].split("px")[0]),x=0,w=this.element.querySelectorAll("."+s._30);x<w.length;x++)this.enableRtl?w[x].style.right=-C+"px":w[x].style.left=C+"px";if(d){var T=0;T=this.pivotColumns.length<25?f+t.querySelector("."+s._26).querySelector("."+s._30).offsetWidth+(l.offsetWidth-l.clientWidth):f+(l.offsetWidth-l.clientWidth),"auto"!==this.grid.height?this.grid.element.querySelector("."+s._29).style.width=T+e+"px":this.grid.element.querySelector("."+s._29).style.width=T+"px"}var M="pivot"===this.dataType&&"column"===this.dataSourceSettings.valueAxis?this.dataSourceSettings.values.length:1,_=this.pageSettings.columnPageSize*M*this.gridSettings.columnWidth,D=v.scrollWidth-(Math.abs(y)+v.offsetWidth);if(this.virtualscrollModule&&_>0&&D<=_&&y>0){var O=t.scrollWidth-(Math.abs(t.scrollLeft)+t.parentElement.offsetWidth);O<1&&"horizondal"===this.scrollDirection&&(this.virtualDiv.style.display="none",O=t.scrollWidth-(Math.abs(t.scrollLeft)+t.parentElement.offsetWidth)),this.virtualDiv.style.display="";var P=t.scrollWidth-(Math.abs(t.scrollLeft)+t.parentElement.offsetWidth);O>1&&(this.scrollPosObject.horizontalSection-=D<=0?O>D?O:-P:P===O?O-D:O<P&&(D===P||D>O)?-(P-O):0,"auto"!==this.grid.height&&(this.scrollPosObject.horizontalSection-=e),this.scrollPosObject.horizontalSection=this.scrollPosObject.horizontalSection>=-this.element.querySelector("."+s._31).querySelector("."+s._32+"."+s._30).offsetWidth?this.scrollPosObject.horizontalSection:-this.element.querySelector("."+s._31).querySelector("."+s._32+"."+s._30).offsetWidth),b=y>this.scrollerBrowserLimit?t.querySelector("."+s._26).style.transform.split(",")[0].trim()+",":"translate("+(this.enableRtl?1:-1)*(y*this.horizontalScrollScale-this.scrollPosObject.horizontalSection-y)+"px,",i.i(r.setStyleAttribute)(t.querySelector("."+s._26),{transform:b+S}),i.i(r.setStyleAttribute)(n.querySelector("."+s._26),{transform:b+0+"px)"}),C=Number(-t.querySelector("."+s._26).style.transform.split("(")[1].split(",")[0].split("px")[0]);for(var x=0,w=this.element.querySelectorAll("."+s._30);x<w.length;x++)this.enableRtl?w[x].style.right=-C+"px":w[x].style.left=C+"px"}}"Chart"!==this.currentView&&this.grid.hideScroll(),this.showGroupingBar?(this.element.style.minWidth="400px",this.grid.element.style.minWidth="400px"):(this.element.style.minWidth="310px",this.grid.element.style.minWidth="310px")}this.unwireEvents(),this.wireEvents(),this.isChartLoaded=!1,this.isEmptyGrid||this.trigger(o.o),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionObj.actionName!==o._80&&this.actionCompleteMethod(),this.groupingModule&&(this.groupingModule.isUpdate=!1),this.engineModule&&this.engineModule.clearProperties(),this.virtualscrollModule&&this.grid&&this.virtualscrollModule.onHorizondalScroll(n,t)},t.prototype.setToolTip=function(e){var t=this,n=Number(e.target.getAttribute("data-colindex")),a=Number(e.target.getAttribute("index")),o=this.dataSourceSettings.values.length>0&&this.pivotValues&&this.pivotValues[a]&&this.pivotValues[a][n]?this.pivotValues[a][n]:void 0;this.tooltip.content="";var l,d,p=!1;if(o&&"olap"===this.dataType){var u=o.actualText;if(!i.i(r.isNullOrUndefined)(u)&&this.olapEngineModule.fieldList&&!this.olapEngineModule.fieldList[u]){var h=this.olapEngineModule.tupRowInfo;u=o.rowOrdinal>-1&&h.length>0&&h[o.rowOrdinal]&&!i.i(r.isNullOrUndefined)(h[o.rowOrdinal].measureName)?h[o.rowOrdinal].measureName:u}if(this.olapEngineModule.fieldList&&this.olapEngineModule.fieldList[u]){var c=this.olapEngineModule.fieldList[u];l=c.isCalculatedField?c.type:c.aggregateType,d=this.olapEngineModule.dataFields[u]&&this.olapEngineModule.dataFields[u].caption?this.olapEngineModule.dataFields[u].caption:c.caption,p=!0}}else if(o&&this.engineModule.fieldList&&this.engineModule.fieldList[o.actualText]){var c=this.engineModule.fieldList[o.actualText];l=c.aggregateType,l="DistinctCount"===l||"number"===c.type&&"include"!==c.type&&"exclude"!==c.type?void 0===l?"Sum":c.aggregateType:"Count",d=c.caption,p=!0}if(o&&p){var g=this.getRowText(a,0),m=this.getColText(0,n,a),f=""===o.formattedText?this.localeObj.getConstant("noValue"):o.formattedText;if(this.tooltipTemplate&&void 0!==this.getTooltipTemplate()){var v=this.getHeaderField(a,n,"row"),S=this.getHeaderField(a,n,"column"),y={rowHeaders:g,columnHeaders:m,aggregateType:l,valueField:d,value:f,rowFields:v,columnFields:S};if("function"==typeof this.tooltipTemplate&&this.isReact){var b=document.createElement("div");this.getTooltipTemplate()(y,this,"tooltipTemplate",this.element.id+"tooltipTemplate",null,null,b),this.renderReactTemplates(function(){t.enableHtmlSanitizer?t.tooltip.content=r.SanitizeHtmlHelper.sanitize(b.outerHTML):t.tooltip.content=b.outerHTML})}else{var C=this.getTooltipTemplate()(y,this,"tooltipTemplate",this.element.id+"tooltipTemplate")[0].outerHTML;this.enableHtmlSanitizer?this.tooltip.content=r.SanitizeHtmlHelper.sanitize(C):this.tooltip.content=C}}else{var x="<div class="+s._33+"><p class="+s._34+">"+this.localeObj.getConstant("row")+":</p><p class="+s._35+">"+g+"</p></br><p class="+s._34+">"+this.localeObj.getConstant("column")+":</p><p class="+s._35+">"+m+"</p></br>"+(""!==o.actualText?"<p class="+s._34+">"+("olap"===this.dataType?"":this.localeObj.getConstant(l)+" "+this.localeObj.getConstant("of")+" ")+d+":</p><p class="+s._35+">"+f+"</p></div>":""),w=function(){return x};this.tooltip.content=i.i(r.initializeCSPTemplate)(w)}}else e.cancel=!0},t.prototype.getTooltipTemplate=function(){return this.tooltipTemplateFn},t.prototype.getHeaderField=function(e,t,i){var r,n="",a="olap"===this.dataType?this.olapEngineModule:this.engineModule,o=a.valueSortSettings.headerDelimiter;if("row"===i){r=this.pivotValues[e][0].valueSort.levelName.toString().split(o).length;for(var s=0;s<r&&this.dataSourceSettings.rows.length>0&&this.dataSourceSettings.rows[s];s++)n+=(s?" - ":"")+(this.dataSourceSettings.rows[s].caption?this.dataSourceSettings.rows[s].caption:this.dataSourceSettings.rows[s].name)}else{if(this.dataSourceSettings.columns.length>0){var l=0===this.dataSourceSettings.values.length?0:Number(Object.keys(a.headerContent)[Object.keys(a.headerContent).length-1]);r=this.pivotValues[l][t].valueSort.levelName.toString().split(o).length,r=this.dataSourceSettings.values.length>1?r-1:r}for(var d=0;d<r&&this.dataSourceSettings.columns.length>0&&this.dataSourceSettings.columns[d];d++)n+=(d?" - ":"")+(this.dataSourceSettings.columns[d].caption?this.dataSourceSettings.columns[d].caption:this.dataSourceSettings.columns[d].name)}return n},t.prototype.getLevel=function(e){var t=e.valueSort?e.valueSort.levelName.toString():"",i=e.actualText?e.actualText.toString().split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,r=t.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).length-(i?i-1:i);return r?r-1:0},t.prototype.getRowText=function(e,t){var n=this.pivotValues[e][t],a="";if(n){var o=this.getLevel(n);if(a="grand sum"===n.type?this.localeObj.getConstant("grandTotal"):n.formattedText,"row"===this.dataSourceSettings.valueAxis)a=0===this.dataSourceSettings.rows.length&&this.dataSourceSettings.values.length>1?this.pivotValues[e][0].valueSort.levelName.toString().slice((this.localeObj.getConstant("grandTotal")+this.dataSourceSettings.valueSortSettings.headerDelimiter).length).toString():1===this.dataSourceSettings.values.length?i.i(r.isNullOrUndefined)(this.dataSourceSettings.values[0].caption)?this.dataSourceSettings.values[0].name:this.dataSourceSettings.values[0].caption:this.pivotValues[e][0].valueSort.levelName.toString(),a=a.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ");else for(;o>0||void 0===n.index;)e--,n=this.pivotValues[e][t],void 0!==n.index&&o>n.level&&(a=a+this.dataSourceSettings.valueSortSettings.headerDelimiter+n.formattedText,o-=1);a=a.split(this.dataSourceSettings.valueSortSettings.headerDelimiter).reverse().join(" - ")}return a},t.prototype.getColText=function(e,t,i){for(var r=this.pivotValues[0][t],n=r.axis,a="grand sum"===r.type?this.localeObj.getConstant("grandTotal"):r.formattedText;"value"!==n&&i>e;)e++,this.pivotValues[e]&&(r=this.pivotValues[e][t],n=r.axis,"sum"!==r.type&&"grand sum"!==r.type&&"value"!==n&&(a=a+" - "+r.formattedText));return a},t.prototype.updateClass=function(){this.enableRtl?i.i(r.addClass)([this.element],s._36):i.i(r.removeClass)([this.element],s._36),this.isAdaptive?i.i(r.addClass)([this.element],s._37):i.i(r.removeClass)([this.element],s._37),this.cssClass&&i.i(r.addClass)([this.element],this.cssClass.split(" "))},t.prototype.mouseRclickHandler=function(e){3===e.which?this.lastCellClicked=e.target:0===e.which&&(this.lastCellClicked=e.target),this.lastCellClicked=e.target},t.prototype.mouseDownHandler=function(e){3===e.which&&(this.lastCellClicked=e.target),this.isCellBoxMultiSelection&&(this.isMouseDown=!0,this.isMouseUp=!1,this.lastSelectedElement=void 0)},t.prototype.mouseMoveHandler=function(e){var t=this;if(this.isCellBoxMultiSelection&&(e.preventDefault(),this.isMouseDown&&e.target)){var n=e.target,a=n.parentElement.classList.contains(s._20)||n.classList.contains(s._20)?"row":"column";if(n="column"===a?i.i(r.closest)(n,"th"):i.i(r.closest)(n,"td")){var l=Number(n.getAttribute("data-colindex")),d=Number(n.getAttribute("index")),p={cancel:!1,isCellClick:!0,currentCell:n,data:this.pivotValues[d][l]};this.trigger(o.y,p,function(e){if(!e.cancel){t.grid.clearSelection();var i=t.parentAt(n,"TH");t.lastSelectedElement&&t.lastSelectedElement!==i&&i.classList.contains(s.c)?(t.lastSelectedElement.classList.remove(s._38),t.lastSelectedElement.classList.remove(s.c),t.lastSelectedElement=i):(t.lastSelectedElement=i,i.classList.add(s._38),i.classList.add(s.c)),t.renderModule.selected()}})}}},t.prototype.mouseUpHandler=function(e){this.isCellBoxMultiSelection&&(this.isMouseDown=!1,this.isMouseUp=!0)},t.prototype.parentAt=function(e,t){for(;e.tagName!==t&&e.parentElement;)e=e.parentElement;return e},t.prototype.mouseClickHandler=function(e){3===e.which?this.lastCellClicked=e.target:0===e.which&&(this.lastCellClicked=e.target);var t=e.target;if(!i.i(r.closest)(t,"."+s._39)){var n=null,a=t.parentElement.classList.contains(s._20)||t.classList.contains(s._20)?"row":"column";if(n="column"===a?i.i(r.closest)(t,"th"):i.i(r.closest)(t,"td"),"column"!==a||n||"Row"===this.gridSettings.selectionSettings.mode||(n=i.i(r.closest)(t,"td")),t.classList.contains(s._21)||t.classList.contains(s._40)||!this.enableValueSorting||"pivot"!==this.dataType){if(!t.classList.contains(s._21)&&!t.classList.contains(s._40))return void this.cellClicked(t,n,e);var l=t.parentElement.getAttribute("fieldname"),d=S.a.getFieldInfo(l,this),p=t.classList.contains(s._21)?this.actionObj.actionName=o._35:t.classList.contains(s._40)?this.actionObj.actionName=o._36:"";if(this.actionObj.actionName=p,this.actionObj.fieldInfo=d.fieldItem,this.actionBeginMethod())return;try{this.onDrill(t)}catch(e){this.actionFailureMethod(e)}}else{this.cellClicked(t,n,e);try{if(n&&(n.parentElement.parentElement.parentElement.parentElement.classList.contains(s._41)&&"column"===this.dataSourceSettings.valueAxis||n.parentElement.classList.contains("e-row")&&"row"===this.dataSourceSettings.valueAxis&&(n.classList.contains("e-rowsheader")||n.classList.contains("e-stot")))){var u=n.getAttribute("fieldname"),d=S.a.getFieldInfo(u,this);if(this.actionObj.actionName=o._34,this.actionObj.fieldInfo=d.fieldItem,this.actionBeginMethod())return;var h=Number(n.getAttribute("data-colindex")),c=Number(n.getAttribute("index"));if("row"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)){var g=this.pivotValues[c][h];if(-1===this.dataSourceSettings.valueIndex)c="value"===g.type?c:c+1;else{c=this.getLevel(g)<=this.engineModule.measureIndex&&g.members&&g.members.length>0?g.members[0].rowIndex:c}}else"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(h=Number(n.getAttribute("data-colindex"))+Number(n.getAttribute("aria-colspan"))-1,c=this.engineModule.headerContent.length-1);this.setProperties({dataSourceSettings:{valueSortSettings:{columnIndex:Number(n.getAttribute("data-colindex"))+Number(n.getAttribute("aria-colspan"))-1,sortOrder:"Descending"===this.dataSourceSettings.valueSortSettings.sortOrder?"Ascending":"Descending",headerText:this.pivotValues[c][h].valueSort.levelName,headerDelimiter:this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:"."}}},!0),this.showWaitingPopup();var m=this;if(m.engineModule.enableValueSorting=!0,m.enableVirtualization||m.enablePaging){if(m.dataSourceSettings.enableSorting){for(var f=0,v=Object.keys(m.engineModule.fieldList);f<v.length;f++){var y=v[f];m.engineModule.fieldList[y].sort="Ascending"}m.setProperties({dataSourceSettings:{sortSettings:[]}},!0)}"Server"===m.dataSourceSettings.mode?m.getEngine("onValueSort",null,null,null,null,null,null):(m.engineModule.rMembers=m.engineModule.headerCollection.rowHeaders,m.engineModule.cMembers=m.engineModule.headerCollection.columnHeaders,m.engineModule.applyValueSorting(),m.engineModule.updateEngine())}else"Server"===m.dataSourceSettings.mode?m.getEngine("onValueSort",null,null,null,null,null,null):m.engineModule.generateGridData(m.dataSourceSettings,!0);m.allowServerDataBinding=!1,m.setProperties({pivotValues:m.engineModule.pivotValues},!0),delete m.bulkChanges.pivotValues,m.allowServerDataBinding=!0;var b={valueSortInfo:this.engineModule.valueSortSettings};this.actionObj.actionInfo=b,m.renderPivotGrid()}}catch(e){this.actionFailureMethod(e)}}}},t.prototype.updateTotColWidth=function(){this.totColWidth=0;for(var e=0,t=this.pivotColumns;e<t.length;e++){var i=t[e];this.totColWidth=this.totColWidth+i.width}},t.prototype.framePivotColumns=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(r.columns&&r.columns.length>0)this.framePivotColumns(r.columns);else{var n="0.formattedText"===r.field?"":r.customAttributes&&r.customAttributes.cell&&r.customAttributes.cell.valueSort?r.customAttributes.cell.valueSort.levelName:"",a=this.renderModule.setSavedWidth("0.formattedText"===r.field?r.field:n,Number("auto"===r.width?r.minWidth:r.width));this.pivotColumns.push({allowReordering:r.allowReordering,allowResizing:r.allowResizing,headerText:n,width:a,autoFit:r.autoFit}),this.totColWidth=this.totColWidth+Number(a)}}},t.prototype.setGridColumns=function(e){if(!i.i(r.isNullOrUndefined)(this.totColWidth)&&this.totColWidth>0||this.renderModule.isAutoFitEnabled){for(var t=0,n=e;t<n.length;t++){var a=n[t];if(a.columns&&a.columns.length>0)this.setGridColumns(a.columns);else if(this.renderModule.isAutoFitEnabled)a.autoFit=this.pivotColumns[this.posCount].autoFit,this.posCount++;else{var o="0.formattedText"===a.field?"":a.customAttributes?a.customAttributes.cell.valueSort.levelName:"";a.allowReordering=this.pivotColumns[this.posCount].allowReordering,a.allowResizing=this.pivotColumns[this.posCount].allowResizing,a.autoFit=this.pivotColumns[this.posCount].autoFit;var s=this.renderModule.setSavedWidth("0.formattedText"===a.field?a.field:o,Number(this.pivotColumns[this.posCount].width));a.autoFit?this.renderModule.isAutoFitEnabled=!0:"auto"!==a.width?a.width=s:a.minWidth=s,this.posCount++,a.allowReordering&&(this.gridSettings.allowReordering=!0),a.allowResizing&&(this.gridSettings.allowResizing=!0)}}this.gridSettings.allowReordering&&h.Grid.Inject(h.Reorder),this.gridSettings.allowResizing&&h.Grid.Inject(h.Resize)}},t.prototype.fillGridColumns=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];r.allowReordering=this.gridSettings.allowReordering,r.allowResizing=this.gridSettings.allowResizing,r.clipMode=this.gridSettings.clipMode,this.posCount++,r.columns&&r.columns.length>0&&this.fillGridColumns(r.columns)}},t.prototype.triggerColumnRenderEvent=function(e){this.pivotColumns=[],this.totColWidth=0,this.framePivotColumns(e);var t=this.pivotColumns[0].width,i={columns:this.pivotColumns,dataSourceSettings:this.dataSourceSettings,stackedColumns:this.getStackedColumns(e,[])};this.trigger(o.w,i),this.enableVirtualization&&i.columns.length>0&&i.columns[0].width!==e[0].width&&(this.element.querySelector(".e-frozenscrollbar").style.width=Number(i.columns[0].width.toString().split("px")[0])+"px"),this.updateTotColWidth(),t!==this.pivotColumns[0].width&&(this.firstColWidth=this.pivotColumns[0].width,this.renderModule.resColWidth=parseInt(this.firstColWidth.toString())),this.posCount=0,this.setGridColumns(e)},t.prototype.setCommonColumnsWidth=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];"0.formattedText"!==n.field?n.columns?this.setCommonColumnsWidth(n.columns,t):n.autoFit||("auto"!==n.width?n.width=t:n.minWidth=t):n.width=this.firstColWidth?this.firstColWidth:n.width}},t.prototype.getHeightAsNumber=function(){var e;return isNaN(this.height)?this.height.toString().indexOf("%")>-1?e=parseFloat(this.height.toString())/100*this.element.offsetHeight:this.height.toString().indexOf("px")>-1&&(e=Number(this.height.toString().split("px")[0])):e=Number(this.height),(e<this.minHeight||"auto"===this.height)&&(e=this.minHeight),e},t.prototype.getWidthAsNumber=function(){var e;return isNaN(this.width)?(this.width.toString().indexOf("%")>-1?e=parseFloat(this.width.toString())/100*this.element.offsetWidth:this.width.toString().indexOf("px")>-1&&(e=Number(this.width.toString().split("px")[0])),isNaN(e)&&(e=this.element.offsetWidth)):e=Number(this.width),e<400&&(e=400),e},t.prototype.getGridWidthAsNumber=function(){var e,t=this.element.offsetWidth?this.element.offsetWidth:this.element.getBoundingClientRect().width;return isNaN(this.grid.width)?(this.grid.width.toString().indexOf("%")>-1?e=parseFloat(this.grid.width.toString())/100*t:this.grid.width.toString().indexOf("px")>-1&&(e=Number(this.grid.width.toString().split("px")[0])),isNaN(e)&&(e=t)):e=Number(this.grid.width),e},t.prototype.onWindowResize=function(){this.actionObj.actionName=o._80,this.actionBeginMethod()||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.layoutRefresh.bind(this),500),this.actionObj.actionName=this.getActionCompleteName(),this.actionObj.actionName&&this.actionCompleteMethod())},t.prototype.refresh=function(){this.pivotRefresh()},t.prototype.layoutRefresh=function(){if(this.element&&this.element.classList.contains("e-pivotview")&&("olap"===this.dataType?this.olapEngineModule&&this.olapEngineModule.pivotValues:this.engineModule&&this.engineModule.pivotValues)){if(this.grid){var e="olap"===this.dataType&&this.olapEngineModule.pivotValues.length>0?this.olapEngineModule.pivotValues[0].length:this.dataSourceSettings.values.length>0&&this.engineModule.pivotValues.length>0?this.engineModule.pivotValues[0].length:2,t=this.renderModule.resizeColWidth(e);this.grid.width=this.renderModule.calculateGridWidth(),this.renderModule.calculateGridHeight(!0),this.gridSettings.allowAutoResizing&&this.setCommonColumnsWidth(this.grid.columns,t),this.pivotColumns=[],this.totColWidth=0,this.framePivotColumns(this.grid.columns),this.posCount=0,this.showGroupingBar||this.setGridColumns(this.grid.columns),this.grid.refreshColumns(),this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+s.w)&&this.groupingBarModule.setGridRowWidth(),(this.chart||this.pivotChartModule)&&(this.chart.height=this.pivotChartModule.getResizedChartHeight())}this.showToolbar&&this.toolbarModule&&this.toolbarModule.toolbar&&(this.toolbarModule.toolbar.width=this.grid?this.getGridWidthAsNumber()-2:this.getWidthAsNumber()-2),this.enablePaging&&this.notify(o._31,this),this.chart&&(this.showToolbar&&"Chart"===this.currentView||!this.showToolbar)&&(this.chart.width=this.showToolbar&&this.grid?this.getGridWidthAsNumber().toString():"Both"===this.displayOption.view&&this.grid?this.getGridWidthAsNumber().toString():this.getWidthAsNumber().toString(),this.chart.height=this.pivotChartModule.getResizedChartHeight(),"Chart"===this.displayOption.view&&this.showGroupingBar&&this.groupingBarModule&&this.element.querySelector("."+s._42)&&this.groupingBarModule.refreshUI())}},t.prototype.cellClicked=function(e,t,n){var a=this;if(e.classList.contains(s._43)&&(e.classList.contains(s._44)?this.isPopupClicked=!1:this.isPopupClicked=!0),t&&!i.i(r.isNullOrUndefined)(this.pivotValues)&&this.pivotValues.length>0){var l=Number(t.getAttribute("data-colindex")),d=Number(t.getAttribute("index")),p=Number(t.getAttribute("aria-colspan")),u={cancel:!1,isCellClick:!0,currentCell:t,data:this.pivotValues[d][l]};this.trigger(o.y,u,function(e){a.gridSettings.allowSelection&&(("Both"===a.gridSettings.selectionSettings.mode?t.classList.contains(s._45):"Row"===a.gridSettings.selectionSettings.mode)?a.clearSelection(t,n,l,d):e.cancel||(a.clearSelection(t,n,l,d),a.applyColumnSelection(n,t,l,l+(p>0?p-1:0),d)),"Column"===a.gridSettings.selectionSettings.mode||t.classList.contains(s._46)||a.rowDeselect(t,n,d,a.gridSettings.selectionSettings.mode,e),"Column"===a.gridSettings.selectionSettings.mode||e.cancel||(("Multiple"===a.gridSettings.selectionSettings.type?n.ctrlKey||n.shiftKey:a.selectedRowIndex===d)?a.selectedRowIndex=void 0:(a.selectedRowIndex=d,a.grid.selectionModule.selectRow(d-a.renderModule.rowStartPos)))),a.cellClick&&e.isCellClick&&a.trigger(o.u,{currentCell:t,data:a.pivotValues[d][l],nativeEvent:n}),a.getSelectedCellsPos()})}else this.clearSelection(null,n,null,null)},t.prototype.rowDeselect=function(e,t,n,a,o){if(!t.shiftKey&&!t.ctrlKey&&"Both"!==this.gridSettings.selectionSettings.mode||"Single"===this.gridSettings.selectionSettings.type)if(e.classList.contains(s.b)||e.classList.contains(s.c)||e.classList.contains(s._38)){if(i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b),i.i(r.removeClass)(this.element.querySelectorAll("."+s.c),s.c),i.i(r.removeClass)(this.element.querySelectorAll("."+s._38),s._38),o.cancel)this.setSavedSelectedCells();else if("Cell"===a)i.i(r.addClass)([e],[s.b]);else if("Row"===a||"Single"===this.gridSettings.selectionSettings.type){var l='[index="'+n+'"]';i.i(r.addClass)(this.element.querySelectorAll(l),[s.c,s._38]),"Row"!==a&&e.classList.add(s.b)}}else o.cancel?this.setSavedSelectedCells():(i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b),i.i(r.removeClass)(this.element.querySelectorAll("."+s.c),s.c),i.i(r.removeClass)(this.element.querySelectorAll("."+s._38),s._38));else(t.shiftKey||t.ctrlKey||"Both"===this.gridSettings.selectionSettings.mode)&&o.cancel&&(i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b),i.i(r.removeClass)(this.element.querySelectorAll("."+s.c),s.c),i.i(r.removeClass)(this.element.querySelectorAll("."+s._38),s._38),this.setSavedSelectedCells())},t.prototype.clearSelection=function(e,t,n,a){if(!t.shiftKey&&!t.ctrlKey||"Single"===this.gridSettings.selectionSettings.type)if("Cell"===this.gridSettings.selectionSettings.mode)e&&e.classList.contains(s._46)?i.i(r.removeClass)(this.element.querySelectorAll("."+s._45+"."+s.b),s.b):i.i(r.removeClass)(this.element.querySelectorAll("."+s._46+"."+s._38),[s._38,s.c]);else if("Both"===this.gridSettings.selectionSettings.mode)if(e&&e.classList.contains(s._45))for(var o=0,l=[].slice.call(this.element.querySelectorAll("."+s.c+", ."+s.b));o<l.length;o++){var d=l[o];i.i(r.removeClass)([d],[s._38,s.c,s.b])}else i.i(r.removeClass)(this.element.querySelectorAll("."+s.b),s.b)},t.prototype.applyRowSelection=function(e,t,i){var r=this.engineModule.pivotValues[t][e];if(i.ctrlKey||i.shiftKey||!r||this.selectedRowIndex===t)this.selectedRowIndex=void 0;else{this.selectedRowIndex=t;var n=r.level,a=t;do{a++,r=this.engineModule.pivotValues[a][e]}while(r&&n<r.level);var o=this;this.isAdaptive?this.rowRangeSelection={enable:!0,startIndex:t-o.renderModule.rowStartPos,endIndex:a-(1+o.renderModule.rowStartPos)}:o.grid.selectionModule.selectRowsByRange(t-o.renderModule.rowStartPos,a-(1+o.renderModule.rowStartPos))}},t.prototype.applyColumnSelection=function(e,t,n,a,o){if(!t.classList.contains(s._20)&&("Cell"!==this.gridSettings.selectionSettings.mode||t.classList.contains(s._46))){var l=e.ctrlKey;this.isAdaptive&&"Multiple"===this.gridSettings.selectionSettings.type&&(this.grid.selectionModule.showPopup(e),this.isPopupClicked?(this.element.querySelector("."+s._43).classList.add(s._44),l=!0):(this.element.querySelector("."+s._43).classList.remove(s._44),l=!1));for(var d=[],p=this.gridSettings.selectionSettings.type,u=t.classList.contains(s._38),h=[],c={},g=n;g<=a;g++)h.push(g.toString());if(l&&"Single"!==p)u=!1;else{for(var m=0,f=[].slice.call(this.element.querySelectorAll("."+s._38));m<f.length;m++){var v=f[m];i.i(r.removeClass)([v],[s._38,s.c]),-1===h.indexOf(v.getAttribute("data-colindex"))&&(u=!1);var S=Number(v.getAttribute("data-colindex"));c[S]=S}h=Object.keys(c).length>0?Object.keys(c).sort(function(e,t){return e-t}):h}"Multiple"===p&&e.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?h:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=n?n=Number(this.shiftLockedPos[0]):a=a<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):a):this.shiftLockedPos=[];var y=[];if(e.ctrlKey&&"Both"===this.gridSettings.selectionSettings.mode&&"Multiple"===p&&!t.classList.contains(s._20))for(var b=0,C=[].slice.call(this.element.querySelectorAll("."+s._20+"."+s.b));b<C.length;b++){var v=C[b];y.push(v.getAttribute("index"))}for(var x=n;x<=a;)d.push('[data-colindex="'+x+'"]'+("Cell"===this.gridSettings.selectionSettings.mode?'[index="'+o+'"]':"")),x++;if(!u){o=t.classList.contains(s._32)?o:this.renderModule.rowStartPos-1;for(var w=t.classList.contains(s._38),T=0,M=[].slice.call(this.element.querySelectorAll(d.toString()));T<M.length;T++){var v=M[T];Number(v.getAttribute("index"))>=o&&(w&&l&&-1===y.indexOf(v.getAttribute("index"))?i.i(r.removeClass)([v],[s._38,s.c]):i.i(r.addClass)([v],[s._38,s.c]))}}this.renderModule.selected()}},t.prototype.getSelectedCellsPos=function(){var e=this;e.savedSelectedCellsPos=[],e.cellSelectionPos=[];for(var t=0,i=[].slice.call(this.element.querySelectorAll("."+s.c));t<i.length;t++){var r=i[t];e.savedSelectedCellsPos.push({rowIndex:r.getAttribute("index"),colIndex:r.getAttribute("data-colindex")})}for(var n=0,a=[].slice.call(this.element.querySelectorAll("."+s.b));n<a.length;n++){var r=a[n];e.cellSelectionPos.push({rowIndex:r.getAttribute("index"),colIndex:r.getAttribute("data-colindex")})}},t.prototype.setSavedSelectedCells=function(){for(var e=this,t=0,n=[].slice.call(this.savedSelectedCellsPos);t<n.length;t++){var a=n[t],o='[data-colindex="'+a.colIndex+'"][index="'+a.rowIndex+'"]';i.i(r.addClass)([e.element.querySelector(o)],[s._38,s.c])}for(var l=0,d=[].slice.call(this.cellSelectionPos);l<d.length;l++){var a=d[l],o='[data-colindex="'+a.colIndex+'"][index="'+a.rowIndex+'"]';i.i(r.addClass)([e.element.querySelector(o)],[s.b])}},t.prototype.renderEmptyGrid=function(){var e=this;if(this.isEmptyGrid=!0,this.notEmpty=!1,this.isInitial=!0,this.renderModule=this.renderModule?this.renderModule:new l.a(this),this.grid&&this.grid.element&&this.element.querySelector("."+s._31))this.notEmpty=!0,this.grid.setProperties({columns:this.renderModule.frameEmptyColumns(),dataSource:this.renderModule.frameEmptyData()},!0),this.grid.notify("datasource-modified",{}),this.grid.refreshColumns();else{this.element.querySelector("."+s._31)&&i.i(r.remove)(this.element.querySelector("."+s._31)),this.renderModule.bindGrid(this,!0),this.grid.showSpinner=function(){},this.grid.hideSpinner=function(){};var t=i.i(r.createElement)("div",{id:this.element.id+"_grid"});this.element.appendChild(t),this.grid.isStringTemplate=!0,this.grid.appendTo(t),this.grid.on("refresh-frozen-height",function(){e.enableVirtualization||e.grid.contentModule.setHeightToContent(e.grid.contentModule.getTable().offsetHeight)}),this.grid.off("data-ready",this.grid.dataReady),this.grid.on("data-ready",function(){e.grid.scrollModule.setWidth(),e.grid.scrollModule.setHeight()})}},t.prototype.initEngine=function(){var e=this;if(this.element.querySelector(".e-spin-hide")&&this.showWaitingPopup(),"pivot"===this.dataType){var t=i.i(r.isNullOrUndefined)(this.dataSourceSettings.dataSource)?i.i(r.isNullOrUndefined)(this.engineModule.data)?void 0:this.engineModule.data[0]:this.dataSourceSettings.dataSource[0];if(t&&this.pivotCommon){var n="[object Array]"===Object.prototype.toString.call(t);if(n&&"JSON"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidJSON"));if(!n&&"CSV"===this.dataSourceSettings.type)return void this.pivotCommon.errorDialog.createErrorDialog(this.localeObj.getConstant("error"),this.localeObj.getConstant("invalidCSV"))}}var a={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings)};this.trigger(o.b,a,function(t){S.a.updateDataSourceSettings(e,t.dataSourceSettings),e.updatePageSettings(!1);var i={mode:"",savedFieldList:void 0,pageSettings:e.pageSettings,enableValueSorting:e.enableValueSorting,isDrillThrough:e.allowDrillThrough||e.editSettings.allowEditing,localeObj:e.localeObj,fieldsType:e.fieldsType,clonedReport:e.clonedReport,globalize:e.globalize,currenyCode:e.currencyCode,enablePaging:e.enablePaging,enableVirtualization:e.enableVirtualization,allowDataCompression:e.allowDataCompression,enableHtmlSanitizer:e.enableHtmlSanitizer};if("pivot"===e.dataType){if(e.dataSourceSettings.groupSettings&&e.dataSourceSettings.groupSettings.length>0){var r=e.engineModule.data;e.clonedDataSet=e.clonedDataSet?e.clonedDataSet:S.a.getClonedData(r);var n=JSON.parse(e.getPersistData()).dataSourceSettings;n.dataSource=[],e.clonedReport=e.clonedReport?e.clonedReport:n}"Server"!==e.dataSourceSettings.mode&&e.engineModule.renderEngine(e.dataSourceSettings,i,e.aggregateCellInfo?e.getValueCellInfo.bind(e):void 0,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.allowServerDataBinding=!1,e.setProperties({pivotValues:e.engineModule.pivotValues},!0),delete e.bulkChanges.pivotValues,e.allowServerDataBinding=!0,e.enginePopulatedEventMethod("initEngine")}else"SSAS"===e.dataSourceSettings.providerType&&"olap"===e.dataType&&(i.savedFieldList=e.olapEngineModule.fieldList,i.savedFieldListData=e.olapEngineModule.fieldListData,e.olapEngineModule.renderEngine(e.dataSourceSettings,i,e.onHeadersSort?e.getHeaderSortInfo.bind(e):void 0),e.allowServerDataBinding=!1,e.setProperties({pivotValues:e.olapEngineModule.pivotValues},!0),delete e.bulkChanges.pivotValues,e.allowServerDataBinding=!0,e.enginePopulatedEventMethod("initEngine"))})},t.prototype.enginePopulatedEventMethod=function(e,t){if("initEngine"===e){var i=t||this;this.trigger(o.c,{pivotValues:this.pivotValues},function(e){"olap"===i.dataType?(i.olapEngineModule.pivotValues=e.pivotValues,i.pivotValues=i.olapEngineModule.pivotValues):(i.engineModule.pivotValues=e.pivotValues,i.pivotValues=i.engineModule.pivotValues),i.notify(o._24,{}),i.notEmpty=!0})}else{var r=t||this,n={dataSourceSettings:r.dataSourceSettings,pivotValues:r.pivotValues};r.trigger(o.c,n,function(e){r.dataSourceSettings=e.dataSourceSettings,"olap"===r.dataType?(r.olapEngineModule.pivotValues=e.pivotValues,r.allowServerDataBinding=!1,r.setProperties({pivotValues:r.olapEngineModule.pivotValues},!0),delete r.bulkChanges.pivotValues,r.allowServerDataBinding=!0):(r.engineModule.pivotValues=e.pivotValues,r.allowServerDataBinding=!1,r.setProperties({pivotValues:r.engineModule.pivotValues},!0),delete r.bulkChanges.pivotValues,r.allowServerDataBinding=!0),r.pivotCommon.engineModule="olap"===r.dataType?r.olapEngineModule:r.engineModule,r.pivotCommon.dataSourceSettings=r.dataSourceSettings,r.renderPivotGrid()})}},t.prototype.generateData=function(){this.isStaticRefresh||("Chart"!==this.displayOption.view&&i.i(r.isNullOrUndefined)(this.grid)?(this.renderEmptyGrid(),this.showWaitingPopup()):(this.showWaitingPopup(),clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.refreshData.bind(this),100)))},t.prototype.refreshData=function(){var e=this;e.isStaticRefresh?(e.isStaticRefresh=!1,e.hideWaitingPopup()):e.dataSourceSettings&&(e.dataSourceSettings.dataSource||e.dataSourceSettings.url)?e.dataSourceSettings.dataSource instanceof m.DataManager?"pivot"===e.dataType&&e.remoteData.length>0?(this.element.querySelector(".e-spinner-pane")||this.showWaitingPopup(),this.engineModule.data=e.remoteData,this.initEngine()):setTimeout(e.getData.bind(e),100):""!==this.dataSourceSettings.url&&"olap"===this.dataType||e.dataSourceSettings.dataSource&&e.dataSourceSettings.dataSource.length>0||this.engineModule.data.length>0?("pivot"===e.dataType&&(this.hideWaitingPopup(),e.engineModule.data=e.dataSourceSettings.dataSource),e.initEngine()):"Server"===this.dataSourceSettings.mode?this.getEngine("onRefresh"):(this.notify(o._24,{}),this.hideWaitingPopup()):(this.notify(o._24,{}),this.hideWaitingPopup())},t.prototype.getValueCellInfo=function(e){var t=e;return this.trigger(o.X,t),t},t.prototype.getHeaderSortInfo=function(e){var t=e;return this.trigger(o.Y,t),t},t.prototype.bindTriggerEvents=function(e){this.trigger(i.i(h.getObject)("name",e),e)},t.prototype.getData=function(){this.dataSourceSettings.dataSource.defaultQuery?this.dataSourceSettings.dataSource.executeQuery(this.dataSourceSettings.dataSource.defaultQuery).then(this.executeQuery.bind(this)):this.dataSourceSettings.dataSource.executeQuery(new m.Query).then(this.executeQuery.bind(this))},t.prototype.executeQuery=function(e){this.element.querySelector(".e-spinner-pane")||this.showWaitingPopup();var t=this;t.engineModule.data=e.result,!i.i(r.isNullOrUndefined)(t.engineModule.data)&&t.engineModule.data.length>0?t.initEngine():this.hideWaitingPopup()},t.prototype.applyFormatting=function(e){if(e){for(var t=[],n=e.length,a=0;a<n;a++)void 0!==e[a]&&void 0===e[a][0]&&t.push(a);for(var a=0;a<e.length;a++)for(var o=1;e[a]&&o<e[a].length;o++)if("value"===e[a][o].axis&&""!==e[a][o].formattedText){e[a][o].style=void 0,e[a][o].cssClass=void 0;for(var s=this.dataSourceSettings.conditionalFormatSettings,l=0;l<s.length;l++)(!0===s[l].applyGrandTotals||i.i(r.isNullOrUndefined)(s[l].applyGrandTotals)||""!==e[a][o].rowHeaders&&""!==e[a][o].columnHeaders)&&this.checkCondition(e[a][o].value,s[l].conditions,s[l].value1,s[l].value2)&&(s[l].measure&&e[a][o].actualText!==s[l].measure||void 0!==s[l].measure&&""===s[l].measure||void 0!==s[l].label&&""===s[l].label||!(!s[l].label||e[a][0].valueSort.levelName.indexOf(s[l].label)>-1||e[a][o].rowHeaders.indexOf(s[l].label)>-1||e[a][o].columnHeaders.indexOf(s[l].label)>-1)||(s[l].style&&s[l].style.backgroundColor&&(s[l].style.backgroundColor="#"===s[l].style.backgroundColor.charAt(0)&&this.conditionalFormattingModule.isHex(s[l].style.backgroundColor.substr(1))?s[l].style.backgroundColor:this.conditionalFormattingModule.colourNameToHex(s[l].style.backgroundColor)),s[l].style&&s[l].style.color&&(s[l].style.color="#"===s[l].style.color.charAt(0)&&this.conditionalFormattingModule.isHex(s[l].style.color.substr(1))?s[l].style.color:this.conditionalFormattingModule.colourNameToHex(s[l].style.color)),e[a][o].style=s[l].style,e[a][o].cssClass="format"+this.element.id+l))}for(var d=this.dataSourceSettings.conditionalFormatSettings,l=0;l<d.length;l++){var p=this.createStyleSheet.bind(this)(),u="color: "+d[l].style.color+"!important;background-color: "+d[l].style.backgroundColor+"!important;font-size: "+d[l].style.fontSize+"!important;font-family: "+d[l].style.fontFamily+" !important;",h=".format"+this.element.id+l;p.insertRule(h+", "+h+" .e-cellvalue{"+u+"}",0)}}},t.prototype.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},t.prototype.applyHyperlinkSettings=function(){if(this.pivotValues){for(var e=this.pivotValues,t=[],n=e.length,a=0;a<n;a++)i.i(r.isNullOrUndefined)(e[a])||void 0!==e[a][0]||t.push(a);if(this.hyperlinkSettings.conditionalSettings.length>0)for(var a=0;a<e.length;a++)for(var o=1;e[a]&&o<e[a].length;o++)if("value"===e[a][o].axis){e[a][o].enableHyperlink=!1;for(var s=this.hyperlinkSettings.conditionalSettings,l=0;l<s.length;l++)if(this.checkCondition(e[a][o].value,s[l].conditions,s[l].value1,s[l].value2)){var d="row"===this.dataSourceSettings.valueAxis?a:"pivot"===this.dataType?this.engineModule.headerContent.length-1:this.olapEngineModule.headerContent.length-1,p="row"===this.dataSourceSettings.valueAxis?0:o;(!s[l].measure||1===this.dataSourceSettings.values.length||e[d][p].valueSort&&e[d][p].actualText===s[l].measure)&&(!s[l].label||e[t[s[l].label.split(".").length-1]]&&e[t[s[l].label.split(".").length-1]][o]&&e[t[s[l].label.split(".").length-1]][o].valueSort&&e[t[s[l].label.split(".").length-1]][o].valueSort[s[l].label]||e[a][0].valueSort.levelName.indexOf(s[l].label)>-1)&&(e[a][o].enableHyperlink=!0)}}if(i.i(r.isNullOrUndefined)(this.hyperlinkSettings.headerText))return;for(var u=this.dataSourceSettings.valueSortSettings.headerDelimiter?this.dataSourceSettings.valueSortSettings.headerDelimiter:".",a=0;a<e.length;a++)for(var o=1;e[a]&&o<e[a].length;o++)if("value"===e[a][o].axis){var h=this.hyperlinkSettings.headerText;if(e[a][0].valueSort.levelName.indexOf(h)>-1)e[a][0].enableHyperlink=!0,e[a][o].enableHyperlink=!0;else{for(var c=!1,l=0;l<t.length;l++)h=u+this.hyperlinkSettings.headerText,(u+e[t[l]][o].valueSort.levelName).indexOf(h)>-1&&(e[t[l]][o].enableHyperlink=!0,c=!0);e[a][o].enableHyperlink=c}}}},t.prototype.checkCondition=function(e,t,i,r){switch(t){case"LessThan":return e<i;case"LessThanOrEqualTo":return e<=i;case"GreaterThan":return e>i;case"GreaterThanOrEqualTo":return e>=i;case"Equals":return e===i;case"NotEquals":return e!==i;case"Between":return i<r&&e>=i&&e<=r||i>r&&e<=i&&e>=r;case"NotBetween":return!(i<r&&e>=i&&e<=r||i>r&&e<=i&&e>=r);default:return!1}},t.prototype.updateGroupingReport=function(e,t){if(!this.clonedDataSet&&!this.clonedReport){var n=this.engineModule.data;this.clonedDataSet=S.a.getClonedData(n);var a=JSON.parse(this.getPersistData()).dataSourceSettings;a.dataSource=[],this.clonedReport=this.clonedReport?this.clonedReport:a}var o=/_date_group_years|_date_group_quarters|_date_group_quarterYear|_date_group_months|_date_group_days|_date_group_hours|_date_group_minutes|_date_group_seconds/g,s=S.a.getClonedData(this.clonedDataSet),l=this.dataSourceSettings,d=this.clonedReport.properties?this.clonedReport.properties:this.clonedReport,p=[l.rows,l.columns,l.values,l.filters],u=[l.filterSettings,l.sortSettings,l.formatSettings,l.drilledMembers],h=d.rows;if(h=h.concat(d.columns,d.values,d.filters),0===e.length||e.length>0){this.engineModule.groupingFields={},this.setProperties({dataSourceSettings:{dataSource:s,groupSettings:e.length>0?l.groupSettings:[]}},!0);for(var c,g="Date"===t,m=[],f=0,v=p.length;f<v;f++)for(var y,b,C=0,x=p[f].length;C<x;C++)!function(e,t){var n=p[f][e].name;-1===m.indexOf(n)&&m.push(n);var a=m.indexOf(n);if(!i.i(r.isNullOrUndefined)(n.match(o))&&g||-1!==n.indexOf("_custom_group")&&!S.a.getFieldByName(n.replace("_custom_group",""),l.groupSettings)){p[f].splice(e,1),m.splice(a,1),e--,t--,n=n.split("_")[0];for(var s=!1,d=0;d<p.length&&!(s=p[d].filter(function(e){return e.name===n}).length>0);d++);if(!s){c=n.split("_")[0];var u=S.a.getFieldByName(c,h);h=h.filter(function(e){return e.name!==c}),m.push(c),u&&(s?p[f].splice(e,1,u):p[f].splice(++e,0,u))}}else{var u=S.a.getFieldByName(n,h);u?p[f].splice(e,1,u):c===n&&p[f].splice(e,1)}y=e,b=t}(C,x),C=y,x=b;for(var w=0,T=m;w<T.length;w++)for(var M=T[w],_=S.a.getFilterItemByName(M,d.filterSettings),D=S.a.getFieldByName(M,d.sortSettings),O=S.a.getFieldByName(M,d.formatSettings),P=S.a.getFieldByName(M,d.drilledMembers),N=[_,D,O,P],f=0,v=u.length;f<v;f++){for(var E=!1,C=0,x=u[f].length;C<x;C++){var I=u[f][C].name;if(!i.i(r.isNullOrUndefined)(I.match(o))&&g||-1!==I.indexOf("_custom_group")&&!S.a.getFieldByName(I.replace("_custom_group",""),l.groupSettings))u[f].splice(C,1),C--,x--;else if(M===u[f][C].name){E=!0,N[f]?u[f].splice(C,1,N[f]):(u[f].splice(C,1),C--,x--);break}}!E&&0===f&&_&&u[f].push(_),!E&&1===f&&D&&u[f].push(D),!E&&2===f&&O&&u[f].push(O),!E&&3===f&&P&&u[f].push(P)}}},t.prototype.removeButtonFocus=function(e){document.querySelectorAll(".e-btn-focused")&&i.i(r.removeClass)(document.querySelectorAll(".e-btn-focused"),"e-btn-focused")},t.prototype.wireEvents=function(){"Chart"!==this.displayOption.view&&(r.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),r.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),r.EventHandler.add(this.element.querySelector("."+s._47),"mousemove",this.mouseMoveHandler,this),r.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),r.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this)),r.EventHandler.add(document,this.isAdaptive?"touchend":"click",this.removeButtonFocus,this),window.addEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.unwireEvents=function(){"Chart"!==this.displayOption.view&&(r.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),r.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),this.element.querySelector("."+s._47)&&r.EventHandler.remove(this.element.querySelector("."+s._47),"mousemove",this.mouseMoveHandler),r.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),r.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler)),r.EventHandler.remove(document,this.isAdaptive?"touchend":"click",this.removeButtonFocus),window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.actionBeginMethod=function(){var e={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,cancel:!1};return this.trigger(o._15,e),e.cancel},t.prototype.actionCompleteMethod=function(){var e={dataSourceSettings:S.a.getClonedDataSourceSettings(this.dataSourceSettings),actionName:this.actionObj.actionName,fieldInfo:this.actionObj.fieldInfo,actionInfo:this.actionObj.actionInfo};this.trigger(o._16,e),this.actionObj.actionName="",this.actionObj.actionInfo=void 0,this.actionObj.fieldInfo=void 0},t.prototype.actionFailureMethod=function(e){var t={actionName:this.actionObj.actionName,errorInfo:e};this.trigger(o._17,t)},t.prototype.getActionCompleteName=function(){var e;switch(this.actionObj.actionName){case o._43:e=o._100;break;case o._44:e=o._101;break;case o._47:e=o._102;break;case o._48:e=o._103;break;case o._57:e=o._104;break;case o._58:e=o._105;break;case o._59:e=o._106;break;case o._60:e=o._107;break;case o._61:e=o._108;break;case o._62:e=o._109;break;case o._63:e=o._110;break;case o._64:e=o._111;break;case o._34:e=o._112;break;case o._73:e=o._83;break;case o._69:e=o._113;break;case o._70:e=o._114;break;case o._71:e=o._115;break;case o._72:e=o._116;break;case o._78:e=o._117;break;case o._74:e=o._118;break;case o._67:e=o._119;break;case o._75:e=o._84;break;case o._76:e=o._85;break;case o._77:e=o._86;break;case o._52:e=o._97;break;case o._55:e=o._98;break;case o._56:e=o._99;break;case o._51:e=o._96;break;case o._54:e=o._95;break;case o._53:e=o._94;break;case o._80:e=o._120;break;case o._38:e=o._89;break;case o._37:e=o._90;break;case o._39:e=o._91;break;case o._40:e=o._92;break;case o._22:e=o._124;break;case o._21:e=o._123;break;case o._81:e=o._125;break;case o._82:e=o._126;break;default:e=this.actionObj.actionName}return e},t.prototype.getStackedColumns=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];t.push(n),n.columns&&n.columns.length>0&&this.getStackedColumns(n.columns,t)}return t},t.prototype.destroy=function(){this.removeInternalEvents(),this.engineModule&&(this.engineModule.fieldList={},this.engineModule.rMembers=null,this.engineModule.cMembers=null,this.engineModule.valueMatrix=null,this.engineModule.indexMatrix=null,this.engineModule={}),this.olapEngineModule&&(this.olapEngineModule.fieldList={},this.olapEngineModule={}),this.showGroupingBar&&this.groupingBarModule&&this.groupingBarModule.destroy(),this.allowGrouping&&this.groupingModule&&this.groupingModule.destroy(),this.showToolbar&&this.toolbarModule&&this.toolbarModule.destroy(),this.enablePaging&&this.pagerModule&&this.pagerModule.destroy(),this.enableVirtualization&&this.virtualscrollModule&&this.virtualscrollModule.destroy(),this.allowConditionalFormatting&&this.conditionalFormattingModule&&this.conditionalFormattingModule.destroy(),this.allowNumberFormatting&&this.numberFormattingModule&&this.numberFormattingModule.destroy(),this.contextMenuModule&&this.contextMenuModule.destroy(),this.keyboardModule&&this.keyboardModule.destroy(),this.tooltip&&!this.tooltip.isDestroyed&&this.tooltip.destroy(),this.calculatedFieldModule&&this.calculatedFieldModule.destroy(),this.chart&&!this.chart.isDestroyed&&(this.chart.destroy(),this.chart.isDestroyed&&i.i(r.select)("#"+this.element.id+"_chart",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_chart",this.element))),this.grid&&!this.grid.isDestroyed&&(this.grid.destroy(),this.grid.isDestroyed&&i.i(r.select)("#"+this.element.id+"_grid",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_grid",this.element))),this.commonModule&&this.commonModule.destroy(),this.pivotChartModule&&this.pivotChartModule.destroy(),this.pivotButtonModule&&!this.pivotButtonModule.isDestroyed&&this.pivotButtonModule.destroy(),this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&(this.pivotFieldListModule.destroy(),this.pivotFieldListModule.isDestroyed&&null!==i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element)&&i.i(r.remove)(i.i(r.select)("#"+this.element.id+"_PivotFieldList",this.element))),(this.allowDrillThrough||this.editSettings&&this.editSettings.allowEditing)&&this.drillThroughModule&&this.drillThroughModule.destroy(),this.chartExportModule&&this.chartExportModule.destroy(),this.unwireEvents(),e.prototype.destroy.call(this),this.groupingBarModule&&(this.groupingBarModule=null),this.groupingModule&&(this.groupingModule=null),this.pivotFieldListModule&&(this.pivotFieldListModule=null),this.calculatedFieldModule&&(this.calculatedFieldModule=null),this.conditionalFormattingModule&&(this.conditionalFormattingModule=null),this.numberFormattingModule&&(this.numberFormattingModule=null),this.toolbarModule&&(this.toolbarModule=null),this.pagerModule&&(this.pagerModule=null),this.virtualscrollModule&&(this.virtualscrollModule=null),this.contextMenuModule&&(this.contextMenuModule=null),this.keyboardModule&&(this.keyboardModule=null),this.tooltip&&(this.tooltip=null),this.chart&&(this.chart=null),this.grid&&(this.grid=null),this.commonModule&&(this.commonModule=null),this.pivotChartModule&&(this.pivotChartModule=null),this.pivotButtonModule&&(this.pivotButtonModule=null),this.renderModule&&(this.renderModule=null),this.axisFieldModule&&(this.axisFieldModule=null),this.pdfExportModule&&(this.pdfExportModule=null),this.excelExportModule&&(this.excelExportModule=null),this.drillThroughModule&&(this.drillThroughModule=null),this.clonedDataSet&&(this.clonedDataSet=null),this.clonedReport&&(this.clonedReport=null),this.pagerModule&&(this.pagerModule=null),this.chartExportModule&&(this.chartExportModule=null),this.element.innerHTML="",i.i(r.removeClass)([this.element],s._48),i.i(r.removeClass)([this.element],s._36),i.i(r.removeClass)([this.element],s._37),this.globalize=null,this.localeObj=null,this.currentView=null,this.fieldListSpinnerElement=null,this.lastSortInfo=null,this.lastFilterInfo=null,this.lastAggregationInfo=null,this.lastCalcFieldInfo=null,this.lastCellClicked=null,this.lastColumn=null,this.pivotCommon=null},t.prototype.showNumberFormattingDialog=function(){this.allowNumberFormatting&&this.numberFormattingModule.showNumberFormattingDialog()},t.prototype.getValuesHeader=function(e,t){var n=this.dataSourceSettings.values;return"value"===t&&!i.i(r.isNullOrUndefined)(e.valueSort)&&this.localeObj.getConstant("grandTotal")+this.dataSourceSettings.valueSortSettings.headerDelimiter+e.formattedText===e.valueSort.levelName&&("column"===e.axis&&0===this.dataSourceSettings.columns.length&&"column"===this.dataSourceSettings.valueAxis||"row"===e.axis&&0===this.dataSourceSettings.rows.length&&"row"===this.dataSourceSettings.valueAxis)?this.localeObj.getConstant("total")+" "+this.localeObj.getConstant(this.engineModule.fieldList[e.actualText].aggregateType)+" "+this.localeObj.getConstant("of")+" "+e.formattedText:"grandTotal"===t&&1===n.length&&"row"===this.dataSourceSettings.valueAxis&&e.formattedText===this.localeObj.getConstant("grandTotal")?this.localeObj.getConstant("total")+" "+this.localeObj.getConstant(n[n.length-1].type)+" "+this.localeObj.getConstant("of")+" "+(i.i(r.isNullOrUndefined)(n[n.length-1].caption)?n[n.length-1].name:n[n.length-1].caption):e.formattedText},_([i.i(r.Property)("USD")],t.prototype,"currencyCode",void 0),_([i.i(r.Property)(!1)],t.prototype,"showFieldList",void 0),_([i.i(r.Complex)({},u.a)],t.prototype,"gridSettings",void 0),_([i.i(r.Complex)({},b.a)],t.prototype,"chartSettings",void 0),_([i.i(r.Complex)({},D)],t.prototype,"groupingBarSettings",void 0),_([i.i(r.Complex)({},N)],t.prototype,"hyperlinkSettings",void 0),_([i.i(r.Complex)({},E)],t.prototype,"pageSettings",void 0),_([i.i(r.Complex)({},I)],t.prototype,"pagerSettings",void 0),_([i.i(r.Complex)({},p.n)],t.prototype,"dataSourceSettings",void 0),_([i.i(r.Complex)({},O)],t.prototype,"editSettings",void 0),_([i.i(r.Complex)({},F)],t.prototype,"displayOption",void 0),_([i.i(r.Property)()],t.prototype,"pivotValues",void 0),_([i.i(r.Property)(!1)],t.prototype,"showGroupingBar",void 0),_([i.i(r.Property)(!0)],t.prototype,"showTooltip",void 0),_([i.i(r.Property)(!1)],t.prototype,"showToolbar",void 0),_([i.i(r.Property)([])],t.prototype,"toolbar",void 0),_([i.i(r.Property)(!1)],t.prototype,"showValuesButton",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowCalculatedField",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableFieldSearching",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableValueSorting",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowConditionalFormatting",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowNumberFormatting",void 0),_([i.i(r.Property)("auto")],t.prototype,"height",void 0),_([i.i(r.Property)("auto")],t.prototype,"width",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowExcelExport",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableVirtualization",void 0),_([i.i(r.Property)(!1)],t.prototype,"enablePaging",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDrillThrough",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowPdfExport",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDeferLayoutUpdate",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowDataCompression",void 0),_([i.i(r.Property)(1e3)],t.prototype,"maxNodeLimitInMemberEditor",void 0),_([i.i(r.Property)(1e4)],t.prototype,"maxRowsInDrillThrough",void 0),_([i.i(r.Property)(!0)],t.prototype,"loadOnDemandInMemberEditor",void 0),_([i.i(r.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),_([i.i(r.Property)()],t.prototype,"cellTemplate",void 0),_([i.i(r.Property)()],t.prototype,"toolbarTemplate",void 0),_([i.i(r.Property)()],t.prototype,"tooltipTemplate",void 0),_([i.i(r.Property)()],t.prototype,"spinnerTemplate",void 0),_([i.i(r.Property)(!1)],t.prototype,"allowGrouping",void 0),_([i.i(r.Property)(!0)],t.prototype,"exportAllPages",void 0),_([i.i(r.Property)(["Sum","Count","DistinctCount","Product","Min","Max","Avg","Median","Index","PopulationVar","SampleVar","PopulationStDev","SampleStDev","RunningTotals","PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfParentColumnTotal","PercentageOfParentRowTotal","DifferenceFrom","PercentageOfDifferenceFrom","PercentageOfParentTotal"])],t.prototype,"aggregateTypes",void 0),_([i.i(r.Property)(["Column","Bar","Line","Area","Scatter","Polar","StackingColumn","StackingArea","StackingBar","StackingLine","StepLine","StepArea","SplineArea","Spline","StackingColumn100","StackingBar100","StackingArea100","StackingLine100","Bubble","Pareto","Radar","Pie","Doughnut","Funnel","Pyramid"])],t.prototype,"chartTypes",void 0),_([i.i(r.Property)("")],t.prototype,"cssClass",void 0),_([i.i(r.Event)()],t.prototype,"queryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"headerCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"resizing",void 0),_([i.i(r.Event)()],t.prototype,"resizeStop",void 0),_([i.i(r.Event)()],t.prototype,"pdfHeaderQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"pdfQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"excelHeaderQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"excelQueryCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"columnDragStart",void 0),_([i.i(r.Event)()],t.prototype,"columnDrag",void 0),_([i.i(r.Event)()],t.prototype,"columnDrop",void 0),_([i.i(r.Event)()],t.prototype,"beforePdfExport",void 0),_([i.i(r.Event)()],t.prototype,"beforeExcelExport",void 0),_([i.i(r.Event)()],t.prototype,"beforeColumnsRender",void 0),_([i.i(r.Event)()],t.prototype,"selected",void 0),_([i.i(r.Event)()],t.prototype,"cellDeselected",void 0),_([i.i(r.Event)()],t.prototype,"rowSelected",void 0),_([i.i(r.Event)()],t.prototype,"rowDeselected",void 0),_([i.i(r.Event)()],t.prototype,"chartTooltipRender",void 0),_([i.i(r.Event)()],t.prototype,"chartLegendClick",void 0),_([i.i(r.Event)()],t.prototype,"multiLevelLabelRender",void 0),_([i.i(r.Event)()],t.prototype,"chartLoaded",void 0),_([i.i(r.Event)()],t.prototype,"chartLoad",void 0),_([i.i(r.Event)()],t.prototype,"chartResized",void 0),_([i.i(r.Event)()],t.prototype,"chartAxisLabelRender",void 0),_([i.i(r.Event)()],t.prototype,"multiLevelLabelClick",void 0),_([i.i(r.Event)()],t.prototype,"chartPointClick",void 0),_([i.i(r.Event)()],t.prototype,"contextMenuClick",void 0),_([i.i(r.Event)()],t.prototype,"contextMenuOpen",void 0),_([i.i(r.Event)()],t.prototype,"onPdfCellRender",void 0),_([i.i(r.Event)()],t.prototype,"saveReport",void 0),_([i.i(r.Event)()],t.prototype,"fetchReport",void 0),_([i.i(r.Event)()],t.prototype,"loadReport",void 0),_([i.i(r.Event)()],t.prototype,"renameReport",void 0),_([i.i(r.Event)()],t.prototype,"removeReport",void 0),_([i.i(r.Event)()],t.prototype,"newReport",void 0),_([i.i(r.Event)()],t.prototype,"toolbarRender",void 0),_([i.i(r.Event)()],t.prototype,"toolbarClick",void 0),_([i.i(r.Event)()],t.prototype,"load",void 0),_([i.i(r.Event)()],t.prototype,"enginePopulating",void 0),_([i.i(r.Event)()],t.prototype,"enginePopulated",void 0),_([i.i(r.Event)()],t.prototype,"onFieldDropped",void 0),_([i.i(r.Event)()],t.prototype,"fieldDrop",void 0),_([i.i(r.Event)()],t.prototype,"fieldDragStart",void 0),_([i.i(r.Event)()],t.prototype,"dataBound",void 0),_([i.i(r.Event)()],t.prototype,"created",void 0),_([i.i(r.Event)()],t.prototype,"destroyed",void 0),_([i.i(r.Event)()],t.prototype,"beforeExport",void 0),_([i.i(r.Event)()],t.prototype,"exportComplete",void 0),_([i.i(r.Event)()],t.prototype,"conditionalFormatting",void 0),_([i.i(r.Event)()],t.prototype,"memberFiltering",void 0),_([i.i(r.Event)()],t.prototype,"cellClick",void 0),_([i.i(r.Event)()],t.prototype,"drillThrough",void 0),_([i.i(r.Event)()],t.prototype,"editCompleted",void 0),_([i.i(r.Event)()],t.prototype,"beginDrillThrough",void 0),_([i.i(r.Event)()],t.prototype,"hyperlinkCellClick",void 0),_([i.i(r.Event)()],t.prototype,"cellSelecting",void 0),_([i.i(r.Event)()],t.prototype,"drill",void 0),_([i.i(r.Event)()],t.prototype,"cellSelected",void 0),_([i.i(r.Event)()],t.prototype,"chartSeriesCreated",void 0),_([i.i(r.Event)()],t.prototype,"aggregateCellInfo",void 0),_([i.i(r.Event)()],t.prototype,"fieldListRefreshed",void 0),_([i.i(r.Event)()],t.prototype,"memberEditorOpen",void 0),_([i.i(r.Event)()],t.prototype,"calculatedFieldCreate",void 0),_([i.i(r.Event)()],t.prototype,"numberFormatting",void 0),_([i.i(r.Event)()],t.prototype,"aggregateMenuOpen",void 0),_([i.i(r.Event)()],t.prototype,"fieldRemove",void 0),_([i.i(r.Event)()],t.prototype,"beforeServiceInvoke",void 0),_([i.i(r.Event)()],t.prototype,"afterServiceInvoke",void 0),_([i.i(r.Event)()],t.prototype,"actionBegin",void 0),_([i.i(r.Event)()],t.prototype,"actionComplete",void 0),_([i.i(r.Event)()],t.prototype,"actionFailure",void 0),_([i.i(r.Event)()],t.prototype,"onHeadersSort",void 0),t=_([r.NotifyPropertyChanges],t)}(r.Component)},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(8),n=(i.n(r),i(0)),a=(i.n(n),i(2)),o=i(1),s=i(18),l=i(3),d=function(){function e(e){this.isAutoFitEnabled=!1,this.pivotColumns=[],this.indentCollection={},this.colPos=0,this.lastSpan=0,this.lvlCollection={},this.hierarchyCollection={},this.lvlPosCollection={},this.hierarchyPosCollection={},this.position=0,this.measurePos=0,this.maxMeasurePos=0,this.hierarchyCount=0,this.actualText="",this.parent=e,this.resColWidth=this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridSettings=this.parent.gridSettings,this.formatList=this.getFormatList(),this.aggMenu=new s.a(this.parent)}return e.prototype.render=function(e){if(e&&this.initProperties(),this.resColWidth=this.parent.showGroupingBar&&this.parent.groupingBarModule?this.parent.isAdaptive?180:250:this.parent.isAdaptive?140:200,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridSettings=this.parent.gridSettings,this.formatList=this.getFormatList(),this.parent.gridHeaderCellInfo=[],this.parent.gridCellCollection={},this.injectGridModules(this.parent),this.rowStartPos=this.getRowStartPos(),this.parent.grid&&this.parent.grid.element&&this.parent.element.querySelector("."+a._31)){this.parent.notEmpty=!0,this.engine.isEngineUpdated?(this.parent.enableValueSorting&&(this.engine.valueContent=this.frameDataSource("value")),this.engine.isEngineUpdated=!1):(this.engine.headerContent=this.frameDataSource("header"),this.engine.valueContent=this.frameDataSource("value")),this.parent.grid.setProperties({columns:this.frameStackedHeaders(),dataSource:("olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0&&this.parent.dataSourceSettings.values.length>0)&&!this.engine.isEmptyData?this.engine.valueContent:this.frameDataSource("value")},!0),this.parent.grid.notify("datasource-modified",{}),this.parent.isScrolling&&(this.parent.resizeInfo={}),this.parent.grid.refreshColumns(),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+a.w)&&this.parent.groupingBarModule.setGridRowWidth();this.parent.element.querySelector("."+a._31).querySelector("colGroup").innerHTML=this.parent.grid.getHeaderContent().querySelector("colgroup").innerHTML,this.parent.grid.width=this.calculateGridWidth(),!this.gridSettings.allowAutoResizing&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+a.w)&&this.parent.groupingBarModule.refreshUI(),this.parent.isScrolling||this.calculateGridHeight(!0)}else this.parent.element.innerHTML="",this.bindGrid(this.parent,!!this.engine.isEmptyData),this.parent.element.appendChild(i.i(n.createElement)("div",{id:this.parent.element.id+"_grid"})),this.parent.grid.isStringTemplate=!0,this.parent.grid.appendTo("#"+this.parent.element.id+"_grid");this.parent.grid.on(r.headerRefreshed,this.refreshHeader,this)},e.prototype.initProperties=function(){this.rowStartPos=void 0,this.maxIndent=void 0,this.resColWidth=void 0,this.isOverflows=void 0,this.indentCollection={},this.formatList=void 0,this.colPos=0,this.colGrandPos=void 0,this.rowGrandPos=void 0,this.lastSpan=0,this.field=void 0,this.fieldCaption=void 0,this.lvlCollection={},this.hierarchyCollection={},this.lvlPosCollection={},this.hierarchyPosCollection={},this.position=0,this.measurePos=0,this.maxMeasurePos=0,this.hierarchyCount=0,this.actualText="",this.timeOutObj=void 0},e.prototype.refreshHeader=function(){if(this.parent.enableVirtualization){var e=this.parent.element.querySelector("."+a._24),t=this.parent.element.querySelector("."+a._22),r=t.querySelector("."+a._27);if(this.parent.virtualHeaderDiv=e.querySelector("."+a._27),e.querySelector("."+a._27)?i.i(n.remove)(e.querySelector("."+a._27)):this.parent.virtualHeaderDiv=i.i(n.createElement)("div",{className:a._27}),e.appendChild(this.parent.virtualHeaderDiv),r&&i.i(n.setStyleAttribute)(this.parent.virtualHeaderDiv,{height:0,width:r.style.width}),e.querySelector("."+a._26)){i.i(n.setStyleAttribute)(e.querySelector("."+a._26),{transform:t.querySelector("."+a._26).style.transform.split(",")[0]+",0px)"});var o=e.querySelector("."+a._26).style.transform.split("(")[1].split(",")[0].split("px")[0];this.parent.enableRtl?this.parent.element.querySelector("."+a._30).style.right=Number(o)+"px":this.parent.element.querySelector("."+a._30).style.left=Number(-o)+"px"}var s=this.parent.isAdaptive?t:t.parentElement.parentElement.querySelector("."+a._28);e.scrollLeft=s.scrollLeft}},e.prototype.bindGrid=function(e,t){this.injectGridModules(e),this.parent.grid=new r.Grid({cssClass:this.parent.cssClass,frozenColumns:1,frozenRows:0,enableHover:!1,dataSource:t?this.frameEmptyData():this.frameDataSource("value"),columns:t?this.frameEmptyColumns():this.frameStackedHeaders(),height:t?"auto":this.calculateGridHeight(),width:t?this.gridSettings.allowAutoResizing?this.parent.width:400:this.calculateGridWidth(),locale:e.locale,enableRtl:e.enableRtl,allowExcelExport:e.allowExcelExport,allowPdfExport:e.allowPdfExport,allowResizing:this.gridSettings.allowResizing,allowTextWrap:this.gridSettings.allowTextWrap,clipMode:this.gridSettings.clipMode,allowReordering:!this.parent.showGroupingBar&&this.gridSettings.allowReordering,allowSelection:this.gridSettings.allowSelection,contextMenuItems:this.gridSettings.contextMenuItems,selectedRowIndex:this.gridSettings.selectedRowIndex,selectionSettings:this.gridSettings.selectionSettings,textWrapSettings:this.gridSettings.textWrapSettings,printMode:this.gridSettings.printMode,rowHeight:this.gridSettings.rowHeight,gridLines:this.gridSettings.gridLines,contextMenuClick:this.contextMenuClick.bind(this),contextMenuOpen:this.contextMenuOpen.bind(this),beforeCopy:this.gridSettings.beforeCopy?this.gridSettings.beforeCopy.bind(this.parent):void 0,beforePrint:this.gridSettings.beforePrint?this.gridSettings.beforePrint.bind(this.parent):void 0,printComplete:this.gridSettings.printComplete?this.gridSettings.printComplete.bind(this.parent):void 0,rowSelecting:this.gridSettings.rowSelecting?this.gridSettings.rowSelecting.bind(this.parent):void 0,rowSelected:this.rowSelected.bind(this),rowDeselecting:this.gridSettings.rowDeselecting?this.gridSettings.rowDeselecting.bind(this.parent):void 0,rowDeselected:this.rowDeselected.bind(this),cellSelecting:this.gridSettings.cellSelecting?this.gridSettings.cellSelecting.bind(this.parent):void 0,cellSelected:this.cellSelected.bind(this),cellDeselecting:this.gridSettings.cellDeselecting?this.gridSettings.cellDeselecting.bind(this.parent):void 0,cellDeselected:this.cellDeselected.bind(this),resizeStart:this.gridSettings.resizeStart?this.gridSettings.resizeStart.bind(this.parent):void 0,columnDragStart:this.gridSettings.columnDragStart?this.gridSettings.columnDragStart.bind(this):void 0,columnDrag:this.gridSettings.columnDrag?this.gridSettings.columnDrag.bind(this):void 0,columnDrop:this.gridSettings.columnDrop?this.gridSettings.columnDrop.bind(this):void 0,beforeExcelExport:this.beforeExcelExport.bind(this),resizing:this.setGroupWidth.bind(this),resizeStop:this.onResizeStop.bind(this),queryCellInfo:this.queryCellInfo.bind(this),dataBound:this.dataBound.bind(this),headerCellInfo:this.headerCellInfo.bind(this),excelHeaderQueryCellInfo:this.excelHeaderQueryCellInfo.bind(this),pdfHeaderQueryCellInfo:this.pdfHeaderQueryCellInfo.bind(this),excelQueryCellInfo:this.excelQueryCellInfo.bind(this),pdfQueryCellInfo:this.pdfQueryCellInfo.bind(this),beforePdfExport:this.gridSettings.beforePdfExport?this.gridSettings.beforePdfExport.bind(this):void 0,pdfExportComplete:this.pdfExportComplete.bind(this),excelExportComplete:this.excelExportComplete.bind(this)}),this.parent.grid.on("header-refreshed",this.headerRefreshed.bind(this)),this.parent.grid.on("export-DataBound",this.excelDataBound.bind(this))},e.prototype.headerRefreshed=function(){var e=this.parent.element.querySelector("."+a._24);this.parent.lastGridSettings&&Object.keys(this.parent.lastGridSettings).indexOf("allowResizing")>-1&&!i.i(n.isNullOrUndefined)(e)&&e.querySelector("."+a._26)&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+a.w)&&(this.parent.lastGridSettings=void 0,this.parent.groupingBarModule.setGridRowWidth())},e.prototype.beforeExcelExport=function(e){i.i(n.isNullOrUndefined)(e.gridObject.columns)||i.i(n.isNullOrUndefined)(this.parent.pivotColumns)||(e.gridObject.columns[e.gridObject.columns.length-1].width=this.parent.pivotColumns[this.parent.pivotColumns.length-1].width),this.parent.trigger(o._4,e)},e.prototype.rowSelected=function(e){this.parent.renderModule.selected(),this.parent.trigger(o.C,e)},e.prototype.rowDeselected=function(e){this.parent.renderModule.selected(),this.parent.trigger(o.D,e)},e.prototype.cellSelected=function(e){this.parent.rowRangeSelection.enable?(this.parent.grid.selectionModule.selectRowsByRange(this.parent.rowRangeSelection.startIndex,this.parent.rowRangeSelection.endIndex),this.parent.rowRangeSelection.enable=!1):(this.parent.renderModule.selected(),this.parent.trigger(o.x,e))},e.prototype.cellSelecting=function(e){this.parent.trigger(o.y,e)},e.prototype.cellDeselected=function(e){this.parent.renderModule.selected(),this.parent.trigger(o.B,e)},e.prototype.queryCellInfo=function(e){this.parent.renderModule.rowCellBoundEvent(e)},e.prototype.headerCellInfo=function(e){this.parent.renderModule.columnCellBoundEvent(e)},e.prototype.excelHeaderQueryCellInfo=function(e){this.parent.renderModule.excelColumnEvent(e)},e.prototype.pdfQueryCellInfo=function(e){this.parent.renderModule.pdfRowEvent(e)},e.prototype.excelQueryCellInfo=function(e){this.parent.renderModule.excelRowEvent(e)},e.prototype.pdfHeaderQueryCellInfo=function(e){this.parent.renderModule.pdfColumnEvent(e)},e.prototype.pdfExportComplete=function(e){void 0!==this.parent.lastColumn&&"auto"!==this.parent.lastColumn.width&&(this.parent.lastColumn.width="auto",this.parent.lastColumn=void 0);var t={type:"PDF",promise:e.promise};this.parent.trigger(o.i,t)},e.prototype.excelExportComplete=function(e){void 0!==this.parent.lastColumn&&"auto"!==this.parent.lastColumn.width&&(this.parent.lastColumn.width="auto",this.parent.lastColumn=void 0);var t={type:"Excel/CSV",promise:e.promise};this.parent.trigger(o.i,t)},e.prototype.dataBound=function(e){if(this.parent.cellTemplate){for(var t=0,r=this.parent.gridHeaderCellInfo;t<r.length;t++){var a=r[t];if(this.parent.cellTemplate){var s=this.parent.getCellTemplate()(a,this.parent,"cellTemplate",this.parent.element.id+"_cellTemplate",null,null,a.targetCell);s&&""!==s&&s.length>0&&(this.parent.enableHtmlSanitizer?this.parent.isVue||this.parent.isVue3?i.i(n.append)(n.SanitizeHtmlHelper.sanitize(s),a.targetCell):this.parent.appendHtml(a.targetCell,n.SanitizeHtmlHelper.sanitize(s[0].outerHTML)):this.parent.isVue||this.parent.isVue3?i.i(n.append)(s,a.targetCell):this.parent.appendHtml(a.targetCell,s[0].outerHTML))}}this.parent.gridHeaderCellInfo=[]}this.parent.notEmpty&&this.calculateGridHeight(!0),this.parent.isScrolling=!1,this.setFocusOnLastCell(),i.i(n.isNullOrUndefined)(this.parent.renderReactTemplates)||this.parent.renderReactTemplates(),this.parent.isInitial&&(this.parent.isInitial=!1,this.parent.refreshData(),this.parent.enableVirtualization&&this.parent.onContentReady()),this.parent.notify(o._23,{})},e.prototype.setFocusOnLastCell=function(){if(this.parent.keyboardModule&&this.parent.keyboardModule.event&&"TD"===this.parent.keyboardModule.event.target.nodeName){var e=this.parent.grid.serviceLocator.getService("focus");e.setFocusedElement(this.parent.keyboardModule.event.target),e.focus(this.parent.keyboardModule.event),i.i(n.addClass)([this.parent.keyboardModule.event.target],["e-focused","e-focus"]),this.parent.keyboardModule.event.target.setAttribute("tabindex","0"),this.parent.keyboardModule.event=void 0}},e.prototype.getCellElement=function(e){var t=i.i(n.closest)(e,"td");return i.i(n.isNullOrUndefined)(t)&&(t=i.i(n.closest)(e,"th")),t},e.prototype.contextMenuOpen=function(e){var t=this;e.element&&this.parent.cssClass&&i.i(n.addClass)([e.element.parentElement],this.parent.cssClass);for(var r=this,s=0,d=e.items;s<d.length;s++){var p=d[s],u=function(s){var d=r.parent.lastCellClicked?r.parent.lastCellClicked:r.parent.isAdaptive?e.event.target:r.parent.lastCellClicked,p=r.getCellElement(d),u=void 0,h=void 0;if(!p||p&&0===Number(p.getAttribute("index"))&&0===Number(p.getAttribute("data-colindex")))return e.cancel=!0,{value:void 0};(p.classList.contains("e-valuesheader")||p.classList.contains("e-stot"))&&(u=!0),r.parent.allowGrouping&&r.parent.groupingModule&&!r.validateField(p)&&(h=!0);var c=Number(p.getAttribute("index")),g=Number(p.getAttribute("data-colindex")),m=r.parent.pivotValues[c][g];switch(s.id){case r.parent.element.id+"_expand":p.querySelectorAll("."+a._40).length>0?(i.i(n.selectAll)("#"+r.parent.element.id+"_expand",e.element)&&i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(a.E),i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.remove(a.E),i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.contains(a._8)&&(i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.remove(a._8),i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.remove(a._8))):u?i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(a._8):i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(a.E);break;case r.parent.element.id+"_collapse":p.querySelectorAll("."+a._21).length>0?(i.i(n.select)("#"+r.parent.element.id+"_expand",e.element)&&i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.add(a.E),i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.remove(a.E),i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.contains(a._8)&&(i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.remove(a._8),i.i(n.select)("#"+r.parent.element.id+"_expand",e.element).classList.remove(a._8))):u?i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.add(a._8):i.i(n.select)("#"+r.parent.element.id+"_collapse",e.element).classList.add(a.E);break;case r.parent.element.id+"_custom_group":h||2!==e.items.length||(e.cancel=!0),i.i(n.selectAll)("#"+r.parent.element.id+"_custom_group",e.element)&&i.i(n.addClass)([i.i(n.select)("#"+r.parent.element.id+"_custom_group",e.element)],a._8),h&&i.i(n.selectAll)("#"+r.parent.element.id+"_custom_group",e.element)&&i.i(n.removeClass)([i.i(n.select)("#"+r.parent.element.id+"_custom_group",e.element)],a._8);break;case r.parent.element.id+"_custom_ungroup":if(i.i(n.selectAll)("#"+r.parent.element.id+"_custom_ungroup",e.element)&&i.i(n.addClass)([i.i(n.select)("#"+r.parent.element.id+"_custom_ungroup",e.element)],a._8),h){var f=!1,v=p.getAttribute("fieldname"),S=l.a.getFieldByName(v,r.parent.dataSourceSettings.groupSettings);if(S&&"Custom"===S.type||r.parent.engineModule.fieldList[v].isCustomField&&v.indexOf("_custom_group")>-1){if(S=l.a.getFieldByName(v.replace("_custom_group",""),r.parent.dataSourceSettings.groupSettings)){var y=r.parent.engineModule.pivotValues[Number(p.getAttribute("index"))][Number(p.getAttribute("data-colindex"))],b=r.parent.groupingModule.getSelectedCells(y.axis,v,y.actualText.toString());b.push({axis:y.axis,fieldName:v,name:y.actualText.toString(),cellInfo:y});for(var C=r.parent.groupingModule.getSelectedOptions(b),x=0,w=S.customGroups;x<w.length;x++){var T=w[x];if(C.indexOf(T.groupName)>-1){f=!0;break}}}}else(S&&("Date"===S.type||"Number"===S.type)||r.parent.engineModule.fieldList[v].isCustomField&&v.indexOf("_date_group")>-1)&&(f=!0);i.i(n.selectAll)("#"+r.parent.element.id+"_custom_ungroup",e.element)&&f&&i.i(n.removeClass)([i.i(n.select)("#"+r.parent.element.id+"_custom_ungroup",e.element)],a._8)}break;case r.parent.element.id+"_drillthrough":r.parent.allowDrillThrough?p.classList.contains("e-summary")?i.i(n.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.remove(a.E):""===p.innerText&&i.i(n.select)("#"+r.parent.element.id+"_drillthrough",e.element)&&i.i(n.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.add(a.E):i.i(n.select)("#"+r.parent.element.id+"_drillthrough",e.element)&&i.i(n.select)("#"+r.parent.element.id+"_drillthrough",e.element).classList.add(a.E);break;case r.parent.element.id+"_sortasc":r.parent.enableValueSorting?p.querySelectorAll(".e-icon-descending").length>0?(i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element)?i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.add(a.E):i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.remove(a.E),i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.remove(a.E)):i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.remove(a.E):i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element)&&i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.add(a.E);break;case r.parent.element.id+"_sortdesc":r.parent.enableValueSorting?p.querySelectorAll(".e-icon-ascending").length>0?(i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element)?i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.add(a.E):i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.remove(a.E),i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.remove(a.E)):i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_sortasc",e.element).classList.remove(a.E):i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element)&&i.i(n.select)("#"+r.parent.element.id+"_sortdesc",e.element).classList.add(a.E);break;case r.parent.element.id+"_CalculatedField":r.parent.allowCalculatedField||i.i(n.select)("#"+r.parent.element.id+"_CalculatedField",e.element).classList.add(a.E);break;case r.parent.element.id+"_pdf":r.parent.allowPdfExport||i.i(n.select)("#"+r.parent.element.id+"_pdf",e.element).classList.add(a.E);break;case r.parent.element.id+"_excel":r.parent.allowExcelExport||i.i(n.select)("#"+r.parent.element.id+"_excel",e.element).classList.add(a.E);break;case r.parent.element.id+"_csv":r.parent.allowExcelExport||i.i(n.select)("#"+r.parent.element.id+"_csv",e.element).classList.add(a.E);break;case r.parent.element.id+"_exporting":r.parent.allowExcelExport||r.parent.allowPdfExport||i.i(n.select)("#"+r.parent.element.id+"_exporting",e.element).classList.add(a.E);break;case r.parent.element.id+"_aggregate":if(i.i(n.select)("#"+r.parent.element.id+"_aggregate",e.element)&&!i.i(n.select)("#"+r.parent.element.id+"_aggregate",e.element).classList.contains(a.E)&&i.i(n.select)("#"+r.parent.element.id+"_aggregate",e.element).classList.add(a.E),(p.classList.contains("e-valuesheader")||p.classList.contains("e-valuescontent")||p.classList.contains("e-stot")&&p.classList.contains("e-rowsheader"))&&"olap"!==r.parent.dataType){var M;""!==p.innerText&&(M=r.parent.engineModule.fieldList[m.actualText.toString()].type);var _={cancel:!1,fieldName:m.actualText.toString(),aggregateTypes:r.getMenuItem(M).slice(),displayMenuCount:7};r.parent.trigger(o._10,_,function(r){if(!r.cancel&&""!==p.innerText){for(var o=[],l=[],d=0;d<r.aggregateTypes.length;d++){var u=r.aggregateTypes[d];"number"!==M?["Count","DistinctCount"].indexOf(u)>-1&&l.indexOf(u)<0&&(o.push({text:t.parent.localeObj.getConstant(u),id:t.parent.element.id+"_Agg"+u}),l.push(u)):t.parent.getAllSummaryType().indexOf(u)>-1&&l.indexOf(u)<0&&(o.push({text:t.parent.localeObj.getConstant(u),id:t.parent.element.id+"_Agg"+u}),l.push(u))}o.length>r.displayMenuCount&&(o.splice(r.displayMenuCount),o.push({text:t.parent.localeObj.getConstant("MoreOption"),id:t.parent.element.id+"_AggMoreOption"})),o&&o.length>=1&&(s.items=o,i.i(n.select)("#"+t.parent.element.id+"_aggregate",e.element).classList.remove(a.E))}})}}}(p);if("object"==typeof u)return u.value}this.parent.trigger(o._0,e)},e.prototype.getMenuItem=function(e){for(var t=[],i=0;i<this.parent.aggregateTypes.length;i++){var r=this.parent.aggregateTypes[i];"string"!==e?this.parent.getAllSummaryType().indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r):["Count","DistinctCount"].indexOf(r)>-1&&-1===t.indexOf(r)&&t.push(r)}return t},e.prototype.contextMenuClick=function(e){var t,i=this,r=this.parent.lastCellClicked,n=e.item.id,s=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),l={},d=this.getCellElement(r),p=Number(d.getAttribute("index")),u=Number(d.getAttribute("data-colindex")),h=this.parent.pivotValues[p][u];switch(e.item.id.indexOf(this.parent.element.id+"_Agg")>-1&&(this.field=this.parent.engineModule.fieldList[h.actualText.toString()].id,this.fieldCaption=this.parent.engineModule.fieldList[h.actualText.toString()].caption,t=e.item.id.split("_Agg")[1]),n){case this.parent.element.id+"_pdf":l={pdfDoc:void 0,isBlob:!1,isMultipleExport:!1,pdfExportProperties:{fileName:"Export.pdf"}},this.parent.trigger(o.h,l,function(e){i.parent.pdfExport(e.pdfExportProperties,e.isMultipleExport,e.pdfDoc,e.isBlob)});break;case this.parent.element.id+"_excel":l={isBlob:!1,isMultipleExport:!1,workbook:void 0,excelExportProperties:{fileName:"Export.xlsx"}},this.parent.trigger(o.h,l,function(e){i.parent.excelExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"_csv":l={isBlob:!1,workbook:void 0,isMultipleExport:!1,excelExportProperties:{fileName:"Export.csv"}},this.parent.trigger(o.h,l,function(e){i.parent.csvExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"_drillthrough_menu":d.dispatchEvent(s);break;case this.parent.element.id+"_sortasc":this.parent.setProperties({dataSourceSettings:{valueSortSettings:{headerText:h.valueSort.levelName,headerDelimiter:this.parent.dataSourceSettings.valueSortSettings.headerDelimiter}}}),this.parent.dataSourceSettings.valueSortSettings.sortOrder="Ascending";break;case this.parent.element.id+"_sortdesc":this.parent.setProperties({dataSourceSettings:{valueSortSettings:{headerText:h.valueSort.levelName,headerDelimiter:this.parent.dataSourceSettings.valueSortSettings.headerDelimiter}}}),this.parent.dataSourceSettings.valueSortSettings.sortOrder="Descending";break;case this.parent.element.id+"_expand":if(d.querySelectorAll("."+a._40)){var c=d.querySelectorAll("."+a._40)[0];this.parent.onDrill(c)}break;case this.parent.element.id+"_collapse":if(d.querySelectorAll("."+a._21)){var g=d.querySelectorAll("."+a._21)[0];this.parent.onDrill(g)}break;case this.parent.element.id+"_CalculatedField":this.parent.calculatedFieldModule.createCalculatedFieldDialog();break;case this.parent.element.id+"_AggMoreOption":case this.parent.element.id+"_AggDifferenceFrom":case this.parent.element.id+"_AggPercentageOfDifferenceFrom":case this.parent.element.id+"_AggPercentageOfParentTotal":d.setAttribute("id",this.field),d.setAttribute("data-caption",this.fieldCaption),d.setAttribute("data-field",this.field),d.setAttribute("data-type",this.engine.fieldList[h.actualText.toString()].aggregateType),d.setAttribute("data-basefield",this.engine.fieldList[h.actualText.toString()].baseField),d.setAttribute("data-baseItem",this.engine.fieldList[h.actualText.toString()].baseItem),this.aggMenu.createValueSettingsDialog(d,this.parent.element,t);break;case this.parent.element.id+"_Agg"+t:this.updateAggregate(t);break;case this.parent.element.id+"_custom_group":case this.parent.element.id+"_custom_ungroup":if(this.parent.groupingModule){var m={target:d,option:n,parentElement:this.parent.element};this.parent.notify(o._33,m),this.parent.grid.contextMenuModule.contextMenu.close()}}this.parent.trigger(o.Z,e)},e.prototype.validateColumnTotalcell=function(e){for(var t=Object.keys(this.engine.headerContent),i=t.length,r=!1,n="",a=i-1;a>=0;a--){var o=this.engine.headerContent[t[a]][e];if(!o)return!1;if(r=!(!r||""===n)&&n===o.valueSort.axis,n=o.valueSort.axis?o.valueSort.axis.toString():"","sum"===o.type&&(r=!0),r&&o.members&&o.members.length>0)return!0}return!1},e.prototype.validateField=function(e){var t=!1;if(e.classList.contains("e-stot")||e.classList.contains("e-gtot")||e.classList.contains("e-valuescontent")||e.classList.contains("e-valuesheader"))t=!0;else{var i=e.getAttribute("fieldName");if(!i||""===i){var r=Number(e.getAttribute("index")),n=Number(e.getAttribute("data-colindex"));i=this.engine.pivotValues[r][n].actualText}for(var a=this.parent.dataSourceSettings.values,o=0;o<a.length;o++)if(this.parent.dataSourceSettings.values[o].name===i){t=!0;break}}return t},e.prototype.updateAggregate=function(e){if(this.parent.getAllSummaryType().indexOf(e)>-1)for(var t=this.parent.dataSourceSettings.values,i=0;i<this.parent.dataSourceSettings.values.length;i++)if(this.parent.dataSourceSettings.values[i].name===this.field){var r=t[i];r.type=e}},e.prototype.injectGridModules=function(e){r.Grid.Inject(r.Freeze),e.allowExcelExport&&r.Grid.Inject(r.ExcelExport),e.allowPdfExport&&r.Grid.Inject(r.PdfExport),r.Grid.Inject(r.Selection,r.Reorder,r.Resize),this.gridSettings.contextMenuItems&&r.Grid.Inject(r.ContextMenu)},e.prototype.updateGridSettings=function(){if(this.injectGridModules(this.parent),this.parent.grid.allowResizing=this.gridSettings.allowResizing,this.parent.grid.clipMode=this.gridSettings.clipMode,this.parent.grid.allowTextWrap=this.gridSettings.allowTextWrap,this.parent.grid.allowReordering=!this.parent.showGroupingBar&&this.gridSettings.allowReordering,this.parent.grid.allowSelection=this.gridSettings.allowSelection,this.parent.grid.contextMenuItems=this.gridSettings.contextMenuItems,this.parent.grid.selectedRowIndex=this.gridSettings.selectedRowIndex,this.parent.grid.selectionSettings=this.gridSettings.selectionSettings,this.parent.grid.textWrapSettings=this.gridSettings.textWrapSettings,this.parent.grid.printMode=this.gridSettings.printMode,this.parent.grid.rowHeight=this.gridSettings.rowHeight,this.parent.grid.gridLines=this.gridSettings.gridLines,this.parent.lastGridSettings){var e=Object.keys(this.parent.lastGridSettings);e.indexOf("height")>-1&&(this.parent.grid.height=this.gridSettings.height),e.indexOf("width")>-1&&(this.parent.grid.width=this.gridSettings.width),this.updatePivotColumns(),(e.indexOf("allowTextWrap")>-1||e.indexOf("clipMode")>-1)&&this.parent.layoutRefresh()}this.clearColumnSelection()},e.prototype.updatePivotColumns=function(){for(var e=Object.keys(this.parent.lastGridSettings),t=0;t<this.parent.pivotColumns.length;t++)for(var r=this.parent.pivotColumns[t],a=0;a<e.length;a++){var o=e[a];i.i(n.isNullOrUndefined)(this.parent.pivotColumns[t][o])||(r[o]=this.parent.lastGridSettings[o])}this.parent.fillGridColumns(this.parent.grid.columns)},e.prototype.clearColumnSelection=function(){i.i(n.removeClass)(this.parent.element.querySelectorAll("."+a._38),[a._38,a.c])},e.prototype.appendValueSortIcon=function(e,t,r,a,o){if(this.parent.enableValueSorting&&"pivot"===this.parent.dataType){var s=this.parent.dataSourceSettings.valueSortSettings,l="grand sum"!==e.type||1!==this.parent.dataSourceSettings.values.length||this.parent.dataSourceSettings.alwaysShowValueHeader?this.parent.dataSourceSettings.values.length>1||this.parent.dataSourceSettings.alwaysShowValueHeader?this.parent.engineModule.headerContent.length-1:0===this.parent.dataSourceSettings.columns.length?0:this.parent.engineModule.headerContent.length-1:0,d=s&&s.headerText?e.valueSort.levelName===s.headerText:a===s.columnIndex;void 0!==s&&d&&(r===l||r+1===l&&e.level>-1&&this.parent.engineModule.headerContent[r+1][a]&&-1===this.parent.engineModule.headerContent[r+1][a].level)&&"column"===this.parent.dataSourceSettings.valueAxis&&t.querySelector("div div").appendChild(i.i(n.createElement)("span",{className:("Descending"===s.sortOrder?"e-icon-descending e-icons e-descending e-sortfilterdiv e-value-sort-icon":"e-icon-ascending e-icons e-ascending e-sortfilterdiv e-value-sort-icon")+(e.hasChild?" e-value-sort-align":""),styles:"Right"===o.headerTextAlign?"float : left":""}))}return t},e.prototype.onResizeStop=function(e){var t="0.formattedText"===e.column.field?"0.formattedText":e.column.customAttributes.cell.valueSort.levelName;if(this.parent.resizeInfo[t]=Number(e.column.width.toString().split("px")[0]),this.parent.enableVirtualization&&"0.formattedText"===e.column.field){if(this.parent.dataSourceSettings.values.length>1&&!i.i(n.isNullOrUndefined)(this.parent.grid.columns[this.parent.grid.columns.length-1].columns)){var r=this.parent.grid.columns[this.parent.grid.columns.length-1].columns;r[r.length-1].minWidth=this.parent.gridSettings.columnWidth}else this.parent.grid.columns[this.parent.grid.columns.length-1].minWidth=this.parent.gridSettings.columnWidth;this.parent.layoutRefresh()}this.setGroupWidth(e),this.calculateGridHeight(!0),this.parent.grid.hideScroll()},e.prototype.setGroupWidth=function(e){if(this.parent.enableVirtualization&&"0.formattedText"===e.column.field&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+a.w)&&Number(e.column.width.toString().split("px")[0])<250&&(e.cancel=!0),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+a.w)){if(this.parent.groupingBarModule.refreshUI(),this.parent.element.querySelector(".e-group-row").offsetWidth<245&&!this.parent.firstColWidth){e.cancel=!0;var t=this.parent.grid.columns;t&&t.length>0&&(t[0].width=this.resColWidth),this.parent.element.querySelector("."+a._41).querySelector("col").style.width=this.resColWidth+"px",this.parent.element.querySelector("."+a._23).querySelector("col").style.width=this.resColWidth+"px"}this.parent.element.querySelector(".e-group-rows").style.height="auto",this.parent.element.querySelector(".e-group-values").style.width=this.parent.element.querySelector(".e-group-row").offsetWidth+"px";var i=this.parent.element.querySelector("."+a._41).offsetHeight;this.parent.element.querySelector(".e-group-rows").style.height=i+"px"}if(e.cancel){var r="0.formattedText"===e.column.field?"0.formattedText":e.column.customAttributes.cell.valueSort.levelName;this.parent.resizeInfo[r]=Number(e.column.width.toString().split("px")[0]),this.parent.enableVirtualization&&this.parent.layoutRefresh()}this.parent.enableVirtualization&&(this.parent.resizedValue=e.cancel||"0.formattedText"!==e.column.field?this.parent.resizedValue:Number(e.column.width.toString().split("px")[0])),this.parent.trigger("touchend"===e.e.type||"mouseup"===e.e.type?o.t:o.s,e)},e.prototype.selected=function(){clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.onSelect.bind(this),300)},e.prototype.onSelect=function(){for(var e={selectedCellsInfo:[],pivotValues:this.parent.pivotValues,currentCell:null},t=this.parent.element.querySelectorAll("."+a.b+",."+a.c),i=0,r=t;i<r.length;i++){var n=r[i],s=Number(n.getAttribute("data-colindex")),l=Number(n.getAttribute("index")),d=this.engine.pivotValues[l][s];d&&("value"===d.axis?e.selectedCellsInfo.push({currentCell:d,value:d.value,columnHeaders:d.columnHeaders,rowHeaders:d.rowHeaders,measure:d.actualText.toString()}):"column"===d.axis?e.selectedCellsInfo.push({currentCell:d,value:d.formattedText,columnHeaders:d.valueSort.levelName,rowHeaders:"",measure:""}):e.selectedCellsInfo.push({currentCell:d,value:d.formattedText,columnHeaders:"",rowHeaders:d.valueSort.levelName,measure:""}))}this.parent.trigger(o.A,e)},e.prototype.rowCellBoundEvent=function(e){var t=e.cell;if(t&&this.parent.notEmpty&&this.engine.headerContent){var r=this.parent.hyperlinkSettings.cssClass,s=e.data[0],l=s.valueSort&&s.valueSort.levelName===(0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+s.formattedText);if(t.setAttribute("index",s.rowIndex?s.rowIndex.toString():"0"),"0"===t.getAttribute("data-colindex")){if("pivot"===this.parent.dataType){var d=s.type&&"value"===s.type;t.innerText="";var p=s.valueSort?s.valueSort.levelName.toString():"",u=s.actualText?s.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,h=p.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(u?u-1:u),c=h?h-1:0;c=s.isSum?c-1:c;do{c>0&&t.appendChild(i.i(n.createElement)("span",{className:0===c?"":a._49})),c--}while(c>-1);c=h?h-1:0,this.lastSpan=h?this.lastSpan:0,!s.hasChild&&(d?0:c)>0&&t.appendChild(i.i(n.createElement)("span",{className:a._50}));var g=void 0;if(this.parent.dataSourceSettings.rows.length>0&&(!s.valueSort||Object.keys(s.valueSort).length>0)){if(d)for(var m=0,f=this.parent.dataSourceSettings.values;m<f.length;m++){var v=f[m],S=v.caption?v.caption:v.name;if(p.indexOf(S)>-1){g=v.name;break}}else g=s.level>-1&&this.parent.dataSourceSettings.rows[s.level]?this.parent.dataSourceSettings.rows[s.level].name:"";t.setAttribute("fieldname",g)}}else t=this.onOlapRowCellBoundEvent(t,s);var y=s.formattedText;if(s.type)if("grand sum"===s.type){this.rowGrandPos=s.rowIndex,t.classList.add("e-gtot");var b=this.parent.dataSourceSettings.values;y=i.i(n.isNullOrUndefined)(s.valueSort.axis)?0===this.parent.dataSourceSettings.rows.length&&1===b.length&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(b[b.length-1].type)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(n.isNullOrUndefined)(b[b.length-1].caption)?b[b.length-1].name:b[b.length-1].caption):this.parent.localeObj.getConstant("grandTotal"):s.formattedText}else s.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+s.formattedText?(t.classList.add("e-gtot"),y=l?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[s.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+s.formattedText:y):"sum"===s.type&&3!==s.memberType?y=s.formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"):t.classList.add("e-stot");t.classList.add(a._20),!0!==s.hasChild||s.isNamedSet||t.appendChild(i.i(n.createElement)("div",{className:(!0===s.isDrilled?a._21:a._40)+" "+a.a,attrs:{title:!0===s.isDrilled?this.parent.localeObj.getConstant("collapse"):this.parent.localeObj.getConstant("expand")}})),t.appendChild(i.i(n.createElement)("span",{className:a._51,innerHTML:this.parent.isRowCellHyperlink||s.enableHyperlink?'<a  data-url="'+y+'" class="e-hyperlinkcell '+r+'">'+y+"</a>":y}));var C=this.parent.pivotView.dataSourceSettings.valueSortSettings;this.parent.enableValueSorting&&C&&C.headerText&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.pivotValues[Number(t.getAttribute("index"))][0]&&this.parent.pivotValues[Number(t.getAttribute("index"))][0].valueSort.levelName&&this.parent.pivotValues[Number(t.getAttribute("index"))][0].valueSort.levelName===C.headerText&&t.appendChild(i.i(n.createElement)("span",{className:("Descending"===C.sortOrder?"e-icon-descending e-icons e-descending e-sortfilterdiv e-value-sort-icon":"e-icon-ascending e-icons e-ascending e-sortfilterdiv e-value-sort-icon")+(s.hasChild?" e-value-sort-align":""),styles:"right"===t.style.textAlign?"float: left":""}))}else{var x=t.innerText;t.innerText="",t.classList.add(a._52),s=e.data[Number(t.getAttribute("data-colindex"))],s=i.i(n.isNullOrUndefined)(s)?e.column.customAttributes.cell:s,s.isGrandSum=!!l||s.isGrandSum,s.isSum&&t.classList.add(a._53);var w=i.i(n.isNullOrUndefined)(s.isGrandSum)&&!i.i(n.isNullOrUndefined)(this.parent.olapEngineModule)&&"column"===this.parent.olapEngineModule.olapValueAxis&&"olap"===this.parent.dataType&&this.colGrandPos-this.parent.dataSourceSettings.values.length<Number(t.getAttribute("data-colindex"));s.isGrandSum||w||this.colGrandPos===Number(t.getAttribute("data-colindex"))||this.rowGrandPos===Number(t.getAttribute("index"))?t.classList.add("e-gtot"):("olap"===this.parent.dataType?s.isSum:this.validateColumnTotalcell(s.colIndex))&&t.classList.add("e-colstot"),s.cssClass&&t.classList.add(s.cssClass),t.appendChild(i.i(n.createElement)("span",{className:a._51,innerHTML:-1!==t.className.indexOf("e-summary")&&this.parent.isSummaryCellHyperlink||-1===t.className.indexOf("e-summary")&&this.parent.isValueCellHyperlink||s.enableHyperlink?'<a data-url="'+x+'" class="e-hyperlinkcell '+r+'">'+x+"</a>":x})),this.parent.gridSettings.allowReordering&&!this.parent.showGroupingBar&&t.setAttribute("data-colindex",e.column.customAttributes?e.column.customAttributes.cell.colIndex.toString():e.column.index.toString())}if(this.parent.cellTemplate){var T=this.parent.getCellTemplate()({targetCell:t,cellInfo:s},this.parent,"cellTemplate",this.parent.element.id+"_cellTemplate",null,null,t);T&&""!==T&&T.length>0&&(this.parent.enableHtmlSanitizer?this.parent.isVue||this.parent.isVue3?i.i(n.append)(n.SanitizeHtmlHelper.sanitize(T),t):this.parent.appendHtml(t,n.SanitizeHtmlHelper.sanitize(T[0].outerHTML)):this.parent.isVue||this.parent.isVue3?i.i(n.append)(T,t):this.parent.appendHtml(t,T[0].outerHTML))}this.unWireEvents(t),this.wireEvents(t)}e.pivotview=this.parent,this.parent.trigger(o.p,e)},e.prototype.onOlapRowCellBoundEvent=function(e,t){e.innerText="";var r=this.engine.rowMeasurePos;if(this.parent.enableVirtualization){if(t.ordinal>-1&&this.parent.olapEngineModule.tupRowInfo.length>0){var o=this.parent.olapEngineModule.tupRowInfo[t.ordinal],s=o.uNameCollection.indexOf(t.actualText.toString()),l=o.uNameCollection.substring(0,s)+(3===t.memberType?"":t.actualText.toString()),d=l.split("::[").map(function(e){return"["===e[0]?e:"["+e});3===t.memberType&&r&&d.push(t.actualText.toString());for(var p=-1,u=0,h=!1,c=0;c<d.length;c++){var g=d[c],m=g.split("~~").length;p+=m;var f="2"!==o.typeCollection[c]&&(!!(this.engine.fieldList[o.members[c].getAttribute("Hierarchy")]&&this.engine.fieldList[o.members[c].getAttribute("Hierarchy")].isHierarchy&&c<this.parent.dataSourceSettings.rows.length-1&&!this.parent.dataSourceSettings.rows[c+1].isNamedSet&&this.parent.dataSourceSettings.rows[c+1].name.indexOf("[Measures]")<0&&this.engine.fieldList[this.parent.dataSourceSettings.rows[c+1].name]&&this.engine.fieldList[this.parent.dataSourceSettings.rows[c+1].name].hasAllMember)||Number(o.members[c].querySelector("CHILDREN_CARDINALITY").textContent)>0);u+=c>0&&h&&!f?1:0,h=f}for(var v=0,S=0;S<p;S++)e.appendChild(i.i(n.createElement)("span",{className:a._49})),v++;for(var S=0;S<u&&p>0;S++)e.appendChild(i.i(n.createElement)("span",{className:a._50}));this.indentCollection[t.rowIndex]=v,this.maxIndent=this.maxIndent>v?this.maxIndent:v}}else{var y=t.hierarchy,b=3===t.memberType?this.measurePos+"."+t.levelUniqueName:t.levelUniqueName,f=t.hasChild,C=!1;if(t.isSum&&3===t.memberType){for(var x=this.lvlCollection[t.parentUniqueName].position,w=x+1;w<this.position;w++)delete this.lvlCollection[this.lvlPosCollection[w]],delete this.lvlPosCollection[w];this.position=this.position>x+1?x+1:this.position,C=!0,this.measurePos=this.lvlCollection[t.parentUniqueName].position}if(!this.lvlCollection[b]&&b)this.lvlPosCollection[this.position]=b,this.lvlCollection[b]={position:this.position,hasChild:f},this.position++;else if(b){for(var T=this.lvlCollection[b].position,M=T+1;M<this.position;M++)delete this.lvlCollection[this.lvlPosCollection[M]],delete this.lvlPosCollection[M];this.position=this.position>T+1?T+1:this.position}if(!this.hierarchyCollection[y]&&y)this.hierarchyPosCollection[this.hierarchyCount]=y,this.hierarchyCollection[y]={lvlPosition:this.position-1,hierarchyPOs:this.hierarchyCount},this.hierarchyCount++;else if(y){for(var _=this.hierarchyCollection[y].hierarchyPOs,M=_+1;M<this.hierarchyCount;M++)delete this.hierarchyCollection[this.hierarchyPosCollection[M]],delete this.hierarchyPosCollection[M];this.hierarchyCount=this.hierarchyCount>_+1?_+1:this.hierarchyCount}if(3!==t.memberType&&b&&this.lvlCollection[b]){var D=this.hierarchyCollection[y]?this.hierarchyCollection[y].hierarchyPOs:-1;this.measurePos=r<=D&&this.hierarchyPosCollection[r+1]?this.measurePos:this.lvlCollection[b].position}var O=this.lvlCollection[b]?this.lvlCollection[b].position:-1;O=C?O-1:O;for(var P=0,v=0;P<=O&&O>0&&t.level>-1;){var N=this.lvlCollection[this.lvlPosCollection[P]].hasChild,h=P>0&&this.lvlCollection[this.lvlPosCollection[P-1]].hasChild;h&&!N&&e.appendChild(i.i(n.createElement)("span",{className:a._50})),P!==O&&(e.appendChild(i.i(n.createElement)("span",{className:a._49})),v++),P++}"Top"!==this.parent.dataSourceSettings.grandTotalsPosition||i.i(n.isNullOrUndefined)(this.parent.olapEngineModule)||"row"!==this.parent.olapEngineModule.olapValueAxis||"olap"!==this.parent.dataType||0!==t.valueSort.levelName.toString().indexOf(this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter)||e.appendChild(i.i(n.createElement)("span",{className:a._49})),3===t.memberType&&-1===t.level&&Object.keys(this.lvlCollection).length>1&&(e.appendChild(i.i(n.createElement)("span",{className:a._49})),v++),this.indentCollection[t.rowIndex]=v,this.maxIndent=this.maxIndent>v?this.maxIndent:v}return e.setAttribute("fieldname",t.hierarchy),!!this.parent.olapEngineModule.tupRowInfo[t.ordinal]&&(0===this.parent.olapEngineModule.tupRowInfo[t.ordinal].measurePosition?1===this.parent.olapEngineModule.tupRowInfo[t.ordinal].allStartPos:0===this.parent.olapEngineModule.tupRowInfo[t.ordinal].allStartPos)&&e.classList.add("e-gtot"),e},e.prototype.columnCellBoundEvent=function(e){if(e.cell.column&&e.cell.column.customAttributes){var t=e.cell.column.customAttributes.cell,r=e.node;if(t){for(var s=this.parent.hyperlinkSettings.cssClass,l=!1,d=0,p=this.parent.dataSourceSettings.values;d<p.length;d++){var u=p[d];u.name===t.actualText&&(l=!0,r.setAttribute("fieldname",u.name))}-1===t.level&&!t.rowSpan||-1===t.rowSpan?e.node.style.display="none":t.rowSpan>1&&(e.node.setAttribute("rowspan",t.rowSpan.toString()),e.node.setAttribute("aria-rowspan",t.rowSpan.toString()),t.rowIndex+t.rowSpan===this.engine.headerContent.length&&(e.node.style.borderBottomWidth="0px")),e.node.setAttribute("data-colindex",t.colIndex.toString()),e.node.setAttribute("index",t.rowIndex.toString());var h=void 0;"pivot"===this.parent.dataType?(!l&&!(this.parent.dataSourceSettings.values&&"column"===this.parent.dataSourceSettings.valueAxis&&this.parent.dataSourceSettings.values.length>1&&l&&t.rowIndex===this.engine.headerContent.length-1)&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&(h=t.level>-1&&this.parent.dataSourceSettings.columns[t.level]?this.parent.dataSourceSettings.columns[t.level].name:"",r.setAttribute("fieldname",h)),this.validateColumnTotalcell(t.colIndex)&&r.classList.add("e-colstot")):r=this.onOlapColumnCellBoundEvent(r,t);var c=0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&t.valueSort&&t.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText;if(t.type||c){r.classList.add("grand sum"===t.type?"e-gtot":"e-stot"),"grand sum"===t.type?this.colGrandPos=t.colIndex:t.type&&r.classList.add("e-colstot");var g="grand sum"===t.type?i.i(n.isNullOrUndefined)(t.valueSort.axis)||"olap"===this.parent.dataType?this.parent.localeObj.getConstant("grandTotal"):t.formattedText:t.formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total");g=c&&this.parent.engineModule.fieldList?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[t.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+t.formattedText:g,null!==r.querySelector(".e-headertext")?r.querySelector(".e-headertext").innerText=g:r.querySelector(".e-stackedheadercelldiv").innerText=g}if(r.classList.add(a._46),this.parent.isColumnCellHyperlink||t.enableHyperlink)if(r.querySelector(".e-stackedheadercelldiv")){var m=r.querySelector(".e-stackedheadercelldiv").innerText;r.querySelector(".e-stackedheadercelldiv").innerHTML='<a data-url="'+m+'" class="e-hyperlinkcell '+s+'">'+m+"</a>"}else if(r.querySelector(".e-headertext")){var m=r.querySelector(".e-headertext").innerText;r.querySelector(".e-headertext").innerHTML='<a data-url="'+m+'" class="e-hyperlinkcell '+s+'">'+m+"</a>"}if(!0!==t.hasChild||t.isNamedSet)this.updateWrapper(r);else{var f=r.querySelector(".e-headercelldiv");f&&(f.style.height="auto",f.style.lineHeight="normal");var v=i.i(n.createElement)("div",{className:(!0===t.isDrilled?a._21:a._40)+" "+a.a,attrs:{title:!0===t.isDrilled?this.parent.localeObj.getConstant("collapse"):this.parent.localeObj.getConstant("expand")}});window.navigator.userAgent.indexOf("Edge")>-1||window.navigator.userAgent.indexOf("Trident")>-1?r.children[0].style.display="table":r.children[0].style.display="block",this.updateWrapper(r,v)}r=this.appendValueSortIcon(t,r,t.rowIndex,t.colIndex,e.cell.column),this.parent.cellTemplate&&this.parent.gridHeaderCellInfo.push({targetCell:r});for(var S=this.parent.dataSourceSettings.values.length,y=0;y<S;y++)if(this.parent.dataSourceSettings.values[y].name===t.actualText){if("olap"===this.parent.dataType){var b=!!this.parent.olapEngineModule.tupColumnInfo[t.ordinal]&&(0===this.parent.olapEngineModule.tupColumnInfo[t.ordinal].measurePosition?1===this.parent.olapEngineModule.tupColumnInfo[t.ordinal].allStartPos:0===this.parent.olapEngineModule.tupColumnInfo[t.ordinal].allStartPos);b&&r.classList.add("e-gtot")}t.valueSort.levelName===this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText||t.valueSort.levelName==="Grand Total"+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+t.formattedText?r.classList.add("e-gtot"):r.classList.add(a._54)}this.unWireEvents(r),this.wireEvents(r)}}this.parent.trigger(o.q,e)},e.prototype.updateWrapper=function(e,t){if(e.querySelectorAll(".e-headercelldiv").length>0||e.querySelectorAll(".e-stackedheadercelldiv").length>0){var r=i.i(n.createElement)("div",{className:a._55}),o=i.i(n.createElement)("div",{className:(t?"e-stackedheadertext":"e-headertext")+" "+a._51,innerHTML:e.querySelectorAll(".e-headercelldiv").length>0?e.querySelector(".e-headercelldiv").innerHTML:e.querySelector(".e-stackedheadercelldiv").innerHTML});t&&r.append(t),r.append(o),e.children[0].innerHTML="",e.children[0].append(r)}return e},e.prototype.onOlapColumnCellBoundEvent=function(e,t){e.setAttribute("fieldname",3===t.memberType?t.actualText.toString():t.hierarchy);var i=this.engine.headerContent[t.rowIndex]?this.engine.headerContent[t.rowIndex][t.colIndex-1]:void 0;return i&&i.actualText===t.actualText&&i.type===t.type&&i.colSpan>1&&(e.style.display="none"),t.rowIndex===this.engine.headerContent.length-1&&2===t.memberType&&(e.style.display=this.isSpannedCell(this.engine.headerContent.length,t)?"none":e.style.display),e},e.prototype.isSpannedCell=function(e,t){for(var i,r,n=this.engine.headerContent[t.rowIndex-1]?this.engine.headerContent[t.rowIndex-1][t.colIndex]:void 0;n&&(n.memberType===t.memberType||n.type&&t.type);)n.rowSpan>0&&(i=n.rowSpan,r=n.rowIndex),n=this.engine.headerContent[n.rowIndex-1]?this.engine.headerContent[n.rowIndex-1][t.colIndex]:void 0;return r+i>=e},e.prototype.onHyperCellClick=function(e){var t=e.target.parentElement.parentElement;t=t.className.indexOf("e-headercelldiv")>-1?t.parentElement:t;var r={currentCell:t,data:this.engine.pivotValues[Number(t.getAttribute("index"))][Number(t.getAttribute("data-colindex"))],cancel:!0,nativeEvent:e};this.parent.trigger(o.r,r,function(e){if(!e.cancel){r.currentCell=i.i(n.getElement)(r.currentCell);var t=r.currentCell.getAttribute("data-url")?r.currentCell.getAttribute("data-url"):r.currentCell.querySelector("a").getAttribute("data-url");window.open(t)}})},e.prototype.getRowStartPos=function(){for(var e,t=this.parent.pivotValues,i=0;i<(t?t.length:0);i++)if(t[i]&&t[i][0]&&"row"===t[i][0].axis){e=i;break}return e},e.prototype.frameDataSource=function(e){var t=[];if(("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0||"olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url&&this.engine.pivotValues.length>0)&&this.parent.dataSourceSettings.values.length>0&&!this.engine.isEmptyData)if(this.parent.enableValueSorting||!this.engine.isEngineUpdated){for(var i=0,r=this.parent.pivotValues,n="value"===e?this.rowStartPos:0,a="value"===e?r?r.length:0:this.rowStartPos,o=n;o<a;o++)if(r[o]){i="header"===e?o:i,t[i]={};for(var s=0;s<r[o].length;s++)r[o][s]&&(t[i][s]=r[o][s]);i++}}else t="value"===e?this.engine.valueContent:this.engine.headerContent;else t=this.frameEmptyData();return t},e.prototype.frameEmptyData=function(){return[{0:{formattedText:this.parent.localeObj.getConstant("grandTotal")},1:{formattedText:this.parent.localeObj.getConstant("emptyData")}}]},e.prototype.calculateColWidth=function(e){i.i(n.isNullOrUndefined)(this.parent.resizedValue)||(this.parent.resizedValue=this.parent.showGroupingBar&&this.parent.resizedValue<250?250:this.parent.resizedValue),this.resColWidth=i.i(n.isNullOrUndefined)(this.parent.resizedValue)?this.resColWidth:this.parent.resizedValue;var t=this.parent.element.offsetWidth?this.parent.element.offsetWidth:this.parent.element.getBoundingClientRect().width,a=isNaN(this.parent.width)?this.parent.width.toString().indexOf("%")>-1?parseFloat(this.parent.width.toString())/100*t:t:Number(this.parent.width);if(a=a-(this.gridSettings.columnWidth>this.resColWidth?this.gridSettings.columnWidth:this.resColWidth)-2,e-=1,this.isOverflows=!(e*this.gridSettings.columnWidth<a),!this.isOverflows){var o=this.parent.getHeightAsNumber(),s=this.engine&&this.engine.headerContent?Object.keys(this.engine.headerContent).length:1,l=o>this.parent.minHeight?o:this.parent.minHeight-this.gridSettings.rowHeight*s;this.engine&&this.engine.valueContent&&this.gridSettings.rowHeight*this.engine.valueContent.length>l&&(a-=i.i(r.getScrollBarWidth)())}var d=e*this.gridSettings.columnWidth<a?a/e:this.gridSettings.columnWidth;return this.isOverflows||this.gridSettings.allowAutoResizing?Math.floor(d):this.gridSettings.columnWidth},e.prototype.resizeColWidth=function(e){i.i(n.isNullOrUndefined)(this.parent.resizedValue)||(this.parent.resizedValue=this.parent.showGroupingBar&&this.parent.resizedValue<250?250:this.parent.resizedValue),this.resColWidth=i.i(n.isNullOrUndefined)(this.parent.resizedValue)?this.resColWidth:this.parent.resizedValue;var t=isNaN(this.parent.width)?this.parent.width.toString().indexOf("%")>-1?parseFloat(this.parent.width.toString())/100*this.parent.element.offsetWidth:this.parent.element.offsetWidth:Number(this.parent.width);e-=1,t=t-(this.gridSettings.columnWidth>this.resColWidth?this.gridSettings.columnWidth:this.resColWidth)-2,this.isOverflows=!(e*this.gridSettings.columnWidth<t);var r=e*this.gridSettings.columnWidth<t?t/e:this.gridSettings.columnWidth;return this.isOverflows||this.gridSettings.allowAutoResizing?Math.floor(r):this.gridSettings.columnWidth},e.prototype.calculateGridWidth=function(){var e=this.parent.width,t=this.parent.element.getBoundingClientRect().width?this.parent.element.getBoundingClientRect().width:this.parent.element.offsetWidth;return 0===t&&(t=this.parent.element.parentElement.getBoundingClientRect().width?this.parent.element.parentElement.getBoundingClientRect().width:this.parent.element.parentElement.offsetWidth),"auto"===this.gridSettings.width?"auto"===this.parent.width?e=t:this.parent.width.toString().indexOf("%")>-1&&(e=parseFloat(this.parent.width.toString())/100*t):e=this.gridSettings.width,!this.gridSettings.allowAutoResizing&&e>this.parent.totColWidth?this.parent.totColWidth:e},e.prototype.calculateGridHeight=function(e){var t=this.parent.element.querySelector("."+a._31+" ."+a._23),n=this.parent.height,o=this.parent.getHeightAsNumber();if(o=isNaN(o)?o>this.parent.minHeight?o:this.parent.minHeight:t.offsetWidth<t.querySelector("."+a._26).offsetWidth?o-i.i(r.getScrollBarWidth)():o,this.parent.showToolbar&&"Chart"!==this.parent.currentView||!this.parent.showToolbar&&"Chart"!==this.parent.displayOption.view)if("auto"===this.gridSettings.height&&o&&this.parent.element.querySelector("."+a._47)){var s=this.parent.element.querySelector("."+a._47).offsetHeight,l=s+(this.parent.element.querySelector("."+a._56)?this.parent.element.querySelector("."+a._56).offsetHeight:0),d=this.parent.element.querySelector("."+a.v)?42:0,p=this.parent.element.querySelector("."+a._57)?this.parent.element.querySelector("."+a._57).offsetHeight:0;if(n=o-(l+d+p)-1,n=n<40?40:n,e){var u=t.querySelector("."+a._26).offsetHeight,h=t.querySelector("."+a._26).offsetHeight,c=t.querySelector("."+a._26).offsetWidth,g=t.offsetWidth,m=g<=c,f=!!(m&&n-u<18);n>=u&&(!m||n>=h)&&!f?this.parent.grid.height="auto":(this.parent.grid.height=n,this.parent.grid.dataBind())}else n>this.engine.valueContent.length*this.gridSettings.rowHeight&&(n="auto")}else n=this.gridSettings.height;return n<this.parent.gridSettings.rowHeight?this.parent.gridSettings.rowHeight:n},e.prototype.frameStackedHeaders=function(){var e=this.parent.pivotColumns,t=this.parent.grid.columnModel,r=!1,a=!(!this.parent.toolbarModule||!this.parent.toolbarModule.isReportChange)||!!this.parent.actionObj&&("Sort value"===this.parent.actionObj.actionName&&1===this.parent.engineModule.valueAxis||"Sort field"===this.parent.actionObj.actionName&&"columns"===this.parent.actionObj.fieldInfo.axis||this.parent.pivotFieldListModule&&"Sort field"===this.parent.pivotFieldListModule.actionObj.actionName&&"columns"===this.parent.pivotFieldListModule.actionObj.fieldInfo.axis),o=1!==this.parent.dataSourceSettings.values.length||this.parent.dataSourceSettings.alwaysShowValueHeader?void 0:this.formatList[this.parent.dataSourceSettings.values[0].name];if(this.pivotColumns=[],("olap"===this.parent.dataType&&""!==this.parent.dataSourceSettings.url||this.parent.dataSourceSettings.values.length>0&&this.parent.dataSourceSettings.dataSource&&this.parent.engineModule.data.length>0||"Server"===this.parent.dataSourceSettings.mode&&""!==this.parent.dataSourceSettings.url&&this.engine.pivotValues.length>0)&&!this.engine.isEmptyData){var s=this.engine.headerContent.length,l=[],d=[],p=this.calculateColWidth(this.engine.pivotValues?this.engine.pivotValues[0].length:0);do{var u=[],h=0;s--;var c=this.engine.headerContent[s],g=c?Object.keys(c).length:0;if(c)for(var m=0;m<Object.keys(c).length+(c[0]?0:1);m++){var f=c[m]&&c[m].colSpan?3!==c[m].memberType||0===s?c[m].colSpan:l[m]:1;f="olap"===this.parent.dataType&&i.i(n.isNullOrUndefined)(f)?1:f;var v=c[m]?"grand sum"===c[m].type?i.i(n.isNullOrUndefined)(c[m].valueSort.axis)?this.parent.localeObj.getConstant("grandTotal"):c[m].formattedText:"sum"===c[m].type?c[m].formattedText.split("Total")[0]+this.parent.localeObj.getConstant("total"):c[m].formattedText:"";if(v=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(v):v,s===this.engine.headerContent.length-1)f=1,r=e.length-1===g&&(!a&&!this.parent.isEmptyGrid&&e[h]&&e[h].autoFit),u[h]={field:m+".formattedText",headerText:v,customAttributes:{cell:c[m]},width:r?t[h].width:c[m]&&c[m].valueSort?this.setSavedWidth(c[m].valueSort.levelName,p):this.resColWidth,minWidth:r&&h===g?t[t.length-1].minWidth:30,format:0===m?"":i.i(n.isNullOrUndefined)(o)?this.formatList[c[m].actualText]:o,allowReordering:!this.parent.showGroupingBar&&this.parent.gridSettings.allowReordering,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,textAlign:this.parent.enableRtl?"Left":"Right",headerTextAlign:this.parent.enableRtl?"Right":"Left"};else if(l[m]){for(var S=f,y=[],b=m;S>0;){if(u[h]){if(!this.pivotColumns[d[b]])break;y.push(this.pivotColumns[d[b]])}else u[h]={headerText:v,field:c[m]?c[m].valueSort.levelName:"",customAttributes:{cell:c[m]},width:r&&0===h&&!a&&!this.parent.isEmptyGrid&&e[0].autoFit?t[0].width:c[m]?this.setSavedWidth(c[m].valueSort.levelName,p):this.resColWidth,minWidth:30,allowReordering:!this.parent.showGroupingBar&&this.parent.gridSettings.allowReordering,allowResizing:this.parent.gridSettings.allowResizing,visible:!0},y=[this.pivotColumns[d[b]]];this.isAutoFitEnabled=!!this.isAutoFitEnabled||r,S-=l[b],b+=l[b]}u[h].columns=y}u[h]&&(u[h].clipMode=this.gridSettings.clipMode),l[m]=f,d[m]=h,h++,m=m+f-1}this.pivotColumns=u.length>0?u:this.pivotColumns}while(s>0);this.pivotColumns[0]={field:"0.formattedText",width:r&&!a&&!this.parent.isEmptyGrid&&e[0].autoFit?t[0].width:this.resColWidth,minWidth:30,headerText:"",allowReordering:!1,allowResizing:this.parent.gridSettings.allowResizing,visible:!0,clipMode:this.parent.gridSettings.clipMode}}else this.pivotColumns=this.frameEmptyColumns();if(this.parent.toolbarModule&&this.parent.showToolbar&&(this.parent.toolbarModule.isReportChange=!1),this.parent.triggerColumnRenderEvent(this.pivotColumns),r=this.parent.pivotColumns.length>0&&this.parent.pivotColumns[this.parent.pivotColumns.length-1].autoFit,this.pivotColumns.length>1&&!r){var C=this.pivotColumns[this.pivotColumns.length-1];C.minWidth=C.width,C.width="auto",C.columns&&C.columns.length>0&&this.configLastColumnWidth(C.columns[C.columns.length-1])}return this.pivotColumns},e.prototype.configLastColumnWidth=function(e){e.minWidth=e.width,e.width="auto",e.columns&&e.columns.length>0&&this.configLastColumnWidth(e.columns[e.columns.length-1])},e.prototype.setSavedWidth=function(e,t){return t="0.formattedText"!==e||i.i(n.isNullOrUndefined)(this.parent.resizedValue)?this.parent.resizeInfo[e]?this.parent.resizeInfo[e]:t:this.parent.resizedValue},e.prototype.frameEmptyColumns=function(){var e=[],t=this.calculateColWidth(2);return e.push({field:"0.formattedText",headerText:"",minWidth:30,width:this.resColWidth}),e.push({field:"1.formattedText",headerText:this.parent.localeObj.getConstant("grandTotal"),minWidth:30,width:t}),e},e.prototype.getFormatList=function(){for(var e={},t=0;t<this.parent.dataSourceSettings.values.length;t++){var r=this.parent.dataSourceSettings.values[t],a="N";if("olap"===this.parent.dataType){if(this.parent.olapEngineModule.fieldList[r.name]&&!i.i(n.isNullOrUndefined)(this.parent.olapEngineModule.fieldList[r.name].formatString)){var o=this.parent.olapEngineModule.fieldList[r.name].formatString;a=o.indexOf("#")>-1?o:o[0]+"2"}}else if(["PercentageOfDifferenceFrom","PercentageOfRowTotal","PercentageOfColumnTotal","PercentageOfGrandTotal","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal"].indexOf(r.type)>-1?a="P2":["PopulationStDev","SampleStDev","PopulationVar","SampleVar","Index"].indexOf(r.type)>-1&&(a=void 0),this.parent.dataSourceSettings.formatSettings.length>0)for(var s=0;s<this.parent.dataSourceSettings.formatSettings.length;s++){var l=this.parent.dataSourceSettings.formatSettings[s];if(r.name===l.name){a=l.format;break}}e[r.name]=a}return e},e.prototype.getValidHeader=function(e,t){var r=this.parent.dataSourceSettings.values;if("row"===t){var a=e;if(0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length){if(0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+a.value===a.data[0].valueSort.levelName)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[a.value.toString()].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+a.value.toString();if(1===r.length&&0===this.parent.dataSourceSettings.rows.length)return this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(r[r.length-1].type)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(n.isNullOrUndefined)(r[r.length-1].caption)?r[r.length-1].name:r[r.length-1].caption)}return a.value}if("column"===t){var a=e;return 0!==this.parent.dataSourceSettings.rows.length&&0!==this.parent.dataSourceSettings.columns.length||i.i(n.isNullOrUndefined)(e.gridCell.column.customAttributes)||0!==this.parent.dataSourceSettings.columns.length||"column"!==this.parent.dataSourceSettings.valueAxis||this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+a.gridCell.column.customAttributes.cell.formattedText!==a.gridCell.column.customAttributes.cell.valueSort.levelName?a.cell.value:this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(this.parent.engineModule.fieldList[a.gridCell.column.customAttributes.cell.actualText].aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+a.gridCell.column.customAttributes.cell.formattedText}},e.prototype.excelColumnEvent=function(e){0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&(e.cell.value=this.getValidHeader(e,"column")),void 0!==e.gridCell&&"auto"===e.gridCell.column.width&&(this.parent.lastColumn=e.gridCell.column,e.gridCell.column.width=e.gridCell.column.minWidth),e=this.exportHeaderEvent(e),this.parent.trigger(o.j,e)},e.prototype.pdfColumnEvent=function(e){0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis&&(e.cell.value=this.getValidHeader(e,"column")),void 0!==e.gridCell&&"auto"===e.gridCell.column.width&&(this.parent.lastColumn=e.gridCell.column,e.gridCell.column.width=e.gridCell.column.minWidth),this.parent.trigger(o.k,e)},e.prototype.excelRowEvent=function(e){if("0.formattedText"===e.column.field){var t=e.data[0],r=t.type&&"value"===t.type,a=0;if("olap"===this.parent.dataType)a=this.indentCollection[t.rowIndex];else{var s=t.valueSort?t.valueSort.levelName.toString():"",l=t.actualText?t.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,d=s.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(l?l-1:l);a=d?d-1:0}this.colPos=0,e.style={hAlign:"Left",indent:2*a},this.lastSpan=r?this.lastSpan:a}else{this.colPos++;var p=e.data[e.column.customAttributes.cell?e.column.customAttributes.cell.colIndex:this.colPos];if(i.i(n.isNullOrUndefined)(p.value)||i.i(n.isNullOrUndefined)(p.formattedText)||""===p.formattedText)e.value="Excel"===this.parent.exportType?null:"";else{var u="pivot"===this.parent.dataType&&this.parent.engineModule?this.parent.engineModule.aggregatedValueMatrix:void 0;u&&u[p.rowIndex]&&u[p.rowIndex][p.colIndex]?e.value=u[p.rowIndex][p.colIndex]:e.value=i.i(n.isNullOrUndefined)(p.value)?p.formattedText:"#DIV/0!"===p.formattedText?p.formattedText:p.value}}e=this.exportContentEvent(e),0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&(e.value="0.formattedText"===e.column.field?this.getValidHeader(e,"row"):e.value),this.parent.trigger(o.l,e)},e.prototype.pdfRowEvent=function(e){if(e=this.exportContentEvent(e),"0.formattedText"===e.column.field){var t=0,i=e.data[0],r=i.type&&"value"===i.type;if("olap"===this.parent.dataType)t=this.indentCollection[i.rowIndex];else{var n=i.valueSort?i.valueSort.levelName.toString():"",a=i.actualText?i.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,s=n.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(a?a-1:a);t=s?s-1:0}e.style={paragraphIndent:10*t},this.lastSpan=r?this.lastSpan:t,0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis&&(e.value=this.getValidHeader(e,"row"))}this.parent.trigger(o.m,e)},e.prototype.excelDataBound=function(e){for(var t=e.excelRows,i=Object.keys(this.engine.headerContent).length,r=0;r<i;r++){for(var n=t[r].cells,a=[],o=0;o<n.length;o++)-1!==n[o].rowSpan&&a.push(n[o]);t[r].cells=a}},e.prototype.exportHeaderEvent=function(e){var t=1;if(e.gridCell.column.customAttributes){var r=e.gridCell.column.customAttributes.cell;t=r.rowSpan>-1?r.rowSpan:1,"excelHeaderQueryCellInfo"===e.name&&(r.rowSpan>-1?t=r.rowSpan:i.i(n.isNullOrUndefined)(r.type)||0===r.level||(t=-1,e.cell.rowSpan=-1)),this.actualText=r.actualText}else t=Object.keys(this.engine.headerContent).length;return e.cell.rowSpan!==t&&t>-1&&(e.cell.rowSpan=t),e},e.prototype.exportContentEvent=function(e){var t=e.data[Number(e.column.field.split(".formattedText")[0])];return e.value="grand sum"===t.type?i.i(n.isNullOrUndefined)(t.valueSort.axis)?this.parent.localeObj.getConstant("grandTotal"):t.formattedText:e.value,e},e.prototype.unWireEvents=function(e){e.querySelector(".e-hyperlinkcell")&&n.EventHandler.remove(e.querySelector(".e-hyperlinkcell"),this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick)},e.prototype.wireEvents=function(e){e.querySelector(".e-hyperlinkcell")&&n.EventHandler.add(e.querySelector(".e-hyperlinkcell"),this.parent.isAdaptive?"touchend":"click",this.onHyperCellClick,this)},e}()},function(e,t){e.exports=p},function(e,t,i){"use strict";var r=i(26);i.d(t,"a",function(){return r.a});var n=i(28);i.d(t,"b",function(){return n.a});var a=i(25);i.d(t,"c",function(){return a.a});var o=i(49);i.d(t,"d",function(){return o.a});var s=i(27);i.d(t,"e",function(){return s.a});var l=i(24);i.d(t,"f",function(){return l.a});var d=i(52);i.d(t,"g",function(){return d.a});var p=i(31);i.d(t,"h",function(){return p.a});var u=i(50);i.d(t,"i",function(){return u.a});var h=i(17);i.d(t,"j",function(){return h.a});var c=i(1);i.d(t,"k",function(){return c.a}),i.d(t,"l",function(){return c.b}),i.d(t,"m",function(){return c.c}),i.d(t,"n",function(){return c.d}),i.d(t,"o",function(){return c.e}),i.d(t,"p",function(){return c.f}),i.d(t,"q",function(){return c.g}),i.d(t,"r",function(){return c.h}),i.d(t,"s",function(){return c.i}),i.d(t,"t",function(){return c.j}),i.d(t,"u",function(){return c.k}),i.d(t,"v",function(){return c.l}),i.d(t,"w",function(){return c.m}),i.d(t,"x",function(){return c.n}),i.d(t,"y",function(){return c.o}),i.d(t,"z",function(){return c.p}),i.d(t,"A",function(){return c.q}),i.d(t,"B",function(){return c.r}),i.d(t,"C",function(){return c.s}),i.d(t,"D",function(){return c.t}),i.d(t,"E",function(){return c.u}),i.d(t,"F",function(){return c.v}),i.d(t,"G",function(){return c.w}),i.d(t,"H",function(){return c.x}),i.d(t,"I",function(){return c.y}),i.d(t,"J",function(){return c.z}),i.d(t,"K",function(){return c.A}),i.d(t,"L",function(){return c.B}),i.d(t,"M",function(){return c.C}),i.d(t,"N",function(){return c.D}),i.d(t,"O",function(){return c.E}),i.d(t,"P",function(){return c.F}),i.d(t,"Q",function(){return c.G}),i.d(t,"R",function(){return c.H}),i.d(t,"S",function(){return c.I}),i.d(t,"T",function(){return c.J}),i.d(t,"U",function(){return c.K}),i.d(t,"V",function(){return c.L}),i.d(t,"W",function(){return c.M}),i.d(t,"X",function(){return c.N}),i.d(t,"Y",function(){return c.O}),i.d(t,"Z",function(){return c.P}),i.d(t,"_0",function(){return c.Q}),i.d(t,"_1",function(){return c.R}),i.d(t,"_2",function(){return c.S}),i.d(t,"_3",function(){return c.T}),i.d(t,"_4",function(){return c.U}),i.d(t,"_5",function(){return c.V}),i.d(t,"_6",function(){return c.W}),i.d(t,"_7",function(){return c.X}),i.d(t,"_8",function(){return c.Y}),i.d(t,"_9",function(){return c.Z}),i.d(t,"_10",function(){return c._0}),i.d(t,"_11",function(){return c._1}),i.d(t,"_12",function(){return c._2}),i.d(t,"_13",function(){return c._3}),i.d(t,"_14",function(){return c._4}),i.d(t,"_15",function(){return c._5}),i.d(t,"_16",function(){return c._6}),i.d(t,"_17",function(){return c._7}),i.d(t,"_18",function(){return c._8}),i.d(t,"_19",function(){return c._9}),i.d(t,"_20",function(){return c._10}),i.d(t,"_21",function(){return c._11}),i.d(t,"_22",function(){return c._12}),i.d(t,"_23",function(){return c._13}),i.d(t,"_24",function(){return c._14}),i.d(t,"_25",function(){return c._15}),i.d(t,"_26",function(){return c._16}),i.d(t,"_27",function(){return c._17}),i.d(t,"_28",function(){return c._18}),i.d(t,"_29",function(){return c._19}),i.d(t,"_30",function(){return c._20}),i.d(t,"_31",function(){return c._21}),i.d(t,"_32",function(){return c._22}),i.d(t,"_33",function(){return c._23}),i.d(t,"_34",function(){return c._24}),i.d(t,"_35",function(){return c._25}),i.d(t,"_36",function(){return c._26}),i.d(t,"_37",function(){return c._27}),i.d(t,"_38",function(){return c._28}),i.d(t,"_39",function(){return c._29}),i.d(t,"_40",function(){return c._30}),i.d(t,"_41",function(){return c._31}),i.d(t,"_42",function(){return c._32}),i.d(t,"_43",function(){return c._33}),i.d(t,"_44",function(){return c._34}),i.d(t,"_45",function(){return c._35}),i.d(t,"_46",function(){return c._36}),i.d(t,"_47",function(){return c._37}),i.d(t,"_48",function(){return c._38}),i.d(t,"_49",function(){return c._39}),i.d(t,"_50",function(){return c._40}),i.d(t,"_51",function(){return c._41}),i.d(t,"_52",function(){return c._42}),i.d(t,"_53",function(){return c._43}),i.d(t,"_54",function(){return c._44}),i.d(t,"_55",function(){return c._45}),i.d(t,"_56",function(){return c._46}),i.d(t,"_57",function(){return c._47}),i.d(t,"_58",function(){return c._48}),i.d(t,"_59",function(){return c._49}),i.d(t,"_60",function(){return c._50}),i.d(t,"_61",function(){return c._51}),i.d(t,"_62",function(){return c._52}),i.d(t,"_63",function(){return c._53}),i.d(t,"_64",function(){return c._54}),i.d(t,"_65",function(){return c._55}),i.d(t,"_66",function(){return c._56}),i.d(t,"_67",function(){return c._57}),i.d(t,"_68",function(){return c._58}),i.d(t,"_69",function(){return c._59}),i.d(t,"_70",function(){return c._60}),i.d(t,"_71",function(){return c._61}),i.d(t,"_72",function(){return c._62}),i.d(t,"_73",function(){return c._63}),i.d(t,"_74",function(){return c._64}),i.d(t,"_75",function(){return c._65}),i.d(t,"_76",function(){return c._66}),i.d(t,"_77",function(){return c._67}),i.d(t,"_78",function(){return c._68}),i.d(t,"_79",function(){return c._69}),i.d(t,"_80",function(){return c._70}),i.d(t,"_81",function(){return c._71}),i.d(t,"_82",function(){return c._72}),i.d(t,"_83",function(){return c._73}),i.d(t,"_84",function(){return c._74}),i.d(t,"_85",function(){return c._75}),i.d(t,"_86",function(){return c._76}),i.d(t,"_87",function(){return c._77}),i.d(t,"_88",function(){return c._78}),i.d(t,"_89",function(){return c._79}),i.d(t,"_90",function(){return c._80}),i.d(t,"_91",function(){return c._81}),i.d(t,"_92",function(){return c._82}),i.d(t,"_93",function(){return c._83}),i.d(t,"_94",function(){return c._84}),i.d(t,"_95",function(){return c._85}),i.d(t,"_96",function(){return c._86}),i.d(t,"_97",function(){return c._87}),i.d(t,"_98",function(){return c._88}),i.d(t,"_99",function(){return c._89}),i.d(t,"_100",function(){return c._90}),i.d(t,"_101",function(){return c._91}),i.d(t,"_102",function(){return c._92}),i.d(t,"_103",function(){return c._93}),i.d(t,"_104",function(){return c._94}),i.d(t,"_105",function(){return c._95}),i.d(t,"_106",function(){return c._96}),i.d(t,"_107",function(){return c._97}),i.d(t,"_108",function(){return c._98}),i.d(t,"_109",function(){return c._99}),i.d(t,"_110",function(){return c._100}),i.d(t,"_111",function(){return c._101}),i.d(t,"_112",function(){return c._102}),i.d(t,"_113",function(){return c._103}),i.d(t,"_114",function(){return c._104}),i.d(t,"_115",function(){return c._105}),i.d(t,"_116",function(){return c._106}),i.d(t,"_117",function(){return c._107}),i.d(t,"_118",function(){return c._108}),i.d(t,"_119",function(){return c._109}),i.d(t,"_120",function(){return c._110}),i.d(t,"_121",function(){return c._111}),i.d(t,"_122",function(){return c._112}),i.d(t,"_123",function(){return c._113}),i.d(t,"_124",function(){return c._114}),i.d(t,"_125",function(){return c._115}),i.d(t,"_126",function(){return c._116}),i.d(t,"_127",function(){return c._117}),i.d(t,"_128",function(){return c._118}),i.d(t,"_129",function(){return c._119}),i.d(t,"_130",function(){return c._120}),i.d(t,"_131",function(){return c._121}),i.d(t,"_132",function(){return c._122}),i.d(t,"_133",function(){return c._123}),i.d(t,"_134",function(){return c._124}),i.d(t,"_135",function(){return c._125}),i.d(t,"_136",function(){return c._126}),i.d(t,"_137",function(){return c._127});var g=i(30);i.d(t,"_138",function(){return g.a});var m=i(33);i.d(t,"_139",function(){return m.a});var f=i(34);i.d(t,"_140",function(){return f.a});var v=i(32);i.d(t,"_141",function(){return v.a});var S=i(18);i.d(t,"_142",function(){return S.a});var y=i(56);i.d(t,"_143",function(){return y.a});var b=i(54);i.d(t,"_144",function(){return b.a});var C=i(55);i.d(t,"_145",function(){return C.a})},function(e,t,i){"use strict";var r=i(19);i.d(t,"a",function(){return r.a}),i.d(t,"b",function(){return r.b}),i.d(t,"c",function(){return r.c}),i.d(t,"d",function(){return r.d}),i.d(t,"e",function(){return r.e}),i.d(t,"f",function(){return r.f}),i.d(t,"g",function(){return r.g}),i.d(t,"h",function(){return r.h}),i.d(t,"i",function(){return r.i}),i.d(t,"j",function(){return r.j}),i.d(t,"k",function(){return r.k}),i.d(t,"l",function(){return r.l}),i.d(t,"m",function(){return r.m}),i.d(t,"n",function(){return r.n})},function(e,t,i){"use strict";var r=i(60);i.d(t,"a",function(){return r.a});var n=i(61);i.d(t,"b",function(){return n.a}),i.d(t,"c",function(){return n.b}),i.d(t,"d",function(){return n.c}),i.d(t,"e",function(){return n.d})},function(e,t,i){"use strict";var r=i(67);i.d(t,"a",function(){return r.a}),i.d(t,"b",function(){return r.b}),i.d(t,"c",function(){return r.c}),i.d(t,"d",function(){return r.d}),i.d(t,"e",function(){return r.e}),i.d(t,"f",function(){return r.f}),i.d(t,"g",function(){return r.g}),i.d(t,"h",function(){return r.h});var n=i(70);i.d(t,"i",function(){return n.a});var a=i(63);i.d(t,"j",function(){return a.a}),i.d(t,"k",function(){return a.b}),i.d(t,"l",function(){return a.c}),i.d(t,"m",function(){return a.d}),i.d(t,"n",function(){return a.e}),i.d(t,"o",function(){return a.f})},function(e,t,i){"use strict";var r=i(16);i.d(t,"a",function(){return r.a});var n=i(23);i.d(t,"b",function(){return n.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(1),n=i(2),a=i(20),o=i(0),s=(i.n(o),i(31));a.a.Inject(s.a);var l=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"fieldList"},e.prototype.initiateModule=function(){if(!i.i(o.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)){if(this.element=i.i(o.createElement)("div",{id:this.parent.element.id+"_PivotFieldList",styles:"position:"+(this.parent.enableRtl?"static":"absolute")+";height:0;width:"+this.parent.element.style.width+";display:none"}),null===i.i(o.select)("#"+this.parent.element.id+"containerwrapper",document)){var e=i.i(o.createElement)("div",{id:this.parent.element.id+"containerwrapper",styles:"height:"+(isNaN(this.parent.height)?this.parent.height:this.parent.height+"px")});this.parent.element.parentElement.appendChild(e),e.appendChild(this.element),e.appendChild(this.parent.element)}else i.i(o.select)("#"+this.parent.element.id+"containerwrapper",document).appendChild(this.element);this.parent.pivotFieldListModule=new a.a({dataSourceSettings:{providerType:this.parent.dataSourceSettings.providerType,rows:[],columns:[],values:[],filters:[]},spinnerTemplate:this.parent.spinnerTemplate,allowDeferLayoutUpdate:this.parent.allowDeferLayoutUpdate,renderMode:"Popup",allowCalculatedField:this.parent.allowCalculatedField,showValuesButton:this.parent.showValuesButton,enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:this.parent.element.parentElement,aggregateTypes:this.parent.aggregateTypes,maxNodeLimitInMemberEditor:this.parent.maxNodeLimitInMemberEditor,aggregateCellInfo:this.parent.bindTriggerEvents.bind(this.parent),onHeadersSort:this.parent.bindTriggerEvents.bind(this.parent),cssClass:this.parent.cssClass,enableFieldSearching:this.parent.enableFieldSearching,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),this.parent.pivotFieldListModule.isPopupView=!0,this.parent.pivotFieldListModule.pivotGridModule=this.parent,this.parent.pivotFieldListModule.appendTo("#"+this.element.id)}},e.prototype.updateControl=function(){this.parent.allowDeferLayoutUpdate&&(this.parent.actionObj.actionName="Field list refreshed"),this.element&&(this.element.style.display="block",i.i(o.prepend)([this.element],this.parent.element),this.parent.showGroupingBar&&this.parent.groupingBarModule?(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.update.bind(this))):i.i(o.isNullOrUndefined)(this.element.querySelector("."+n._66))||(i.i(o.setStyleAttribute)(this.element.querySelector("."+n._66),{left:"auto"}),this.parent.enableRtl?i.i(o.removeClass)([this.element.querySelector("."+n._66)],"e-fieldlist-left"):i.i(o.addClass)([this.element.querySelector("."+n._66)],"e-fieldlist-left")),i.i(o.setStyleAttribute)(this.element,{width:i.i(o.formatUnit)(this.parent.element.offsetWidth)})),this.parent.pivotFieldListModule.update(this.parent)},e.prototype.update=function(){var e;if((e="Table"!==this.parent.currentView?this.parent.chart?this.parent.pivotChartModule.getCalulatedWidth():e:this.parent.grid?this.parent.grid.element.offsetWidth:e)&&!i.i(o.isNullOrUndefined)(this.element.querySelector("."+n._66))){var t=e<400?400:e;i.i(o.setStyleAttribute)(this.element.querySelector("."+n._66),{left:i.i(o.formatUnit)(this.parent.enableRtl?-Math.abs(t-this.element.querySelector("."+n._66).offsetWidth):t-this.element.querySelector("."+n._66).offsetWidth),top:this.parent.element.querySelector("."+n._194)?this.parent.element.querySelector("."+n._66).offsetHeight.toString()+"px":""}),this.parent.enableRtl?i.i(o.addClass)([this.element.querySelector("."+n._66)],"e-fieldlist-left"):i.i(o.removeClass)([this.element.querySelector("."+n._66)],"e-fieldlist-left")}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(r._25,this.initiateModule,this),this.parent.on(r._19,this.updateControl,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(r._25,this.initiateModule),this.parent.off(r._19,this.updateControl))},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pivotFieldListModule&&!this.parent.pivotFieldListModule.isDestroyed&&(this.parent.pivotFieldListModule.destroy(),this.parent.pivotFieldListModule=null,i.i(o.isNullOrUndefined)(i.i(o.select)("#"+this.parent.element.id+"_PivotFieldList",document))||i.i(o.remove)(i.i(o.select)("#"+this.parent.element.id+"_PivotFieldList",document)))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return p});var r=i(4),n=(i.n(r),i(0)),a=(i.n(n),i(11)),o=(i.n(a),i(10)),s=(i.n(o),i(7)),l=(i.n(s),i(2)),d=i(1),p=function(){function e(e){this.parent=e,this.parent.conditionalFormattingModule=this,this.parentID=this.parent.element.id,this.fontColor=[],this.backgroundColor=[],this.newFormat=[]}return e.prototype.getModuleName=function(){return"conditionalFormatting"},e.prototype.createDialog=function(){null!==i.i(n.select)("#"+this.parentID+"conditionalformatting",document)&&i.i(n.remove)(i.i(n.select)("#"+this.parentID+"conditionalformatting",document)),this.parent.element.appendChild(i.i(n.createElement)("div",{id:this.parentID+"conditionalformatting",className:l._107}));var e,t=[{click:this.addButtonClick.bind(this),buttonModel:{cssClass:(this.parent.isAdaptive?l._108+" "+l._109:l._109)+(this.parent.cssClass?" "+this.parent.cssClass:""),iconCss:l.a+" "+l._110,content:this.parent.isAdaptive?"":this.parent.localeObj.getConstant("condition")}},{click:this.applyButtonClick.bind(this),isFlat:!0,buttonModel:{isPrimary:!0,cssClass:l._111+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply")}},{click:this.cancelButtonClick.bind(this),isFlat:!0,buttonModel:{cssClass:l._112+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}];e=this.parent.isAdaptive?new r.Dialog({animationSettings:{effect:"Zoom"},isModal:!0,width:"100%",height:"100%",showCloseIcon:!1,closeOnEscape:!1,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,position:{X:"center",Y:"center"},allowDragging:!0,buttons:t,beforeOpen:this.beforeOpen.bind(this),close:this.removeDialog.bind(this),cssClass:this.parent.cssClass,header:this.parent.localeObj.getConstant("conditionalFormating"),target:document.body}):new r.Dialog({allowDragging:!0,position:{X:"center",Y:this.parent.element.offsetTop},buttons:t,beforeOpen:this.beforeOpen.bind(this),close:this.removeDialog.bind(this),cssClass:this.parent.cssClass,isModal:!0,closeOnEscape:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,showCloseIcon:!0,header:this.parent.localeObj.getConstant("conditionalFormating"),target:this.parent.element}),e.isStringTemplate=!0,e.appendTo("#"+this.parentID+"conditionalformatting")},e.prototype.beforeOpen=function(){i.i(n.select)("#"+this.parentID+"conditionalformatting",document).querySelector("."+l.h).setAttribute("title",this.parent.localeObj.getConstant("conditionalFormating"))},e.prototype.addButtonClick=function(){var e=this,t={conditions:"LessThan",value1:0,applyGrandTotals:!0,style:{backgroundColor:"white",color:"black",fontFamily:"Arial",fontSize:"12px"}},i=this;this.parent.trigger(d._2,t,function(t){i.refreshConditionValues(),e.destroyColorPickers(),i.newFormat.push(t),i.addFormat()})},e.prototype.applyButtonClick=function(){if(this.refreshConditionValues()){this.parent.setProperties({dataSourceSettings:{conditionalFormatSettings:this.newFormat}},!0);var e={conditionalFormattingInfo:this.parent.dataSourceSettings.conditionalFormatSettings};this.parent.actionObj.actionInfo=e,this.parent.dataSourceSettings.values.length>0&&this.parent.renderPivotGrid();i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"conditionalformatting",document),r.Dialog).close()}},e.prototype.cancelButtonClick=function(){i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"conditionalformatting",document),r.Dialog).close(),this.newFormat=[]},e.prototype.refreshConditionValues=function(){for(var e=0;e<this.newFormat.length;e++){if(""===i.i(n.select)("#"+this.parentID+"conditionvalue1"+e,document).value||""===i.i(n.select)("#"+this.parentID+"conditionvalue2"+e,document).value)return""===i.i(n.select)("#"+this.parentID+"conditionvalue1"+e,document).value?i.i(n.select)("#"+this.parentID+"conditionvalue1"+e,document).focus():i.i(n.select)("#"+this.parentID+"conditionvalue2"+e,document).focus(),!1;this.newFormat[e].value1=Number(i.i(n.select)("#"+this.parentID+"conditionvalue1"+e,document).value),this.newFormat[e].value2=Number(i.i(n.select)("#"+this.parentID+"conditionvalue2"+e,document).value)}return!0},e.prototype.addFormat=function(){for(var e=i.i(n.createElement)("div",{id:this.parentID+"formatDiv",className:l._113}),t=0;t<this.newFormat.length;t++)e.appendChild(this.createDialogElements(t));if(0===this.newFormat.length){var a=this.createDialogElements(),o=i.i(n.createElement)("p",{id:this.parentID+"emptyFormat",className:l._114});o.innerText=this.parent.localeObj.getConstant("emptyFormat"),a.appendChild(o),e.appendChild(a)}i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"conditionalformatting",document),r.Dialog).setProperties({content:e},!1);for(var t=0;t<this.newFormat.length;t++)this.renderDropDowns(t),this.renderColorPicker(t)},e.prototype.createDialogElements=function(e){var t=i.i(n.createElement)("div",{id:this.parentID+"outerDiv"+e,className:l._115});if(void 0!==e){var r=this.newFormat[e],a=i.i(n.createElement)("button",{id:this.parentID+"removeButton"+e,className:l._116,attrs:{type:"button",title:this.parent.localeObj.getConstant("delete")}});t.appendChild(a);var o=i.i(n.createElement)("div",{id:this.parentID+"innerDiv"+e,className:l._117}),s=i.i(n.createElement)("table",{id:this.parentID+"cftable"+e,className:l._118,attrs:{role:"table"}}),d=i.i(n.createElement)("tr"),p=i.i(n.createElement)("td"),u=i.i(n.createElement)("span",{id:this.parentID+"valuelabel"+e,className:l._119});u.innerText=this.parent.localeObj.getConstant("value"),p.appendChild(u),d.appendChild(p),s.appendChild(d),d=i.i(n.createElement)("tr"),p=i.i(n.createElement)("td");var h=i.i(n.createElement)("div",{id:this.parentID+"measure"+e}),c=i.i(n.createElement)("input",{id:this.parentID+"measureinput"+e,attrs:{type:"text",tabindex:"0"}});h.appendChild(c),p.appendChild(h),d.appendChild(p),p=i.i(n.createElement)("td");var g=i.i(n.createElement)("div",{id:this.parentID+"condition"+e}),m=i.i(n.createElement)("input",{id:this.parentID+"conditioninput"+e,attrs:{type:"text",tabindex:"0"}});g.appendChild(m),p.appendChild(g),d.appendChild(p),p=i.i(n.createElement)("td");var f="Between"!==r.conditions&&"NotBetween"!==r.conditions?"display:none; width:10px":"",v=i.i(n.createElement)("input",{id:this.parentID+"conditionvalue1"+e,attrs:{type:"text",tabindex:"0",value:i.i(n.isNullOrUndefined)(r.value1)?"0":r.value1.toString(),placeholder:this.parent.localeObj.getConstant("emptyInput")},styles:this.parent.isAdaptive?""===f?"width: 35%":"width: 100%":""===f?"width: 45px":"width: 120px",className:l.p+" "+l._120});p.appendChild(v);var S=i.i(n.createElement)("span",{id:this.parentID+"valuespan"+e,className:l._121,innerHTML:"&",styles:f});p.appendChild(S);var y=i.i(n.createElement)("input",{id:this.parentID+"conditionvalue2"+e,attrs:{type:"text",tabindex:"0",value:i.i(n.isNullOrUndefined)(r.value2)?"0":r.value2.toString(),placeholder:this.parent.localeObj.getConstant("emptyInput")},styles:this.parent.isAdaptive&&""===f?"width: 35%":""===f?"width: 45px":f,className:l.p+" "+l._122});p.appendChild(y),d.appendChild(p),s.appendChild(d),this.parent.isAdaptive&&(o.appendChild(s),s=i.i(n.createElement)("table",{id:this.parentID+"cftable",className:l._118,attrs:{role:"table"}})),d=i.i(n.createElement)("tr"),p=i.i(n.createElement)("td");var b=i.i(n.createElement)("span",{id:this.parentID+"formatlabel"+e,className:l._123});b.innerText=this.parent.localeObj.getConstant("formatLabel"),p.appendChild(b),d.appendChild(p),s.appendChild(d),d=i.i(n.createElement)("tr"),p=i.i(n.createElement)("td");var C=i.i(n.createElement)("div",{id:this.parentID+"fontname"+e}),x=i.i(n.createElement)("input",{id:this.parentID+"fontnameinput"+e,attrs:{type:"text",tabindex:"0"}});C.appendChild(x),p.appendChild(C),d.appendChild(p),p=i.i(n.createElement)("td");var w=i.i(n.createElement)("div",{id:this.parentID+"fontsize"+e}),T=i.i(n.createElement)("input",{id:this.parentID+"fontsizeinput"+e,attrs:{type:"text",tabindex:"0"}});w.appendChild(T),p.appendChild(w),d.appendChild(p),this.parent.isAdaptive&&(s.appendChild(d),d=i.i(n.createElement)("tr"),s.appendChild(d),d=i.i(n.createElement)("tr")),p=i.i(n.createElement)("td");var M=i.i(n.createElement)("input",{id:this.parentID+"fontcolor"+e,attrs:{type:"color",tabindex:"0"},className:l._124});p.appendChild(M);var _=i.i(n.createElement)("input",{id:this.parentID+"backgroundcolor"+e,attrs:{type:"color",tabindex:"0"},className:l._125});p.appendChild(_),d.appendChild(p),p=i.i(n.createElement)("td");var D=i.i(n.createElement)("div",{id:this.parentID+"valuepreview"+e,className:l.p+" "+l._126,innerHTML:"123.45"});p.appendChild(D),d.appendChild(p),s.appendChild(d),o.appendChild(s),t.appendChild(o)}return t},e.prototype.renderDropDowns=function(e){var t=this.newFormat[e],r=[];r.push({index:0,name:this.parent.localeObj.getConstant("AllValues"),field:this.parent.localeObj.getConstant("AllValues")});for(var a=0;a<this.parent.dataSourceSettings.values.length;a++){var o=this.parent.dataSourceSettings.values[a].caption||this.parent.dataSourceSettings.values[a].name;o=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(o):o,r.push({index:a+1,name:o,field:this.parent.dataSourceSettings.values[a].name})}var l=i.i(n.isNullOrUndefined)(t.measure)?this.parent.localeObj.getConstant("AllValues"):t.measure,d=[];d[e]=new s.DropDownList({dataSource:r,fields:{text:"name",value:"field"},value:l,width:this.parent.isAdaptive?"100%":"120px",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.measureChange.bind(this,e)}),d[e].isStringTemplate=!0,d[e].appendTo("#"+this.parentID+"measureinput"+e);var p=[{value:"LessThan",name:this.parent.localeObj.getConstant("LessThan")},{value:"LessThanOrEqualTo",name:this.parent.localeObj.getConstant("LessThanOrEqualTo")},{value:"GreaterThan",name:this.parent.localeObj.getConstant("GreaterThan")},{value:"GreaterThanOrEqualTo",name:this.parent.localeObj.getConstant("GreaterThanOrEqualTo")},{value:"Equals",name:this.parent.localeObj.getConstant("Equals")},{value:"NotEquals",name:this.parent.localeObj.getConstant("NotEquals")},{value:"Between",name:this.parent.localeObj.getConstant("Between")},{value:"NotBetween",name:this.parent.localeObj.getConstant("NotBetween")}];l=i.i(n.isNullOrUndefined)(t.conditions)?"LessThan":t.conditions;var u=[];u[e]=new s.DropDownList({dataSource:p,fields:{value:"value",text:"name"},value:l,width:this.parent.isAdaptive?"100%":"120px",cssClass:this.parent.cssClass,popupHeight:"200px",popupWidth:"auto",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.conditionChange.bind(this,e)}),u[e].isStringTemplate=!0,u[e].appendTo("#"+this.parentID+"conditioninput"+e);var h=[{index:0,name:"Arial"},{index:1,name:"San Serif"},{index:2,name:"Impact"},{index:3,name:"Trebuchet MS"},{index:4,name:"Serif"},{index:5,name:"Verdana"},{index:6,name:"Courier New"},{index:7,name:"Times New Roman"},{index:8,name:"Tahoma"},{index:9,name:"Gerogia"}];l=i.i(n.isNullOrUndefined)(t.style.fontFamily)?"Arial":t.style.fontFamily;var c=[];c[e]=new s.DropDownList({dataSource:h,fields:{text:"name"},value:l,width:this.parent.isAdaptive?"100%":"120px",cssClass:this.parent.cssClass,popupWidth:"150px",popupHeight:"200px",locale:this.parent.locale,enableRtl:this.parent.enableRtl,change:this.fontNameChange.bind(this,e)}),c[e].isStringTemplate=!0,c[e].appendTo("#"+this.parentID+"fontnameinput"+e);var g=[{index:0,name:"9px"},{index:1,name:"10px"},{index:2,name:"11px"},{index:3,name:"12px"},{index:4,name:"13px"},{index:5,name:"14px"},{index:6,name:"15px"},{index:6,name:"16px"}];l=i.i(n.isNullOrUndefined)(t.style.fontSize)?"12px":t.style.fontSize;var m=[];m[e]=new s.DropDownList({dataSource:g,fields:{text:"name"},popupHeight:"200px",value:l,width:this.parent.isAdaptive?"100%":"120px",change:this.fontSizeChange.bind(this,e),locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass}),m[e].isStringTemplate=!0,m[e].appendTo("#"+this.parentID+"fontsizeinput"+e)},e.prototype.conditionChange=function(e,t){this.newFormat[e].conditions=t.value,"Between"===t.value||"NotBetween"===t.value?(i.i(n.select)("#"+this.parentID+"valuespan"+e,document).style.display="inline-block",i.i(n.select)("#"+this.parentID+"valuespan"+e,document).style.width=this.parent.isAdaptive?"10%":"10px",i.i(n.select)("#"+this.parentID+"conditionvalue2"+e,document).style.display="inline-block",i.i(n.select)("#"+this.parentID+"conditionvalue2"+e,document).style.width=this.parent.isAdaptive?"35%":"45px",i.i(n.select)("#"+this.parentID+"conditionvalue1"+e,document).style.width=this.parent.isAdaptive?"35%":"45px"):(i.i(n.select)("#"+this.parentID+"valuespan"+e,document).style.display="none",i.i(n.select)("#"+this.parentID+"conditionvalue2"+e,document).style.display="none",i.i(n.select)("#"+this.parentID+"conditionvalue1"+e,document).style.width=this.parent.isAdaptive?"100%":"120px")},e.prototype.fontNameChange=function(e,t){this.newFormat[e].style.fontFamily=t.value.toString(),i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.fontFamily=t.value},e.prototype.fontSizeChange=function(e,t){this.newFormat[e].style.fontSize=t.value.toString(),i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.fontSize=t.value},e.prototype.measureChange=function(e,t){this.newFormat[e].measure=t.value.toString()===this.parent.localeObj.getConstant("AllValues")?void 0:t.value.toString()},e.prototype.renderColorPicker=function(e){var t=this.newFormat[e],r=i.i(n.isNullOrUndefined)(t.style.color)?"black":t.style.color,s="#"===r.charAt(0)&&this.isHex(r.substr(1))?r:this.colourNameToHex(r);i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.color=s,this.fontColor[e]=new o.ColorPicker({cssClass:l._127+" "+l._128+(this.parent.cssClass?" "+this.parent.cssClass:""),value:s,mode:"Palette",change:this.fontColorChange.bind(this,e),locale:this.parent.locale,enableRtl:this.parent.enableRtl}),this.fontColor[e].isStringTemplate=!0,this.fontColor[e].appendTo("#"+this.parentID+"fontcolor"+e),i.i(n.addClass)([this.fontColor[e].element.nextElementSibling.querySelector("."+l._129)],l.a),r=i.i(n.isNullOrUndefined)(t.style.backgroundColor)?"white":t.style.backgroundColor,s="#"===r.charAt(0)&&this.isHex(r.substr(1))?r:this.colourNameToHex(r),i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.backgroundColor=s,i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.fontFamily=t.style.fontFamily,i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.fontSize=t.style.fontSize,this.backgroundColor[e]=new o.ColorPicker({cssClass:l._127+(this.parent.cssClass?" "+this.parent.cssClass:""),value:s,mode:"Palette",change:this.backColorChange.bind(this,e),locale:this.parent.locale,enableRtl:this.parent.enableRtl}),this.backgroundColor[e].isStringTemplate=!0,this.backgroundColor[e].appendTo("#"+this.parentID+"backgroundcolor"+e),i.i(n.addClass)([this.backgroundColor[e].element.nextElementSibling.querySelector(".e-selected-color")],l.a);var d=new a.Button({iconCss:l.a+" "+l._130,cssClass:l._131+(this.parent.cssClass?" "+this.parent.cssClass:""),locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});d.isStringTemplate=!0,d.appendTo("#"+this.parentID+"removeButton"+e),d.element.onclick=this.toggleButtonClick.bind(this,e)},e.prototype.backColorChange=function(e,t){this.newFormat[e].style.backgroundColor=t.currentValue.hex,i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.backgroundColor=t.currentValue.hex},e.prototype.fontColorChange=function(e,t){this.newFormat[e].style.color=t.currentValue.hex,i.i(n.select)("#"+this.parentID+"valuepreview"+e,document).style.color=t.currentValue.hex},e.prototype.toggleButtonClick=function(e){this.destroyColorPickers(),this.newFormat.splice(e,1),this.addFormat()},e.prototype.isHex=function(e){for(var t=parseInt(e,16);"0"===e.charAt(0);)e=e.substr(1);return t.toString(16)===e.toLowerCase()||0===t&&""===e},e.prototype.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},e.prototype.colourNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(void 0!==t[e.toLowerCase()])return t[e.toLowerCase()];if(0===e.search("rgba")){for(var i=e.substr(5).split(")")[0].split(","),r="",n="",a=0;a<i.length-1;a++)i[a]=(+i[a]).toString(16),1===i[a].length&&(i[a]="0"+i[a]),r+=i[a];return n=Math.round(255*+i[3]).toString(16),"#"+r+n}if(0===e.search("rgb")){for(var i=e.substr(4).split(")")[0].split(","),r="",a=0;a<i.length;a++)i[a]=(+i[a]).toString(16),1===i[a].length&&(i[a]="0"+i[a]),r+=i[a];return"#"+r}return"#d5d5d5"},e.prototype.removeDialog=function(){var e=i.i(n.select)("#"+this.parentID+"conditionalformatting",document),t=e?i.i(n.getInstance)(e,r.Dialog):null;t&&!t.isDestroyed&&(this.destroyColorPickers(),t.destroy()),e&&i.i(n.remove)(e),this.fontColor=[],this.backgroundColor=[],this.newFormat=[]},e.prototype.destroyColorPickers=function(){for(var e=0;e<(this.newFormat?this.newFormat.length:0);e++)this.fontColor&&this.fontColor[e]&&!this.fontColor[e].isDestroyed&&this.fontColor[e].destroy(),this.backgroundColor&&this.backgroundColor[e]&&!this.backgroundColor[e].isDestroyed&&this.backgroundColor[e].destroy()},e.prototype.showConditionalFormattingDialog=function(){this.newFormat=[];for(var e=0;e<this.parent.dataSourceSettings.conditionalFormatSettings.length;e++)this.newFormat.push(i.i(n.extend)({},this.parent.dataSourceSettings.conditionalFormatSettings[e].properties,null,!0));this.createDialog(),i.i(n.getInstance)(i.i(n.select)("#"+this.parentID+"conditionalformatting",document),r.Dialog).refresh(),this.addFormat()},e.prototype.destroy=function(){var e=i.i(n.select)("#"+this.parentID+"conditionalformatting",document),t=e?i.i(n.getInstance)(e,r.Dialog):null;t&&!t.isDestroyed&&t.close()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(1),n=i(2),a=i(0),o=(i.n(a),i(3)),s=i(29),l=i(9),d=(i.n(l),function(){function e(e){this.parent=e}return e.prototype.render=function(){(!this.parent.pivotButtonModule||this.parent.pivotButtonModule&&this.parent.pivotButtonModule.isDestroyed)&&new s.a(this.parent),this.createPivotButtons();for(var e=[],t=0,r=this.parent.element.querySelectorAll("."+n._68);t<r.length;t++){var o=r[t];o.classList.contains(n._187)||(e=e.concat([].slice.call(o.querySelectorAll("."+n._195))))}for(var l=e.length,d=0;d<l;d++){var p=i.i(a.createElement)("span",{className:"e-indent-div",styles:"width:"+24*d+"px"});i.i(a.prepend)([p],e[d])}},e.prototype.createPivotButtons=function(){for(var e=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],t=0,i=this.parent.element.querySelectorAll("."+n._199+",."+n._68+",."+n._181+",."+n._183+",."+n._185);t<i.length;t++){var a=i[t];this.parent.dataSourceSettings.values.length>0&&a.classList.contains(n._189)&&this.parent.dataSourceSettings.columns.length>0&&a.classList.contains(n._190)||(a.innerHTML="")}if("pivot"===this.parent.dataType&&this.parent.dataSourceSettings.dataSource&&(this.parent.dataSourceSettings.dataSource.length>0||this.parent.dataSourceSettings.dataSource instanceof l.DataManager)||"olap"===this.parent.dataType&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url||"Server"===this.parent.dataSourceSettings.mode&&this.parent.dataSourceSettings.url&&""!==this.parent.dataSourceSettings.url){var s=["rows","columns","values","filters"];if("pivot"===this.parent.dataType&&this.parent.groupingBarSettings.showFieldsPanel){s.push("all-fields"),e.push([]);for(var d=0,p=this.parent.engineModule&&this.parent.engineModule.fieldList?Object.keys(this.parent.engineModule.fieldList):[];d<p.length;d++){var u=p[d];this.parent.engineModule.fieldList[u]&&!this.parent.engineModule.fieldList[u].isSelected&&e[e.length-1].push(o.a.getFieldInfo(u,this.parent,!0).fieldItem)}}for(var h=0,c=e.length;h<c;h++)if(e[h]){var g={field:e[h],axis:s[h].toString()};this.parent.notify(r._27,g)}}},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(0),n=(i.n(r),i(1)),a=i(2),o=i(51),s=i(5),l=(i.n(s),function(){function e(e){this.parent=e,this.parent.groupingBarModule=this,this.resColWidth=this.parent.isAdaptive?180:249,this.addEventListener(),this.parent.axisFieldModule=new o.a(this.parent),this.touchObj=new r.Touch(this.parent.element,{tapHold:this.tapHoldHandler.bind(this)})}return e.prototype.getModuleName=function(){return"groupingBar"},e.prototype.renderLayout=function(){this.groupingTable=i.i(r.createElement)("div",{className:a.w});var e=i.i(r.createElement)("div",{className:a._173});this.rightAxisPanel=i.i(r.createElement)("div",{className:a._174});var t=i.i(r.createElement)("div",{className:a._175+" "+a._176+"container"}),n=i.i(r.createElement)("div",{className:a._177+" "+a._176+"container"}),o=i.i(r.createElement)("div",{className:a._178+" "+a._176+"container"}),s=i.i(r.createElement)("div",{className:a._179+" "+a._176+"container"});this.rowPanel=i.i(r.createElement)("div",{className:a._68+" "+a._180});var l=i.i(r.createElement)("div",{className:a._181+" "+a._182}),d=i.i(r.createElement)("div",{className:a._183+" "+a._184}),p=i.i(r.createElement)("div",{className:a._185+" "+a._186});t.appendChild(this.rowPanel),n.appendChild(l),o.appendChild(d),s.appendChild(p),this.rowAxisPanel=t,e.appendChild(o),e.appendChild(t),this.rightAxisPanel.appendChild(s),this.rightAxisPanel.appendChild(n),this.groupingTable.appendChild(i.i(r.createElement)("div",{styles:"display:flex;"})),this.groupingTable.firstElementChild.appendChild(e),this.groupingTable.firstElementChild.appendChild(this.rightAxisPanel),"pivot"===this.parent.dataType&&null!=this.parent.groupingBarSettings&&this.parent.groupingBarSettings.showFieldsPanel&&(this.gridPanel=this.createToolbarUI(this.groupingTable)),this.groupingTable.classList.add(a._56),this.groupingTable.querySelector("."+a._68).classList.add(a._65);for(var u=[this.rowPanel,l,d,p],h=0,c=u;h<c.length;h++){var g=c[h];this.parent.groupingBarSettings.allowDragAndDrop&&new r.Droppable(g,{}),this.unWireEvent(g),this.wireEvent(g)}"Table"!==this.parent.displayOption.view&&"Table"!==this.parent.groupingBarSettings.displayMode?(this.groupingChartTable=this.groupingTable.cloneNode(!0),i.i(r.select)("#"+this.parent.element.id+"_AllFields",this.groupingChartTable)&&(i.i(r.select)("#"+this.parent.element.id+"_AllFields",this.groupingChartTable).remove(),this.chartPanel=this.createToolbarUI(this.groupingChartTable)),this.groupingChartTable.classList.add(a._42),this.groupingChartTable.classList.remove(a._56),this.groupingChartTable.querySelector("."+a._68).classList.add(a._187),this.groupingChartTable.querySelector("."+a._68).classList.remove(a._65),this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.chartSeries&&["Pie","Pyramid","Doughnut","Funnel"].indexOf(this.parent.chartSettings.chartSeries.type)<0?this.groupingChartTable.querySelector("."+a._183).classList.add(a._188):this.groupingChartTable.querySelector("."+a._183).classList.add(a._189),this.parent.chartSettings.chartSeries&&["Pie","Pyramid","Doughnut","Funnel"].indexOf(this.parent.chartSettings.chartSeries.type)>-1?this.groupingChartTable.querySelector("."+a._181).classList.add(a._190):this.groupingChartTable.querySelector("."+a._181).classList.add(a._191),this.groupingChartTable.querySelector("."+a._185).classList.add(a._192)):this.groupingChartTable=void 0,"Chart"!==this.parent.displayOption.view&&"Chart"!==this.parent.groupingBarSettings.displayMode||(this.groupingTable=void 0)},e.prototype.appendToElement=function(){var e=this.groupingTable?this.groupingTable:this.groupingChartTable,t=e.getElementsByClassName(a._173)[0],n=e.getElementsByClassName(a._185+" "+a._186)[0],o=e.getElementsByClassName(a._181+" "+a._182)[0],s=e.getElementsByClassName(a._183+" "+a._184)[0];if((this.parent.element.querySelector("."+a._31)||this.parent.element.querySelector("."+a._10))&&this.parent.showGroupingBar){if(this.parent.element.querySelector("."+a.w))for(var l=0,d=this.parent.element.querySelectorAll("."+a.w);l<d.length;l++){var p=d[l];i.i(r.remove)(p)}if(this.groupingChartTable)if(i.i(r.select)("#"+this.parent.element.id+"_chart",this.parent.element)){if(i.i(r.setStyleAttribute)(this.groupingChartTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.parent.element.insertBefore(this.groupingChartTable,i.i(r.select)("#"+this.parent.element.id+"_chart",this.parent.element)),this.groupingChartTable.querySelector("."+a._193)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed){var u=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.chartPanel.width=u<400?"398px":u,this.chartPanel.refreshOverflow(),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this)))}}else this.groupingChartTable=void 0;if("Chart"!==this.parent.displayOption.view&&this.groupingTable){this.parent.isAdaptive&&(t.style.minWidth="180px",s.style.minWidth="180px"),this.parent.firstColWidth&&(t.style.minWidth="auto",s.style.minWidth="auto"),n.removeAttribute("style"),o.removeAttribute("style"),this.rowPanel.removeAttribute("style");var h=void 0;if(h="olap"===this.parent.dataType?this.parent.olapEngineModule.headerContent?Object.keys(this.parent.olapEngineModule.headerContent).length:0:this.parent.engineModule.headerContent?Object.keys(this.parent.engineModule.headerContent).length:0,!i.i(r.isNullOrUndefined)(h)){var c=this.parent.element.querySelector("."+a._41).querySelector(".e-columnheader");c.removeAttribute("style"),i.i(r.addClass)([c.querySelector("."+a._32)],"e-group-row"),c.querySelector(".e-group-row").querySelector(".e-headercelldiv").style.display="none",c.querySelector(".e-group-row").querySelector(".e-sortfilterdiv").style.display="none"}if(this.parent.element.insertBefore(this.groupingTable,this.parent.element.querySelector("."+a._31)),i.i(r.setStyleAttribute)(this.groupingTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingTable&&this.groupingTable.querySelector("."+a._193)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed){var g=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.gridPanel.width=g<400?"398px":g,this.gridPanel.refreshOverflow()}this.groupingTable.style.minWidth="400px",this.parent.axisFieldModule.render(),this.setGridRowWidth();var m=this.parent.element.querySelector("."+a._41).querySelector("colgroup").children[0],f=i.i(r.formatUnit)(this.groupingTable.offsetWidth-parseInt(m.style.width,10));i.i(r.setStyleAttribute)(s,{width:m.style.width}),i.i(r.setStyleAttribute)(this.rightAxisPanel,{width:f});var v=s.offsetHeight/2;v>o.offsetHeight&&(i.i(r.setStyleAttribute)(n,{height:i.i(r.formatUnit)(v)}),i.i(r.setStyleAttribute)(o,{height:i.i(r.formatUnit)(v+2)}));var S=this.parent.element.querySelector("."+a._41).offsetHeight;i.i(r.setStyleAttribute)(this.rowPanel,{height:S+"px"}),this.parent.element.querySelector("."+a._41).querySelector(".e-rhandler")&&(this.parent.element.querySelector("."+a._41).querySelector(".e-rhandler").style.height=S+"px");for(var y=[].slice.call(this.parent.element.querySelector("."+a._41).querySelector("thead").querySelectorAll("tr")),b=y.filter(function(e){return e.childNodes.length>0}),C=S/b.length,x=0,w=b;x<w.length;x++){var T=w[x];i.i(r.setStyleAttribute)(T,{height:C+"px"});for(var M=[].slice.call(T.querySelectorAll(".e-rhandler")),_=0,D=M;_<D.length;_++){var O=D[_];i.i(r.setStyleAttribute)(O,{height:C+"px"})}}}else this.parent.axisFieldModule.render(),this.updateChartAxisHeight();this.parent.showToolbar&&"Both"===this.parent.displayOption.view&&("Table"===this.parent.currentView?this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none":this.parent.element.querySelector(".e-pivot-grouping-bar").style.display="none")}},e.prototype.updateChartAxisHeight=function(){if(this.groupingChartTable&&i.i(r.select)("#"+this.parent.element.id+"_chart",this.parent.element)){var e=this.groupingChartTable.querySelector("."+a._68),t=this.groupingChartTable.querySelector("."+a._183),n=this.groupingChartTable.querySelector("."+a._185),o=this.groupingChartTable.querySelector("."+a._181);if(e&&o&&(e.style.height="auto",o.style.height="auto",e.offsetHeight>0&&o.offsetHeight>0)){var s=e.offsetHeight>o.offsetHeight?e.offsetHeight:o.offsetHeight;i.i(r.setStyleAttribute)(e,{height:i.i(r.formatUnit)(s)}),i.i(r.setStyleAttribute)(o,{height:i.i(r.formatUnit)(s)})}if(t&&n&&(t.style.height="auto",n.style.height="auto",t.offsetHeight>0&&n.offsetHeight>0)){var s=t.offsetHeight>n.offsetHeight?t.offsetHeight:n.offsetHeight;i.i(r.setStyleAttribute)(t,{height:i.i(r.formatUnit)(s)}),i.i(r.setStyleAttribute)(n,{height:i.i(r.formatUnit)(s)})}}},e.prototype.refreshUI=function(){if(this.groupingChartTable){if(i.i(r.setStyleAttribute)(this.groupingChartTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingChartTable.querySelector("."+a._193)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed){var e=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.chartPanel.width=e<400?"398px":e,this.chartPanel.refreshOverflow()}this.updateChartAxisHeight(),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this)))}if(this.groupingTable){var t=this.groupingTable.getElementsByClassName(a._183+" "+a._184)[0];if(i.i(r.setStyleAttribute)(this.groupingTable,{width:i.i(r.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())}),this.groupingTable&&this.groupingTable.querySelector("."+a._193)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed){var n=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2;this.gridPanel.width=n<400?"398px":n,this.gridPanel.refreshOverflow()}this.groupingTable.style.minWidth="400px";var o=this.parent.element.querySelector("."+a._41).querySelector("colgroup").children[0],s=i.i(r.formatUnit)(this.groupingTable.offsetWidth-parseInt(o.style.width,10));if(i.i(r.setStyleAttribute)(t,{width:o.style.width}),i.i(r.setStyleAttribute)(this.rightAxisPanel,{width:s}),this.parent.showFieldList&&this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.element&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(this.alignIcon.bind(this))),!this.parent.grid.element.querySelector(".e-group-row")){var l=this.parent.element.querySelector("."+a._41).querySelector(".e-columnheader");i.i(r.addClass)([l.querySelector("."+a._32)],"e-group-row"),i.i(r.setStyleAttribute)(this.rowPanel,{height:this.parent.element.querySelector("."+a._41).offsetHeight+"px"}),l.querySelector(".e-group-row").appendChild(this.rowAxisPanel),i.i(r.setStyleAttribute)(l.querySelector(".e-group-row").querySelector(".e-headercelldiv"),{display:"none"}),i.i(r.setStyleAttribute)(l.querySelector(".e-group-row").querySelector(".e-sortfilterdiv"),{display:"none"});var d=this.parent.element.querySelector("."+a._41).offsetHeight;i.i(r.setStyleAttribute)(this.rowPanel,{height:d+"px"}),this.parent.element.querySelector("."+a._41).querySelector(".e-rhandler")&&(this.parent.element.querySelector("."+a._41).querySelector(".e-rhandler").style.height=d+"px");for(var p=[].slice.call(this.parent.element.querySelector("."+a._41).querySelector("thead").querySelectorAll("tr")),u=p.filter(function(e){return e.childNodes.length>0}),h=d/u.length,c=0,g=u;c<g.length;c++){var m=g[c];i.i(r.setStyleAttribute)(m,{height:h+"px"});for(var f=[].slice.call(m.querySelectorAll(".e-rhandler")),v=0,S=f;v<S.length;v++){var y=S[v];y.parentElement.parentElement.querySelector("."+a._30)||i.i(r.setStyleAttribute)(y,{height:h+"px"})}}}}},e.prototype.alignIcon=function(){var e,t=this.parent.pivotFieldListModule.element;if(e="Table"===this.parent.currentView?this.parent.grid?this.parent.grid.element.offsetWidth:e:this.parent.chart?this.parent.pivotChartModule.getCalulatedWidth():e){var n=e<400?400:e;i.i(r.setStyleAttribute)(t.querySelector("."+a._66),{left:i.i(r.formatUnit)(this.parent.enableRtl?-Math.abs(n-t.querySelector("."+a._66).offsetWidth):n-t.querySelector("."+a._66).offsetWidth),top:this.parent.element.querySelector("."+a._194)?this.parent.element.querySelector("."+a._66).offsetHeight.toString()+"px":""})}},e.prototype.setGridRowWidth=function(){var e=this.parent.element.querySelector("."+a._41).querySelector("colgroup").children[0];if(this.rowPanel.querySelector("."+a._39))if(this.parent.isAdaptive){if(!this.parent.firstColWidth){var t=this.parent.grid.columns;t&&t.length>0&&(t[0].width=this.resColWidth),this.parent.posCount=0,this.parent.grid.headerModule.refreshUI()}}else{var n=[].slice.call(this.rowPanel.querySelectorAll("."+a._195)),o=n[n.length-1],s=o.querySelector("."+a._39).offsetWidth+o.querySelector(".e-indent-div").offsetWidth+20,l=i.i(r.formatUnit)(s<this.resColWidth?this.resColWidth:s),d=this.parent.element.querySelector("."+a._41).querySelector("."+a._32),p=this.parent.element.querySelector("."+a._23).querySelector("tbody").querySelector("."+a._30),u=this.parent.element.querySelector("."+a._23).querySelector("colgroup").children[0],h=parseInt(l,10),c=this.parent.pivotColumns.length>0,t=this.parent.grid.columns;t&&t.length>0&&(t[0].width=t[0].autoFit?t[0].width:h>this.resColWidth?h:this.resColWidth);var g=void 0;g="olap"===this.parent.dataType?this.parent.renderModule.calculateColWidth(this.parent.olapEngineModule.pivotValues.length>0?this.parent.olapEngineModule.pivotValues[0].length:2):this.parent.renderModule.calculateColWidth(this.parent.dataSourceSettings.values.length>0&&this.parent.engineModule.pivotValues.length>0?this.parent.engineModule.pivotValues[0].length:2);for(var m=0;m<t.length;m++)if(0!==m)if(t[m].columns)this.setColWidth(this.parent.renderModule.pivotColumns[m].columns,g);else if("auto"!==t[m].width){var f=t[m].customAttributes?t[m].customAttributes.cell.valueSort.levelName:"";t[m].width=t[m].autoFit||c&&this.parent.pivotColumns[m].autoFit?t[m].width:this.parent.renderModule.setSavedWidth(f,g)}else t[m].minWidth=g;this.parent.posCount=0,this.parent.setGridColumns(this.parent.grid.columns),this.parent.grid.headerModule.refreshUI(),this.parent.firstColWidth||(l=t[0].autoFit?t[0].width.toString():l,e.style.width=l,u.style.width=l,d.style.width=l,p.style.width=l,i.i(r.setStyleAttribute)(d,{width:l}),i.i(r.setStyleAttribute)(p,{width:l}))}else this.parent.grid.columns&&this.parent.grid.columns.length>0&&(this.parent.grid.columns[0].width=this.parent.grid.columns[0].width>this.resColWidth?this.parent.grid.columns[0].width:this.resColWidth),this.parent.grid.headerModule.refreshUI();this.groupingTable&&this.refreshUI()},e.prototype.setColWidth=function(e,t){for(var i=0;i<e.length;i++)e[i].columns?this.setColWidth(e[i].columns,t):e[i].autoFit||("auto"!==e[i].width?e[i].width=t:e[i].minWidth=t)},e.prototype.wireEvent=function(e){r.EventHandler.add(e,"mouseover",this.dropIndicatorUpdate,this),r.EventHandler.add(e,"mouseleave",this.dropIndicatorUpdate,this)},e.prototype.unWireEvent=function(e){r.EventHandler.remove(e,"mouseover",this.dropIndicatorUpdate),r.EventHandler.remove(e,"mouseleave",this.dropIndicatorUpdate)},e.prototype.dropIndicatorUpdate=function(e){(this.parent.isDragging&&e.target.classList.contains(a._196)&&"mouseover"===e.type||!this.parent.isDragging||!e.target.classList.contains(a._196)&&"mouseleave"===e.type)&&(i.i(r.removeClass)([].slice.call(this.parent.element.querySelectorAll("."+a._197)),a._198),i.i(r.removeClass)([].slice.call(this.parent.element.querySelectorAll("."+a._197+"-last")),a._198))},e.prototype.tapHoldHandler=function(e){var t=i.i(r.closest)(e.originalEvent.target,"."+a._39);if(!i.i(r.isNullOrUndefined)(t)&&this.parent.isAdaptive){var n=t.getBoundingClientRect();return this.parent.contextMenuModule.fieldElement=t,void this.parent.contextMenuModule.menuObj.open(n.top,n.left)}},e.prototype.RefreshFieldsPanel=function(){if("pivot"===this.parent.dataType&&null!=this.parent.groupingBarSettings){if(i.i(r.selectAll)("#"+this.parent.element.id+"_AllFields",this.parent.element).length>0)for(var e=0,t=i.i(r.selectAll)("#"+this.parent.element.id+"_AllFields",this.parent.element);e<t.length;e++){var n=t[e];n.remove()}this.parent.groupingBarSettings.showFieldsPanel&&(this.groupingChartTable&&"Table"!==this.parent.displayOption.view&&"Table"!==this.parent.groupingBarSettings.displayMode&&(this.chartPanel=this.createToolbarUI(this.groupingChartTable)),this.groupingTable&&(this.gridPanel=this.createToolbarUI(this.groupingTable)),this.parent.axisFieldModule.render(),this.refreshUI())}},e.prototype.createToolbarUI=function(e){i.i(r.select)("#"+this.parent.element.id+"_AllFields",e)&&i.i(r.select)("#"+this.parent.element.id+"_AllFields",e).remove(),e.prepend(i.i(r.createElement)("div",{id:this.parent.element.id+"_AllFields"}));var t=new s.Toolbar({cssClass:a._193+(this.parent.cssClass?" "+this.parent.cssClass:""),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,items:[{template:"<div class="+a._199+"></div>"}],allowKeyboard:!1,width:this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2});return t.appendTo(i.i(r.select)("#"+this.parent.element.id+"_AllFields",e)),t},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(n._25,this.renderLayout,this),this.parent.on(n._19,this.appendToElement,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(n._19,this.appendToElement),this.parent.off(n._25,this.renderLayout))},e.prototype.destroy=function(){this.removeEventListener(),this.parent.pivotButtonModule&&this.parent.pivotButtonModule.destroy(),this.groupingTable&&this.groupingTable.querySelector("."+a._193)&&null!=this.gridPanel&&!this.gridPanel.isDestroyed&&(this.gridPanel.destroy(),this.gridPanel=null),this.groupingChartTable&&this.groupingChartTable.querySelector("."+a._193)&&null!=this.chartPanel&&!this.chartPanel.isDestroyed&&(this.chartPanel.destroy(),this.chartPanel=null),this.touchObj&&!this.touchObj.isDestroyed&&this.touchObj.destroy(),this.parent.element.querySelector("."+a.w)&&i.i(r.remove)(this.parent.element.querySelector("."+a.w))},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(4),n=(i.n(r),i(0)),a=(i.n(n),i(2)),o=i(8),s=(i.n(o),i(1)),l=i(10),d=(i.n(l),function(){function e(e){this.indexString=[],this.isUpdated=!1,this.parent=e,this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule}return e.prototype.frameHeaderWithKeys=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],i++;return r},e.prototype.showDrillThroughDialog=function(e){for(var t=this,o=e.rawData,l=[],d={},p=0;p<e.rawData.length;p++)l.push(this.frameHeaderWithKeys(e.rawData[p]));try{if("Table"===this.parent.currentView&&this.parent.editSettings.allowInlineEditing&&this.parent.editSettings.allowEditing&&1===e.rawData.length){if(this.parent.actionObj.actionName=s._74,this.parent.actionBeginMethod())return;this.editCell(e,o)}else{this.removeDrillThroughDialog();var u=i.i(n.createElement)("div",{id:this.parent.element.id+"_drillthrough",className:a._58});this.parent.element.appendChild(u),this.dialogPopUp=new r.Dialog({animationSettings:{effect:"Fade"},allowDragging:!1,header:this.parent.localeObj.getConstant("details"),content:this.createDrillThroughGrid(e,o),cssClass:this.parent.cssClass,beforeOpen:function(){t.drillThroughGrid.setProperties({dataSource:t.parent.editSettings.allowEditing?t.dataWithPrimarykey(e,o,d):o,height:t.parent.editSettings.allowEditing?220:300},!1)},beforeClose:function(){if(t.parent.editSettings.allowEditing&&t.isUpdated){"CSV"===t.parent.dataSourceSettings.type&&t.updateData(t.drillThroughGrid.dataSource);for(var e=Object.keys(d),r=[],a=0,p=e;a<p.length;a++){var u=p[a];r.push(d[u])}for(var h=Object.keys(d).length,c=[],g=[],m=0,f=0,v=t.drillThroughGrid.dataSource;f<v.length;f++){var S=v[f];if(i.i(n.isNullOrUndefined)(S.__index)||""===S.__index){for(var y=0,b=t.engine.fields;y<b.length;y++){var C=b[y];i.i(n.isNullOrUndefined)(S[C])&&delete S[C]}delete S.__index,c.push(S)}else h>0&&(delete d[S.__index.toString()],g.push(S),h--);"Server"===t.parent.dataSourceSettings.mode&&(S.__index&&delete S.__index,o[m].__index&&delete o[m].__index),m++}if(h=0,"Server"===t.parent.dataSourceSettings.mode){for(var x=[],w=Object.keys(d),T=0;T<w.length;T++)delete t.parent.drillThroughValue.indexObject[d[w[T]]],x.push({Key:w[T],Value:d[w[T]]});t.parent.getEngine("updateRawData",null,null,null,null,null,null,null,{addedData:c,removedData:x,updatedData:g,indexObject:t.parent.drillThroughValue.indexObject})}else{for(var M=[],_=t.parent.allowDataCompression?t.parent.engineModule.actualData:t.parent.engineModule.data,D=0,O=_;D<O.length;D++){var S=O[D];delete S.__index,void 0===d[h.toString()]&&M.push(S),h++}M=M.concat(c);var P={currentData:t.drillThroughGrid.dataSource,previousData:l,previousPosition:r,cancel:!1};t.parent.trigger(s.F,P),P.cancel||(t.parent.setProperties({dataSourceSettings:{dataSource:M}},!0),t.engine.updateGridData(t.parent.dataSourceSettings),t.parent.pivotValues=t.engine.pivotValues)}t.parent.actionObj.actionName=s._121;var N={editInfo:{type:t.drillThroughGrid.editSettings.mode,action:"Update",currentData:t.drillThroughGrid.dataSource,previousData:l,previousPosition:r}};t.parent.actionObj.actionInfo=N}t.isUpdated=!1,d={}},isModal:!0,visible:!0,showCloseIcon:!0,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:this.parent.isAdaptive?"100%":"60%",position:{X:"center",Y:"center"},closeOnEscape:!this.parent.editSettings.allowEditing,target:document.body,close:this.removeDrillThroughDialog.bind(this)}),this.dialogPopUp.isStringTemplate=!0,this.dialogPopUp.appendTo(u),i.i(n.setStyleAttribute)(this.dialogPopUp.element,{visibility:"visible"});var h={escape:"escape"};this.parent.editSettings.allowEditing&&(this.drillthroughKeyboardModule=new n.KeyboardEvents(this.dialogPopUp.element,{keyAction:this.drillthroughKeyActionHandler.bind(this),keyConfigs:h,eventName:"keydown"}))}}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.editCell=function(e,t){var r=this,a=this.parent.gridSettings.allowResizing,o=e.currentCell.actualText.toString(),d=Number(Object.keys(e.currentCell.indexObject));e.currentTarget.firstElementChild.style.display="none";var p=Number(e.rawData[0][o]),u=this.frameHeaderWithKeys(e.rawData[e.rawData.length-1]),h=e.rawData[e.rawData.length-1],c={editInfo:{type:"Inline editing",action:"update",data:t}};this.parent.actionObj.actionInfo=c;var g=new l.NumericTextBox({value:p,enableRtl:this.parent.enableRtl,enabled:!0,format:"####.##",locale:this.parent.locale,cssClass:this.parent.cssClass,change:function(){var t=i.i(n.isNullOrUndefined)(g.value)?0:g.value,a=e.currentCell.indexObject[d];e.rawData[0][o]=t,r.parent.engineModule.data[a]=e.rawData[0]},blur:function(){var e={currentData:h,previousData:u,previousPosition:h.index,cancel:!1};if(r.parent.trigger(s.F,e),!e.cancel){if("Server"===r.parent.dataSourceSettings.mode){var t={};t[d]=d;var i=[h];r.parent.getEngine("updateRawData",null,null,null,null,null,null,null,{addedData:[],removedData:[],updatedData:i,indexObject:t})}r.parent.setProperties({dataSourceSettings:{dataSource:r.parent.engineModule.data}},!0),r.engine.updateGridData(r.parent.dataSourceSettings),r.parent.pivotValues=r.engine.pivotValues,r.parent.gridSettings.allowResizing=a}}}),m=i.i(n.createElement)("input",{id:this.parent.element.id+"_inputbox"});e.currentTarget.appendChild(m),g.appendTo(m),e.currentCell.value=g.value,g.focusIn(),this.parent.gridSettings.allowResizing=!1},e.prototype.updateData=function(e){for(var t=0,r=this.parent.allowDataCompression?this.parent.engineModule.actualData:this.parent.engineModule.data;t<e.length;){for(var a=Object.keys(e[t]),o=0,s=[];o<a.length;)i.i(n.isNullOrUndefined)(this.parent.engineModule.fieldKeys[a[o]])||(s[this.parent.engineModule.fieldKeys[a[o]]]=e[t][a[o]]),o++;r[e[t].__index]=s,t++}this.parent.allowDataCompression?this.parent.engineModule.actualData=r:this.parent.engineModule.data=r},e.prototype.removeDrillThroughDialog=function(){this.dialogPopUp&&!this.dialogPopUp.isDestroyed&&(this.parent.actionObj.actionName=s._122,this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.dialogPopUp.destroy());var e=document.getElementById(this.parent.element.id+"_drillthrough");e&&i.i(n.remove)(e),document.getElementById(this.parent.element.id+"_drillthroughgrid_ccdlg")&&i.i(n.remove)(document.getElementById(this.parent.element.id+"_drillthroughgrid_ccdlg"))},e.prototype.createDrillThroughGrid=function(e,t){var r=this,l=i.i(n.createElement)("div",{id:this.parent.element.id+"_drillthroughbody",className:a._59}),d=i.i(n.createElement)("div",{id:this.parent.element.id+"_drillthroughbodyheader",className:a._60});if(""!==e.rowHeaders&&(d.innerHTML="<span class="+a._61+"><span class="+a._62+">"+this.parent.localeObj.getConstant("row")+"</span> : <span class="+a._63+">"+e.rowHeaders+"</span></span>"),""!==e.columnHeaders&&(d.innerHTML=d.innerHTML+"<span class="+a._61+"><span class="+a._62+">"+this.parent.localeObj.getConstant("column")+"</span> : <span class="+a._63+">"+e.columnHeaders+"</span></span>"),""!==e.value){var p=e.value.split("(")[0],u=e.value.split("(")[1].split(")")[0];"0"!==u&&(d.innerHTML=d.innerHTML+"<span class="+a._61+"><span class="+a._62+">"+p+"</span> : <span class="+a._63+">"+u+"</span></span>")}var h=["ColumnChooser"];this.parent.editSettings.allowEditing&&(h=this.parent.editSettings.allowCommandColumns?["ColumnChooser","Add"]:"Batch"===this.parent.editSettings.mode?["ColumnChooser","Add","Delete","Update","Cancel"]:"Dialog"===this.parent.editSettings.mode?["ColumnChooser","Add","Edit","Delete"]:["ColumnChooser","Add","Edit","Delete","Update","Cancel"]);var c=i.i(n.createElement)("div",{id:this.parent.element.id+"_drillthroughgrid",className:a._64});o.Grid.Inject(o.Selection,o.Reorder,o.Resize,o.Toolbar,o.ColumnChooser),this.drillThroughGrid=new o.Grid({cssClass:this.parent.cssClass,gridLines:"Default",allowResizing:!0,allowReordering:!0,showColumnChooser:!0,enableHover:!1,toolbar:h,columns:e.gridColumns,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableVirtualization:!this.parent.editSettings.allowEditing,allowPaging:this.parent.editSettings.allowEditing,pageSettings:{pageSize:20},rowHeight:this.parent.gridSettings.rowHeight}),"olap"===this.parent.dataType&&this.formatData(t);var g=this;if(this.parent.trigger(s.E,{cellInfo:e,gridObj:this.drillThroughGrid,type:"editing"}),this.drillThroughGrid.allowExcelExport&&o.Grid.Inject(o.ExcelExport),this.drillThroughGrid.allowPdfExport&&o.Grid.Inject(o.PdfExport),this.parent.editSettings.allowEditing){o.Grid.Inject(o.Edit,o.Page);try{this.drillThroughGrid.editSettings=this.parent.editSettings,this.drillThroughGrid.actionBegin=function(e){var t="save"===e.requestType?s._75:"add"===e.requestType?s._76:"delete"===e.requestType?s._77:"";r.parent.actionObj.actionName=t,r.parent.actionObj.actionName&&r.parent.actionBeginMethod()},this.parent.editSettings.allowCommandColumns?(this.drillThroughGrid.editSettings.mode="Normal",this.drillThroughGrid.editSettings.allowEditOnDblClick=!1,o.Grid.Inject(o.CommandColumn),this.drillThroughGrid.columns.push({headerText:this.parent.localeObj.getConstant("manageRecords"),width:160,showInColumnChooser:!1,commands:[{type:"Edit",buttonOption:{iconCss:" e-icons e-edit",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Delete",buttonOption:{iconCss:"e-icons e-delete",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Save",buttonOption:{iconCss:"e-icons e-update",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}},{type:"Cancel",buttonOption:{iconCss:"e-icons e-cancel-icon",cssClass:"e-flat"+(this.parent.cssClass?" "+this.parent.cssClass:"")}}]})):this.drillThroughGrid.editSettings.allowEditOnDblClick=this.parent.editSettings.allowEditOnDblClick,this.drillThroughGrid.columns.push({field:"__index",visible:!1,isPrimaryKey:!0,type:"string",showInColumnChooser:!1})}catch(e){this.parent.actionFailureMethod(e)}this.drillThroughGrid.actionComplete=function(e){"batchsave"!==e.requestType&&"save"!==e.requestType&&"delete"!==e.requestType||(g.isUpdated=!0),r.parent.actionObj.actionName=r.parent.getActionCompleteName();var i={editInfo:{type:r.drillThroughGrid.editSettings.mode,action:e.requestType,data:t}};r.parent.actionObj.actionInfo=i,r.parent.actionObj.actionName&&r.parent.actionCompleteMethod(),("Normal"===g.drillThroughGrid.editSettings.mode&&"save"===e.requestType&&g.drillThroughGrid.element.querySelectorAll(".e-tbar-btn:hover").length>0&&!g.parent.editSettings.allowCommandColumns||"batchsave"===e.requestType)&&g.dialogPopUp.hide()},this.drillThroughGrid.beforeBatchSave=function(){g.isUpdated=!0}}else o.Grid.Inject(o.VirtualScroll);return document.body.appendChild(c),this.drillThroughGrid.isStringTemplate=!0,this.drillThroughGrid.appendTo(c),l.appendChild(d),l.appendChild(c),l},e.prototype.frameGridColumns=function(e){var t="olap"===this.parent.dataType?e[0]?Object.keys(e[0]):[]:Object.keys(this.engine.fieldList),r=[],a={};if(this.parent.dataSourceSettings.formatSettings.length>0)for(var o=0;o<this.parent.dataSourceSettings.formatSettings.length;o++)a[this.parent.dataSourceSettings.formatSettings[o].name]=this.parent.dataSourceSettings.formatSettings[o].format;if("olap"===this.parent.dataType)for(var s=0,l=t;s<l.length;s++){var d=l[s];r.push({field:d.replace(/_x005B_|_x0020_|_x005D_|_x0024_/g,"").replace("].[","").split(".").reverse().join(""),headerText:d.replace(/_x005B_|_x005D_|_x0024_/g,"").replace(/_x0020_/g," ").replace("].[","").split(".").reverse().join("."),width:120,visible:!0,validationRules:{required:!0},format:i.i(n.isNullOrUndefined)(a[d])?null:a[d],type:i.i(n.isNullOrUndefined)(a[d])?"string":null})}else for(var p=0,u=t;p<u.length;p++){var d=u[p];if("CalculatedField"!==this.engine.fieldList[d].aggregateType){var h="",c=!("date"!==this.engine.fieldList[d].type&&"datetime"!==this.engine.fieldList[d].type||!(this.isDateFieldExist(d)||e[0]&&e[0][d]&&-1===e[0][d].toString().indexOf(" ")));h="number"===this.engine.fieldList[d].type?"numericedit":"date"===this.engine.fieldList[d].type&&c?"datepickeredit":"datetime"===this.engine.fieldList[d].type&&c?"datetimepickeredit":"defaultedit";var g=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(this.engine.fieldList[d].caption):this.engine.fieldList[d].caption;r.push({field:d,headerText:g,width:120,visible:this.engine.fieldList[d].isSelected,validationRules:{required:!0},editType:h,format:i.i(n.isNullOrUndefined)(a[d])?void 0:a[d],type:i.i(n.isNullOrUndefined)(a[d])?"string":null})}}return r},e.prototype.isDateFieldExist=function(e){for(var t=0;t<this.parent.dataSourceSettings.formatSettings.length;t++)if(this.parent.dataSourceSettings.formatSettings[t].name===e&&this.parent.dataSourceSettings.formatSettings[t].type.indexOf("date")>-1)return!0;for(var t=0;t<this.parent.dataSourceSettings.fieldMapping.length;t++)if(this.parent.dataSourceSettings.fieldMapping[t].name===e&&this.parent.dataSourceSettings.fieldMapping[t].dataType&&this.parent.dataSourceSettings.fieldMapping[t].dataType.indexOf("date")>-1)return!0;return!1},e.prototype.formatData=function(e){for(var t=0;t<e.length;){for(var i=e[t],r=Object.keys(e[t]),n={},a=0;a<r.length;){n[r[a].replace(/_x005B_|_x0020_|_x005D_|_x0024_/g,"").replace("].[","").split(".").reverse().join("")]=i[r[a]],a++}e[t]=n,t++}},e.prototype.dataWithPrimarykey=function(e,t,i){for(var r=this.indexString.length>0?this.indexString:Object.keys(e.currentCell.indexObject),n=t,a=0,o=0,s=n;o<s.length;o++){s[o].__index=r[a],i[r[a].toString()]=Number(r[a]),a++}return n},e.prototype.drillthroughKeyActionHandler=function(e){switch(e.action){case"escape":this.processClose(e)}},e.prototype.processClose=function(e){var t=e.target;if(t&&i.i(n.closest)(t,".e-popup.e-popup-open")){var a=i.i(n.getInstance)(i.i(n.closest)(t,".e-popup.e-popup-open"),r.Dialog);if(a&&!a.closeOnEscape){var o=a.element.getAttribute("data-fieldName");if(a.hide(),this.parent.element)for(var s=[].slice.call(this.parent.element.querySelectorAll(".e-pivot-button")),l=0,d=s;l<d.length;l++){var p=d[l];if(p.getAttribute("data-uid")===o){p.focus();break}}return void e.preventDefault()}}},e.prototype.destroy=function(){this.parent.isDestroyed||this.drillthroughKeyboardModule&&!this.drillthroughKeyboardModule.isDestroyed&&(this.drillthroughKeyboardModule.destroy(),this.drillthroughKeyboardModule=null)},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(4),n=(i.n(r),i(0)),a=(i.n(n),i(2)),o=i(1),s=i(7),l=(i.n(s),i(3)),d=function(){function e(e){this.parent=e,this.parent.numberFormattingModule=this,this.removeEventListener(),this.addEventListener(),this.newFormat=[],this.lastFormattedValue=[]}return e.prototype.getModuleName=function(){return"numberFormatting"},e.prototype.showNumberFormattingDialog=function(){var e=this,t=i.i(n.createElement)("div",{id:this.parent.element.id+"_FormatDialog",className:a.g});this.parent.element.appendChild(t),this.dialog=new r.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("numberFormat"),content:this.getDialogContent(),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"320px",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateFormatting.bind(this),buttonModel:{cssClass:a.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("apply"),isPrimary:!0}},{click:function(){e.dialog.hide()},buttonModel:{cssClass:a.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:!0,cssClass:this.parent.cssClass,target:this.parent.element,overlayClick:function(){e.removeDialog()},close:this.removeDialog.bind(this)}),this.dialog.isStringTemplate=!0,this.dialog.appendTo(t),this.dialog.element.querySelector("."+a.h).innerText=this.parent.localeObj.getConstant("numberFormat");var o;this.newFormat=[{name:this.parent.localeObj.getConstant("AllValues"),format:"N0",useGrouping:!0,type:void 0}];for(var s=[],l=0;l<this.parent.dataSourceSettings.formatSettings.length;l++)o={name:this.parent.dataSourceSettings.formatSettings[l].name,format:this.parent.dataSourceSettings.formatSettings[l].format,useGrouping:this.parent.dataSourceSettings.formatSettings[l].useGrouping,type:this.parent.dataSourceSettings.formatSettings[l].type},this.newFormat.push(o);for(var l=0;l<this.newFormat.length;l++)s.push(this.newFormat[l].name);for(var d=0;d<this.parent.dataSourceSettings.values.length;d++)-1===s.indexOf(this.parent.dataSourceSettings.values[d].name)&&(o={name:this.parent.dataSourceSettings.values[d].name,format:"N0",useGrouping:!0},this.newFormat.push(o));this.renderControls()},e.prototype.getDialogContent=function(){var e=i.i(n.createElement)("div",{id:this.parent.element.id+"_FormatDialogOuter",className:a.i}),t=i.i(n.createElement)("table",{id:this.parent.element.id+"_FormatTable",className:a.j,attrs:{role:"tableItems"}}),r=i.i(n.createElement)("tr"),o=i.i(n.createElement)("td"),s=i.i(n.createElement)("div",{id:this.parent.element.id+"_FormatValueLable",className:a.k});s.innerText=this.parent.localeObj.getConstant("values");var l=i.i(n.createElement)("div",{id:this.parent.element.id+"_FormatValueDrop"});o.appendChild(s),o.appendChild(l),r.appendChild(o),t.appendChild(r),r=i.i(n.createElement)("tr"),o=i.i(n.createElement)("td");var d=i.i(n.createElement)("div",{id:this.parent.element.id+"_FormatLable",className:a.l});d.innerText=this.parent.localeObj.getConstant("formatType");var p=i.i(n.createElement)("div",{id:this.parent.element.id+"_FormatDrop"});o.appendChild(d),o.appendChild(p),r.appendChild(o),t.appendChild(r),r=i.i(n.createElement)("tr"),o=i.i(n.createElement)("td");var u=i.i(n.createElement)("div",{id:this.parent.element.id+"_GroupingLable",className:a.m});u.innerText=this.parent.localeObj.getConstant("grouping");var h=i.i(n.createElement)("div",{id:this.parent.element.id+"_GroupingDrop"});o.appendChild(u),o.appendChild(h),r.appendChild(o),t.appendChild(r),r=i.i(n.createElement)("tr"),o=i.i(n.createElement)("td");var c=i.i(n.createElement)("div",{id:this.parent.element.id+"_DecimalLable",className:a.n});c.innerText=this.parent.localeObj.getConstant("decimalPlaces");var g=i.i(n.createElement)("div",{id:this.parent.element.id+"_DecimalDrop"});return o.appendChild(c),o.appendChild(g),r.appendChild(o),t.appendChild(r),r=i.i(n.createElement)("tr"),o=i.i(n.createElement)("td"),this.customLable=i.i(n.createElement)("div",{id:this.parent.element.id+"_CustomLable",className:a.o}),this.customLable.innerText=this.parent.localeObj.getConstant("customFormatString"),this.customText=i.i(n.createElement)("input",{id:this.parent.element.id+"_CustomText",attrs:{type:"text",tabindex:"0"},className:a.p+" "+a.q}),o.appendChild(this.customLable),o.appendChild(this.customText),r.appendChild(o),t.appendChild(r),r=i.i(n.createElement)("tr"),t.appendChild(r),e.appendChild(t),e},e.prototype.renderControls=function(){var e,t,r;if(i.i(n.select)("#"+this.parent.element.id+"_FormatValueDrop",this.dialog.element)){var o=[];o.push({index:0,name:this.parent.localeObj.getConstant("AllValues"),field:this.parent.localeObj.getConstant("AllValues")});for(var l=0;l<this.parent.dataSourceSettings.values.length;l++){var d=this.parent.dataSourceSettings.values[l].caption||this.parent.dataSourceSettings.values[l].name;d=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(d):d,o.push({index:l+1,name:d,field:this.parent.dataSourceSettings.values[l].name})}e=new s.DropDownList({dataSource:o,fields:{text:"name",value:"field"},enableRtl:this.parent.enableRtl,locale:this.parent.locale,index:0,cssClass:a.r+(this.parent.cssClass?" "+this.parent.cssClass:""),change:this.valueChange.bind(this),width:"100%",open:this.customUpdate.bind(this)}),e.isStringTemplate=!0,e.appendTo("#"+this.parent.element.id+"_FormatValueDrop")}if(i.i(n.select)("#"+this.parent.element.id+"_FormatDrop",this.dialog.element)){var p=[{index:0,name:this.parent.localeObj.getConstant("number")},{index:1,name:this.parent.localeObj.getConstant("currency")},{index:2,name:this.parent.localeObj.getConstant("percentage")},{index:3,name:this.parent.localeObj.getConstant("Custom")}];t=new s.DropDownList({dataSource:p,fields:{text:"name",value:"name"},index:0,change:this.dropDownChange.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:a.s+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%"}),t.isStringTemplate=!0,t.appendTo("#"+this.parent.element.id+"_FormatDrop")}if(i.i(n.select)("#"+this.parent.element.id+"_GroupingDrop",this.dialog.element)){var p=[{index:0,name:this.parent.localeObj.getConstant("true")},{index:1,name:this.parent.localeObj.getConstant("false")}];r=new s.DropDownList({dataSource:p,fields:{text:"name",value:"name"},enableRtl:this.parent.enableRtl,locale:this.parent.locale,index:0,cssClass:a.t+(this.parent.cssClass?" "+this.parent.cssClass:""),width:"100%",change:this.groupingChange.bind(this)}),r.isStringTemplate=!0,r.appendTo("#"+this.parent.element.id+"_GroupingDrop")}if(i.i(n.select)("#"+this.parent.element.id+"_DecimalDrop",this.dialog.element)){var p=[{index:0,name:0},{index:1,name:1},{index:2,name:2},{index:3,name:3},{index:4,name:4},{index:5,name:5},{index:6,name:6},{index:7,name:7},{index:8,name:8},{index:9,name:9},{index:10,name:10}],u=new s.DropDownList({dataSource:p,fields:{text:"name",value:"name"},enableRtl:this.parent.enableRtl,locale:this.parent.locale,index:0,cssClass:a.u+(this.parent.cssClass?" "+this.parent.cssClass:""),popupHeight:150,width:"100%",change:this.decimalChange.bind(this)});u.isStringTemplate=!0,u.appendTo("#"+this.parent.element.id+"_DecimalDrop")}if(t.value!==this.parent.localeObj.getConstant("Custom")&&(this.customText.disabled=!0),0!==this.lastFormattedValue.length){e.value=this.lastFormattedValue[0].name;var h=this.lastFormattedValue[0].format,c=""===h?"":h.split("")[0].toLowerCase(),g=this.lastFormattedValue[0].useGrouping?this.parent.localeObj.getConstant("true"):this.parent.localeObj.getConstant("false");this.updateFormattingDialog(h,c,g)}},e.prototype.valueChange=function(e){for(var t=this.newFormat,r=!1,a=0;a<t.length;a++)if(t[a].name===e.value){var o=t[a].format,l=""===o?"":o.split("")[0].toLowerCase(),d=t[a].useGrouping?this.parent.localeObj.getConstant("true"):this.parent.localeObj.getConstant("false");this.updateFormattingDialog(o,l,d),r=!0;break}if(!r){i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_FormatDrop",this.parent.element),s.DropDownList).value=this.parent.localeObj.getConstant("number");i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DecimalDrop",this.parent.element),s.DropDownList).value=0;i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_GroupingDrop",this.parent.element),s.DropDownList).value=this.parent.localeObj.getConstant("true")}},e.prototype.updateFormattingDialog=function(e,t,r){var a=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_FormatDrop",this.parent.element),s.DropDownList);if(2===e.length&&["n","p","c"].indexOf(t)>-1){a.value="n"===t?this.parent.localeObj.getConstant("number"):"p"===t?this.parent.localeObj.getConstant("percentage"):"c"===t?this.parent.localeObj.getConstant("currency"):this.parent.localeObj.getConstant("number");i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DecimalDrop",this.parent.element),s.DropDownList).value=Number(e.split("")[1]);i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_GroupingDrop",this.parent.element),s.DropDownList).value=r}else a.value=this.parent.localeObj.getConstant("Custom"),this.customText.value=e},e.prototype.customUpdate=function(){if(i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_FormatDrop",this.parent.element),s.DropDownList).value===this.parent.localeObj.getConstant("Custom")){var e=this.getIndexValue();this.newFormat[e].format=this.customText.value}},e.prototype.dropDownChange=function(e){var t=this.getIndexValue(),r=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_GroupingDrop",this.parent.element),s.DropDownList),a=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DecimalDrop",this.parent.element),s.DropDownList);if(e.value===this.parent.localeObj.getConstant("Custom"))this.customText.disabled=!1,r.enabled=!1,a.enabled=!1,this.newFormat[t].format=this.customText.value;else{var o=this.formattedText();this.newFormat[t].format=o,this.customText.disabled=!0,r.enabled=!0,a.enabled=!0,this.customText.value=""}},e.prototype.groupingChange=function(){var e=this.getIndexValue(),t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_GroupingDrop",this.parent.element),s.DropDownList);this.newFormat[e].useGrouping=t.value===this.parent.localeObj.getConstant("true")},e.prototype.getIndexValue=function(){for(var e=[],t=0;t<this.newFormat.length;t++)e.push(this.newFormat[t].name);var r=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_FormatValueDrop",this.parent.element),s.DropDownList);return e.indexOf(r.value.toString())},e.prototype.decimalChange=function(){var e=this.getIndexValue(),t=this.formattedText();this.newFormat[e].format=t},e.prototype.formattedText=function(){var e,t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_FormatDrop",this.parent.element),s.DropDownList),r=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DecimalDrop",this.parent.element),s.DropDownList);return t.value===this.parent.localeObj.getConstant("number")||t.value===this.parent.localeObj.getConstant("percentage")||t.value===this.parent.localeObj.getConstant("currency")?(e=t.value===this.parent.localeObj.getConstant("number")?"N":t.value===this.parent.localeObj.getConstant("currency")?"C":"P",e+=r.value):e=this.customText.value},e.prototype.removeDialog=function(){this.dialog&&!this.dialog.isDestroyed&&this.dialog.destroy(),document.getElementById(this.parent.element.id+"_FormatDialog")&&i.i(n.remove)(document.getElementById(this.parent.element.id+"_FormatDialog"))},e.prototype.updateFormatting=function(){var e=this,t=this.formattedText(),r=this.getIndexValue();this.newFormat.splice(r,1);for(var a=i.i(n.extend)([],this.newFormat,!0),d=this.parent.dataSourceSettings.formatSettings,p=0;p<d.length;p++)this.insertFormat(d[p].name,d[p].format,d[p].type);var u=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_FormatValueDrop",this.parent.element),s.DropDownList);if(u.value===this.parent.localeObj.getConstant("AllValues"))for(var p=0;p<this.parent.dataSourceSettings.values.length;p++)this.insertFormat(this.parent.dataSourceSettings.values[p].name,t);else this.insertFormat(u.value.toString(),t);var h={formatSettings:l.a.cloneFormatSettings(this.newFormat),formatName:u.value.toString(),cancel:!1};this.parent.trigger(o._9,h,function(t){if(t.cancel)e.dialog.close(),e.parent.setProperties({dataSourceSettings:{formatSettings:a}},!0);else{e.parent.setProperties({dataSourceSettings:{formatSettings:t.formatSettings}},!0);var i={numberFormattingInfo:e.parent.dataSourceSettings.formatSettings};e.parent.actionObj.actionInfo=i;try{e.parent.updateDataSource(),e.dialog.close()}catch(t){e.parent.setProperties({dataSourceSettings:{formatSettings:a}},!0),e.parent.pivotCommon.errorDialog.createErrorDialog(e.parent.localeObj.getConstant("error"),e.parent.localeObj.getConstant("invalidFormat"),e.dialog.element),e.parent.hideWaitingPopup()}}})},e.prototype.insertFormat=function(e,t,r){for(var a=!1,o=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_GroupingDrop",this.parent.element),s.DropDownList),l={name:e,format:t,useGrouping:o.value===this.parent.localeObj.getConstant("true"),type:r},d=this.newFormat,p=0;p<d.length;p++)d[p].name===e&&(d[p]=l,a=!0);a||d.push(l),this.lastFormattedValue=[],this.lastFormattedValue.push(l)},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(o._32,this.showNumberFormattingDialog,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(o._32,this.showNumberFormattingDialog)},e.prototype.destroy=function(){this.dialog&&!this.dialog.isDestroyed&&this.dialog.destroy(),this.removeEventListener()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var r=i(0),n=(i.n(r),i(2)),a=i(4),o=(i.n(a),i(10)),s=(i.n(o),i(7)),l=(i.n(s),i(3)),d=i(15),p=i(11),u=(i.n(p),i(43)),h=(i.n(u),i(1)),c=function(){function e(e){this.dateGroup=/_date_group_years|_date_group_quarters|_date_group_quarterYear|_date_group_months|_date_group_days|_date_group_hours|_date_group_minutes|_date_group_seconds/g,this.parent=e,this.parent.groupingModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"grouping"},e.prototype.render=function(e){var t=e.target,i=e.option,r=e.parentElement,n=[];this.parentElement=r,this.isUpdate=!1;var a=Number(t.getAttribute("data-colindex")),o=Number(t.getAttribute("index")),s=this.parent.engineModule.pivotValues[o][a],l=s.valueSort.axis.toString();n=this.getSelectedCells(s.axis,l,s.actualText.toString()),n.push({axis:s.axis,fieldName:l,name:s.actualText.toString(),cellInfo:s}),-1!==i.replace(r.id,"").indexOf("_custom_group")?this.createGroupSettings(l,n):this.updateUnGroupSettings(l,n)},e.prototype.getSelectedOptions=function(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];-1===l.a.inArray(n.name,t)&&t.push(n.name)}return t},e.prototype.createGroupSettings=function(e,t){var i=this.parent.engineModule.fieldList[e],r=this.getGroupSettings(e);if(t.length>0){var n=void 0,a=!1;if(i.isCustomField)if(r)r&&"Custom"===r.type?1===t.length?a=!0:(a=!1,n="custom"):r&&"Number"===r.type&&(a=!1,n="number");else{var o=this.getGroupSettings(e.replace(this.dateGroup,"")),s=this.getGroupSettings(e.replace(/_custom_group/g,""));o?(a=!1,n="date",e=e.replace(this.dateGroup,"")):s&&(a=1===t.length,n="custom")}else r?"Number"===r.type||"Date"===r.type?(a=!1,n="Date"===r.type?"date":"number"):"Custom"===r.type&&(a=1===t.length,n="custom"):"number"===i.type||-1!==["datetime","date"].indexOf(i.type)||this.isDateType(e)?(a=!1,n=1===t.length?-1!==["datetime","date"].indexOf(i.type)||this.isDateType(e)?"date":"number":"custom"):"string"===i.type&&(a=1===t.length,n="custom");a?(this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("warning"),this.parent.localeObj.getConstant("invalidSelection")),this.parent.grid.clearSelection()):n&&""!==n&&this.createGroupDialog(e,n,t)}},e.prototype.updateUnGroupSettings=function(e,t){var i=this.parent.engineModule.fieldList[e],r=l.a.cloneGroupSettings(this.parent.dataSourceSettings.groupSettings),n=this.getGroupSettings(e);if(t.length>0){var a=void 0;if(i.isCustomField)if(n)"Custom"===n.type&&(a="custom");else{var o=this.getGroupSettings(e.replace(this.dateGroup,"")),s=this.getGroupSettings(e.replace(/_custom_group/g,""));o?(a="date",e=e.replace(this.dateGroup,"")):s&&(a="custom")}else n&&("Number"!==n.type&&"Date"!==n.type||(a="Date"===n.type?"date":"number"));if("date"===a||"number"===a)r=this.validateSettings(e,r,a,[]);else if("custom"===a){var d=this.getSelectedOptions(t);r=this.validateSettings(e,r,a,d)}this.updateDateSource(r,a)}},e.prototype.updateDateSource=function(e,t){this.isUpdate&&(this.parent.setProperties({dataSourceSettings:{groupSettings:e}},!0),this.parent.updateGroupingReport(e,"date"===t?"Date":"custom"===t?"Custom":"Number"),"Server"===this.parent.dataSourceSettings.mode?this.parent.getEngine("onRefresh"):this.parent.initEngine())},e.prototype.removeGroupSettings=function(e,t,i,r){var n=r.indexOf(e);if(-1!==n)for(var a=i[n],o=0,s=a.customGroups.length;o<s;o++)if(a.customGroups[o]){var d=a.customGroups[o];-1!==l.a.inArray(d.groupName,t)&&(i=this.modifyParentGroupItems(e,i,[d.groupName],d.items,r),a.customGroups.splice(o,1),this.isUpdate=!0,o--,s--)}return delete this.parent.engineModule.groupingFieldsInfo[e],i},e.prototype.getGroupSettings=function(e){for(var t=0,i=this.parent.dataSourceSettings.groupSettings;t<i.length;t++){var r=i[t];if(r.name===e)return r}},e.prototype.isDateType=function(e){for(var t=0,i=this.parent.dataSourceSettings.formatSettings;t<i.length;t++){var r=i[t];if(r.name===e&&r.type)return!0}return!1},e.prototype.getSelectedCells=function(e,t,i){for(var r=[],a=this.parent.element.querySelectorAll("."+n.b+",."+n.c),o=0,s=a;o<s.length;o++){var l=s[o],d=Number(l.getAttribute("data-colindex")),p=Number(l.getAttribute("index")),u=this.parent.engineModule.pivotValues[p][d];u&&u.axis===e&&"grand sum"!==u.type&&"sum"!==u.type&&u.valueSort.axis===t&&i!==u.actualText.toString()&&r.push({axis:u.axis,fieldName:u.valueSort.axis.toString(),name:u.actualText.toString(),cellInfo:u})}return r},e.prototype.createGroupDialog=function(e,t,o){var s=this,l=i.i(r.createElement)("div",{id:this.parentElement.id+"_GroupDialog",className:"e-group-field-settings",attrs:{"data-field":e,"data-type":t}});this.parentElement.appendChild(l);var d=new a.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("grouping"),content:this.createGroupOptions(e,t),isModal:!0,visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:300,height:"auto",position:{X:"center",Y:"center"},buttons:[{click:this.updateGroupSettings.bind(this,o),buttonModel:{cssClass:n.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){d.hide()},buttonModel:{cssClass:n.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],overlayClick:function(){s.removeDialog()},closeOnEscape:!0,close:this.removeDialog.bind(this),target:this.parentElement,cssClass:this.parent.cssClass});d.isStringTemplate=!0,d.appendTo(l)},e.prototype.createGroupOptions=function(e,t){var d=this,h=this,c=i.i(r.createElement)("div",{className:"e-group-field-div-content",id:this.parentElement.id+"_group_field_div_content",attrs:{"data-fieldName":e,"data-type":t}}),g=i.i(r.createElement)("div",{className:"e-group-option-container"});c.appendChild(g);var m=this.parent.dataSourceSettings,f=l.a.getFieldByName(e,m.groupSettings);switch(t){case"custom":var v=void 0,S=m.rows;S=S.concat(m.columns,m.values,m.filters);var y=l.a.getFieldByName(e.replace(/_custom_group/g,""),S),b=l.a.getFieldByName(e,S),C=l.a.getFieldByName(e+"_custom_group",S);if(b){var x=e+"_custom_group";v=C?C.caption:this.parent.engineModule.fieldList[y.name].caption+(x.match(/_custom_group/g).length+1)}var w=i.i(r.createElement)("div",{className:"e-caption-option-text"});w.innerText=this.parent.localeObj.getConstant("groupFieldCaption");var T=i.i(r.createElement)("div",{className:"e-group-caption-container"}),M=i.i(r.createElement)("input",{id:this.parentElement.id+"group_caption_option",className:"e-group-caption-text",attrs:{type:"text"}});T.appendChild(w),T.appendChild(M),g.appendChild(T);var _=i.i(r.createElement)("div",{className:"e-input-option-text"});_.innerText=this.parent.localeObj.getConstant("groupTitle");var D=i.i(r.createElement)("div",{className:"e-group-input-container"}),O=i.i(r.createElement)("input",{id:this.parentElement.id+"group_input_option",className:"e-group-input-text",attrs:{type:"text"}});D.appendChild(_),D.appendChild(O),g.appendChild(D);var P=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("captionName"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,value:v,width:"100%",cssClass:this.parent.cssClass});P.isStringTemplate=!0,P.appendTo(M);var N=new o.MaskedTextBox({placeholder:this.parent.localeObj.getConstant("groupName"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,width:"100%",cssClass:this.parent.cssClass});N.isStringTemplate=!0,N.appendTo(O);break;case"date":case"number":var E=i.i(r.createElement)("div",{className:"e-group-start-option-container"}),I=i.i(r.createElement)("input",{id:this.parentElement.id+"group_start_option",className:"e-group_start_option",attrs:{type:"checkbox"}}),F=i.i(r.createElement)("input",{id:this.parentElement.id+"group_start_input",className:"e-group_start_input",attrs:{type:"text"}});E.appendChild(I),E.appendChild(F),g.appendChild(E);var L=i.i(r.createElement)("div",{className:"e-group-end-option-container"}),A=i.i(r.createElement)("input",{id:this.parentElement.id+"group_end_option",className:"e-group_end_option",attrs:{type:"checkbox"}}),R=i.i(r.createElement)("input",{id:this.parentElement.id+"group_end_input",className:"e-group_end_input",attrs:{type:"text"}});L.appendChild(A),L.appendChild(R),g.appendChild(L);var k=i.i(r.createElement)("div",{className:"e-group-interval-option-container"}),j=i.i(r.createElement)("div",{className:"e-group-inerval-option-text"});j.innerText=this.parent.localeObj.getConstant("groupBy");var H=i.i(r.createElement)("input",{id:this.parentElement.id+"group_interval_input",className:"e-group_interval_input",attrs:{type:"text"}});k.appendChild(j),k.appendChild(H),g.appendChild(k);var q=void 0,V=void 0;if("date"===t){var B=[],U=[{value:"Seconds",text:this.parent.localeObj.getConstant("Seconds")},{value:"Minutes",text:this.parent.localeObj.getConstant("Minutes")},{value:"Hours",text:this.parent.localeObj.getConstant("Hours")},{value:"Days",text:this.parent.localeObj.getConstant("Days")},{value:"Months",text:this.parent.localeObj.getConstant("Months")},{value:"QuarterYear",text:this.parent.localeObj.getConstant("QuarterYear")},{value:"Quarters",text:this.parent.localeObj.getConstant("Quarters")},{value:"Years",text:this.parent.localeObj.getConstant("Years")}];f&&"Date"===f.type?(B=f.groupInterval,q=f.startingAt?f.startingAt.toString():void 0,V=f.endingAt?f.endingAt.toString():void 0):B=["Months"];var G=new u.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,format:"dd/MM/yyyy hh:mm:ss a",enabled:!(void 0===q),width:"100%",cssClass:this.parent.cssClass});G.isStringTemplate=!0,G.appendTo(F);var z=new u.DateTimePicker({placeholder:this.parent.localeObj.getConstant("chooseDate"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,format:"dd/MM/yyyy hh:mm:ss a",enabled:!(void 0===V),width:"100%",cssClass:this.parent.cssClass});z.isStringTemplate=!0,z.appendTo(R),s.MultiSelect.Inject(s.CheckBoxSelection);var W=new s.MultiSelect({dataSource:U,value:B,fields:{text:"text",value:"value"},mode:"CheckBox",showDropDownIcon:!0,enableSelectionOrder:!1,placeholder:this.parent.localeObj.getConstant("selectGroup"),filterBarPlaceholder:this.parent.localeObj.getConstant("example")+" "+this.parent.localeObj.getConstant("Months"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,select:function(){i.i(r.getInstance)(i.i(r.select)("#"+h.parentElement.id+"_GroupDialog",document),a.Dialog).element.querySelector("."+n.d).removeAttribute("disabled")},removed:function(){0===W.checkBoxSelectionModule.activeLi.length&&i.i(r.getInstance)(i.i(r.select)("#"+h.parentElement.id+"_GroupDialog",document),a.Dialog).element.querySelector("."+n.d).setAttribute("disabled","disabled")}});W.isStringTemplate=!0,W.appendTo(H),G.value=void 0===q?null:new Date(q),G.dataBind(),z.value=void 0===V?null:new Date(V),z.dataBind()}else{var Q=void 0;f&&"Number"===f.type?(Q=f.rangeInterval,q=f.startingAt?f.startingAt.toString():void 0,V=f.endingAt?f.endingAt.toString():void 0):Q=2;var G=new o.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showClearButton:!0,format:"###",value:void 0===q?void 0:parseInt(q,10),enabled:!(void 0===q),width:"100%",cssClass:this.parent.cssClass});G.isStringTemplate=!0,G.appendTo(F);var z=new o.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showClearButton:!0,format:"###",value:void 0===V?void 0:parseInt(V,10),enabled:!(void 0===V),width:"100%",cssClass:this.parent.cssClass});z.isStringTemplate=!0,z.appendTo(R);var Y=new o.NumericTextBox({placeholder:this.parent.localeObj.getConstant("enterValue"),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showClearButton:!0,format:"###",min:1,value:Q,width:"100%",cssClass:this.parent.cssClass});Y.isStringTemplate=!0,Y.appendTo(H)}var K=new p.CheckBox({label:this.parent.localeObj.getConstant("startAt"),checked:!(void 0===q),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,change:function(e){var n="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+d.parentElement.id+"group_start_input"),u.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+d.parentElement.id+"group_start_input"),o.NumericTextBox);n.enabled=e.checked,n.dataBind()}});K.isStringTemplate=!0,K.appendTo(I);var X=new p.CheckBox({label:this.parent.localeObj.getConstant("endAt"),checked:!(void 0===V),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass,change:function(e){var n="date"===t?i.i(r.getInstance)(i.i(r.select)("#"+d.parentElement.id+"group_end_input"),u.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+d.parentElement.id+"group_end_input"),o.NumericTextBox);n.enabled=e.checked,n.dataBind()}});X.isStringTemplate=!0,X.appendTo(A)}return c},e.prototype.updateGroupSettings=function(e){var t=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"_GroupDialog",document),a.Dialog),h=t.element,c=h.getAttribute("data-type"),g=h.getAttribute("data-field"),m=l.a.cloneGroupSettings(this.parent.dataSourceSettings.groupSettings);if(0===m.length&&!this.parent.clonedDataSet&&!this.parent.clonedReport){var f=this.parent.engineModule.data;this.parent.clonedDataSet=l.a.getClonedData(f),this.parent.setProperties({dataSourceSettings:{dataSource:[]}},!0),this.parent.clonedReport=i.i(r.extend)({},this.parent.dataSourceSettings,null,!0),this.parent.setProperties({dataSourceSettings:{dataSource:f}},!0)}if("custom"===c){var v=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_input_option"),o.MaskedTextBox),S=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_caption_option"),o.MaskedTextBox);if(i.i(r.removeClass)([v.element],n.f),null===v.value||""===v.value)return i.i(r.addClass)([v.element],n.f),void v.element.focus();for(var y=this.getSelectedOptions(e),b={groupName:v.value,items:y},C=[],x=[],w={name:g,caption:S.value,type:"Custom",customGroups:[]},T=!1,M=0,_=m.length;M<_;M++)if(m[M].name===g){w=m[M],w.caption=S.value;for(var D=0,O=w.customGroups.length;D<O;D++)if(w.customGroups[D]){var P=w.customGroups[D];P.items&&d.a.isContainCommonElements(P.items,y)&&(C=this.mergeArray(C,[P.groupName]),x=this.mergeArray(x,P.items),w.customGroups.splice(D,1),D--,O--)}for(var N=0,E=y;N<E.length;N++){var I=E[N],F=x.indexOf(I);-1!==F&&x.splice(F,1)}x=this.mergeArray(x,[b.groupName]),w.customGroups.push(b),this.isUpdate=!0,T=!0;break}T||(w.customGroups.push(b),this.isUpdate=!0,m.push(w)),m=this.validateSettings(g,m,c,0===C.length?b.items:C,x)}else if("date"===c||"number"===c){var L=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_start_option"),p.CheckBox),A=i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_end_option"),p.CheckBox),R="date"===c?i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_start_input"),u.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_start_input"),o.NumericTextBox),k="date"===c?i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_end_input"),u.DateTimePicker):i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_end_input"),o.NumericTextBox),j="date"===c?i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_interval_input"),s.MultiSelect):i.i(r.getInstance)(i.i(r.select)("#"+this.parentElement.id+"group_interval_input"),o.NumericTextBox),H=L.checked?R.value.toString():void 0,q=A.checked?k.value.toString():void 0,w={name:g,startingAt:H,endingAt:q};if("date"===c){for(var V=[],B=0,U=j.value;B<U.length;B++){var G=U[B];V.push(G)}w.type="Date",w.groupInterval=V}else w.type="Number",w.rangeInterval=j.value;for(var T=!1,M=0,_=m.length;M<_;M++)if(m[M].name===g){m.splice(M,1,w),this.isUpdate=!0,T=!0;break}T||(this.isUpdate=!0,m.push(w)),m=this.validateSettings(g,m,c,[],[])}t.close(),this.updateDateSource(m,c)},e.prototype.getGroupBasedSettings=function(e){for(var t={},i=0,r=e;i<r.length;i++){var n=r[i];t[n.type]?t[n.type].push(n):t[n.type]=[n]}return t},e.prototype.getGroupByName=function(e){for(var t={},i=0,r=e;i<r.length;i++){var n=r[i],a=n.name.replace(/_custom_group/g,"");t[a]?t[a].push(n):t[a]=[n]}return t},e.prototype.validateSettings=function(e,t,i,r,n){var a=[],o=this.getGroupBasedSettings(t),s=["Date","Number","Custom"];if(o[s[2]]&&"custom"===i){var l=this.getGroupByName(o[s[2]]);if(l[e.replace(/_custom_group/g,"")]){var d=l[e.replace(/_custom_group/g,"")],p=d.map(function(e){return e.name});d=n?this.modifyParentGroupItems(e,d,r,n,p):this.removeGroupSettings(e.replace("_custom_group",""),r,d,p)}for(var u=[],h=0,c=Object.keys(l);h<c.length;h++){var g=c[h],p=l[g].map(function(e){return e.name});u=this.reOrderSettings(l[g],p,u,g)}o[s[2]]=u}else if(("date"===i||"number"===i)&&!n){var m="date"===i?o[s[0]]:o[s[1]];"date"===i?(o[s[0]]=m.filter(function(t){return t.name!==e}),0===o[s[0]].length&&delete this.parent.engineModule.groupingFieldsInfo[e]):o[s[1]]=m.filter(function(t){return t.name!==e}),this.isUpdate=!0}for(var f=0,v=s;f<v.length;f++){var S=v[f];o[S]&&(a=a.concat(o[S]))}return a},e.prototype.reOrderSettings=function(e,t,i,r){var n=t.indexOf(r);return n>-1&&e[n].customGroups&&e[n].customGroups.length>0&&(i.push(e[n]),this.reOrderSettings(e,t,i,r+"_custom_group")),i},e.prototype.modifyParentGroupItems=function(e,t,i,r,n){var a=n.indexOf(e+"_custom_group");if(-1!==a){var o=t[a];if(o.customGroups&&o.customGroups.length>0)for(var s=0,l=o.customGroups.length;s<l;s++)if(o.customGroups[s]){var d=!1,p=o.customGroups[s];if(p.items){for(var u=0,h=i;u<h.length;u++){var c=h[u],g=p.items.indexOf(c);-1!==g&&(p.items.splice(g,1),this.isUpdate=!0,d=!0)}d&&(p.items=this.mergeArray(p.items,r))}}}return t},e.prototype.mergeArray=function(e,t){for(var i=[],r=e.concat(t),n=r.length,a={};n--;){var o=String(r[n]);a[o]||(i.unshift(o),a[o]=!0)}return i},e.prototype.removeDialog=function(){if(!this.parent.grid||!this.parent.grid.isDestroyed){this.parent.grid.clearSelection();var e=i.i(r.select)("#"+this.parent.element.id+"_GroupDialog",document),t=e?i.i(r.getInstance)(e,a.Dialog):null;t&&!t.isDestroyed&&t.destroy(),this.parent.element&&document.getElementById(this.parent.element.id+"_GroupDialog")&&i.i(r.remove)(document.getElementById(this.parent.element.id+"_GroupDialog"))}},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(h._33,this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.removeDialog(),this.parent.off(h._33,this.render))},e.prototype.destroy=function(){this.removeEventListener()},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return h});var r=i(5),n=(i.n(r),i(0)),a=(i.n(n),i(1)),o=i(4),s=(i.n(o),i(7)),l=(i.n(s),i(2)),d=i(41),p=i(9),u=(i.n(p),i(11)),h=(i.n(u),function(){function e(e){this.isMultiAxisChange=!1,this.isReportChange=!1,this.currentReport="",this.parent=e,this.parent.toolbarModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"toolbar"},e.prototype.createToolbar=function(){this.parent.isModified=!1,this.renderDialog(),null!==i.i(n.select)("#"+this.parent.element.id+"pivot-toolbar",this.parent.element)&&i.i(n.remove)(i.i(n.select)("#"+this.parent.element.id+"pivot-toolbar",this.parent.element));var e=i.i(n.createElement)("div",{id:this.parent.element.id+"pivot-toolbar",className:l.v});this.parent.showFieldList&&i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)?this.parent.element.insertBefore(e,i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)):this.parent.showGroupingBar&&i.i(n.select)("#"+this.parent.element.id+" .e-pivot-grouping-bar",this.parent.element)?this.parent.element.insertBefore(e,i.i(n.select)("#"+this.parent.element.id+" .e-pivot-grouping-bar",this.parent.element)):this.parent.element.insertBefore(e,i.i(n.select)("#"+this.parent.element.id+"_grid",this.parent.element)),this.toolbar=new r.Toolbar({created:this.create.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,items:this.getItems(),allowKeyboard:!1,cssClass:this.parent.cssClass,width:this.parent.gridSettings.allowAutoResizing?"auto":this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2}),this.toolbar.isStringTemplate=!0;var t="viewContainerRef";this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.parent.toolbarTemplate&&"string"==typeof this.parent.toolbarTemplate?(this.toolbar.appendTo(this.parent.toolbarTemplate),this.parent.element.replaceChild(this.toolbar.element,this.parent.element.querySelector("."+l.v)),this.toolbar.element.classList.add(l.v)):this.toolbar.appendTo("#"+this.parent.element.id+"pivot-toolbar"),this.toolbar.width=this.parent.grid?this.parent.getGridWidthAsNumber()-2:this.parent.getWidthAsNumber()-2,this.parent.chart&&this.parent.chart.setProperties({width:this.parent.grid?this.parent.getGridWidthAsNumber().toString():this.parent.getWidthAsNumber().toString()},!0),this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector("."+l.w)&&this.parent.groupingBarModule.refreshUI()},e.prototype.fetchReports=function(){var e={reportName:[]};return this.parent.trigger(a.I,e),e},e.prototype.fetchReportsArgs=function(){var e=new p.Deferred,t={reportName:[]};return this.parent.trigger(a.I,t,function(t){e.resolve(t)}),e},e.prototype.getItems=function(){for(var e=this.parent.toolbar.filter(function(e,t,i){return i.indexOf(e)===t}),t=[],r=0,o=e;r<o.length;r++){var s=o[r];switch(s){case"New":t.push({prefixIcon:l.x+" "+l.a,tooltipText:this.parent.localeObj.getConstant("new"),click:this.actionClick.bind(this),id:this.parent.element.id+"new"});break;case"Save":t.push({prefixIcon:l.y+" "+l.a,tooltipText:this.parent.localeObj.getConstant("save"),click:this.actionClick.bind(this),id:this.parent.element.id+"save"});break;case"SaveAs":t.push({prefixIcon:l.z+" "+l.a,tooltipText:this.parent.localeObj.getConstant("saveAs"),click:this.actionClick.bind(this),id:this.parent.element.id+"saveas"});break;case"Rename":t.push({prefixIcon:l.A+" "+l.a,tooltipText:this.parent.localeObj.getConstant("rename"),click:this.actionClick.bind(this),id:this.parent.element.id+"rename"});break;case"Remove":t.push({prefixIcon:l.B+" "+l.a,tooltipText:this.parent.localeObj.getConstant("deleteReport"),click:this.actionClick.bind(this),id:this.parent.element.id+"remove"});break;case"Load":t.push({template:"<div><input class="+l.C+" id="+this.parent.element.id+"_reportlist></input></div>",click:this.actionClick.bind(this),id:this.parent.element.id+"load"});break;case"Grid":var d="Chart"===this.parent.displayOption.view;t.push({prefixIcon:l.D+" "+l.a,tooltipText:this.parent.localeObj.getConstant("grid"),id:this.parent.element.id+"grid",cssClass:(d?l.E:"")+(this.parent.cssClass?" "+this.parent.cssClass:""),click:this.menuItemClick.bind(this)});break;case"Chart":var p="Table"===this.parent.displayOption.view;t.push({template:'<ul id="'+this.parent.element.id+'chart_menu"></ul>',id:this.parent.element.id+"chartmenu",cssClass:(p?l.E:"")+(this.parent.cssClass?" "+this.parent.cssClass:"")});break;case"MDX":"olap"===this.parent.dataType&&t.push({prefixIcon:l.F+" "+l.a,id:this.parent.element.id+"mdxQuery",click:this.actionClick.bind(this),tooltipText:this.parent.localeObj.getConstant("mdxQuery")});break;case"Export":t.push({template:'<ul id="'+this.parent.element.id+'export_menu"></ul>',id:this.parent.element.id+"exportmenu"});break;case"SubTotal":t.push({template:'<ul id="'+this.parent.element.id+'subtotal_menu"></ul>',id:this.parent.element.id+"subtotalmenu"});break;case"GrandTotal":t.push({template:'<ul id="'+this.parent.element.id+'grandtotal_menu"></ul>',id:this.parent.element.id+"grandtotalmenu"});break;case"ConditionalFormatting":t.push({prefixIcon:l.G+" "+l.a,id:this.parent.element.id+"formatting",click:this.actionClick.bind(this),tooltipText:this.parent.localeObj.getConstant("toolbarFormatting")});break;case"NumberFormatting":t.push({prefixIcon:l.H+" "+l.a,id:this.parent.element.id+"numberFormatting",click:this.actionClick.bind(this),tooltipText:this.parent.localeObj.getConstant("numberFormat")});break;case"Formatting":t.push({template:'<ul id="'+this.parent.element.id+'formatting_menu"></ul>',id:this.parent.element.id+"formattingmenu"});break;case"FieldList":t.push({prefixIcon:l.I+" "+l.a,tooltipText:this.parent.localeObj.getConstant("fieldList"),click:this.actionClick.bind(this),align:"Right",id:this.parent.element.id+"fieldlist"}),this.parent.element.querySelector(".e-toggle-field-list")&&(this.parent.element.querySelector(".e-toggle-field-list").style.display="none");break;default:"object"==typeof s&&t.push(s)}}this.parent.showFieldList&&-1===e.indexOf("FieldList")&&i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)&&"none"===i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element).style.display&&(i.i(n.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element).style.display="block");var u={customToolbar:t};return this.parent.trigger(a.N,u),t},e.prototype.reportChange=function(e){if(this.parent.actionObj.actionName=a._67,this.isReportChange=!0,this.parent.actionBeginMethod())return void(e.cancel=!0);try{this.dropArgs=e,this.parent.isModified&&""!==this.currentReport?this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("newReportConfirm")):this.reportLoad(e)}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.reportLoad=function(e){var t=this;if("Save"!==this.action&&"Rename"!==this.action&&"New"!==this.action){var i={reportName:e.itemData.value},r={reportName:e.itemData.value};this.parent.actionObj.actionInfo=r,this.parent.trigger(a.J,i,function(e){t.currentReport=e.reportName,t.parent.isModified=!1})}},e.prototype.saveReport=function(e){if(this.currentReport&&""!==this.currentReport&&e.item.id===this.parent.element.id+"save"){var t={report:this.getCurrentReport(),reportName:this.currentReport};this.parent.actionObj.actionName=this.parent.getActionCompleteName();var i={reportName:this.currentReport};this.parent.actionObj.actionInfo=i,this.parent.trigger(a.H,t),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.parent.isModified=!1}else{if(""===this.currentReport&&(e.item.id===this.parent.element.id+"save"||e.item.id===this.parent.element.id+"saveas"))return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("emptyReport"));this.dialogShow(e,"saveAs")}},e.prototype.mdxQueryDialog=function(){i.i(n.select)("#"+this.parent.element.id+"mdx-dialog",document)||this.renderMDXDialog();var e=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"mdx-dialog",document),o.Dialog),t=i.i(n.createElement)("div",{className:l.J}),r=i.i(n.createElement)("textarea",{className:l.K,attrs:{readonly:"readonly","aria-label":this.parent.localeObj.getConstant("mdxQuery")}});r.innerText=this.parent.olapEngineModule.getMDXQuery(this.parent.dataSourceSettings).trim(),t.appendChild(r),e.content=t,e.show()},e.prototype.dialogShow=function(e,t){if(e){var r=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"report-dialog",document),o.Dialog);r.header=e.item.tooltipText;var a=i.i(n.createElement)("div",{className:l.L}),s=i.i(n.createElement)("div",{className:l.M});s.innerText=this.parent.localeObj.getConstant("reportName");var d=i.i(n.createElement)("input",{className:l.N+" "+l.p,attrs:{placeholder:this.parent.localeObj.getConstant("emptyReportName"),value:t&&"rename"===t?this.currentReport:""}});d.innerText=t&&"rename"===t?this.currentReport:"",d.setSelectionRange(d.textContent.length,d.textContent.length),a.appendChild(s),a.appendChild(d),r.content=a,r.refresh(),r.show()}},e.prototype.renameReport=function(e){if(this.parent.trigger(a.O,e),!this.currentReport||""===this.currentReport)return void this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("emptyReport"));this.dialogShow(e,"rename")},e.prototype.actionClick=function(e){var t=e.item.id===this.parent.element.id+"new"?a._37:e.item.id===this.parent.element.id+"save"?a._38:e.item.id===this.parent.element.id+"saveas"?a._39:e.item.id===this.parent.element.id+"rename"?a._40:e.item.id===this.parent.element.id+"remove"?a._41:e.item.id===this.parent.element.id+"load"?a._42:e.item.id===this.parent.element.id+"formatting"?a._43:e.item.id===this.parent.element.id+"numberFormatting"?a._44:e.item.id===this.parent.element.id+"mdxQuery"?a._45:e.item.id===this.parent.element.id+"fieldlist"?a._46:"";if(this.parent.actionObj.actionName=t,!this.parent.actionBeginMethod())try{switch(e.item.id){case this.parent.element.id+"save":case this.parent.element.id+"saveas":this.saveReport(e);break;case this.parent.element.id+"remove":return this.action="Remove",void(this.currentReport&&""!==this.currentReport?this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("removeConfirm")):this.parent.pivotCommon.errorDialog.createErrorDialog(this.parent.localeObj.getConstant("error"),this.parent.localeObj.getConstant("emptyReport")));case this.parent.element.id+"rename":this.renameReport(e);break;case this.parent.element.id+"new":this.action="New",this.newArgs=e,this.parent.isModified&&this.currentReport&&""!==this.currentReport?this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("newReportConfirm")):this.createNewReport(e);break;case this.parent.element.id+"load":this.action="Load";break;case this.parent.element.id+"fieldlist":this.parent.pivotFieldListModule&&this.parent.pivotFieldListModule.dialogRenderer&&this.parent.pivotFieldListModule.dialogRenderer.onShowFieldList();break;case this.parent.element.id+"formatting":this.parent.conditionalFormattingModule&&this.parent.conditionalFormattingModule.showConditionalFormattingDialog();break;case this.parent.element.id+"mdxQuery":this.mdxQueryDialog();break;case this.parent.element.id+"numberFormatting":this.parent.numberFormattingModule&&this.parent.numberFormattingModule.showNumberFormattingDialog()}}catch(e){this.parent.actionFailureMethod(e)}},e.prototype.renderDialog=function(){null!==i.i(n.select)("#"+this.parent.element.id+"report-dialog",this.parent.element)&&i.i(n.remove)(i.i(n.select)("#"+this.parent.element.id+"report-dialog",this.parent.element)),this.parent.element.appendChild(i.i(n.createElement)("div",{id:this.parent.element.id+"report-dialog",className:l.O}));var e=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,position:{X:"center",Y:"center"},buttons:[{click:this.okBtnClick.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:this.cancelBtnClick.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel")}}],isModal:!0,visible:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",zIndex:1000001,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass});e.isStringTemplate=!0,e.appendTo("#"+this.parent.element.id+"report-dialog")},e.prototype.renderMDXDialog=function(){null!==i.i(n.select)("#"+this.parent.element.id+"mdx-dialog",this.parent.element)&&i.i(n.remove)(i.i(n.select)("#"+this.parent.element.id+"mdx-dialog",this.parent.element)),this.parent.element.appendChild(i.i(n.createElement)("div",{id:this.parent.element.id+"mdx-dialog",className:l.P}));var e=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,position:{X:"center",Y:"center"},buttons:[{click:this.copyMDXQuery.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("copy"),isPrimary:!0}}],header:this.parent.localeObj.getConstant("mdxQuery"),isModal:!0,visible:!1,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",zIndex:1000001,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass});e.isStringTemplate=!0,e.appendTo("#"+this.parent.element.id+"mdx-dialog")},e.prototype.copyMDXQuery=function(){var e=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"mdx-dialog",document),o.Dialog),t=e.element.querySelector("."+l.K);try{t.select(),document.execCommand("copy")}catch(e){window.alert("Oops, unable to copy")}},e.prototype.okBtnClick=function(){var e=this,t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"report-dialog",document),o.Dialog),r=t.element.querySelector("."+l.N);if(r&&""===r.value)return void r.focus();if(this.parent.localeObj||(this.parent=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id,document),d.a)),t.header!==this.parent.localeObj.getConstant("save")&&t.header!==this.parent.localeObj.getConstant("saveAs")||!r.value||""===r.value){if(t.header===this.parent.localeObj.getConstant("new")&&r.value&&""!==r.value){this.action="New",this.currentReport=r.value;var p=!1,u=this,h={reportName:[]};this.parent.trigger(a.I,h,function(t){for(var s=0;s<t.reportName.length;s++)if(r.value===h.reportName[s]){p=!0;break}if(p)return void u.createConfirmDialog(u.parent.localeObj.getConstant("alert"),u.parent.localeObj.getConstant("replaceConfirmBefore")+'"'+r.value+'"'+u.parent.localeObj.getConstant("replaceConfirmAfter"));u.parent.trigger(a.M);var l={report:u.getCurrentReport(),reportName:r.value},d={reportName:r.value};e.parent.actionObj.actionInfo=d,u.parent.trigger(a.H,l),u.parent.isModified=!1,u.updateReportList(),i.i(n.getInstance)(i.i(n.select)("#"+e.parent.element.id+"report-dialog",document),o.Dialog).hide()})}else if(t.header===this.parent.localeObj.getConstant("rename")&&r.value&&""!==r.value){if(this.currentReport===r.value)return void t.hide();this.action="Rename";var c=!1;this.renameText=r.value;for(var g=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_reportlist",this.parent.element),s.DropDownList),m=0;m<g.dataSource.length;m++)if(r.value===g.dataSource[m]){c=!0;break}if(c)return void this.createConfirmDialog(this.parent.localeObj.getConstant("alert"),this.parent.localeObj.getConstant("replaceConfirmBefore")+'"'+r.value+'"'+this.parent.localeObj.getConstant("replaceConfirmAfter"));var f={reportName:this.currentReport,rename:r.value},v={reportName:{oldName:this.currentReport,newName:r.value}};this.parent.actionObj.actionInfo=v,this.parent.trigger(a.K,f),this.currentReport=r.value,this.updateReportList(),t.hide()}}else{this.action="Save",this.currentReport=r.value;var S=!1,y=this,b={reportName:[]};this.parent.trigger(a.I,b,function(t){for(var s=0;s<t.reportName.length;s++)if(r.value===t.reportName[s]){S=!0;break}if(S)return void y.createConfirmDialog(y.parent.localeObj.getConstant("alert"),y.parent.localeObj.getConstant("replaceConfirmBefore")+'"'+r.value+'"'+y.parent.localeObj.getConstant("replaceConfirmAfter"));var l={report:y.getCurrentReport(),reportName:r.value},d={reportName:r.value};e.parent.actionObj.actionInfo=d,y.parent.trigger(a.H,l),y.parent.isModified=!1,y.updateReportList(),i.i(n.getInstance)(i.i(n.select)("#"+e.parent.element.id+"report-dialog",document),o.Dialog).hide()})}this.parent.actionObj.actionName=this.parent.getActionCompleteName(),this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()},e.prototype.createNewReport=function(e){this.dialogShow(e)},e.prototype.cancelBtnClick=function(){i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"report-dialog",document),o.Dialog).hide()},e.prototype.createConfirmDialog=function(e,t){document.getElementById(this.parent.element.id+"_ConfirmDialog")&&i.i(n.remove)(document.getElementById(this.parent.element.id+"_ConfirmDialog").parentElement);var r=i.i(n.createElement)("div",{id:this.parent.element.id+"_ConfirmDialog",className:l.Q});this.parent.element.appendChild(r);var a=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,header:e,content:t,isModal:!0,visible:!0,closeOnEscape:!0,target:document.body,cssClass:this.parent.cssClass,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{buttonModel:{content:this.parent.localeObj.getConstant("yes"),isPrimary:!0,cssClass:l.d+(this.parent.cssClass?" "+this.parent.cssClass:"")},click:this.okButtonClick.bind(this)},{buttonModel:{content:this.parent.localeObj.getConstant("no"),cssClass:l.e+(this.parent.cssClass?" "+this.parent.cssClass:"")},click:this.cancelButtonClick.bind(this)}]});a.isStringTemplate=!0,a.appendTo(r),a.element.querySelector(".e-dlg-header").innerText=this.parent.enableHtmlSanitizer?n.SanitizeHtmlHelper.sanitize(e):e},e.prototype.okButtonClick=function(){var e=this,t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"report-dialog",document),o.Dialog);if("Remove"===this.action){var r={reportName:this.currentReport},s={reportName:this.currentReport};this.parent.actionObj.actionInfo=s,this.parent.trigger(a.L,r);var l=this.fetchReports();if(l.reportName&&l.reportName.length>0){var d={reportName:l.reportName[l.reportName.length-1]};this.parent.trigger(a.J,d,function(t){e.currentReport=t.reportName,e.parent.isModified=!1}),this.currentReport=l.reportName[l.reportName.length-1]}else this.currentReport="",this.parent.isModified=!1,this.action="";this.updateReportList(),this.parent.actionObj.actionName=a._93,this.parent.actionObj.actionName&&this.parent.actionCompleteMethod()}else if("New"===this.action||"Save"!==this.action&&"Rename"!==this.action&&"New"!==this.action){if(this.currentReport&&""!==this.currentReport&&this.parent.isModified){var p={report:this.getCurrentReport(),reportName:this.currentReport},s={reportName:this.currentReport};this.parent.actionObj.actionInfo=s,this.parent.actionObj.actionName=a._89,this.parent.actionObj.actionName&&this.parent.actionCompleteMethod(),this.parent.trigger(a.H,p),this.parent.isModified=!1,"New"===this.action?(this.parent.actionObj.actionName=a._37,this.createNewReport(this.newArgs)):(this.parent.actionObj.actionName=a._67,this.reportLoad(this.dropArgs))}else if("New"===this.action){this.parent.trigger(a.M);var p={report:this.getCurrentReport(),reportName:this.currentReport};this.parent.trigger(a.H,p),this.parent.isModified=!1,this.updateReportList(),t.hide()}}else if("Save"===this.action){var p={report:this.getCurrentReport(),reportName:this.currentReport};this.parent.trigger(a.H,p),this.parent.isModified=!1,this.updateReportList(),t.hide()}else if("Rename"===this.action){var u={reportName:this.currentReport,rename:this.renameText,isReportExists:!0};this.parent.trigger(a.K,u),this.currentReport=this.renameText,this.parent.isModified=!1,this.updateReportList(),t.hide()}i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_ConfirmDialog",document),o.Dialog).hide()},e.prototype.cancelButtonClick=function(){var e=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"report-dialog",document),o.Dialog);if("New"===this.action)this.parent.isModified?this.createNewReport(this.newArgs):e.hide();else if("Save"===this.action){var t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_reportlist",this.parent.element),s.DropDownList);this.currentReport=t.value,e.hide()}else"Rename"===this.action?e.hide():this.dropArgs&&"Remove"!==this.action&&this.reportLoad(this.dropArgs);i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_ConfirmDialog",document),o.Dialog).hide()},e.prototype.createChartMenu=function(){var e=this;if(i.i(n.select)("#"+this.parent.element.id+"chart_menu",this.parent.element)){for(var t=[],a=this.getValidChartType(),o=0;o<a.length&&o<7;o++){var s=a[o];t.push({text:this.parent.localeObj.getConstant(s.toLowerCase()),id:this.parent.element.id+"_"+s})}7===t.length&&(t.splice(6),t.push({text:this.parent.localeObj.getConstant("MoreOption"),id:this.parent.element.id+"_ChartMoreOption"}));var d=t.length<=0||"Table"===this.parent.displayOption.view;t.push({separator:!0}),t.push({text:this.parent.localeObj.getConstant("multipleAxes"),id:this.parent.element.id+"_multipleAxes"}),t.push({text:this.parent.localeObj.getConstant("showLegend"),id:this.parent.element.id+"_showLegend"});var p=[{iconCss:l.R+" "+l.a,items:d?[]:t}],u=i.i(n.select)("#"+this.parent.element.id+"chart_menu",this.parent.element)?i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"chart_menu",this.parent.element),r.Menu):null;u&&!u.isDestroyed&&(u.destroy(),u=null),u=new r.Menu({items:p,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.whitespaceRemove.bind(this),onClose:function(){e.focusToolBar()},beforeItemRender:this.multipleAxesCheckbox.bind(this)}),u.isStringTemplate=!0,u.appendTo("#"+this.parent.element.id+"chart_menu")}},e.prototype.create=function(){var e=this;if(i.i(n.select)("#"+this.parent.element.id+"chart_menu",this.parent.element)&&this.createChartMenu(),i.i(n.select)("#"+this.parent.element.id+"export_menu",this.parent.element)){var t=[{iconCss:l.T+" "+l.a,items:[{text:this.parent.localeObj.getConstant("pdf"),iconCss:l.U+" "+l.a,id:this.parent.element.id+"pdf"},{text:this.parent.localeObj.getConstant("excel"),iconCss:l.V+" "+l.a,id:this.parent.element.id+"excel"},{text:this.parent.localeObj.getConstant("csv"),iconCss:l.W+" "+l.a,id:this.parent.element.id+"csv"},{text:this.parent.localeObj.getConstant("png"),iconCss:l.X+" "+l.a,id:this.parent.element.id+"png"},{text:this.parent.localeObj.getConstant("jpeg"),iconCss:l.Y+" "+l.a,id:this.parent.element.id+"jpeg"},{text:this.parent.localeObj.getConstant("svg"),iconCss:l.Z+" "+l.a,id:this.parent.element.id+"svg"}]}],o=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.updateExportMenu.bind(this),onClose:function(){e.focusToolBar()}});o.isStringTemplate=!0,o.appendTo("#"+this.parent.element.id+"export_menu")}if(i.i(n.select)("#"+this.parent.element.id+"subtotal_menu",this.parent.element)){var t=[{iconCss:l._0+" "+l.a,items:[{text:this.parent.localeObj.getConstant("showSubTotals"),id:this.parent.element.id+"subtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("doNotShowSubTotals"),id:this.parent.element.id+"notsubtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showSubTotalsRowsOnly"),id:this.parent.element.id+"subtotalrow",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showSubTotalsColumnsOnly"),id:this.parent.element.id+"subtotalcolumn",iconCss:l._1+" "+l.a},{separator:!0},{text:this.parent.localeObj.getConstant("subTotalPosition"),id:this.parent.element.id+"subtotalpositions",iconCss:l._2+" "+l.a,items:[{text:this.parent.localeObj.getConstant("auto"),id:this.parent.element.id+"sub-none-position",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("top"),id:this.parent.element.id+"sub-top-position",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("bottom"),id:this.parent.element.id+"sub-bottom-position",iconCss:l._1+" "+l.a}]}]}],d=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.updateSubtotalSelection.bind(this),onClose:function(){e.focusToolBar()}});d.isStringTemplate=!0,d.appendTo("#"+this.parent.element.id+"subtotal_menu")}if(i.i(n.select)("#"+this.parent.element.id+"grandtotal_menu",this.parent.element)){var t=[{iconCss:l._3+" "+l.a,items:[{text:this.parent.localeObj.getConstant("showGrandTotals"),id:this.parent.element.id+"grandtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("doNotShowGrandTotals"),id:this.parent.element.id+"notgrandtotal",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showGrandTotalsRowsOnly"),id:this.parent.element.id+"grandtotalrow",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("showGrandTotalsColumnsOnly"),id:this.parent.element.id+"grandtotalcolumn",iconCss:l._1+" "+l.a},{separator:!0},{text:this.parent.localeObj.getConstant("grandTotalPosition"),id:this.parent.element.id+"grandtotalpositions",iconCss:l._2+" "+l.a,items:[{text:this.parent.localeObj.getConstant("top"),id:this.parent.element.id+"top-position",iconCss:l._1+" "+l.a},{text:this.parent.localeObj.getConstant("bottom"),id:this.parent.element.id+"bottom-position",iconCss:l._1+" "+l.a}]}]}],p=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this),beforeOpen:this.updateGrandtotalSelection.bind(this),onClose:function(){e.focusToolBar()}});p.isStringTemplate=!0,p.appendTo("#"+this.parent.element.id+"grandtotal_menu")}if(i.i(n.select)("#"+this.parent.element.id+"formatting_menu",this.parent.element)){var t=[{iconCss:l._4+" "+l.a,items:[{text:this.parent.localeObj.getConstant("numberFormatMenu"),iconCss:l._5+" "+l.a,id:this.parent.element.id+"numberFormattingMenu"},{text:this.parent.localeObj.getConstant("conditionalFormatingMenu"),iconCss:l._6+" "+l.a,id:this.parent.element.id+"conditionalFormattingMenu"}]}],u=new r.Menu({items:t,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:l.S+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.menuItemClick.bind(this)});u.isStringTemplate=!0,u.appendTo("#"+this.parent.element.id+"formatting_menu")}if(i.i(n.select)("#"+this.parent.element.id+"_reportlist",this.parent.element)){var h={report:this.parent.getPersistData(),reportName:this.parent.localeObj.getConstant("defaultReport")};this.currentReport=this.parent.localeObj.getConstant("defaultReport"),this.parent.trigger(a.H,h);var c=this.fetchReports(),g=new s.DropDownList({dataSource:c.reportName,width:"150px",popupHeight:"200px",placeholder:""===this.currentReport?this.parent.localeObj.getConstant("reportList"):"",enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:l._7+(this.parent.cssClass?" "+this.parent.cssClass:""),select:this.reportChange.bind(this),value:this.currentReport});g.isStringTemplate=!0,g.appendTo("#"+this.parent.element.id+"_reportlist")}this.updateItemElements()},e.prototype.getCurrentReport=function(){var e=this.parent.getPersistData();if("CSV"===this.parent.dataSourceSettings.type){var t=JSON.parse(e);t.dataSourceSettings.dataSource.splice(0,0,this.parent.engineModule.fields),e=JSON.stringify(t)}return e},e.prototype.updateItemElements=function(){for(var e=[].slice.call(this.toolbar.element.querySelectorAll(".e-toolbar-item")),t=0,i=e;t<i.length;t++){var r=i[t];r.querySelector("button")?r.querySelector("button").setAttribute("tabindex","0"):r.querySelector(".e-menu.e-menu-parent")&&(r.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),r.querySelector(".e-menu-item.e-menu-caret-icon")&&r.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))}},e.prototype.whitespaceRemove=function(e){e.element.style.padding="0px";var t=e.element.querySelector(".e-separator");t&&(t.style.margin="0px")},e.prototype.multipleAxesCheckbox=function(e){var t=this;if(this.parent.element.id+"_multipleAxes"===e.element.id){var r=i.i(n.createElement)("input",{id:this.parent.element.id+"_checkBox"});r.style.display="none",this.parent.element.appendChild(r);var a=new u.CheckBox({label:this.parent.localeObj.getConstant("multipleAxes"),cssClass:"e-multipleAxes"+(this.parent.cssClass?" "+this.parent.cssClass:""),checked:this.parent.chartSettings.enableMultipleAxis,change:function(){document.getElementById(t.parent.element.id+"_multipleAxes").click()},enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});e.element.innerText="",a.appendTo("#"+this.parent.element.id+"_checkBox"),["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>-1&&!e.element.classList.contains(l.E)?(e.element.classList.add(l.E),a.disabled=!0):["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)<0&&e.element.classList.contains(l.E)&&(e.element.classList.remove(l.E),a.disabled=!1);var o=this.parent.element.querySelector(".e-checkbox-wrapper.e-multipleAxes");e.element.appendChild(o)}else if(this.parent.element.id+"_showLegend"===e.element.id){var r=i.i(n.createElement)("input",{id:this.parent.element.id+"_showLegendCheckBox"});r.style.display="none",this.parent.element.appendChild(r);var a=new u.CheckBox({label:this.parent.localeObj.getConstant("showLegend"),checked:this.getLableState(),cssClass:"e-showLegend"+(this.parent.cssClass?" "+this.parent.cssClass:""),change:function(){document.getElementById(t.parent.element.id+"_showLegend").click()},enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer});e.element.innerText="",a.appendTo("#"+this.parent.element.id+"_showLegendCheckBox");var o=this.parent.element.querySelector(".e-checkbox-wrapper.e-showLegend");e.element.appendChild(o)}},e.prototype.getLableState=function(){var e=JSON.parse(this.parent.getChartSettings()).chartSettings;return e&&e.legendSettings&&void 0!==e.legendSettings.visible?this.showLableState=e.legendSettings.visible:this.showLableState=!0,this.showLableState},e.prototype.getAllChartItems=function(){return["Line","Column","Area","Bar","StackingColumn","StackingArea","StackingBar","StackingLine","StepLine","StepArea","SplineArea","Scatter","Spline","StackingColumn100","StackingBar100","StackingArea100","StackingLine100","Bubble","Pareto","Polar","Radar","Pie","Pyramid","Funnel","Doughnut"]},e.prototype.updateExportMenu=function(e){var t=[].slice.call(e.element.querySelectorAll("li"));"Table"===this.parent.currentView?(i.i(n.addClass)(t.slice(3),l._8),i.i(n.removeClass)(t.slice(1,3),l._8)):(i.i(n.addClass)(t.slice(1,3),l._8),i.i(n.removeClass)(t.slice(3),l._8))},e.prototype.updateSubtotalSelection=function(e){e.parentItem.id!==this.parent.element.id+"subtotalpositions"?(i.i(n.select)("#"+this.parent.element.id+"subtotal ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"subtotal ."+l._1,e.element).classList.add(l._2),i.i(n.select)("#"+this.parent.element.id+"notsubtotal ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"notsubtotal ."+l._1,e.element).classList.add(l._2),i.i(n.select)("#"+this.parent.element.id+"subtotalrow ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"subtotalrow ."+l._1,e.element).classList.add(l._2),i.i(n.select)("#"+this.parent.element.id+"subtotalcolumn ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"subtotalcolumn ."+l._1,e.element).classList.add(l._2),this.parent.dataSourceSettings.showSubTotals&&this.parent.dataSourceSettings.showRowSubTotals&&!this.parent.dataSourceSettings.showColumnSubTotals?i.i(n.select)("#"+this.parent.element.id+"subtotalrow ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showSubTotals&&!this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals?i.i(n.select)("#"+this.parent.element.id+"subtotalcolumn ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showSubTotals&&this.parent.dataSourceSettings.showRowSubTotals&&this.parent.dataSourceSettings.showColumnSubTotals?i.i(n.select)("#"+this.parent.element.id+"subtotal ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showSubTotals&&(this.parent.dataSourceSettings.showRowSubTotals||this.parent.dataSourceSettings.showColumnSubTotals)||i.i(n.select)("#"+this.parent.element.id+"notsubtotal ."+l._1,e.element).classList.remove(l._2)):(i.i(n.select)("#"+this.parent.element.id+"sub-none-position ."+l._1,e.element).classList.add(l._2),"Auto"===this.parent.dataSourceSettings.subTotalsPosition&&i.i(n.select)("#"+this.parent.element.id+"sub-none-position ."+l._1,e.element).classList.remove(l._2),i.i(n.select)("#"+this.parent.element.id+"sub-top-position ."+l._1,e.element).classList.add(l._2),"Top"===this.parent.dataSourceSettings.subTotalsPosition&&i.i(n.select)("#"+this.parent.element.id+"sub-top-position ."+l._1,e.element).classList.remove(l._2),i.i(n.select)("#"+this.parent.element.id+"sub-bottom-position ."+l._1,e.element).classList.add(l._2),"Bottom"===this.parent.dataSourceSettings.subTotalsPosition&&i.i(n.select)("#"+this.parent.element.id+"sub-bottom-position ."+l._1,e.element).classList.remove(l._2))},e.prototype.updateGrandtotalSelection=function(e){e.parentItem.id!==this.parent.element.id+"grandtotalpositions"?(i.i(n.select)("#"+this.parent.element.id+"grandtotal ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"grandtotal ."+l._1,e.element).classList.add(l._2),i.i(n.select)("#"+this.parent.element.id+"notgrandtotal ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"notgrandtotal ."+l._1,e.element).classList.add(l._2),i.i(n.select)("#"+this.parent.element.id+"grandtotalrow ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"grandtotalrow ."+l._1,e.element).classList.add(l._2),i.i(n.select)("#"+this.parent.element.id+"grandtotalcolumn ."+l._1,e.element).classList.contains(l._2)||i.i(n.select)("#"+this.parent.element.id+"grandtotalcolumn ."+l._1,e.element).classList.add(l._2),this.parent.dataSourceSettings.showGrandTotals&&this.parent.dataSourceSettings.showRowGrandTotals&&!this.parent.dataSourceSettings.showColumnGrandTotals?i.i(n.select)("#"+this.parent.element.id+"grandtotalrow ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showGrandTotals&&!this.parent.dataSourceSettings.showRowGrandTotals&&this.parent.dataSourceSettings.showColumnGrandTotals?i.i(n.select)("#"+this.parent.element.id+"grandtotalcolumn ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showGrandTotals&&this.parent.dataSourceSettings.showRowGrandTotals&&this.parent.dataSourceSettings.showColumnGrandTotals?i.i(n.select)("#"+this.parent.element.id+"grandtotal ."+l._1,e.element).classList.remove(l._2):this.parent.dataSourceSettings.showGrandTotals&&(this.parent.dataSourceSettings.showRowGrandTotals||this.parent.dataSourceSettings.showColumnGrandTotals)||i.i(n.select)("#"+this.parent.element.id+"notgrandtotal ."+l._1,e.element).classList.remove(l._2)):(i.i(n.select)("#"+this.parent.element.id+"top-position ."+l._1,e.element).classList.add(l._2),"Top"===this.parent.dataSourceSettings.grandTotalsPosition&&i.i(n.select)("#"+this.parent.element.id+"top-position ."+l._1,e.element).classList.remove(l._2),i.i(n.select)("#"+this.parent.element.id+"bottom-position ."+l._1,e.element).classList.add(l._2),"Bottom"===this.parent.dataSourceSettings.grandTotalsPosition&&i.i(n.select)("#"+this.parent.element.id+"bottom-position ."+l._1,e.element).classList.remove(l._2))},e.prototype.updateReportList=function(){var e=this.fetchReports(),t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_reportlist",this.parent.element),s.DropDownList);t.dataSource=e.reportName,""===this.currentReport&&t.dataSource.length>0?(t.value=t.dataSource[t.dataSource.length-1],t.text=t.dataSource[t.dataSource.length-1],this.currentReport=t.dataSource[t.dataSource.length-1]):(t.value=this.currentReport,t.text=this.currentReport),t.refresh()},e.prototype.menuItemClick=function(e){var t,i=this,r={},n=e.item.id===this.parent.element.id+"grid"?a._47:e.item.id===this.parent.element.id+"_Column"?a._48:e.item.id===this.parent.element.id+"_Bar"?a._48:e.item.id===this.parent.element.id+"_Line"?a._48:e.item.id===this.parent.element.id+"_Area"?a._48:e.item.id===this.parent.element.id+"_Scatter"?a._48:e.item.id===this.parent.element.id+"_Polar"?a._48:e.item.id===this.parent.element.id+"_ChartMoreOption"?a._48:e.item.id===this.parent.element.id+"_multipleAxes"?a._49:e.item.id===this.parent.element.id+"_showLegend"?a._50:e.item.id===this.parent.element.id+"pdf"?a._51:e.item.id===this.parent.element.id+"png"?a._52:e.item.id===this.parent.element.id+"excel"?a._53:e.item.id===this.parent.element.id+"csv"?a._54:e.item.id===this.parent.element.id+"jpeg"?a._55:e.item.id===this.parent.element.id+"svg"?a._56:e.item.id===this.parent.element.id+"notsubtotal"?a._57:e.item.id===this.parent.element.id+"subtotalrow"?a._58:e.item.id===this.parent.element.id+"subtotalcolumn"?a._59:e.item.id===this.parent.element.id+"subtotal"?a._60:e.item.id===this.parent.element.id+"notgrandtotal"?a._61:e.item.id===this.parent.element.id+"grandtotalrow"?a._62:e.item.id===this.parent.element.id+"grandtotalcolumn"?a._63:e.item.id===this.parent.element.id+"grandtotal"?a._64:e.item.id===this.parent.element.id+"numberFormattingMenu"?a._65:e.item.id===this.parent.element.id+"conditionalFormattingMenu"?a._66:"";if(this.parent.actionObj.actionName=n,!this.parent.actionBeginMethod()){(this.getAllChartItems().indexOf(e.item.id.split(this.parent.element.id+"_")[1])>-1||"ChartMoreOption"===e.item.id.split(this.parent.element.id+"_")[1]||"multipleAxes"===e.item.id.split(this.parent.element.id+"_")[1]||"showLegend"===e.item.id.split(this.parent.element.id+"_")[1])&&(t=e.item.id.split(this.parent.element.id+"_")[1]);try{switch(e.item.id){case this.parent.element.id+"grid":if(this.parent.grid&&this.parent.chart){this.parent.grid.element.style.display="",this.parent.chart.element.style.display="none",this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="none"),this.parent.currentView="Table",this.parent.setProperties({displayOption:{primary:"Table"}},!0),this.parent.showGroupingBar&&this.parent.groupingBarModule&&(this.parent.element.querySelector(".e-pivot-grouping-bar").style.display="",this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none");var o={toolbarInfo:{displayOption:this.parent.displayOption,gridSettings:this.parent.gridSettings}};this.parent.actionObj.actionInfo=o,this.parent.layoutRefresh()}break;case this.parent.element.id+"pdf":"Table"===this.parent.currentView?this.parent.pdfExport({fileName:"Export.pdf"},!1,void 0,!1):this.parent.chartExport("PDF",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"excel":r={excelExportProperties:{fileName:"Export.xlsx"},isBlob:void 0,isMultipleExport:void 0,workbook:void 0},this.parent.trigger(a.h,r,function(e){"Server"===i.parent.dataSourceSettings.mode?i.parent.getEngine("onExcelExport",null,null,null,null,null,null,null,null,e.excelExportProperties):i.parent.excelExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"csv":r={excelExportProperties:{fileName:"Export.csv"},isBlob:!1,isMultipleExport:!1,workbook:void 0},this.parent.trigger(a.h,r,function(e){"Server"===i.parent.dataSourceSettings.mode?i.parent.getEngine("onCsvExport",null,null,null,null,null,null,null,null,e.excelExportProperties):i.parent.csvExport(e.excelExportProperties,e.isMultipleExport,e.workbook,e.isBlob)});break;case this.parent.element.id+"png":this.parent.chartExport("PNG",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"jpeg":this.parent.chartExport("JPEG",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"svg":this.parent.chartExport("SVG",{fileName:"result"},void 0,null,void 0);break;case this.parent.element.id+"notsubtotal":this.parent.setProperties({dataSourceSettings:{showSubTotals:!1,showColumnSubTotals:!1,showRowSubTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"subtotalrow":this.parent.setProperties({dataSourceSettings:{showSubTotals:!0,showColumnSubTotals:!1,showRowSubTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"subtotalcolumn":this.parent.setProperties({dataSourceSettings:{showSubTotals:!0,showColumnSubTotals:!0,showRowSubTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"subtotal":this.parent.setProperties({dataSourceSettings:{showSubTotals:!0,showColumnSubTotals:!0,showRowSubTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"notgrandtotal":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!1,showColumnGrandTotals:!1,showRowGrandTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"grandtotalrow":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!0,showColumnGrandTotals:!1,showRowGrandTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"grandtotalcolumn":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!0,showColumnGrandTotals:!0,showRowGrandTotals:!1}},!0),this.parent.refreshData();break;case this.parent.element.id+"grandtotal":this.parent.setProperties({dataSourceSettings:{showGrandTotals:!0,showColumnGrandTotals:!0,showRowGrandTotals:!0}},!0),this.parent.refreshData();break;case this.parent.element.id+"top-position":this.parent.setProperties({dataSourceSettings:{grandTotalsPosition:"Top"}},!0),this.parent.refreshData();break;case this.parent.element.id+"bottom-position":this.parent.setProperties({dataSourceSettings:{grandTotalsPosition:"Bottom"}},!0),this.parent.refreshData();break;case this.parent.element.id+"sub-top-position":this.parent.setProperties({dataSourceSettings:{subTotalsPosition:"Top"}},!0),this.parent.refreshData();break;case this.parent.element.id+"sub-bottom-position":this.parent.setProperties({dataSourceSettings:{subTotalsPosition:"Bottom"}},!0),this.parent.refreshData();break;case this.parent.element.id+"sub-none-position":this.parent.setProperties({dataSourceSettings:{subTotalsPosition:"Auto"}},!0),this.parent.refreshData();break;case this.parent.element.id+"numberFormattingMenu":this.parent.numberFormattingModule&&this.parent.numberFormattingModule.showNumberFormattingDialog();break;case this.parent.element.id+"conditionalFormattingMenu":this.parent.conditionalFormattingModule&&this.parent.conditionalFormattingModule.showConditionalFormattingDialog();break;case this.parent.element.id+"_"+t:e.item&&e.item.text&&("ChartMoreOption"===t?this.createChartTypeDialog():"multipleAxes"===t?(this.parent.chartSettings.enableScrollOnMultiAxis&&(this.isMultiAxisChange=!0),this.parent.chartSettings.enableMultipleAxis=!this.parent.chartSettings.enableMultipleAxis,this.updateChartType(this.parent.chartSettings.chartSeries.type,!0)):this.getAllChartItems().indexOf(t)>-1?this.updateChartType(t,!1):"showLegend"===t&&(this.parent.chart.legendSettings.visible=!this.showLableState,this.parent.chartSettings.legendSettings?this.parent.chartSettings.legendSettings.visible=!this.showLableState:this.parent.setProperties({chartSettings:{legendSettings:{visible:!this.showLableState}}},!0),this.updateChartType(this.parent.chartSettings.chartSeries.type,!0)))}}catch(e){this.parent.actionFailureMethod(e)}}},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(a._30,this.createToolbar,this)},e.prototype.getValidChartType=function(){for(var e=[],t=0;t<=this.parent.chartTypes.length;t++){var i=this.parent.chartTypes[t];this.getAllChartItems().indexOf(i)>-1&&e.indexOf(i)<0&&e.push(i)}return e},e.prototype.createChartTypeDialog=function(){var e=this,t=this.parent.element.appendChild(i.i(n.createElement)("div",{id:this.parent.element.id+"_ChartTypeDialog",className:l._9})),r=new o.Dialog({animationSettings:{effect:"Fade"},allowDragging:!0,header:this.parent.localeObj.getConstant("chartTypeSettings"),content:this.getDialogContent(),isModal:!0,beforeOpen:this.beforeOpen.bind(this),visible:!0,showCloseIcon:!0,enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,width:"auto",height:"auto",position:{X:"center",Y:"center"},buttons:[{click:function(){e.chartTypeDialogUpdate()},buttonModel:{cssClass:l.d+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("ok"),isPrimary:!0}},{click:function(){e.removeDialog()},buttonModel:{cssClass:l.e+(this.parent.cssClass?" "+this.parent.cssClass:""),content:this.parent.localeObj.getConstant("cancel")}}],closeOnEscape:!0,target:this.parent.element,cssClass:this.parent.cssClass,close:this.removeDialog.bind(this)});r.isStringTemplate=!0,r.appendTo(t)},e.prototype.removeDialog=function(){var e=i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",this.parent.element)?i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",this.parent.element),o.Dialog):null;e&&!e.isDestroyed&&e.destroy(),document.getElementById(this.parent.element.id+"_ChartTypeDialog")&&i.i(n.remove)(document.getElementById(this.parent.element.id+"_ChartTypeDialog"))},e.prototype.chartTypeDialogUpdate=function(){var e=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_ChartTypeOption"),s.DropDownList).value,t=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DialogMultipleAxis"),u.CheckBox).checked,r=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DialogShowLabel"),u.CheckBox).checked;this.parent.chart.legendSettings.visible=r,this.chartLableState&&(this.parent.chart.legendSettings.visible=r,this.parent.chartSettings.legendSettings?this.parent.chartSettings.legendSettings.visible=r:this.parent.setProperties({chartSettings:{legendSettings:{visible:r}}},!0)),this.updateChartType(e,!1),this.parent.chartSettings.enableMultipleAxis=t,this.parent.chartSettings.multipleAxisMode=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).value,(i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",document)?i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",document),o.Dialog):null).close()},e.prototype.updateChartType=function(e,t){if(this.getAllChartItems().indexOf(e)>-1&&this.parent.chart){this.parent.currentView="Chart",this.parent.setProperties({displayOption:{primary:"Chart"}},!0),this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&(this.parent.element.querySelector("."+l._10).style.width=i.i(n.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())),this.parent.chart.setProperties({width:i.i(n.formatUnit)(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())},!0),this.parent.chartSettings.chartSeries.type!==e||t?this.parent.chartSettings.chartSeries.type=e:this.parent.chart.refresh();var r={toolbarInfo:{displayOption:this.parent.displayOption,chartSettings:this.parent.chartSettings}};this.parent.actionObj.actionInfo=r}},e.prototype.getDialogContent=function(){var e=i.i(n.createElement)("div",{className:"e-chart-type-div-content"}),t=i.i(n.createElement)("div",{className:"e-chart-type-option-container"}),r=i.i(n.createElement)("div",{className:"e-multiple-axes-mode-container"}),a=i.i(n.createElement)("div",{className:"e-chart-type-option-text"});a.innerText=this.parent.localeObj.getConstant("ChartType");var o=i.i(n.createElement)("div",{className:"e-multiple-axes-mode-text"});o.innerText=this.parent.localeObj.getConstant("multipleAxisMode");var l=i.i(n.createElement)("div",{id:this.parent.element.id+"_ChartTypeOption"}),d=i.i(n.createElement)("div",{id:this.parent.element.id+"_AxisModeOption"});t.appendChild(a),t.appendChild(l);for(var p=[],u=[{value:"Stacked",text:this.parent.localeObj.getConstant("stacked")},{value:"Single",text:this.parent.localeObj.getConstant("single")},{value:"Combined",text:this.parent.localeObj.getConstant("combined")}],h=this.getValidChartType(),c=0;c<h.length;c++)p.push({value:h[c],text:this.parent.localeObj.getConstant(h[c].toLowerCase())});var g=new s.DropDownList({dataSource:p,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.chartSettings.chartSeries.type?this.parent.chartSettings.chartSeries.type:this.getValidChartType()[0],width:"100%",change:this.changeDropDown.bind(this),cssClass:this.parent.cssClass});g.isStringTemplate=!0,g.appendTo(l),e.appendChild(t);var m=i.i(n.createElement)("input",{id:this.parent.element.id+"_DialogMultipleAxis",attrs:{type:"checkbox"}});e.appendChild(m);var f=i.i(n.createElement)("input",{id:this.parent.element.id+"_DialogShowLabel",attrs:{type:"checkbox"}});e.appendChild(f),r.appendChild(o),r.appendChild(d),e.appendChild(r);var v=new s.DropDownList({dataSource:u,enableRtl:this.parent.enableRtl,locale:this.parent.locale,fields:{value:"value",text:"text"},value:this.parent.chartSettings.multipleAxisMode?this.parent.chartSettings.multipleAxisMode:"Stacked",width:"100%",enabled:this.parent.chartSettings.enableMultipleAxis,cssClass:this.parent.cssClass});return v.isStringTemplate=!0,v.appendTo(d),e},e.prototype.changeDropDown=function(e){var t=JSON.parse(this.parent.getChartSettings()).chartSettings;if(t&&t.legendSettings&&void 0!==t.legendSettings.visible||(i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DialogShowLabel"),u.CheckBox).checked=!0),["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(e.value.toString())>-1)i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DialogMultipleAxis"),u.CheckBox).disabled=!0,i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=!1;else{var r=i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_DialogMultipleAxis"),u.CheckBox);r.disabled=!1,i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=r.checked}},e.prototype.beforeOpen=function(){var e=this,t=new u.CheckBox({label:this.parent.localeObj.getConstant("multipleAxes"),cssClass:"e-dialog-multiple-axis"+(this.parent.cssClass?" "+this.parent.cssClass:""),checked:!!this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableMultipleAxis,change:function(t){i.i(n.getInstance)(i.i(n.select)("#"+e.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=t.checked},enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),r=new u.CheckBox({label:this.parent.localeObj.getConstant("showLegend"),checked:this.getLableState(),change:function(){e.chartLableState=!0},cssClass:"e-dialog-show-legend"+(this.parent.cssClass?" "+this.parent.cssClass:""),enableRtl:this.parent.enableRtl,locale:this.parent.locale,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),a=i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",document)?i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",document),o.Dialog):null;r.appendTo(i.i(n.select)("#"+this.parent.element.id+"_DialogShowLabel",a.element)),t.appendTo(i.i(n.select)("#"+this.parent.element.id+"_DialogMultipleAxis",a.element)),["Pie","Funnel","Pyramid","Doughnut","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>-1&&(t.disabled=!0,i.i(n.getInstance)(i.i(n.select)("#"+this.parent.element.id+"_AxisModeOption"),s.DropDownList).enabled=!1);var l=JSON.parse(this.parent.getChartSettings()).chartSettings;l&&l.legendSettings&&void 0!==l.legendSettings.visible?this.chartLableState=!0:this.chartLableState=!1},e.prototype.refreshToolbar=function(){this.createToolbar()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(a._30,this.createToolbar)},e.prototype.destroy=function(){this.removeEventListener();var e=i.i(n.select)("#"+this.parent.element.id+"_ConfirmDialog",document),t=e?i.i(n.getInstance)(e,o.Dialog):null;t&&!t.isDestroyed&&t.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"report-dialog",document);var a=e?i.i(n.getInstance)(e,o.Dialog):null;a&&!a.isDestroyed&&a.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"mdx-dialog",document);var l=e?i.i(n.getInstance)(e,o.Dialog):null;l&&!l.isDestroyed&&l.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"chart_menu",document);var d=e?i.i(n.getInstance)(e,r.Menu):null;d&&!d.isDestroyed&&d.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"_ChartTypeDialog",document);var p=e?i.i(n.getInstance)(e,o.Dialog):null;p&&!p.isDestroyed&&p.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"export_menu",document);var u=e?i.i(n.getInstance)(e,r.Menu):null;u&&!u.isDestroyed&&u.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"subtotal_menu",document);var h=e?i.i(n.getInstance)(e,r.Menu):null;h&&!h.isDestroyed&&h.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"grandtotal_menu",document);var c=e?i.i(n.getInstance)(e,r.Menu):null;c&&!c.isDestroyed&&c.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"formatting_menu",document);var g=e?i.i(n.getInstance)(e,r.Menu):null;g&&!g.isDestroyed&&g.destroy(),e=i.i(n.select)("#"+this.parent.element.id+"_reportlist",document);var m=e?i.i(n.getInstance)(e,s.DropDownList):null;m&&!m.isDestroyed&&m.destroy(),this.toolbar&&!this.toolbar.isDestroyed&&this.toolbar.destroy(),(e=i.i(n.select)("#"+this.parent.element.id+"pivot-toolbar",document))&&i.i(n.remove)(e)},e.prototype.focusToolBar=function(){i.i(n.removeClass)(document.querySelector("."+l.v).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),i.i(n.removeClass)(document.querySelector("."+l.v).querySelectorAll(".e-menu-item.e-selected"),"e-selected"),document.querySelector(".e-toolbar-items")&&i.i(n.addClass)([document.querySelector(".e-toolbar-items")],"e-focused")},e}())},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(47);i.d(t,"GroupingBarSettings",function(){return r.a}),i.d(t,"CellEditSettings",function(){return r.b}),i.d(t,"ConditionalSettings",function(){return r.c}),i.d(t,"HyperlinkSettings",function(){return r.d}),i.d(t,"PageSettings",function(){return r.e}),i.d(t,"PagerSettings",function(){return r.f}),i.d(t,"DisplayOption",function(){return r.g}),i.d(t,"PivotView",function(){return r.h}),i.d(t,"Render",function(){return r.i}),i.d(t,"ExcelExport",function(){return r.j}),i.d(t,"PDFExport",function(){return r.k}),i.d(t,"KeyboardInteraction",function(){return r.l}),i.d(t,"VirtualScroll",function(){return r.m}),i.d(t,"DrillThrough",function(){return r.n}),i.d(t,"Pager",function(){return r.o});var n=i(22);i.d(t,"PivotChart",function(){return n.a});var a=i(46);i.d(t,"PivotFieldList",function(){return a.a}),i.d(t,"TreeViewRenderer",function(){return a.b}),i.d(t,"AxisFieldRenderer",function(){return a.c}),i.d(t,"AxisTableRenderer",function(){return a.d}),i.d(t,"DialogRenderer",function(){return a.e});var o=i(44);i.d(t,"EventBase",function(){return o.a}),i.d(t,"NodeStateModified",function(){return o.b}),i.d(t,"DataSourceUpdate",function(){return o.c}),i.d(t,"FieldList",function(){return o.d}),i.d(t,"CommonKeyboardInteraction",function(){return o.e}),i.d(t,"Common",function(){return o.f}),i.d(t,"GroupingBar",function(){return o.g}),i.d(t,"CalculatedField",function(){return o.h}),i.d(t,"ConditionalFormatting",function(){return o.i}),i.d(t,"PivotCommon",function(){return o.j}),i.d(t,"load",function(){return o.k}),i.d(t,"enginePopulating",function(){return o.l}),i.d(t,"enginePopulated",function(){return o.m}),i.d(t,"onFieldDropped",function(){return o.n}),i.d(t,"fieldDrop",function(){return o.o}),i.d(t,"beforePivotTableRender",function(){return o.p}),i.d(t,"afterPivotTableRender",function(){return o.q}),i.d(t,"beforeExport",function(){return o.r}),i.d(t,"exportComplete",function(){return o.s}),i.d(t,"excelHeaderQueryCellInfo",function(){return o.t}),i.d(t,"pdfHeaderQueryCellInfo",function(){return o.u}),i.d(t,"excelQueryCellInfo",function(){return o.v}),i.d(t,"pdfQueryCellInfo",function(){return o.w}),i.d(t,"onPdfCellRender",function(){return o.x}),i.d(t,"dataBound",function(){return o.y}),i.d(t,"queryCellInfo",function(){return o.z}),i.d(t,"headerCellInfo",function(){return o.A}),i.d(t,"hyperlinkCellClick",function(){return o.B}),i.d(t,"resizing",function(){return o.C}),i.d(t,"resizeStop",function(){return o.D}),i.d(t,"cellClick",function(){return o.E}),i.d(t,"drillThrough",function(){return o.F}),i.d(t,"beforeColumnsRender",function(){return o.G}),i.d(t,"selected",function(){return o.H}),i.d(t,"cellSelecting",function(){return o.I}),i.d(t,"drill",function(){return o.J}),i.d(t,"cellSelected",function(){return o.K}),i.d(t,"cellDeselected",function(){return o.L}),i.d(t,"rowSelected",function(){return o.M}),i.d(t,"rowDeselected",function(){return o.N}),i.d(t,"beginDrillThrough",function(){return o.O}),i.d(t,"editCompleted",function(){return o.P}),i.d(t,"multiLevelLabelClick",function(){return o.Q}),i.d(t,"saveReport",function(){return o.R}),i.d(t,"fetchReport",function(){return o.S}),i.d(t,"loadReport",function(){return o.T}),i.d(t,"renameReport",function(){return o.U}),i.d(t,"removeReport",function(){return o.V}),i.d(t,"newReport",function(){return o.W}),i.d(t,"toolbarRender",function(){return o.X}),i.d(t,"toolbarClick",function(){return o.Y}),i.d(t,"chartTooltipRender",function(){return o.Z}),i.d(t,"chartLegendClick",function(){return o._0}),i.d(t,"chartLoaded",function(){return o._1}),i.d(t,"multiLevelLabelRender",function(){return o._2}),i.d(t,"chartLoad",function(){return o._3}),i.d(t,"chartResized",function(){return o._4}),i.d(t,"chartAxisLabelRender",function(){return o._5}),i.d(t,"chartSeriesCreated",function(){return o._6}),i.d(t,"aggregateCellInfo",function(){return o._7}),i.d(t,"onHeadersSort",function(){return o._8}),i.d(t,"contextMenuClick",function(){return o._9}),i.d(t,"contextMenuOpen",function(){return o._10}),i.d(t,"fieldListRefreshed",function(){return o._11}),i.d(t,"conditionalFormatting",function(){return o._12}),i.d(t,"beforePdfExport",function(){return o._13}),i.d(t,"beforeExcelExport",function(){return o._14}),i.d(t,"memberFiltering",function(){return o._15}),i.d(t,"calculatedFieldCreate",function(){return o._16}),i.d(t,"memberEditorOpen",function(){return o._17}),i.d(t,"fieldRemove",function(){return o._18}),i.d(t,"numberFormatting",function(){return o._19}),i.d(t,"aggregateMenuOpen",function(){return o._20}),i.d(t,"fieldDragStart",function(){return o._21}),i.d(t,"chartPointClick",function(){return o._22}),i.d(t,"beforeServiceInvoke",function(){return o._23}),i.d(t,"afterServiceInvoke",function(){return o._24}),i.d(t,"actionBegin",function(){return o._25}),i.d(t,"actionComplete",function(){return o._26}),i.d(t,"actionFailure",function(){return o._27}),i.d(t,"initialLoad",function(){return o._28}),i.d(t,"uiUpdate",function(){return o._29}),i.d(t,"scroll",function(){return o._30}),i.d(t,"verticalScroll",function(){return o._31}),i.d(t,"horizontalScroll",function(){return o._32}),i.d(t,"contentReady",function(){return o._33}),i.d(t,"dataReady",function(){return o._34}),i.d(t,"initSubComponent",function(){return o._35}),i.d(t,"treeViewUpdate",function(){return o._36}),i.d(t,"pivotButtonUpdate",function(){return o._37}),i.d(t,"initCalculatedField",function(){return o._38}),i.d(t,"click",function(){return o._39}),i.d(t,"initToolbar",function(){return o._40}),i.d(t,"initPivotPager",function(){return o._41}),i.d(t,"initFormatting",function(){return o._42}),i.d(t,"initGrouping",function(){return o._43}),i.d(t,"sortValue",function(){return o._44}),i.d(t,"drillUp",function(){return o._45}),i.d(t,"drillDown",function(){return o._46}),i.d(t,"addNewReport",function(){return o._47}),i.d(t,"saveCurrentReport",function(){return o._48}),i.d(t,"saveAsCurrentReport",function(){return o._49}),i.d(t,"renameCurrentReport",function(){return o._50}),i.d(t,"removeCurrentReport",function(){return o._51}),i.d(t,"loadReports",function(){return o._52}),i.d(t,"openConditionalFormatting",function(){return o._53}),i.d(t,"openNumberFormatting",function(){return o._54}),i.d(t,"MdxQuery",function(){return o._55}),i.d(t,"showFieldList",function(){return o._56}),i.d(t,"tableView",function(){return o._57}),i.d(t,"chartView",function(){return o._58}),i.d(t,"multipleAxis",function(){return o._59}),i.d(t,"showLegend",function(){return o._60}),i.d(t,"pdfExport",function(){return o._61}),i.d(t,"pngExport",function(){return o._62}),i.d(t,"excelExport",function(){return o._63}),i.d(t,"csvExport",function(){return o._64}),i.d(t,"jpegExport",function(){return o._65}),i.d(t,"svgExport",function(){return o._66}),i.d(t,"hideSubTotals",function(){return o._67}),i.d(t,"subTotalsRow",function(){return o._68}),i.d(t,"subTotalsColumn",function(){return o._69}),i.d(t,"showSubTotals",function(){return o._70}),i.d(t,"hideGrandTotals",function(){return o._71}),i.d(t,"grandTotalsRow",function(){return o._72}),i.d(t,"grandTotalsColumn",function(){return o._73}),i.d(t,"showGrandTotals",function(){return o._74}),i.d(t,"numberFormattingMenu",function(){return o._75}),i.d(t,"conditionalFormattingMenu",function(){return o._76}),i.d(t,"reportChange",function(){return o._77}),i.d(t,"sortFieldTree",function(){return o._78}),i.d(t,"editCalculatedField",function(){return o._79}),i.d(t,"sortField",function(){return o._80}),i.d(t,"filterField",function(){return o._81}),i.d(t,"removeField",function(){return o._82}),i.d(t,"openCalculatedField",function(){return o._83}),i.d(t,"editRecord",function(){return o._84}),i.d(t,"saveEditedRecords",function(){return o._85}),i.d(t,"addNewRecord",function(){return o._86}),i.d(t,"removeRecord",function(){return o._87}),i.d(t,"aggregateField",function(){return o._88}),i.d(t,"contextMenuCalculatedField",function(){return o._89}),i.d(t,"windowResize",function(){return o._90}),i.d(t,"rowPageNavigation",function(){return o._91}),i.d(t,"columnPageNavigation",function(){return o._92}),i.d(t,"calculatedFieldApplied",function(){return o._93}),i.d(t,"editedRecordsSaved",function(){return o._94}),i.d(t,"newRecordAdded",function(){return o._95}),i.d(t,"recordRemoved",function(){return o._96}),i.d(t,"closeFieldlist",function(){return o._97}),i.d(t,"fieldTreeSorted",function(){return o._98}),i.d(t,"reportSaved",function(){return o._99}),i.d(t,"newReportAdded",function(){return o._100}),i.d(t,"reportReSaved",function(){return o._101}),i.d(t,"reportRenamed",function(){return o._102}),i.d(t,"reportRemoved",function(){return o._103}),i.d(t,"excelExported",function(){return o._104}),i.d(t,"csvExported",function(){return o._105}),i.d(t,"pdfExported",function(){return o._106}),i.d(t,"pngExported",function(){return o._107}),i.d(t,"jpegExported",function(){return o._108}),i.d(t,"svgExported",function(){return o._109}),i.d(t,"conditionallyFormatted",function(){return o._110}),i.d(t,"numberFormatted",function(){return o._111}),i.d(t,"tableViewed",function(){return o._112}),i.d(t,"chartViewed",function(){return o._113}),i.d(t,"subTotalsHidden",function(){return o._114}),i.d(t,"subTotalsRowShown",function(){return o._115}),i.d(t,"subTotalsColumnShown",function(){return o._116}),i.d(t,"subTotalsShown",function(){return o._117}),i.d(t,"grandTotalsHidden",function(){return o._118}),i.d(t,"grandTotalsRowShown",function(){return o._119}),i.d(t,"grandTotalsColumnShown",function(){return o._120}),i.d(t,"grandTotalsShown",function(){return o._121}),i.d(t,"valueSorted",function(){return o._122}),i.d(t,"calculatedFieldEdited",function(){return o._123}),i.d(t,"fieldSorted",function(){return o._124}),i.d(t,"fieldFiltered",function(){return o._125}),i.d(t,"fieldRemoved",function(){return o._126}),i.d(t,"fieldAggregated",function(){return o._127}),i.d(t,"recordEdited",function(){return o._128}),i.d(t,"reportChanged",function(){return o._129}),i.d(t,"windowResized",function(){return o._130}),i.d(t,"recordUpdated",function(){return o._131}),i.d(t,"drillThroughClosed",function(){return o._132}),i.d(t,"verticalScrolled",function(){return o._133}),i.d(t,"horizontalScrolled",function(){return o._134}),i.d(t,"rowPageNavigated",function(){return o._135}),i.d(t,"columnPageNavigated",function(){return o._136}),i.d(t,"actionDropped",function(){return o._137}),i.d(t,"Theme",function(){return o._138}),i.d(t,"ErrorDialog",function(){return o._139}),i.d(t,"FilterDialog",function(){return o._140}),i.d(t,"PivotContextMenu",function(){return o._141}),i.d(t,"AggregateMenu",function(){return o._142}),i.d(t,"Toolbar",function(){return o._143}),i.d(t,"NumberFormatting",function(){return o._144}),i.d(t,"Grouping",function(){return o._145});var s=(i(13),i(45));i.d(t,"FieldOptions",function(){return s.a}),i.d(t,"FieldListFieldOptions",function(){return s.b}),i.d(t,"Style",function(){return s.c}),i.d(t,"Filter",function(){return s.d}),i.d(t,"ConditionalFormatSettings",function(){return s.e}),i.d(t,"Sort",function(){return s.f}),i.d(t,"FormatSettings",function(){return s.g}),i.d(t,"GroupSettings",function(){return s.h}),i.d(t,"CustomGroups",function(){return s.i}),i.d(t,"CalculatedFieldSettings",function(){return s.j}),i.d(t,"DrillOptions",function(){return s.k}),i.d(t,"ValueSortSettings",function(){return s.l}),i.d(t,"Authentication",function(){return s.m}),i.d(t,"DataSourceSettings",function(){return s.n})},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(0),n=(i.n(r),i(74)),a=(i.n(n),i(12)),o=(i.n(a),i(1)),s=i(3),l=function(){function e(e){this.parent=e}return e.prototype.getModuleName=function(){return"chartExport"},e.prototype.pdfChartExport=function(e,t,n,o){var s=this,l=[this.parent.chart],d=this.getChartInfo(l),p=d.width,u=d.height,h=this.parent.chart.svgObject;this.parent.chart.enableCanvas||(h=i.i(r.createElement)("canvas",{id:"ej2-canvas",attrs:{width:p.toString(),height:u.toString()}}));var c=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(d.svg)],{type:"image/svg+xml"})),g=new Image,m=h.getContext("2d");return g.src=c,new Promise(function(l){g.onload=function(){var d;d=i.i(r.isNullOrUndefined)(t)?new a.PdfDocument:t,m.drawImage(g,0,0),window.URL.revokeObjectURL(c),s.exportPdf(h,d,n,o,p,u,e),l(d)}})},e.prototype.getChartInfo=function(e,t){var a,o=0,s=0,l=this.parent.chart.enableCanvas,d=new n.SvgRenderer("").createSvg({id:"Svg_Export_Element",width:200,height:200});return e.map(function(e){var n=e.svgObject.cloneNode(!0),p=e.renderer.createGroup({style:i.i(r.isNullOrUndefined)(t)||t?"transform: translateY("+s+"px)":"transform: translateX("+o+"px)"});a=n.childNodes[0]?n.childNodes[0].getAttribute("fill"):"transparent","transparent"===a&&(a=e.theme.indexOf("Dark")>-1||"HighContrast"===e.theme?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)"),l||p.appendChild(n),o=e.availableSize.width,s=e.availableSize.height,l||d.appendChild(p)}),l||(d.setAttribute("width",o+""),d.setAttribute("height",s+""),d.setAttribute("style","background-color: "+a+";")),{width:o,height:s,svg:d}},e.prototype.exportPdf=function(e,t,n,l,d,p,u){var h=t.sections.add(),c=t.pageSettings.width,g=t.pageSettings.height,m=t.pageSettings.margins,f=d+m.left+m.right;t.pageSettings.size=new a.SizeF(f,g);var v=this.exportProperties.fileName?this.exportProperties.fileName:i.i(r.isNullOrUndefined)(u)||i.i(r.isNullOrUndefined)(u.fileName)?"default":u.fileName;if(this.exportProperties.width||this.exportProperties.height?(t.pageSettings.orientation=this.exportProperties.width>this.exportProperties.height||!this.exportProperties.height&&this.exportProperties.width>g||!this.exportProperties.width&&c>this.exportProperties.height?a.PdfPageOrientation.Landscape:a.PdfPageOrientation.Portrait,t.pageSettings.size=new a.SizeF(this.exportProperties.width?this.exportProperties.width:c,this.exportProperties.height?this.exportProperties.height:g)):(t.pageSettings.orientation=0===this.exportProperties.orientation||this.exportProperties.orientation?this.exportProperties.orientation:i.i(r.isNullOrUndefined)(u)||i.i(r.isNullOrUndefined)(u.pageOrientation)?a.PdfPageOrientation.Landscape:"Landscape"===u.pageOrientation?a.PdfPageOrientation.Landscape:a.PdfPageOrientation.Portrait,i.i(r.isNullOrUndefined)(u)||i.i(r.isNullOrUndefined)(u.pageSize)||(t.pageSettings.size=s.a.getPageSize(u.pageSize))),!i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins)){var S=t.pageSettings.margins;S.top=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.top)?S.top:this.exportProperties.pdfMargins.top,S.bottom=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.bottom)?S.bottom:this.exportProperties.pdfMargins.bottom,S.left=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.left)?S.left:this.exportProperties.pdfMargins.left,S.right=i.i(r.isNullOrUndefined)(this.exportProperties.pdfMargins.right)?S.right:this.exportProperties.pdfMargins.right}h.setPageSettings(t.pageSettings),g=t.pageSettings.height;var y=e.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");y=y.slice(y.indexOf(",")+1);var b=new a.PdfBitmap(y),C=h.pages.add();C.graphics.drawImage(b,0,0,g<p||this.exportProperties.width||t.pageSettings.size?C.getClientSize().width:f,g<p?C.getClientSize().height:p);var x;l||n?l&&(x=t.save()):(t.save(v+".pdf"),t.destroy());var w={type:"PDF",promise:l?x:null};return this.parent.trigger(o.i,w),new Promise(function(){})},e.prototype.destroy=function(){this.exportProperties&&(this.exportProperties=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return u});var r=i(1),n=i(2),a=i(6),o=(i.n(a),i(0)),s=(i.n(o),i(3)),l=i(5),d=(i.n(l),i(4)),p=(i.n(d),i(9)),u=(i.n(p),function(){function e(){this.headerColl={},this.maxLevel=0,this.columnGroupObject={},this.selectedLegend=0,this.chartSeriesInfo={},this.measurePos=-1,this.measuresNames={},this.accumulationType=["Pie","Pyramid","Doughnut","Funnel"]}return e.prototype.getModuleName=function(){return"pivotChart"},e.prototype.loadChart=function(e,t){if(this.parent=e,this.measuresNames={},this.engineModule="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.dataSourceSettings=this.parent.dataSourceSettings,this.chartSettings=t,!("olap"===e.dataType?""!==e.dataSourceSettings.url&&!e.olapEngineModule.isEmptyData&&e.olapEngineModule.tupColumnInfo.length>0&&e.olapEngineModule.tupRowInfo.length>0&&(!i.i(o.isNullOrUndefined)(e.olapEngineModule.colMeasurePos)||!i.i(o.isNullOrUndefined)(e.olapEngineModule.rowMeasurePos)):"Server"===this.parent.dataSourceSettings.mode?!i.i(o.isNullOrUndefined)(e.dataSourceSettings.url)&&""!==e.dataSourceSettings.url&&e.dataSourceSettings.values.length>0&&!e.engineModule.isEmptyData:e.dataSourceSettings.values.length>0&&e.dataSourceSettings.dataSource&&(e.dataSourceSettings.dataSource.length>0||e.dataSourceSettings.dataSource instanceof p.DataManager)&&!e.engineModule.isEmptyData)){if(this.parent.chart)return this.parent.element.querySelector(".e-chart")?(this.parent.chart.series=[],this.parent.chart.rows=[],this.parent.chart.primaryXAxis.title="",this.parent.chart.primaryYAxis.title="",this.parent.chart.primaryXAxis.multiLevelLabels=[],this.parent.chart.primaryYAxis.multiLevelLabels=[],this.parent.chart.axes.length>0&&(this.parent.chart.axes[0].title=""),this.parent.chart.primaryXAxis.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?1:this.parent.chartSettings.primaryXAxis.zoomFactor):this.parent.element.querySelector(".e-accumulationchart")&&(this.parent.chart.series[0].dataSource=[{}],this.parent.chart.series[0].dataLabel={}),void this.parent.chart.refresh();if(!i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element)){"Both"===this.parent.displayOption.view&&"Chart"===this.parent.displayOption.primary?this.parent.element.insertBefore(i.i(o.createElement)("div",{className:n._10,id:this.parent.element.id+"_chart"}),this.parent.element.querySelector("."+n._31)):this.parent.element.appendChild(i.i(o.createElement)("div",{className:n._10,id:this.parent.element.id+"_chart"}));var s=this.parent.width.toString();this.parent.showToolbar&&this.parent.grid&&(s=this.parent.getGridWidthAsNumber().toString());var l=this.getChartHeight(),d=void 0;d=this.chartSettings&&this.chartSettings.chartSeries&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)>-1?new a.AccumulationChart({width:s,height:l}):new a.Chart({width:s,height:l}),d.appendTo("#"+this.parent.element.id+"_chart"),this.parent.showToolbar&&("Both"===this.parent.displayOption.view&&"Chart"===this.parent.currentView&&(this.parent.grid.element.style.display="none"),"Chart"!==this.parent.currentView&&(i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).style.display="none"))}return void this.parent.notify(r._23,{})}this.parent.chart||!this.parent.element.querySelector(".e-chart")&&!this.parent.element.querySelector(".e-accumulationchart")||i.i(o.remove)(i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element)),this.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?this.measureList=this.dataSourceSettings.values.map(function(e){return e.name}):this.measureList=[""===t.value?this.dataSourceSettings.values[0].name:t.value];for(var u=0,h=this.dataSourceSettings.values;u<h.length;u++){var c=h[u],g=c.name.replace(/[^A-Z0-9]+/gi,"_");this.measuresNames[c.name]=g,this.measuresNames[g]=c.name,"Polar"!==this.chartSettings.chartSeries.type&&"Radar"!==this.chartSettings.chartSeries.type||(this.measuresNames[c.caption?c.caption:c.name]=c.name)}this.columnGroupObject={},this.accEmptyPoint=!1;var m=this.engineModule.pivotValues;this.currentMeasure=t.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?this.measureList[0]:(""===t.value||0===this.dataSourceSettings.values.filter(function(e){return e.name===t.value}).length)&&this.dataSourceSettings.values.length>0?this.dataSourceSettings.values[0].name:t.value;var f,v,S,y=this.getColumnTotalIndex(m),b=Object.keys(m),C={},x=0,w=-.5;this.headerColl={},this.maxLevel=0;var T,M={},_="",D="",O="";this.chartSeriesInfo={},this.selectedLegend=0;for(var P=!1,N={},E=!1,I=this.parent.dataSourceSettings.valueSortSettings.headerDelimiter,F=0,L=this.dataSourceSettings.values;F<L.length;F++){var c=L[F],g=c.name;N[g]=c.caption?c.caption:g,N[c.caption?c.caption:g]=g}if("olap"===this.parent.dataType){var A=[];M=this.groupHierarchyWithLevels(m,A),_=A[A.length-1],D=this.measurePos===A.length-1&&A.length>1?A[A.length-2]:_,O=D}for(var R=0,k=b;R<k.length;R++){var j=k[R],H=Number(j);if(!i.i(o.isNullOrUndefined)(m[H])){var q=m[H][0],V=q&&q.valueSort&&!i.i(o.isNullOrUndefined)(q.valueSort.levelName)?q.valueSort.levelName.toString().split(I):void 0;if(E=!1,V&&"Grand Total"!==V[0]&&((t.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type||V.indexOf(N[this.currentMeasure])>-1)&&(E=!0),!E)){for(var B=0,U=V;B<U.length;B++){var G=U[B];if(N[G]){E=!0;break}}E=!E}if(q&&"row"===q.axis&&(0===this.dataSourceSettings.rows.length||"grand sum"!==q.type&&E)){var z=m[H][0];if(z.isSum)continue;var W="olap"===this.parent.dataType?this.engineModule.tupRowInfo[z.ordinal]:void 0,Q=-1,Y=z.level;"olap"===this.parent.dataType?(P="[Measures]"===z.hierarchy?P:this.isAttributeDrill(z.hierarchy,W.drillInfo),O=O===D?D:"[Measures]"===z.hierarchy||z.isNamedSet||this.engineModule.fieldList[z.hierarchy]&&!this.engineModule.fieldList[z.hierarchy].hasAllMember?D:O,Q=W.drillInfo.length-1,3===z.memberType||W.measureName&&W.measureName!==this.dataSourceSettings.values[0].name||(v=void 0===v?z.levelUniqueName:v,x=v===z.levelUniqueName?0:x,C=0===x?{}:C,x=S&&v!==z.levelUniqueName?S.hierarchy===z.hierarchy?x+(z.level-S.level):i.i(o.isNullOrUndefined)(C[z.levelUniqueName])?M[z.hierarchy].start:C[z.levelUniqueName]:x,C[z.levelUniqueName]=x,Y=x,w+=!S||O!==S.hierarchy||S.isDrilled&&S.hasChild?0:1,O=P?z.hierarchy:D,f=x,S=z)):"value"!==z.type&&(void 0===f||f<Y||w++,f=Y),this.maxLevel=Y>this.maxLevel?Y:this.maxLevel;var K="olap"===this.parent.dataType?z.formattedText:z.actualText?z.actualText.toString():z.formattedText.toString(),X=this.engineModule.fieldList[this.currentMeasure],J=0===this.parent.dataSourceSettings.rows.length?this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(X.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(o.isNullOrUndefined)(X.caption)?X.name:X.caption):z.formattedText?z.formattedText.toString():K,Z=z.hasChild&&!z.isNamedSet?(z.isDrilled?" - ":" + ")+J:J,G=W?W.uNameCollection:z.valueSort.levelName.toString(),$={name:K,text:Z,hasChild:z.hasChild,isDrilled:z.isDrilled,levelName:G,level:Y,fieldName:z.valueSort.axis?z.valueSort.axis.toString():"",rowIndex:H,colIndex:0,cell:z};("olap"===this.parent.dataType?3!==z.memberType:"value"!==z.type)&&(this.headerColl[w]?this.headerColl[w][Y]=$:(this.headerColl[w]={},this.headerColl[w][Y]=$));var ee=m[H],te=Object.keys(ee),ie=void 0;if("olap"===this.parent.dataType)T=3!==z.memberType?z:T;else if(T="value"!==z.type?z:T,"value"!==z.type)T=z;else{var re=z&&z.valueSort&&z.valueSort.levelName&&z.valueSort.levelName.toString().split(I),ne=void 0;if(re&&re.length>0&&(re.splice(re.length-1,1),ne=re.join(I)),this.parent.dataSourceSettings.valueIndex<=0||this.engineModule.valueAxis&&this.dataSourceSettings.rows.length===this.engineModule.measureIndex||i.i(o.isNullOrUndefined)(T.valueSort)||ne===T.valueSort.levelName)T=T;else for(var ae=H;ae>-1;)m[ae]&&m[ae][0]&&m[ae][0].valueSort&&m[ae][0].valueSort.levelName===ne&&(T=m[ae][0],ae=0),ae--}for(var oe=0,se=te;oe<se.length;oe++){var le=se[oe],de=Number(le),pe=m[H][de],ue=!i.i(o.isNullOrUndefined)(pe.rowHeaders)||0===this.dataSourceSettings.rows.length,he="olap"===this.parent.dataType&&W&&W.measureName?W.measureName:pe.actualText;if(("olap"!==this.parent.dataType||!pe.isGrandSum)&&!y[pe.colIndex]&&"value"===pe.axis&&"header"!==z.type&&""!==he&&(t.enableMultipleAxis&&this.accumulationType.indexOf(t.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type||he===this.currentMeasure)){if(i.i(o.isNullOrUndefined)(z.members)&&(z.members=[]),"olap"===this.parent.dataType?_!==z.hierarchy&&!P||(3===z.memberType&&ie?Q!==this.measurePos||ie.isDrilled&&ie.hasChild:z.isDrilled&&z.hasChild):("value"===z.type&&ie?ie.members.length>0&&ie.isDrilled:z.members.length>0&&z.isDrilled)||!ue)break;if("olap"===this.parent.dataType&&!0===pe.isSum&&"row"===this.parent.dataSourceSettings.valueAxis)continue;var ce="olap"===this.parent.dataType?pe.columnHeaders.toString().split(/~~|::/).join(" - "):pe.columnHeaders.toString().split(I).join(" - "),ge="olap"===this.parent.dataType?pe.rowHeaders.toString().split(/~~|::/).join(" - "):pe.rowHeaders.toString().split(I).join(" - "),me=ce+" | "+he;this.chartSeriesInfo[ce]={uniqueName:ce,caption:pe.hierarchyName&&pe.hierarchyName.toString().split(I).join(" - "),colorIndex:[]},this.chartSeriesInfo[this.chartSeriesInfo[ce].caption]=this.chartSeriesInfo[ce];var fe="pivot"===this.parent.dataType&&this.engineModule.aggregatedValueMatrix[H]&&!i.i(o.isNullOrUndefined)(this.engineModule.aggregatedValueMatrix[H][de])?Number(this.engineModule.aggregatedValueMatrix[H][de]):i.i(o.isNullOrUndefined)(pe.value)?pe.value:Number(pe.value);fe=fe===1/0?null:fe,0===fe&&(this.accEmptyPoint=!0),this.columnGroupObject[me]?this.columnGroupObject[me].push({x:0===this.dataSourceSettings.rows.length?z.formattedText:ge,y:fe,rIndex:H,cIndex:de}):this.columnGroupObject[me]=[{x:0===this.dataSourceSettings.rows.length?z.formattedText:ge,y:fe,rIndex:H,cIndex:de}]}ie=T}}}}this.refreshChart()},e.prototype.refreshChart=function(){this.chartSeries=[];var e=0,t={},n=Object.keys(this.columnGroupObject);this.persistSettings=JSON.parse(this.parent.getChartSettings()).chartSettings;for(var s=this.persistSettings.palettes&&this.persistSettings.palettes.length>0?this.persistSettings.palettes:i.i(a.getSeriesColor)(this.chartSettings.theme),l=this.parent.chartSettings.columnDelimiter?this.parent.chartSettings.columnDelimiter:"-",d=this.parent.chartSettings.columnHeader&&""!==this.parent.chartSettings.columnHeader?this.parent.chartSettings.columnHeader.split(l).join(" - "):"",p=this.chartSettings.chartSeries?this.chartSettings.chartSeries.type:void 0,u={},h=0;h<this.parent.dataSourceSettings.values.length;h++)u[this.parent.dataSourceSettings.values[h].name]=i.i(o.isNullOrUndefined)(this.parent.dataSourceSettings.values[h].caption)?void 0:this.parent.dataSourceSettings.values[h].caption;if(this.accumulationType.indexOf(p)>-1&&n.length>0){this.currentColumn=n.indexOf(d+" | "+this.currentMeasure)>-1&&void 0!==d?d+" | "+this.currentMeasure:n[0];var c={};c=this.persistSettings.chartSeries?this.frameChartSeries(this.persistSettings.chartSeries):c,(i.i(o.isNullOrUndefined)(c.palettes)||0===c.palettes.length)&&!i.i(o.isNullOrUndefined)(this.persistSettings.palettes)&&this.persistSettings.palettes.length>0&&(c.palettes=this.persistSettings.palettes),c.dataSource=this.columnGroupObject[this.currentColumn],c.xName="x",c.yName="y",this.persistSettings.chartSeries&&this.persistSettings.chartSeries.dataLabel?(c.dataLabel=this.persistSettings.chartSeries.dataLabel,c.dataLabel.name="x"):(c.dataLabel={visible:!0,position:"Outside",name:"x"},this.parent.setProperties({chartSettings:{chartSeries:{dataLabel:{visible:!0,position:"Outside"}}}},!0)),this.accEmptyPoint&&c.emptyPointSettings?c.emptyPointSettings.mode="Zero":this.accEmptyPoint&&(c.emptyPointSettings={mode:"Zero"}),c.name=this.currentColumn,"Doughnut"===p?(c.type="Pie",c.innerRadius=this.chartSettings.chartSeries.innerRadius?this.chartSettings.chartSeries.innerRadius:"40%"):"Pie"===p&&(c.innerRadius=this.chartSettings.chartSeries.innerRadius?this.chartSettings.chartSeries.innerRadius:"0"),this.chartSeries=this.chartSeries.concat(c)}else for(var g=0,m=n;g<m.length;g++){var f=m[g],c={};c=this.persistSettings.chartSeries?this.frameChartSeries(this.persistSettings.chartSeries):c,!i.i(o.isNullOrUndefined)(c.palettes)&&c.palettes.length>0&&(i.i(o.isNullOrUndefined)(this.persistSettings.palettes)||0===this.persistSettings.palettes.length)&&(this.chartSettings.palettes=c.palettes);for(var h=0;h<this.columnGroupObject[f].length;h++){var v=this.engineModule.fieldList[this.currentMeasure];this.columnGroupObject[f][h].x=0!==this.parent.dataSourceSettings.rows.length||this.chartSettings.showMultiLevelLabels?""===this.columnGroupObject[f][h].x?this.parent.localeObj.getConstant("blank"):this.columnGroupObject[f][h].x:this.parent.localeObj.getConstant("total")+" "+this.parent.localeObj.getConstant(v.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" "+(i.i(o.isNullOrUndefined)(v.caption)?v.name:v.caption)}c.dataSource=this.columnGroupObject[f],c.xName="x",c.yName="y",c.visible=!0;var S=void 0;if(this.chartSettings.enableMultipleAxis){var y=f.split(" | ")[1];y=i.i(o.isNullOrUndefined)(u[y])?y:u[y],S=f.split(" | ")[0]+" | "+y}if(c.name=this.chartSettings.enableMultipleAxis?S:f.split(" | ")[0],this.chartSettings.showPointColorByMembers&&this.chartSettings.enableMultipleAxis){c.name=c.name.split(" |")[0];var b=this.chartSeriesInfo[c.name].caption;c.name=void 0!==b&&null!==b?b:c.name,t[c.name]?(c.fill=t[c.name].color,this.chartSeriesInfo[c.name].colorIndex.push(this.selectedLegend++),c.name=void 0):(e=s[e]?e:0,t[c.name]={name:c.name,color:s[e]},c.fill=s[e++],this.chartSeriesInfo[c.name].colorIndex.push(this.selectedLegend++))}if(["Radar","Polar"].indexOf(p)<0){var C=f.split(" | ")[1];c.tooltipMappingName=this.measuresNames[C],c.yAxisName=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.measureList.join("_"):this.measuresNames[C]?this.measuresNames[C]:C}this.persistSettings.chartSeries&&this.persistSettings.chartSeries.emptyPointSettings&&(c.emptyPointSettings=this.persistSettings.chartSeries.emptyPointSettings),c.emptyPointSettings||(c.emptyPointSettings={mode:"Zero"}),this.chartSeries=this.chartSeries.concat(c)}var x={series:this.chartSeries,cancel:!1},w=this;this.parent.trigger(r.W,x,function(e){e.cancel?(w.element&&i.i(o.remove)(w.element),w.parent.notify(r._23,{})):w.bindChart()})},e.prototype.frameObjectWithKeys=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)r[t[i]]=e[t[i]],i++;return r},e.prototype.frameChartSeries=function(e){for(var t=Object.keys(e),i=0,r={};i<t.length;)this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type)>-1&&["fill","dashArray","width","segmentAxis","drawType","isClosed","segments","stackingGroup","marker","errorBar","trendlines","minRadius","splineType","maxRadius","cardinalSplineTension","columnWidth","columnSpacing","cornerRadius"].indexOf(t[i])>-1||this.accumulationType.indexOf(this.parent.chartSettings.chartSeries.type)<0&&["endAngle","explode","explodeAll","explodeIndex","explodeOffset","gapRatio","groupMode","groupTo","neckHeight","neckWidth","pyramidMode","startAngle","dataLabel","innerRadius"].indexOf(t[i])>-1?i++:(r[t[i]]=e[t[i]],i++);return r},e.prototype.bindChart=function(){this.parent.showWaitingPopup();var e=this.configXAxis(),t=this.configTooltipSettings(),r=this.configLegendSettings(),s=this.configZoomSettings(),l=this.frameAxesWithRows(),p=this.chartSettings.chartSeries.type;"Both"===this.parent.displayOption.view?this.element="Chart"===this.parent.displayOption.primary?this.parent.element.insertBefore(this.element?this.element:i.i(o.createElement)("div",{className:n._10,id:this.parent.element.id+"_chart"}),this.parent.element.querySelector("."+n._31)):this.parent.element.appendChild(this.element?this.element:i.i(o.createElement)("div",{className:n._10,id:this.parent.element.id+"_chart"})):this.element||(this.element=this.parent.element.appendChild(i.i(o.createElement)("div",{className:n._10,id:this.parent.element.id+"_chart"}))),!this.chartElement&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&"Pareto"!==this.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+n._10).innerHTML="",this.chartElement=this.parent.element.querySelector("."+n._10).appendChild(i.i(o.createElement)("div",{className:n._266,id:this.parent.element.id+"_chartInner"}))),this.parent.element.querySelector("."+n._266)&&(this.parent.element.querySelector("."+n._266).innerHTML=""),this.parent.showGroupingBar?this.element.style.minWidth="400px !important":this.element.style.minWidth="310px !important";var u=this.parent.width.toString();this.parent.showToolbar&&this.parent.grid&&(u=this.parent.getGridWidthAsNumber().toString());var h=this.getChartHeight();this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(p)<0&&"Pareto"!==this.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+n._10).style.height=("auto"===h?this.getChartAutoHeight():h)+"px",this.parent.element.querySelector("."+n._10).style.width=u+"px","Polar"!==this.parent.chartSettings.chartSeries.type&&"Radar"!==this.parent.chartSettings.chartSeries.type&&(this.parent.element.querySelector("."+n._10).style.overflow="auto",this.parent.element.querySelector("."+n._10).style.overflowX="hidden")),this.parent.chart&&("accumulationchart"===this.parent.chart.getModuleName()&&this.accumulationType.indexOf(p)<0||"chart"===this.parent.chart.getModuleName()&&this.accumulationType.indexOf(p)>-1&&"Pareto"!==this.chartSettings.chartSeries.type)&&(this.parent.chart.destroy(),i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element)&&(i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).innerHTML="",i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).appendChild(i.i(o.createElement)("div",{className:n._266,id:this.parent.element.id+"_chartInner"})))),!(this.parent.chart&&this.parent.chart.element&&this.parent.element.querySelector(".e-chart")||this.parent.element.querySelector(".e-accumulationchart"))||this.parent.toolbarModule&&this.parent.toolbarModule.isMultiAxisChange?(this.parent.toolbarModule&&this.parent.toolbarModule.isMultiAxisChange&&this.parent.chart&&(this.parent.chart.isDestroyed||this.parent.chart.destroy(),this.parent.chart=void 0,i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).innerHTML="",i.i(o.select)("#"+this.parent.element.id+"_chart",this.parent.element).appendChild(i.i(o.createElement)("div",{className:n._266,id:this.parent.element.id+"_chartInner"})),this.parent.toolbarModule.isMultiAxisChange=!1),a.Chart.Inject(a.ColumnSeries,a.StackingColumnSeries,a.RangeColumnSeries,a.BarSeries,a.StackingBarSeries,a.ScatterSeries,a.BubbleSeries,a.LineSeries,a.StepLineSeries,a.SplineSeries,a.SplineAreaSeries,a.MultiColoredLineSeries,a.PolarSeries,a.RadarSeries,a.AreaSeries,a.RangeAreaSeries,a.StackingAreaSeries,a.StepAreaSeries,a.StackingLineSeries,a.MultiColoredAreaSeries,a.ParetoSeries,a.Legend,a.Tooltip,a.Category,a.MultiLevelLabel,a.ScrollBar,a.Zoom,a.Export,a.Crosshair,a.Selection,a.StripLine,a.DataLabel),a.AccumulationChart.Inject(a.PieSeries,a.FunnelSeries,a.PyramidSeries,a.AccumulationDataLabel,a.AccumulationLegend,a.AccumulationTooltip,a.Export),this.accumulationType.indexOf(p)>-1?this.parent.chart=new a.AccumulationChart({series:this.chartSeries.length>0?this.chartSeries:[{}],legendSettings:r,tooltip:t,width:u,height:h.toString(),title:this.chartSettings.title,enableSmartLabels:this.chartSettings.enableSmartLabels,center:this.chartSettings.pieCenter,enableBorderOnMouseMove:this.chartSettings.enableBorderOnMouseMove,highlightMode:this.chartSettings.highlightMode,highlightPattern:this.chartSettings.highlightPattern,titleStyle:this.chartSettings.titleStyle,subTitle:this.chartSettings.subTitle,subTitleStyle:this.chartSettings.subTitleStyle,margin:this.chartSettings.margin,border:this.chartSettings.border,background:this.chartSettings.background,theme:this.chartSettings.theme,selectionMode:this.chartSettings.accumulationSelectionMode,isMultiSelect:this.chartSettings.isMultiSelect,enableExport:this.chartSettings.enableExport,selectedDataIndexes:this.chartSettings.selectedDataIndexes,enableAnimation:this.chartSettings.enableAnimation,useGroupingSeparator:this.chartSettings.useGroupingSeparator,locale:this.parent.locale,enableRtl:this.parent.enableRtl,beforePrint:this.chartSettings.beforePrint?this.chartSettings.beforePrint.bind(this):void 0,animationComplete:this.chartSettings.animationComplete?this.chartSettings.animationComplete.bind(this):void 0,legendRender:this.chartSettings.legendRender?this.chartSettings.legendRender.bind(this):void 0,textRender:this.chartSettings.textRender?this.chartSettings.textRender.bind(this):void 0,pointRender:this.chartSettings.pointRender?this.chartSettings.pointRender.bind(this):void 0,seriesRender:this.chartSettings.seriesRender?this.chartSettings.seriesRender.bind(this):void 0,chartMouseMove:this.chartSettings.chartMouseMove?this.chartSettings.chartMouseMove.bind(this):void 0,chartMouseClick:this.chartSettings.chartMouseClick?this.chartSettings.chartMouseClick.bind(this):void 0,pointMove:this.chartSettings.pointMove?this.chartSettings.pointMove.bind(this):void 0,pointClick:this.pointClick.bind(this),chartMouseLeave:this.chartSettings.chartMouseLeave?this.chartSettings.chartMouseLeave.bind(this):void 0,chartMouseDown:this.chartSettings.chartMouseDown?this.chartSettings.chartMouseDown.bind(this):void 0,chartMouseUp:this.chartSettings.chartMouseUp?this.chartSettings.chartMouseUp.bind(this):void 0,tooltipRender:this.tooltipRender.bind(this),loaded:this.loaded.bind(this),load:this.load.bind(this),resized:this.resized.bind(this)}):this.parent.chart=new a.Chart({series:this.chartSeries.length>0?this.chartSeries:[{}],legendSettings:r,tooltip:t,zoomSettings:s,axes:"Polar"===p||"Radar"===p?[]:l.axes,rows:"Polar"===p||"Radar"===p?[{}]:"Bar"===p||"StackingBar"===p||"StackingBar100"===p||"Pareto"===p&&this.chartSettings.enableMultipleAxis?[{height:"100%"}]:l.rows,columns:"Polar"===p||"Radar"===p?[{}]:"Bar"===p||"StackingBar"===p||"StackingBar100"===p&&this.chartSettings.enableMultipleAxis?l.columns:[{width:"100%"}],primaryYAxis:"Polar"===p||"Radar"===p?l.axes[0]:{visible:!1},primaryXAxis:e,width:u,height:"Polar"!==this.parent.chartSettings.chartSeries.type&&"Radar"!==this.parent.chartSettings.chartSeries.type&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&"Pareto"!==this.parent.chartSettings.chartSeries.type&&this.parent.dataSourceSettings.values.length>0?Number(h)>235*this.parent.dataSourceSettings.values.length+100?isNaN(Number(h))?h.toString():(Number(h)-5).toString():!isNaN(Number(h))||this.parent.dataSourceSettings.values.length>1?(235*this.parent.dataSourceSettings.values.length+100).toString():h.toString():h.toString(),title:this.chartSettings.title,titleStyle:this.chartSettings.titleStyle,subTitle:this.chartSettings.subTitle,subTitleStyle:this.chartSettings.subTitleStyle,margin:this.chartSettings.margin,border:this.chartSettings.border,background:this.chartSettings.background,chartArea:this.chartSettings.chartArea,palettes:this.chartSettings.palettes,theme:this.chartSettings.theme,crosshair:this.chartSettings.crosshair,selectionMode:this.chartSettings.selectionMode,isMultiSelect:this.chartSettings.isMultiSelect,enableExport:this.chartSettings.enableExport,selectedDataIndexes:this.chartSettings.selectedDataIndexes,isTransposed:this.chartSettings.isTransposed,enableAnimation:this.chartSettings.enableAnimation,enableCanvas:this.chartSettings.enableCanvas,useGroupingSeparator:this.chartSettings.useGroupingSeparator,description:this.chartSettings.description,tabIndex:this.chartSettings.tabIndex,locale:this.parent.locale,enableRtl:this.parent.enableRtl,enableSideBySidePlacement:this.chartSettings.enableSideBySidePlacement,beforePrint:this.chartSettings.beforePrint?this.chartSettings.beforePrint.bind(this):void 0,animationComplete:this.chartSettings.animationComplete?this.chartSettings.animationComplete.bind(this):void 0,legendRender:this.chartSettings.legendRender?this.chartSettings.legendRender.bind(this):void 0,textRender:this.chartSettings.textRender?this.chartSettings.textRender.bind(this):void 0,pointRender:this.chartSettings.pointRender?this.chartSettings.pointRender.bind(this):void 0,seriesRender:this.chartSettings.seriesRender?this.chartSettings.seriesRender.bind(this):void 0,chartMouseMove:this.chartSettings.chartMouseMove?this.chartSettings.chartMouseMove.bind(this):void 0,chartMouseClick:this.chartSettings.chartMouseClick?this.chartSettings.chartMouseClick.bind(this):void 0,pointMove:this.chartSettings.pointMove?this.chartSettings.pointMove.bind(this):void 0,pointClick:this.pointClick.bind(this),chartMouseLeave:this.chartSettings.chartMouseLeave?this.chartSettings.chartMouseLeave.bind(this):void 0,chartMouseDown:this.chartSettings.chartMouseDown?this.chartSettings.chartMouseDown.bind(this):void 0,chartMouseUp:this.chartSettings.chartMouseUp?this.chartSettings.chartMouseUp.bind(this):void 0,dragComplete:this.chartSettings.dragComplete?this.chartSettings.dragComplete.bind(this):void 0,zoomComplete:this.chartSettings.zoomComplete?this.chartSettings.zoomComplete.bind(this):void 0,scrollStart:this.chartSettings.scrollStart?this.chartSettings.scrollStart.bind(this):void 0,scrollEnd:this.chartSettings.scrollEnd?this.chartSettings.scrollEnd.bind(this):void 0,scrollChanged:this.chartSettings.scrollChanged?this.chartSettings.scrollChanged.bind(this):void 0,tooltipRender:this.tooltipRender.bind(this),legendClick:this.legendClick.bind(this),loaded:this.loaded.bind(this),load:this.load.bind(this),resized:this.resized.bind(this),axisLabelRender:this.axisLabelRender.bind(this),multiLevelLabelClick:this.multiLevelLabelClick.bind(this),axisMultiLabelRender:this.multiLevelLabelRender.bind(this)}),this.parent.chart.isStringTemplate=!0):(this.parent.chart.series=this.chartSeries,this.parent.chart.title=this.parent.chartSettings.title,this.parent.chart.subTitle=this.parent.chartSettings.subTitle,this.parent.chart.background=this.parent.chartSettings.background,this.parent.chart.theme=this.parent.chartSettings.theme,this.parent.chart.legendSettings=r,this.parent.chart.selectionMode=this.parent.chartSettings.selectionMode,this.parent.chart.enableExport=this.parent.chartSettings.enableExport,this.parent.chart.isMultiSelect=this.parent.chartSettings.isMultiSelect,this.parent.chart.enableAnimation=this.parent.chartSettings.enableAnimation,this.parent.chart.useGroupingSeparator=this.parent.chartSettings.useGroupingSeparator,this.parent.chart.highlightPattern=this.parent.chartSettings.highlightPattern,this.accumulationType.indexOf(p)>-1?(this.parent.chart.enableBorderOnMouseMove=this.parent.chartSettings.enableBorderOnMouseMove,this.parent.chart.highlightMode=this.parent.chartSettings.highlightMode,this.parent.chart.enableSmartLabels=this.parent.chartSettings.enableSmartLabels):(this.parent.chart.palettes=this.parent.chartSettings.palettes,this.parent.chart.isTransposed=this.parent.chartSettings.isTransposed,this.parent.chart.enableSideBySidePlacement=this.parent.chartSettings.enableSideBySidePlacement,this.parent.chart.tabIndex=this.parent.chartSettings.tabIndex,this.parent.chart.description=this.parent.chartSettings.description,this.parent.chart.enableCanvas=this.parent.chartSettings.enableCanvas),"Polar"===p||"Radar"===p?(this.parent.chart.primaryXAxis=e,this.parent.chart.primaryYAxis.visible=!0,this.parent.chart.primaryYAxis=l.axes[0],this.parent.chart.axes=[],this.parent.chart.rows=[{}]):this.accumulationType.indexOf(p)<0&&"chart"===this.parent.chart.getModuleName()&&(this.parent.chart.primaryYAxis.visible=!1,this.parent.chart.primaryXAxis=e,this.parent.chart.axes=l.axes,"Bar"===p||"StackingBar"===p||"StackingBar100"===p&&this.chartSettings.enableMultipleAxis?(this.parent.chart.rows=[{height:"100%"}],this.parent.chart.columns=l.columns):"Pareto"===p&&this.chartSettings.enableMultipleAxis?(this.parent.chart.rows=[{height:"100%"}],this.parent.chart.columns=[{width:"100%"}]):(this.parent.chart.rows=l.rows,this.parent.chart.columns=[{width:"100%"}])),this.parent.chart.refresh(),this.accumulationType.indexOf(p)>-1&&"accumulationchart"===this.parent.chart.getModuleName()&&(0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length)&&(this.parent.hideWaitingPopup(),this.parent.pivotFieldListModule&&i.i(d.hideSpinner)(this.parent.pivotFieldListModule.fieldListSpinnerElement))),this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis?this.parent.chart.appendTo("#"+this.parent.element.id+"_chartInner"):this.parent.chart.appendTo("#"+this.parent.element.id+"_chart")},e.prototype.legendClick=function(e){if(this.chartSettings.showPointColorByMembers&&this.chartSettings.enableMultipleAxis)for(var t=this.chartSeriesInfo[e.legendText].colorIndex,i=1;i<t.length;i++)e.chart.series[t[i]].visible=!e.chart.series[t[i]].visible;this.parent.trigger(r.Q,e)},e.prototype.pointClick=function(e){var t=e.series.dataSource?e.series.dataSource:this.parent.chart.series[e.seriesIndex].dataSource;if((["Pie","Funnel","Doughnut","Pyramid","Radar","Polar"].indexOf(this.parent.chartSettings.chartSeries.type)>-1||!this.parent.chartSettings.showMultiLevelLabels)&&("olap"===this.parent.dataType||this.parent.dataSourceSettings.rows.length>1)){this.pivotIndex={rIndex:t?t[e.pointIndex].rIndex:void 0,cIndex:t?t[e.pointIndex].cIndex:void 0},this.creatMenu();var i=this.parent.element.getBoundingClientRect(),n=(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:0)+(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:0)+(window.scrollY||document.documentElement.scrollTop)+i.top;this.accumulationMenu.open(n+e.y,e.x+i.left+(window.scrollX||document.documentElement.scrollLeft))}else if((this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&this.parent.drillThroughModule){var a=t[e.pointIndex].rIndex,o=t[e.pointIndex].cIndex;this.parent.drillThroughModule.executeDrillThrough(this.parent.pivotValues[a][o],a,o)}this.parent.trigger(r._12,e)},e.prototype.frameAxesWithRows=function(){var e=[],t=[],r=[],n=[],a=this.persistSettings.chartSeries&&("StackingColumn100"===this.persistSettings.chartSeries.type||"StackingBar100"===this.persistSettings.chartSeries.type||"StackingArea100"===this.persistSettings.chartSeries.type||"StackingLine100"===this.persistSettings.chartSeries.type),l=["PercentageOfGrandTotal","PercentageOfColumnTotal","PercentageOfRowTotal","PercentageOfDifferenceFrom","PercentageOfParentRowTotal","PercentageOfParentColumnTotal","PercentageOfParentTotal"];if(this.chartSettings.enableMultipleAxis)for(var d=0,p=100/this.dataSourceSettings.values.length+"%",u=0,h=this.dataSourceSettings.values;u<h.length;u++){var c=h[u],g=this.engineModule.fieldList[c.name],m=("olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(g.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" ")+g.caption;n.push(m);for(var f=void 0,v=0,S=this.dataSourceSettings.formatSettings;v<S.length;v++){var y=S[v];if(y.name===c.name){f=y;break}}var b=-1!==s.a.inArray(g.aggregateType,l)?"P2":f?null===f.format.toLowerCase().match(/n|p|c/)?"N":f.format:"olap"===this.parent.dataType?this.getFormat(g.formatString):"N",C="Polar"===this.chartSettings.chartSeries.type||"Radar"===this.chartSettings.chartSeries.type,x={};x=this.persistSettings.primaryYAxis?this.frameObjectWithKeys(this.persistSettings.primaryYAxis):x,x.labelFormat=x.labelFormat?x.labelFormat:a?"":C?"N":b,x.title="Combined"===this.chartSettings.multipleAxisMode?n.join(" - "):x.title?x.title:m,x.zoomFactor=i.i(o.isNullOrUndefined)(this.chartSettings.primaryYAxis.zoomFactor)?1:this.chartSettings.primaryYAxis.zoomFactor,x.edgeLabelPlacement=this.chartSettings.primaryYAxis.edgeLabelPlacement?this.chartSettings.primaryYAxis.edgeLabelPlacement:this.persistSettings.primaryYAxis.edgeLabelPlacement,"Bar"===this.chartSettings.chartSeries.type||"StackingBar"===this.chartSettings.chartSeries.type||"StackingBar100"===this.chartSettings.chartSeries.type?x.plotOffsetRight=x.plotOffsetRight?x.plotOffsetRight:30:x.plotOffsetTop=x.plotOffsetTop?x.plotOffsetTop:30,C||(x.name="Combined"===this.chartSettings.multipleAxisMode?this.measureList.join("_"):this.measuresNames[c.name]?this.measuresNames[c.name]:c.name),e=e.concat(x),"Combined"===this.chartSettings.multipleAxisMode&&(e=[e[e.length-1]]),"Stacked"===this.chartSettings.multipleAxisMode?(x.rowIndex=d,x.columnIndex=d,t.push({height:p}),r.push({width:p})):(x.rowIndex=0,x.columnIndex=0,t=[{height:"100%"}],r=[{width:"100%"}]),d++}else{for(var g=this.engineModule.fieldList[this.currentMeasure],m=("olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(g.aggregateType)+" "+this.parent.localeObj.getConstant("of")+" ")+g.caption,f=void 0,w=0,T=this.dataSourceSettings.formatSettings;w<T.length;w++){var c=T[w];if(c.name===this.currentMeasure){f=c;break}}var M=void 0;f&&(M=f.format.length);var x={},b=-1!==s.a.inArray(g.aggregateType,l)?"P2":f?null===f.format.toLowerCase().match(/n[0-10]|p[0-10]|c[0-10]/)||M>3?"N":f.format:"olap"===this.parent.dataType?this.getFormat(g.formatString):"N";x=this.persistSettings.primaryYAxis?this.frameObjectWithKeys(this.persistSettings.primaryYAxis):x,x.zoomFactor=i.i(o.isNullOrUndefined)(this.chartSettings.primaryYAxis.zoomFactor)?1:this.chartSettings.primaryYAxis.zoomFactor,x.rowIndex=0,x.columnIndex=0,x.edgeLabelPlacement=this.chartSettings.primaryYAxis.edgeLabelPlacement?this.chartSettings.primaryYAxis.edgeLabelPlacement:this.persistSettings.primaryYAxis.edgeLabelPlacement,"Polar"!==this.chartSettings.chartSeries.type&&"Radar"!==this.chartSettings.chartSeries.type&&(x.name=this.measuresNames[this.currentMeasure]?this.measuresNames[this.currentMeasure]:this.currentMeasure),x.labelFormat=x.labelFormat?x.labelFormat:a?"":b,x.title=x.title?x.title:m,e=e.concat(x),t.push({height:"100%"}),r.push({width:"100%"})}return{axes:e,rows:t,columns:r}},e.prototype.getFormat=function(e){return e="Currency"===e?"C":"Percent"===e?"P":"N"},e.prototype.getColumnTotalIndex=function(e){for(var t={},r=Object.keys(e),n=0,a=r;n<a.length;n++){var s=a[n],l=e[Number(s)],d=void 0;if(!i.i(o.isNullOrUndefined)(l)){d=Object.keys(l);for(var p=0,u=d;p<u.length;p++){var h=u[p],c=l[Number(h)];if(!i.i(o.isNullOrUndefined)(c)){if("column"!==c.axis)return t;("sum"===c.type||0!==this.dataSourceSettings.columns.length&&"grand sum"===c.type)&&-1!==c.rowSpan&&(t[c.colIndex]=c.colIndex)}}}}return t},e.prototype.groupHierarchyWithLevels=function(e,t){var r,n,a={},s=0,l={};this.measurePos=this.engineModule.tupRowInfo[0].measurePosition;for(var d=0;d<e.length;d++){var p=e[d][0];p&&"row"===p.axis&&"grand sum"!==p.type&&(i.i(o.isNullOrUndefined)(a[p.hierarchy])?(3===p.memberType?s===this.measurePos?(t[this.measurePos]=p.hierarchy,a[p.hierarchy]=(r={},r[p.levelUniqueName]=p.levelUniqueName,r)):s--:(t[s]=p.hierarchy,a[p.hierarchy]=(n={},n[p.levelUniqueName]=p.levelUniqueName,n)),s++):a[p.hierarchy][p.levelUniqueName]=p.levelUniqueName)}for(var u=-1,h=0;h<t.length;h++)this.measurePos!==h&&(l[t[h]]={start:u+1,end:u+Object.keys(a[t[h]]).length},u=l[t[h]].end);return l},e.prototype.frameMultiLevelLabels=function(){for(var e=Object.keys(this.headerColl),t=this.headerColl[-.5],i=0,r=e;i<r.length;i++){for(var n=r[i],a=Number(n),o=this.headerColl[a],s=0,l=!1;s<=this.maxLevel;)l?o[s]||(o[s]={name:o[s-1].name,text:"",hasChild:o[s-1].hasChild,isDrilled:o[s-1].isDrilled,levelName:o[s-1].levelName,level:o[s-1].level,fieldName:o[s-1].fieldName,rowIndex:o[s-1].rowIndex,colIndex:o[s-1].colIndex,span:-1}):o[s]?l=!0:o[s]=t[s],s++;t=this.headerColl[a]}for(var d={},p=0,u=e;p<u.length;p++){for(var n=u[p],a=Number(n),o=this.headerColl[a],h=Object.keys(o),c=0,g=h;c<g.length;c++){var m=g[c],f=Number(m);if(d[f]){var v=d[f].length;o[f].levelName===t[f].levelName?d[f][v-1].end=d[f][v-1].end+1:d[f].push({start:a,end:a+1,text:o[f].text,type:-1===o[f].span?"WithoutTopandBottomBorder":"WithoutTopBorder",customAttributes:o[f]})}else d[f]=[{start:a,end:a+1,text:o[f].text,type:-1===o[f].span?"WithoutTopandBottomBorder":"WithoutTopBorder",customAttributes:o[f]}]}t=o}for(var S=Object.keys(d).length,y=[],b=S-1;b>-1;b--)y.push({categories:d[b],border:{width:1},overflow:"Trim"});return y},e.prototype.getZoomFactor=function(){this.calculatedWidth=this.getCalulatedWidth();var e=10*this.chartSeries.length>120?10*this.chartSeries.length:120,t=this.chartSeries.length>0?this.calculatedWidth/(Object.keys(this.chartSeries[0].dataSource).length*e):1;return t=t<1&&t>0?t:1},e.prototype.getCalulatedWidth=function(){return isNaN(Number(this.parent.width))?this.parent.width.indexOf("%")>-1?this.calculatedWidth=this.parent.element.clientWidth*(parseFloat(this.parent.width)/100):this.parent.width.indexOf("px")>-1?this.calculatedWidth=Number(this.parent.width.toString().split("px")[0]):this.calculatedWidth=this.parent.element.clientWidth:this.calculatedWidth=Number(this.parent.width),this.calculatedWidth},e.prototype.configTooltipSettings=function(){var e=this.persistSettings.tooltip?this.persistSettings.tooltip:this.chartSettings.tooltip;return e.enable=void 0===e.enable||e.enable,e.enable&&e.template&&(this.templateFn=this.parent.templateParser(e.template)),this.parent.tooltipTemplate&&(e.template=e.template?e.template:this.parent.tooltipTemplate),e.header=e.header?e.header:"",e.enableMarker=void 0===e.enableMarker||e.enableMarker,e},e.prototype.configLegendSettings=function(){var e={};if(this.chartSettings.legendSettings)for(var t=0,i=Object.keys(this.chartSettings.legendSettings);t<i.length;)e[i[t]]=this.chartSettings.legendSettings[i[t]],t++;return e.visible=!1!==e.visible,e.padding=e.padding?e.padding:25,e.shapePadding=e.shapePadding?e.shapePadding:10,e},e.prototype.configXAxis=function(){var e={};return e=this.persistSettings.primaryXAxis?this.frameObjectWithKeys(this.persistSettings.primaryXAxis):e,e.valueType="Category",e.labelIntersectAction=e.labelIntersectAction?e.labelIntersectAction:"Rotate45",e.title=e.title?e.title:this.dataSourceSettings.rows.map(function(e){return e.caption||e.name}).join(" / "),e.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?this.getZoomFactor():this.parent.chartSettings.primaryXAxis.zoomFactor,this.parent.chartSettings.zoomSettings.enableScrollbar||(e.zoomFactor=1),this.chartSettings.showMultiLevelLabels&&"Pareto"!==this.chartSettings.chartSeries.type?(e.multiLevelLabels=this.frameMultiLevelLabels(),e.border={width:1,type:"WithoutTopandBottomBorder"},e.majorTickLines={width:0,height:-10}):(e.multiLevelLabels=[],e.border={width:1,type:"Rectangle"},e.majorTickLines={width:0,height:5}),e},e.prototype.configZoomSettings=function(){var e=this.chartSettings.zoomSettings;return e.enableSelectionZooming=void 0===e.enableSelectionZooming||e.enableSelectionZooming,e.enableScrollbar=void 0===e.enableScrollbar||e.enableScrollbar,e},e.prototype.tooltipRender=function(e){var t=this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&"Radar"!==this.chartSettings.chartSeries.type&&"Polar"!==this.chartSettings.chartSeries.type?e.series.tooltipMappingName:e.series.yAxisName?e.series.yAxisName.split("_CumulativeAxis")[0]:this.chartSettings.enableMultipleAxis&&this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&"Pareto"!==this.chartSettings.chartSeries.type?e.series.name?e.series.name.split(" | ")[1]:e.data.seriesName?e.data.seriesName.split(" | ")[1]:this.currentMeasure:this.measuresNames[this.currentMeasure]?this.measuresNames[this.currentMeasure]:this.currentMeasure,n=e.series.dataSource?e.series.dataSource:this.parent.chart.series[e.data.seriesIndex].dataSource,a=n?n[e.data.pointIndex].rIndex:void 0,s=n?n[e.data.pointIndex].cIndex:void 0,l=this.engineModule.fieldList[this.measuresNames[t]?this.measuresNames[t]:t],d="olap"===this.parent.dataType?"":this.parent.localeObj.getConstant(l.aggregateType),p=("olap"===this.parent.dataType?"":d+" "+this.parent.localeObj.getConstant("of")+" ")+l.caption,u=this.engineModule.pivotValues[a][s].formattedText,h=this.engineModule.formatFields[l.id],c=this.engineModule.getFormattedValue(e.point.y,l.id,u),g=h&&h.format&&null!==h.format.toLowerCase().match(/n|p|c/)&&this.chartSettings.useGroupingSeparator?"olap"===this.parent.dataType?c.toString():c.formattedText:u,m=this.parent.pivotValues[a][s].columnHeaders,f=i.i(o.isNullOrUndefined)(m)?void 0:"olap"===this.parent.dataType?this.chartSeriesInfo[m.toString().split(/~~|::/).join(" - ")].uniqueName:this.chartSeriesInfo[m.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).join(" - ")].uniqueName,v=e.point.x;if(this.parent.tooltipTemplate&&void 0!==this.parent.getTooltipTemplate()||this.chartSettings.tooltip.template){var S=n?this.parent.getHeaderField(a,s,"row"):"",y=n?this.parent.getHeaderField(a,s,"Column"):"",b={rowHeaders:v,columnHeaders:f,aggregateType:d,value:g,valueField:l.caption,rowFields:S,columnFields:y},C=void 0;C=this.parent.chartSettings&&this.parent.chartSettings.tooltip&&this.parent.chartSettings.tooltip.enable&&this.parent.chartSettings.tooltip.template?this.tooltipTemplateFn()(b,this,"tooltipTemplate",this.element.id+"1tooltipTemplate")[0].outerHTML:this.parent.getTooltipTemplate()(b,this,"tooltipTemplate",this.element.id+"tooltipTemplate")[0].outerHTML,e.template=C}else e.text=p+": "+g+(0===this.dataSourceSettings.columns.length?"":" <br/>"+this.parent.localeObj.getConstant("column")+": "+f)+(0===this.dataSourceSettings.rows.length?"":" <br/>"+this.parent.localeObj.getConstant("row")+": "+v),this.parent.trigger(r.P,e)},e.prototype.tooltipTemplateFn=function(){return this.templateFn},e.prototype.loaded=function(e){this.parent.isChartLoaded=!0;var t=this.parent.grid?this.parent.getGridWidthAsNumber().toString():this.parent.getWidthAsNumber().toString();if(this.parent.chart&&this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.showFieldList&&"Chart"===this.parent.currentView&&this.parent.groupingBarModule.alignIcon(),this.chartSettings.showMultiLevelLabels){var a=s.a.inArray(this.chartSettings.chartSeries.type,["Bar","StackingBar","StackingBar100"])>-1?"_chartYAxisMultiLevelLabel0":"_chartXAxisMultiLevelLabel0";i.i(o.isNullOrUndefined)(i.i(o.select)("#"+this.parent.element.id+a,this.parent.element))||this.parent.element.querySelector("#"+this.parent.element.id+a).setAttribute("cursor","pointer")}this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&(["Pie","Funnel","Pyramid","Doughnut","Radar","Polar","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)>=0?this.parent.element.querySelector("."+n._10).style.overflow="visible":(this.parent.element.querySelector("."+n._10).style.overflow="auto",this.parent.element.querySelector("."+n._10).style.overflowX="hidden"),this.parent.element.querySelector("."+n._10).style.width=t+"px"),this.updateView(),"Chart"!==this.parent.displayOption.primary&&"Chart"!==this.parent.displayOption.view||this.parent.notify(r._23,{}),this.parent.trigger(r.R,e),("Server"===this.parent.dataSourceSettings.mode&&this.parent.isServerWaitingPopup||"Local"===this.parent.dataSourceSettings.mode)&&this.parent.hideWaitingPopup()},e.prototype.updateView=function(){if(this.parent.grid&&this.parent.chart&&this.parent.showToolbar)if("Table"===this.parent.currentView){if(this.parent.grid.element.style.display="",this.parent.chart.element.style.display="none",this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector(".e-pivot-grouping-bar")&&this.parent.element.querySelector(".e-chart-grouping-bar")){var e=this.parent.element.querySelector(".e-pivot-grouping-bar");e.style.display="",e&&e.querySelector("."+n._193)&&null!=this.parent.groupingBarModule.gridPanel&&!this.parent.groupingBarModule.gridPanel.isDestroyed&&this.parent.groupingBarModule.gridPanel.refreshOverflow(),this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none"}this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="none")}else{if(this.parent.grid.element.style.display="none",this.parent.chart.element.style.display="",this.parent.showGroupingBar&&this.parent.groupingBarModule&&this.parent.element.querySelector(".e-pivot-grouping-bar")&&this.parent.element.querySelector(".e-chart-grouping-bar")){this.parent.element.querySelector(".e-pivot-grouping-bar").style.display="none";var t=this.parent.element.querySelector(".e-chart-grouping-bar");t.style.display="",t&&t.querySelector("."+n._193)&&null!=this.parent.groupingBarModule.chartPanel&&!this.parent.groupingBarModule.chartPanel.isDestroyed&&this.parent.groupingBarModule.chartPanel.refreshOverflow()}this.parent.chartSettings.enableMultipleAxis&&this.parent.chartSettings.enableScrollOnMultiAxis&&(this.parent.element.querySelector(".e-pivotchart").style.display="")}},e.prototype.creatMenu=function(){this.accumulationMenu&&!this.accumulationMenu.isDestroyed&&this.accumulationMenu.destroy();for(var e=(this.parent.allowDrillThrough||this.parent.editSettings.allowEditing)&&this.parent.drillThroughModule?["expand","collapse","drillThrough","exit"]:["expand","collapse","exit"],t=[],r=0;r<e.length;r++)t.push({id:this.parent.element.id+"_DrillMenuChart_"+e[r],text:this.parent.localeObj.getConstant(e[r]),items:[]});for(var n=this.getMenuItems(),a=[],s=[],r=0;r<n.length;r++)"expand"===n[r].type?a.push({id:this.element.id+"drillExpand_"+n[r].key,text:n[r].value}):s.push({id:this.element.id+"drillCollapse_"+n[r].key,text:n[r].value});a.length>0&&(t[0].items=a),s.length>0&&(t[1].items=s);var d={cssClass:this.parent.element.id+"_accumulationChart"+(this.parent.cssClass?" "+this.parent.cssClass:""),items:t,enableRtl:this.parent.enableRtl,beforeOpen:this.drillMenuOpen.bind(this),select:this.drillMenuSelect.bind(this),locale:this.parent.locale};this.accumulationMenu=new l.ContextMenu(d);var p;i.i(o.select)("#"+this.parent.element.id+"_accumulationChart",this.parent.element)?(p=i.i(o.select)("#"+this.parent.element.id+"_accumulationChart",this.parent.element),p.innerHTML=""):(p=i.i(o.createElement)("ul",{id:this.parent.element.id+"_accumulationChart"}),this.parent.element.appendChild(p)),this.accumulationMenu.isStringTemplate=!0,this.accumulationMenu.appendTo(p)},e.prototype.drillMenuOpen=function(e){e.items[0]&&e.items[0].text===this.parent.localeObj.getConstant("expand")&&e.items[0].items&&0===e.items[0].items.length&&this.accumulationMenu.enableItems([this.parent.localeObj.getConstant("expand")],!1),e.items[1]&&e.items[1].text===this.parent.localeObj.getConstant("collapse")&&e.items[1].items&&0===e.items[1].items.length&&this.accumulationMenu.enableItems([this.parent.localeObj.getConstant("collapse")],!1)},e.prototype.getMenuItems=function(){for(var e=this.pivotIndex.rIndex,t=[],i=this.engineModule.pivotValues,r=[],n=i[e][this.pivotIndex.cIndex],a=!i[e][0].isNamedSet&&i[e][0].hasChild?i[e][0].level:void 0,o="olap"===this.parent.dataType?n.rowHeaders.toString().split(/~~|::/):n.rowHeaders.toString().split(this.engineModule.valueSortSettings.headerDelimiter);i[e][0];){if(n=i[e][0],0!==o.length&&o.indexOf(n.formattedText.toString())===o.length-1){n.hasChild&&!n.isNamedSet&&r.indexOf(n.level)<0&&(a?a>=n.level:0!==a||0===n.level)&&(n.isDrilled&&n.hasChild?t.push({key:e,type:"collapse",value:n.formattedText}):t.push({key:e,type:"expand",value:n.formattedText}),r.push(n.level),a=a?a-1:n.level-1);var s=o.indexOf(n.formattedText.toString());o.splice(s,1)}0===n.level&&n.hasChild&&!n.isNamedSet&&(a=void 0,r=[]),e--}return t},e.prototype.drillMenuSelect=function(e){var t="olap"===this.parent.dataType?this.parent.olapEngineModule.pivotValues:this.parent.engineModule.pivotValues,i=e.element.id.split("_DrillMenuChart_")[1];if(0===e.element.id.indexOf(this.element.id+"drill")){var r=e.element.id.split(this.element.id+"drill")[1].indexOf("Expand")>=0?"drillExpand":"drillCollapse",n=Number(e.element.id.split(this.element.id+r+"_")[1]),a=t[n][0],o="olap"===this.parent.dataType?a.formattedText:a.actualText?a.actualText.toString():a.formattedText.toString(),s=a.formattedText?a.formattedText.toString():o,l=a.hasChild&&!a.isNamedSet?(a.isDrilled?" - ":" + ")+s:s,d="olap"===this.parent.dataType?this.engineModule.tupRowInfo[a.ordinal]:void 0,p=d?d.uNameCollection:a.valueSort.levelName.toString(),u={fieldName:a.valueSort.axis,level:a.level,hasChild:a.hasChild,levelName:p,name:o,text:l,rowIndex:n,colIndex:0,isDrilled:a.isDrilled,cell:a};"olap"===this.parent.dataType?this.parent.onDrill(void 0,u):this.onDrill({customAttributes:u})}else"drillThrough"===i?this.parent.drillThroughModule.executeDrillThrough(t[this.pivotIndex.rIndex][this.pivotIndex.cIndex],this.pivotIndex.rIndex,this.pivotIndex.rIndex):"exit"===i&&this.accumulationMenu.close()},e.prototype.getChartHeight=function(){var e,t;if(i.i(o.isNullOrUndefined)(this.parent.getHeightAsNumber()))e="auto";else{var r=this.parent.showToolbar?6:5;e=(this.parent.getHeightAsNumber()-r).toString(),t=this.parent.getHeightAsNumber()-r}if(i.i(o.isNullOrUndefined)(this.parent.getHeightAsNumber()))e="auto";else{var n=!1;null!==this.parent.element.querySelector(".e-chart-grouping-bar")&&"none"===this.parent.element.querySelector(".e-chart-grouping-bar").style.display.toLowerCase()&&(n=!0,this.parent.element.querySelector(".e-chart-grouping-bar").style.display="block"),this.parent.showToolbar&&this.parent.showGroupingBar?e=(t-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62)).toString():this.parent.showToolbar?e=(t-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.parent.showGroupingBar?e=(t-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62)).toString():(this.parent.chart&&parseInt(this.parent.chart.height,10)<200||t<200)&&(e="200"),n&&(this.parent.element.querySelector(".e-chart-grouping-bar").style.display="none")}return e},e.prototype.getChartAutoHeight=function(){var e=this.parent.element.offsetHeight<this.parent.minHeight?this.parent.minHeight:this.parent.element.offsetHeight;return this.parent.showToolbar&&this.parent.showGroupingBar?e=e-(this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62):this.parent.showToolbar?e-=this.parent.element.querySelector(".e-pivot-toolbar")?this.parent.element.querySelector(".e-pivot-toolbar").clientHeight:42:this.parent.showGroupingBar&&(e-=this.parent.element.querySelector(".e-chart-grouping-bar")?this.parent.element.querySelector(".e-chart-grouping-bar").clientHeight:62),e},e.prototype.axisLabelRender=function(e){if(this.chartSettings.showMultiLevelLabels&&"Pareto"!==this.chartSettings.chartSeries.type&&"primaryXAxis"===e.axis.name&&(e.text=""),"primaryXAxis"!==e.axis.name){var t=this.engineModule.formatFields[this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.currentMeasure:e.axis.name],i=this.engineModule.getFormattedValue(e.value,this.chartSettings.enableMultipleAxis&&"Combined"===this.chartSettings.multipleAxisMode?this.currentMeasure:e.axis.name,e.text),n=t&&t.format&&null!==t.format.toLowerCase().match(/n|p|c/)&&this.chartSettings.useGroupingSeparator?"olap"===this.parent.dataType?i.toString():i.formattedText:e.value.toString();e.text=n}this.parent.trigger(r.V,e)},e.prototype.multiLevelLabelClick=function(e){var t={axis:e.axis,text:e.text,cell:i.i(o.isNullOrUndefined)(e.customAttributes)?void 0:e.customAttributes.cell,cancel:!1};this.parent.trigger(r.G,t),!t.cancel&&e.customAttributes&&e.customAttributes.hasChild&&!e.customAttributes.cell.isNamedSet&&("olap"===this.parent.dataType?this.parent.onDrill(void 0,e.customAttributes):this.onDrill(e))},e.prototype.onDrill=function(e){var t=e.customAttributes,i=this.dataSourceSettings.drilledMembers[0]&&this.dataSourceSettings.drilledMembers[0].delimiter?this.dataSourceSettings.drilledMembers[0].delimiter:"**",n=t.fieldName,a=this.engineModule.pivotValues[t.rowIndex][t.colIndex],o=a.valueSort.levelName.split(this.engineModule.valueSortSettings.headerDelimiter).join(i),l=!1;if(0===this.dataSourceSettings.drilledMembers.length)this.parent.setProperties({dataSourceSettings:{drilledMembers:[{name:n,items:[o],delimiter:i}]}},!0);else{for(var d=0;d<this.dataSourceSettings.drilledMembers.length;d++){var p=this.dataSourceSettings.drilledMembers[d];if(o=o.split(i).join(p.delimiter?p.delimiter:i),i=p.delimiter=p.delimiter?p.delimiter:i,p.name===n){l=!0;var u=p.items.indexOf(o);u>-1?p.items.splice(u,1):p.items.push(o)}}l||this.dataSourceSettings.drilledMembers.push({name:n,items:[o],delimiter:i})}this.parent.showWaitingPopup();var h=this,c={fieldName:n,memberName:o,delimiter:i,axis:"row",action:t.isDrilled?"up":"down",currentCell:a},g={drillInfo:c,pivotview:h.parent};h.parent.trigger(r.z,g);var m={dataSourceSettings:s.a.getClonedDataSourceSettings(this.parent.dataSourceSettings)};this.parent.trigger(r.b,m),this.parent.setProperties({dataSourceSettings:m.dataSourceSettings},!0),h.parent.enableVirtualization||h.parent.enablePaging?"Server"===h.parent.dataSourceSettings.mode?h.parent.getEngine("onDrill",c,null,null,null,null,null):(h.engineModule.drilledMembers=h.dataSourceSettings.drilledMembers,h.engineModule.onDrill(c)):"Server"===h.parent.dataSourceSettings.mode?h.parent.getEngine("onDrill",c,null,null,null,null,null):h.engineModule.generateGridData(h.dataSourceSettings,!0),h.parent.allowServerDataBinding=!1,h.parent.setProperties({pivotValues:h.engineModule.pivotValues},!0),delete h.parent.bulkChanges.pivotValues,h.parent.allowServerDataBinding=!0;var f={dataSourceSettings:s.a.getClonedDataSourceSettings(this.parent.dataSourceSettings),pivotValues:this.parent.pivotValues};this.parent.trigger(r.c,f),h.engineModule.pivotValues=f.pivotValues,h.parent.renderPivotGrid()},e.prototype.isAttributeDrill=function(e,t){for(var i=!1,r=0;r<this.dataSourceSettings.drilledMembers.length;r++)if(this.dataSourceSettings.drilledMembers[r].name===e)for(var n=0;n<this.dataSourceSettings.drilledMembers[r].items.length;n++){for(var a=this.dataSourceSettings.drilledMembers[r].items[n].split(this.dataSourceSettings.drilledMembers[r].delimiter),o="",s=0;s<a.length;s++)t[s]&&t[s].uName&&(o=o+(""===o?"":this.dataSourceSettings.drilledMembers[r].delimiter)+(t[s].uName.indexOf("[Measures]")>-1?"[Measures]":t[s].uName));if(o===this.dataSourceSettings.drilledMembers[r].items[n]){i=!0;break}}return i},e.prototype.load=function(e){e.chart.zoomModule&&(e.chart.zoomModule.isZoomed=!0),this.parent.trigger(r.T,e)},e.prototype.multiLevelLabelRender=function(e){this.parent.trigger(r.S,e)},e.prototype.resized=function(e){this.accumulationType.indexOf(this.chartSettings.chartSeries.type)<0&&(e.chart.primaryXAxis.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?this.getZoomFactor():this.parent.chartSettings.primaryXAxis.zoomFactor,this.parent.chartSettings.zoomSettings.enableScrollbar||(e.chart.primaryXAxis.zoomFactor=i.i(o.isNullOrUndefined)(this.parent.chartSettings.primaryXAxis.zoomFactor)?1:this.parent.chartSettings.primaryXAxis.zoomFactor)),this.parent.trigger(r.U,e)},e.prototype.getResizedChartHeight=function(){return["Pie","Funnel","Pyramid","Doughnut","Radar","Polar","Pareto"].indexOf(this.parent.chartSettings.chartSeries.type)<0&&this.parent.chartSettings.enableScrollOnMultiAxis&&this.parent.chartSettings.enableMultipleAxis&&this.parent.dataSourceSettings.values.length>0?Number(this.parent.chart.height)>235*this.parent.dataSourceSettings.values.length+100?isNaN(Number(this.getChartHeight()))?this.getChartHeight().toString():(Number(this.getChartHeight())-5).toString():!isNaN(Number(this.getChartHeight()))||this.parent.dataSourceSettings.values.length>1?(235*this.parent.dataSourceSettings.values.length+100).toString():this.getChartHeight().toString():this.getChartHeight().toString()},e.prototype.destroy=function(){this.parent&&this.parent.isDestroyed||(this.engineModule&&!this.parent.destroyEngine&&(this.engineModule.fieldList={},this.engineModule={}),this.chartSeries&&(this.chartSeries=null),this.columnGroupObject&&(this.columnGroupObject=null),this.chartSeriesInfo&&(this.chartSeriesInfo={},this.selectedLegend=null),this.chartSettings&&(this.chartSettings=null),this.dataSourceSettings&&(this.dataSourceSettings=null),this.accumulationMenu&&!this.accumulationMenu.isDestroyed&&(this.accumulationMenu.destroy(),this.accumulationMenu=null),this.parent&&this.parent.chart&&!this.parent.chart.isDestroyed&&(this.parent.chart.destroy(),this.parent.chart=null))},e}())},function(e,t,i){"use strict";var r=i(20);i.d(t,"a",function(){return r.a})},function(e,t,i){"use strict";var r=i(37);i.d(t,"a",function(){return r.a});var n=i(21);i.d(t,"b",function(){return n.a});var a=i(35);i.d(t,"c",function(){return a.a});var o=i(36);i.d(t,"d",function(){return o.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(36),n=i(37),a=i(35),o=i(21),s=function(){function e(e){this.parent=e,this.parent.dialogRenderer=new r.a(this.parent),this.parent.treeViewModule=new n.a(this.parent),this.parent.axisTableModule=new a.a(this.parent),this.parent.axisFieldModule=new o.a(this.parent)}return e.prototype.render=function(){this.parent.dialogRenderer.render(),this.parent.isAdaptive||this.parent.treeViewModule.render(),this.parent.axisTableModule.render()},e}()},function(e,t,i){"use strict";var r=i(64);i.d(t,"a",function(){return r.a});var n=i(66);i.d(t,"b",function(){return n.a});var a=i(39);i.d(t,"c",function(){return a.a});var o=i(40);i.d(t,"d",function(){return o.a});var s=i(38);i.d(t,"e",function(){return s.a});var l=i(65);i.d(t,"f",function(){return l.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var r=i(71),n=(i.n(r),i(1)),a=i(0),o=(i.n(a),i(15)),s=function(){function e(e){this.actualrCnt=0,this.parent=e}return e.prototype.getModuleName=function(){return"excelExport"},e.prototype.addHeaderAndFooter=function(e,t,r,n){var o=[];if(i.i(a.isNullOrUndefined)(e.rows))""!==t&&("footer"===r&&this.actualrCnt++,o.push({index:1,value:t}),this.rows.push({index:this.actualrCnt+1,cells:o}),this.actualrCnt="header"===r?this.actualrCnt+2:this.actualrCnt);else{this.actualrCnt="footer"===r?this.actualrCnt+n-e.rows[0].cells.length:this.actualrCnt;for(var s=e.rows,l=0;l<s.length;l++){var d=0;o=[];for(var p=s[l],u=0;u<p.cells.length;u++)o.push({index:d+1,value:p.cells[u].value,colSpan:p.cells[u].colSpan,rowSpan:p.cells[u].rowSpan,style:p.cells[u].style}),d+=o[u].colSpan;this.actualrCnt++,this.rows.push({index:this.actualrCnt,cells:o})}this.actualrCnt="header"===r?n:this.actualrCnt}},e.prototype.exportToExcel=function(e,t,s){this.rows=[],this.actualrCnt=0;var l=!i.i(a.isNullOrUndefined)(t)&&!i.i(a.isNullOrUndefined)(t.header),d=!i.i(a.isNullOrUndefined)(t)&&!i.i(a.isNullOrUndefined)(t.footer),p=!i.i(a.isNullOrUndefined)(t)&&!i.i(a.isNullOrUndefined)(t.fileName);this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule;var u,h=o.a.getClonedPivotValues(this.engine.pivotValues),c=p?t.fileName:"CSV"===e?"default.csv":"default.xlsx";if(this.parent.exportAllPages&&(this.parent.enableVirtualization||this.parent.enablePaging)&&"olap"!==this.parent.dataType){var g=this.engine.pageSettings;this.engine.pageSettings=null,this.engine.isPagingOrVirtualizationEnabled=!1,this.engine.generateGridData(this.parent.dataSourceSettings,!0),this.parent.applyFormatting(this.engine.pivotValues),u=o.a.getClonedPivotValues(this.engine.pivotValues),this.engine.pivotValues=h,this.engine.pageSettings=g,this.engine.isPagingOrVirtualizationEnabled=!0}else u=h;var m,f,v,S,y={fileName:c,header:"",footer:"",dataCollections:[u],excelExportProperties:t};this.parent.trigger(n.h,y,function(e){m=e.fileName,f=e.header,v=e.footer,S=e.dataCollections}),!l&&i.i(a.isNullOrUndefined)(y.excelExportProperties)&&""!==f?this.addHeaderAndFooter({},f,"header",void 0):i.i(a.isNullOrUndefined)(y.excelExportProperties)||i.i(a.isNullOrUndefined)(y.excelExportProperties.header)||this.addHeaderAndFooter(y.excelExportProperties.header,"","header",y.excelExportProperties.header.headerRows);for(var b=[],C=0;C<S.length;C++){for(var x=S[C],w=0,T=x.length,M=this.parent.renderModule.getFormatList(),_=0,D=0;D<T;D++)if(x[D]){this.actualrCnt++,w=x[D].length;for(var O=[],P=0;P<w;P++)if(x[D][P]){var N=x[D][P];N&&"value"===N.axis&&""===N.formattedText&&(N.value=N.formattedText);var E="row"===this.parent.dataSourceSettings.valueAxis&&"olap"===this.parent.dataType&&N.rowOrdinal&&this.engine.tupRowInfo[N.rowOrdinal]?this.engine.tupRowInfo[N.rowOrdinal].measureName:N.actualText,I="row"===N.axis?{hAlign:"Left",bold:!0,wrapText:!0}:{numberFormat:M[E],bold:!1,wrapText:!0},F={bold:!0,vAlign:"Center",wrapText:!0,indent:0===P?10*N.level:0};if(-1!==N.level||N.rowSpan){var L=this.engine.aggregatedValueMatrix,A="value"===N.axis?L[D]&&L[D][P]?L[D][P]:"#DIV/0!"===N.formattedText?N.formattedText:N.value:N.formattedText,R=0===this.parent.dataSourceSettings.rows.length&&"row"===this.parent.dataSourceSettings.valueAxis||0===this.parent.dataSourceSettings.columns.length&&"column"===this.parent.dataSourceSettings.valueAxis;if(A="grand sum"!==N.type||1===this.parent.dataSourceSettings.values.length&&"row"===this.parent.dataSourceSettings.valueAxis&&"column"===N.axis?"sum"===N.type?A.toString().replace("Total",this.parent.localeObj.getConstant("total")):!i.i(a.isNullOrUndefined)(N.valueSort)&&this.parent.localeObj.getConstant("grandTotal")+this.parent.dataSourceSettings.valueSortSettings.headerDelimiter+N.formattedText===N.valueSort.levelName&&R?this.parent.getValuesHeader(N,"value"):A:R?this.parent.getValuesHeader(N,"grandTotal"):this.parent.localeObj.getConstant("grandTotal"),-1!==N.level||N.rowSpan){O.push({index:P+1,value:A,colSpan:N.colSpan,rowSpan:-1===N.rowSpan?1:N.rowSpan});var k=O[O.length-1];if("value"===N.axis)(isNaN(N.value)||""===N.formattedText||void 0===N.formattedText||i.i(a.isNullOrUndefined)(N.value))&&(k.value="Excel"===e?null:""),I.numberFormat="string"==typeof A?void 0:I.numberFormat,k.style=i.i(a.isNullOrUndefined)(k.value)?{bold:!1,wrapText:!0}:I;else if(k.style=F,"row"===N.axis&&0===P)if(k.style=I,"olap"===this.parent.dataType){var j=this.parent.renderModule.indentCollection[D];k.style.indent=2*j,_=_>j?_:j}else{var H=N.valueSort?N.valueSort.levelName.toString():"",q=N.actualText?N.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,V=H.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(q?q-1:q),B=V?V-1:0;k.style.indent=2*B,_=B>_?B:_}(N.style||k.style.backColor||k.style.backgroundColor||k.style.fontColor||k.style.fontName||k.style.fontSize)&&(k.style.backColor=k.style.backgroundColor?k.style.backgroundColor:N.style.backgroundColor,k.style.fontColor=k.style.fontColor?k.style.fontColor:N.style.color,k.style.fontName=k.style.fontName?k.style.fontName:N.style.fontFamily,i.i(a.isNullOrUndefined)(k.style.fontSize)&&i.i(a.isNullOrUndefined)(N.style.fontSize)||(k.style.fontSize=i.i(a.isNullOrUndefined)(k.style.fontSize)?Number(N.style.fontSize.split("px")[0]):Number(k.style.fontSize))),k.style.borders={color:"#000000",lineStyle:"Thin"};var U=void 0,G=void 0;"column"===N.axis?(U={style:F,cell:N},this.parent.trigger(n.j,U)):(G={style:I,cell:N,column:void 0,data:x,value:A},this.parent.trigger(n.l,G)),k.value="column"===N.axis?U.cell.formattedText:G.value,k.style="column"===N.axis?U.style:G.style}}P+=N.colSpan?N.colSpan-1:0}else{var N={formattedText:""},U=void 0;N&&(U={style:void 0,cell:N},this.parent.trigger(n.j,U)),O.push({index:P+1,colSpan:1,rowSpan:1,value:N.formattedText,style:U.style})}this.rows.push({index:this.actualrCnt,cells:O})}d?this.addHeaderAndFooter(t.footer,"","footer",t.footer.footerRows):!d&&""!==v&&i.i(a.isNullOrUndefined)(y.excelExportProperties)?this.addHeaderAndFooter({},v,"footer",void 0):i.i(a.isNullOrUndefined)(y.excelExportProperties)||i.i(a.isNullOrUndefined)(y.excelExportProperties.footer)||this.addHeaderAndFooter(y.excelExportProperties.footer,"","footer",y.excelExportProperties.footer.footerRows);for(var z=[],P=0;P<w;P++)z.push({index:P+1,width:100});_>0&&(z[0].width=100+20*_),b.push({columns:z,rows:this.rows})}var W,Q=new r.Workbook({worksheets:b},"Excel"===e?"xlsx":"csv",void 0,this.parent.currencyCode),Y=m.split(".").pop();s?W=Q.saveAsBlob("xlsx"===Y||"Excel"===e?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv"):Q.save("xlsx"===Y||"csv"===Y?m:m+("Excel"===e?".xlsx":".csv"));var K={type:e,promise:s?W:null};this.parent.trigger(n.i,K)},e.prototype.destroy=function(){this.engine&&(this.engine=null)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var r=i(2),n=i(1),a=i(0),o=(i.n(a),i(8)),s=(i.n(o),i(7)),l=(i.n(s),i(10)),d=(i.n(l),function(){function e(e){this.parent=e,this.parent.pagerModule=this,this.addEventListener()}return e.prototype.getModuleName=function(){return"pager"},e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(n._31,this.createPager,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(i.i(a.isNullOrUndefined)(this.parent.pagerSettings.template)&&this.unWireEvent(),this.parent.off(n._31,this.createPager))},e.prototype.createPager=function(){null!==i.i(a.select)("#"+this.parent.element.id+"pivot-pager",this.parent.element)&&(i.i(a.remove)(i.i(a.select)("#"+this.parent.element.id+"pivot-pager",this.parent.element)),this.destroy(),this.addEventListener());var e=this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber(),t=this.parent.pagerSettings;if(this.parent.enablePaging){var n=i.i(a.createElement)("div",{id:this.parent.element.id+"pivot-pager",className:r._57+" "+(this.parent.isAdaptive||e<650?r._37:"")+" "+(this.parent.enableRtl?r._36:"")+" "+("Top"===this.parent.pagerSettings.position?" "+r._267:" "+r._268)+" "+(t.enableCompactView||e<400?r._269:""),styles:"width:"+(this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber())+"px"});this.parent.showFieldList&&i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)&&"Top"===t.position?this.parent.element.insertBefore(n,i.i(a.select)("#"+this.parent.element.id+"_PivotFieldList",this.parent.element)):this.parent.showGroupingBar&&i.i(a.select)("#"+this.parent.element.id+" ."+r._56,this.parent.element)&&"Top"===t.position?this.parent.element.insertBefore(n,i.i(a.select)("#"+this.parent.element.id+" ."+r._56,this.parent.element)):"Top"===this.parent.pagerSettings.position?this.parent.element.insertBefore(n,i.i(a.select)("#"+this.parent.element.id+"_grid",this.parent.element)):this.parent.element.append(n);var d=this,p=function(){return d.createPagerContainer()};if(this.pager=new o.Pager({enableRtl:this.parent.enableRtl,locale:this.parent.locale,template:""===t.template||t.template?t.template:i.i(a.initializeCSPTemplate)(p),cssClass:this.parent.cssClass}),this.pager.isVue=this.parent.isVue,this.pager.appendTo("#"+this.parent.element.id+"pivot-pager"),i.i(a.isNullOrUndefined)(t.template)){if(t.showRowPager){if(!t.enableCompactView&&e>400){new l.NumericTextBox({min:1,max:this.parent.engineModule.rowPageCount,showSpinButton:!1,format:"#",validateDecimalOnType:!0,decimals:0,strictMode:!0,value:this.parent.pageSettings.currentRowPage,enableRtl:this.parent.enableRtl,locale:this.parent.locale,width:e<669?"50px":"64px",change:this.rowPageChange.bind(this),cssClass:this.parent.cssClass}).appendTo("#"+this.parent.element.id+"_row_textbox")}if(t.showRowPageSize){var u=this.parent.pagerSettings.rowPageSizes.slice(0);-1===this.parent.pagerSettings.rowPageSizes.indexOf(this.parent.pageSettings.rowPageSize)&&(u.push(this.parent.pageSettings.rowPageSize),u.sort(function(e,t){return e-t}));new s.DropDownList({dataSource:u,value:this.parent.pageSettings.rowPageSize,enableRtl:this.parent.enableRtl,locale:this.parent.locale,change:this.rowPageSizeChange.bind(this),popupHeight:"300px",popupWidth:"100%",width:"64px",cssClass:this.parent.cssClass}).appendTo("#"+this.parent.element.id+"_row_size_list")}}if(t.showColumnPager){if(!t.enableCompactView&&e>400){new l.NumericTextBox({min:1,max:this.parent.engineModule.columnPageCount,showSpinButton:!1,format:"#",validateDecimalOnType:!0,decimals:0,strictMode:!0,value:this.parent.pageSettings.currentColumnPage,enableRtl:this.parent.enableRtl,locale:this.parent.locale,width:e<669?"50px":"64px",change:this.columnPageChange.bind(this),cssClass:this.parent.cssClass}).appendTo("#"+this.parent.element.id+"_column_textbox")}if(t.showColumnPageSize){var h=this.parent.pagerSettings.columnPageSizes.slice(0);-1===this.parent.pagerSettings.columnPageSizes.indexOf(this.parent.pageSettings.columnPageSize)&&(h.push(this.parent.pageSettings.columnPageSize),h.sort(function(e,t){return e-t}));new s.DropDownList({dataSource:h,value:this.parent.pageSettings.columnPageSize,enableRtl:this.parent.enableRtl,locale:this.parent.locale,change:this.columnPageSizeChange.bind(this),popupHeight:"300px",popupWidth:"100%",width:"64px",cssClass:this.parent.cssClass}).appendTo("#"+this.parent.element.id+"_column_size_list")}}this.unWireEvent(),this.wireEvent()}}},e.prototype.wireEvent=function(){for(var e=[].slice.call(this.parent.element.querySelectorAll("."+r._270+", ."+r._271+", ."+r._272+", ."+r._273)),t=0;t<e.length;t++)a.EventHandler.add(e[t],"click",this.updatePageSettings,this)},e.prototype.unWireEvent=function(){for(var e=[].slice.call(this.parent.element.querySelectorAll("."+r._270+", ."+r._271+", ."+r._272+", ."+r._273)),t=0;t<e.length;t++)a.EventHandler.remove(e[t],"click",this.updatePageSettings)},e.prototype.columnPageChange=function(e){this.parent.pageSettings.currentColumnPage=e.value},e.prototype.rowPageChange=function(e){this.parent.pageSettings.currentRowPage=e.value},e.prototype.columnPageSizeChange=function(e){this.parent.pageSettings.columnPageSize=Number(e.value)},e.prototype.rowPageSizeChange=function(e){this.parent.pageSettings.rowPageSize=Number(e.value)},e.prototype.updatePageSettings=function(e){var t=e.target.id;switch(t){case this.parent.element.id+"_row_firstIcon":this.parent.pageSettings.currentRowPage=1;break;case this.parent.element.id+"_row_prevIcon":this.parent.pageSettings.currentRowPage=this.parent.pageSettings.currentRowPage>1?this.parent.pageSettings.currentRowPage-1:this.parent.pageSettings.currentRowPage;break;case this.parent.element.id+"_row_nextIcon":this.parent.pageSettings.currentRowPage=this.parent.pageSettings.currentRowPage<this.parent.engineModule.rowPageCount?this.parent.pageSettings.currentRowPage+1:this.parent.pageSettings.currentRowPage;break;case this.parent.element.id+"_row_lastIcon":this.parent.pageSettings.currentRowPage=this.parent.engineModule.rowPageCount;break;case this.parent.element.id+"_column_firstIcon":this.parent.pageSettings.currentColumnPage=1;break;case this.parent.element.id+"_column_prevIcon":this.parent.pageSettings.currentColumnPage=this.parent.pageSettings.currentColumnPage>1?this.parent.pageSettings.currentColumnPage-1:this.parent.pageSettings.currentColumnPage;break;case this.parent.element.id+"_column_nextIcon":this.parent.pageSettings.currentColumnPage=this.parent.pageSettings.currentColumnPage<this.parent.engineModule.columnPageCount?this.parent.pageSettings.currentColumnPage+1:this.parent.pageSettings.currentColumnPage;break;case this.parent.element.id+"_column_lastIcon":this.parent.pageSettings.currentColumnPage=this.parent.engineModule.columnPageCount}-1!==t.indexOf("_row")?this.parent.actionObj.actionName=n._81:-1!==t.indexOf("_column")&&(this.parent.actionObj.actionName=n._82)},e.prototype.createPagerContainer=function(){var e,t,n=this.parent.grid?this.parent.getGridWidthAsNumber():this.parent.getWidthAsNumber(),o=this.parent.pagerSettings;o.showRowPager&&(e=this.createPagerItems("row",o,n)),o.showColumnPager&&(t=this.createPagerItems("column",o,n));var s=i.i(a.createElement)("div",{id:this.parent.element.id+"_mainDiv",className:r._274+" "+(o.showRowPager&&o.showColumnPager?"":r._275)+" "+(o.isInversed?r._276:"")}),l=i.i(a.createElement)("div",{id:this.parent.element.id+"_vertical_separator",className:this.parent.isAdaptive||n<650?r._277:r._278});return o.isInversed&&o.showColumnPager&&o.showRowPager?s.append(t,l,e):o.showColumnPager&&o.showRowPager?s.append(e,l,t):o.showRowPager&&!o.showColumnPager?s.append(e):!o.showRowPager&&o.showColumnPager&&s.append(t),s.outerHTML},e.prototype.createPagerItems=function(e,t,n){var o=!t.showRowPager||!t.showColumnPager,s=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_mainDiv",className:"row"===e?r._279+" "+(t.showRowPageSize?"":r._280):r._281+" "+(t.showColumnPageSize?"":r._280)}),l=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_pagerSettings",className:"row"===e?r._282:r._283}),d="column"===e&&1===this.parent.pageSettings.currentColumnPage||"row"===e&&1===this.parent.pageSettings.currentRowPage,p="column"===e&&this.parent.pageSettings.currentColumnPage===this.parent.engineModule.columnPageCount||"row"===e&&this.parent.pageSettings.currentRowPage===this.parent.engineModule.rowPageCount,u=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_NavContainer",attrs:{class:r._284+" "+r._285}}),h=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_PageInfoContainer",attrs:{class:r._286+" "+r._285}}),c=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_firstIcon",attrs:{class:r._287+(d?" "+r._288+" "+r._76:" "+r._289),title:this.parent.localeObj.getConstant("goToFirstPage"),"aria-label":this.parent.localeObj.getConstant("goToFirstPage"),tabindex:"0",role:"button"}}),g=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_prevIcon",attrs:{class:r._290+(d?" "+r._291+" "+r._76:" "+r._292),title:this.parent.localeObj.getConstant("goToPreviousPage"),"aria-label":this.parent.localeObj.getConstant("goToPreviousPage"),tabindex:"0",role:"button"}}),m=i.i(a.createElement)("span",{id:this.parent.element.id+"_"+e+"_pagerString",className:"row"===e?r._293:r._294});m.innerText="row"===e?this.parent.localeObj.getConstant("rowPage"):this.parent.localeObj.getConstant("columnPage");var f=i.i(a.createElement)("input",{id:this.parent.element.id+"_"+e+"_textbox",className:"row"===e?r._295:r._296}),v=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_of_string_mainDiv",className:"row"===e?r._297:r._298}),S=i.i(a.createElement)("span",{id:this.parent.element.id+"_"+e+"_ofString",className:"row"===e?r._299:r._300});S.innerText=this.parent.localeObj.getConstant("of")+" ";var y=i.i(a.createElement)("span",{id:this.parent.element.id+"_"+e+"_pagerNumber",className:"row"===e?r._301:r._302});y.innerText=("row"===e?this.parent.engineModule.rowPageCount:this.parent.engineModule.columnPageCount).toString();var b=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_nextIcon",attrs:{class:r._303+(p?" "+r._304+" "+r._76:" "+r._305),title:this.parent.localeObj.getConstant("goToNextPage"),"aria-label":this.parent.localeObj.getConstant("goToNextPage"),tabindex:"0",role:"button"}}),C=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_lastIcon",attrs:{class:r._306+(p?" "+r._307+" "+r._76:" "+r._308),title:this.parent.localeObj.getConstant("goToLastPage"),"aria-label":this.parent.localeObj.getConstant("goToLastPage"),tabindex:"0",role:"button"}}),x=i.i(a.createElement)("span",{id:this.parent.element.id+"_"+e+"_size",className:"row"===e?r._309:r._310});x.innerText="row"===e?this.parent.localeObj.getConstant("rowPerPage"):this.parent.localeObj.getConstant("columnPerPage");var w=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_size_list_maindiv",className:r._311+" "+r._285}),T=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_size_list",className:"row"===e?r._312:r._313}),M=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_text_div",className:r._314}),_=i.i(a.createElement)("div",{id:this.parent.element.id+"_"+e+"_text_div_1",className:r._315});return w.append(T),t.enableCompactView||n<400?(u.append(g,b),l.append(u)):(v.append(S,y),u.append(c,g,b,C),h.append(f,v),l.append(u,h)),("row"===e&&t.showRowPager||"column"===e&&t.showColumnPager)&&(("column"===e&&!t.showRowPager||"row"===e&&!t.showColumnPager)&&o&&_.append(x,w),t.showColumnPager&&t.showRowPager||!o?("row"===e&&t.showRowPageSize||"column"===e&&t.showColumnPageSize?!t.enableCompactView&&n>400?(M.append(m,x),_.append(l,w)):(M.append(m,l),_.append(x,w)):("row"===e&&!t.showRowPageSize||"column"===e&&!t.showColumnPageSize)&&(M.append(m),_.append(l)),s.append(M,_)):("row"===e&&(t.showRowPageSize?s.append(l,m,_):s.append(l,m)),"column"===e&&(t.showColumnPageSize?s.append(l,m,_):s.append(l,m)))),s},e.prototype.destroy=function(){if(this.removeEventListener(),this.parent.pagerModule){var e=i.i(a.select)("#"+this.parent.element.id+"_column_textbox",this.parent.element),t=e?i.i(a.getInstance)(e,l.NumericTextBox):null;t&&(t.destroy(),t=null),e=i.i(a.select)("#"+this.parent.element.id+"_row_textbox",this.parent.element);var r=e?i.i(a.getInstance)(e,l.NumericTextBox):null;r&&(r.destroy(),r=null),e=i.i(a.select)("#"+this.parent.element.id+"_column_size_list",this.parent.element);var n=e?i.i(a.getInstance)(e,s.DropDownList):null;n&&(n.destroy(),n=null),e=i.i(a.select)("#"+this.parent.element.id+"_row_size_list",this.parent.element);var o=e?i.i(a.getInstance)(e,s.DropDownList):null;o&&(o.destroy(),o=null),this.pager&&this.pager.destroy(),this.pager=null}},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var r=i(12),n=(i.n(r),i(1)),a=i(0),o=(i.n(a),i(15)),s=i(3),l=function(){function e(e){this.parent=e}return e.prototype.getModuleName=function(){return"pdfExport"},e.prototype.addPage=function(e,t){t=t||this.exportProperties.pdfExportProperties;var n=e.document.sections.add(),o=e.document.pageSettings.height,l=e.document.pageSettings.width;if(this.exportProperties.width||this.exportProperties.height?(e.document.pageSettings.orientation=this.exportProperties.width>this.exportProperties.height||!this.exportProperties.height&&this.exportProperties.width>o||!this.exportProperties.width&&l>this.exportProperties.height?r.PdfPageOrientation.Landscape:r.PdfPageOrientation.Portrait,e.document.pageSettings.size=new r.SizeF(this.exportProperties.width?this.exportProperties.width:l,this.exportProperties.height?this.exportProperties.height:o)):(e.document.pageSettings.orientation=0===this.exportProperties.orientation||this.exportProperties.orientation?this.exportProperties.orientation:i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.pageOrientation)?r.PdfPageOrientation.Landscape:"Landscape"===t.pageOrientation?r.PdfPageOrientation.Landscape:r.PdfPageOrientation.Portrait,i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.pageSize)||(e.document.pageSettings.size=s.a.getPageSize(t.pageSize))),!i.i(a.isNullOrUndefined)(this.exportProperties.pdfMargins)){var d=e.document.pageSettings.margins;d.top=i.i(a.isNullOrUndefined)(this.exportProperties.pdfMargins.top)?d.top:this.exportProperties.pdfMargins.top,d.bottom=i.i(a.isNullOrUndefined)(this.exportProperties.pdfMargins.bottom)?d.bottom:this.exportProperties.pdfMargins.bottom,d.left=i.i(a.isNullOrUndefined)(this.exportProperties.pdfMargins.left)?d.left:this.exportProperties.pdfMargins.left,d.right=i.i(a.isNullOrUndefined)(this.exportProperties.pdfMargins.right)?d.right:this.exportProperties.pdfMargins.right}n.setPageSettings(e.document.pageSettings);var p=n.pages.add(),u=i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.header)||i.i(a.isNullOrUndefined)(t.header.contents)||i.i(a.isNullOrUndefined)(t.header.contents[0].value)?this.exportProperties.header?this.exportProperties.header:"":t.header.contents[0].value,h=i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.footer)||i.i(a.isNullOrUndefined)(t.footer.contents)||i.i(a.isNullOrUndefined)(t.footer.contents[0].value)?this.exportProperties.footer?this.exportProperties.footer:"":t.footer.contents[0].value,c=i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.theme)||i.i(a.isNullOrUndefined)(t.theme.record)?void 0:t.theme.record,g=i.i(a.isNullOrUndefined)(c)||i.i(a.isNullOrUndefined)(c.font)||i.i(a.isNullOrUndefined)(c.font.name)?r.PdfFontFamily.TimesRoman:this.getFontFamily(c.font.name),m=i.i(a.isNullOrUndefined)(c)||i.i(a.isNullOrUndefined)(c.font)||i.i(a.isNullOrUndefined)(c.font.size)?10:c.font.size,f=i.i(a.isNullOrUndefined)(c)?r.PdfFontStyle.Regular:this.getFontStyle(c),v=new r.PdfStandardFont(g,m,f),S=!(i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.header)||i.i(a.isNullOrUndefined)(t.header.contents)||i.i(a.isNullOrUndefined)(t.header.contents[0].style)),y=!(i.i(a.isNullOrUndefined)(t)||i.i(a.isNullOrUndefined)(t.footer)||i.i(a.isNullOrUndefined)(t.footer.contents)||i.i(a.isNullOrUndefined)(t.footer.contents[0].style)),b=S?this.hexDecToRgb(t.header.contents[0].style.textBrushColor):new r.PdfColor(0,0,0),C=S?new r.PdfSolidBrush(new r.PdfColor(b.r,b.g,b.b)):new r.PdfSolidBrush(new r.PdfColor(0,0,0)),x=y?this.hexDecToRgb(t.footer.contents[0].style.textBrushColor):new r.PdfColor(0,0,0),w=y?new r.PdfSolidBrush(new r.PdfColor(x.r,x.g,x.b)):new r.PdfSolidBrush(new r.PdfColor(0,0,0)),T=new r.PdfPen(new r.PdfColor(0,0,0),.5),M=new r.PdfPageTemplateElement(new r.RectangleF(0,0,p.graphics.clientSize.width,20));M.graphics.drawString(u,v,T,C,0,0,new r.PdfStringFormat(r.PdfTextAlignment.Center)),e.document.template.top=M;var _=new r.PdfPageTemplateElement(new r.RectangleF(0,0,p.graphics.clientSize.width,20));return _.graphics.drawString(h,v,T,w,0,0,new r.PdfStringFormat(r.PdfTextAlignment.Center)),e.document.template.bottom=_,p},e.prototype.hexDecToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color..");e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},e.prototype.getFontStyle=function(e){var t=r.PdfFontStyle.Regular;return!i.i(a.isNullOrUndefined)(e)&&e.bold&&(t|=r.PdfFontStyle.Bold),!i.i(a.isNullOrUndefined)(e)&&e.italic&&(t|=r.PdfFontStyle.Italic),!i.i(a.isNullOrUndefined)(e)&&e.underline&&(t|=r.PdfFontStyle.Underline),!i.i(a.isNullOrUndefined)(e)&&e.strikeout&&(t|=r.PdfFontStyle.Strikeout),t},e.prototype.getBorderStyle=function(e){var t=new r.PdfBorders;if(i.i(a.isNullOrUndefined)(e)){var n=new r.PdfColor(234,234,234);t.all=new r.PdfPen(n)}else{var o=e.width,s=i.i(a.isNullOrUndefined)(o)||"number"!=typeof o?void 0:.75*o,l=new r.PdfColor(196,196,196);if(!i.i(a.isNullOrUndefined)(e.color)){var d=this.hexDecToRgb(e.color);l=new r.PdfColor(d.r,d.g,d.b)}var p=new r.PdfPen(l,s);i.i(a.isNullOrUndefined)(e.dashStyle)||(p.dashStyle=this.getDashStyle(e.dashStyle)),t.all=p}return t},e.prototype.getDashStyle=function(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},e.prototype.getStyle=function(){var e=new r.PdfBorders;if(i.i(a.isNullOrUndefined)(this.gridStyle))return{brush:new r.PdfSolidBrush(new r.PdfColor),border:e,font:void 0};var t=i.i(a.isNullOrUndefined)(this.gridStyle.header.fontName)?r.PdfFontFamily.Helvetica:this.getFontFamily(this.gridStyle.header.fontName),n=this.getFontStyle(this.gridStyle.header),o=i.i(a.isNullOrUndefined)(this.gridStyle.header.fontSize)?10.5:this.gridStyle.header.fontSize,s=new r.PdfColor;if(!i.i(a.isNullOrUndefined)(this.gridStyle.header.fontColor)){var l=this.hexDecToRgb(this.gridStyle.header.fontColor);s=new r.PdfColor(l.r,l.g,l.b)}var d=new r.PdfStandardFont(t,o,n);return i.i(a.isNullOrUndefined)(this.gridStyle.header.font)||(d=this.gridStyle.header.font),{border:this.getBorderStyle(this.gridStyle.header.border),font:d,brush:new r.PdfSolidBrush(s)}},e.prototype.setRecordThemeStyle=function(e,t){if(!i.i(a.isNullOrUndefined)(this.gridStyle)&&!i.i(a.isNullOrUndefined)(this.gridStyle.record)){var n=i.i(a.isNullOrUndefined)(this.gridStyle.record.fontName)?r.PdfFontFamily.Helvetica:this.getFontFamily(this.gridStyle.record.fontName),o=i.i(a.isNullOrUndefined)(this.gridStyle.record.fontSize)?9.75:this.gridStyle.record.fontSize,s=this.getFontStyle(this.gridStyle.record),l=new r.PdfStandardFont(n,o,s);i.i(a.isNullOrUndefined)(this.gridStyle.record.font)||(l=this.gridStyle.record.font),e.style.setFont(l);var d=new r.PdfColor;if(!i.i(a.isNullOrUndefined)(this.gridStyle.record.fontColor)){var p=this.hexDecToRgb(this.gridStyle.record.fontColor);d=new r.PdfColor(p.r,p.g,p.b)}e.style.setTextBrush(new r.PdfSolidBrush(d))}var u=this.gridStyle&&this.gridStyle.record&&this.gridStyle.record.border?this.getBorderStyle(this.gridStyle.record.border):t;return e.style.setBorder(u),e},e.prototype.exportToPDF=function(e,t,o,s){var l=this;this.engine="olap"===this.parent.dataType?this.parent.olapEngineModule:this.parent.engineModule,this.gridStyle=i.i(a.isNullOrUndefined)(this.exportProperties.pdfExportProperties)?void 0:this.exportProperties.pdfExportProperties.theme;var d=this.applyEvent();i.i(a.isNullOrUndefined)(o)||(d.document=o);var p=this.getStyle(),u=this.exportProperties.fileName?this.exportProperties.fileName:i.i(a.isNullOrUndefined)(e)||i.i(a.isNullOrUndefined)(e.fileName)?"default":e.fileName,h=this.parent.renderModule.maxIndent?this.parent.renderModule.maxIndent:5,c=100+20*h,g=Math.floor((540-c)/90)+1,m=0,f=d.args.pivotValues[m];(this.exportProperties.columnSize||this.exportProperties.width||this.exportProperties.height)&&(g=this.exportProperties.columnSize>0?this.exportProperties.columnSize:f[0].length);for(var v=!this.exportProperties.allowRepeatHeader||this.exportProperties.allowRepeatHeader,S=0;v&&g>1&&S<f.length;S++)for(var y=g;f[S]&&y<f[S].length;y+=g)f[S].splice(y,0,f[S][0]);var b=f&&f.length>0?f[0].length:0,C=0;do{i.i(a.isNullOrUndefined)(e)||(this.exportProperties.header=i.i(a.isNullOrUndefined)(e.header)||i.i(a.isNullOrUndefined)(e.header.contents)||i.i(a.isNullOrUndefined)(e.header.contents[0].value)?this.exportProperties.header:e.header.contents[0].value,this.exportProperties.footer=i.i(a.isNullOrUndefined)(e.footer)||i.i(a.isNullOrUndefined)(e.footer.contents)||i.i(a.isNullOrUndefined)(e.footer.contents[0].value)?this.exportProperties.footer:e.footer.contents[0].value);var x=this.addPage(d,e),w=new r.PdfGrid,T=g>0?g:5;if(f&&f.length>0){w.columns.add(f[0].length-C>=T?T:f[0].length-C);for(var M=f.length,_=0,D=0,O=0,P=0;P<M;P++)if(f[P]){var N=!(f[P][0]&&"row"===f[P][0].axis),E=f[P].length>C+T?C+T:f[P].length;N&&w.headers.add(1);var I=N?w.headers.getHeader(_):w.rows.addRow();N?(I.style.setBorder(p.border),p.font&&I.style.setFont(p.font),I.style.setTextBrush(p.brush)):this.setRecordThemeStyle(I,p.border);for(var F=0,L=!0,A=C;A<E;A++){var R=!1;if(f[P][A]){var k=f[P][A],j=k.formattedText;j=0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length?this.parent.getValuesHeader(k,"value"):j,j="grand sum"===k.type?0===this.parent.dataSourceSettings.rows.length||0===this.parent.dataSourceSettings.columns.length?this.parent.getValuesHeader(k,"grandTotal"):this.parent.localeObj.getConstant("grandTotal"):"sum"===k.type?j.toString().replace("Total",this.parent.localeObj.getConstant("total")):j,(-1!==k.level||k.rowSpan)&&((-1!==k.level||k.rowSpan)&&(I.cells.getCell(F).columnSpan=k.colSpan?T-F<k.colSpan?T-F:k.colSpan:1,N&&k.rowSpan&&k.rowSpan>1&&(I.cells.getCell(F).rowSpan=k.rowSpan?k.rowSpan:1),I.cells.getCell(F).value=j?j.toString():""),""!==j&&(L=!1)),D=k.level>D?k.level:D,R="value"===k.axis,A+=I.cells.getCell(F).columnSpan?I.cells.getCell(F).columnSpan-1:0,F+=I.cells.getCell(F).columnSpan?I.cells.getCell(F).columnSpan-1:0,k.style&&(I=this.applyStyle(I,k,F));var H={style:void 0,pivotCell:k,cell:I.cells.getCell(F),column:w.columns.getColumn(F)};this.parent.trigger(n.n,H),"column"===k.axis?(H={style:H.style,cell:H.cell,gridCell:H.pivotCell},this.parent.trigger(n.k,H),I.cells.getCell(F).value=H.gridCell.formattedText?H.gridCell.formattedText:j):(H={style:H.style,cell:H.cell,column:void 0,data:H.pivotCell,value:j},this.parent.trigger(n.m,H),I.cells.getCell(F).value=H.value?H.value:j),H.style&&this.processCellStyle(I.cells.getCell(F),H)}else{var H={style:void 0,pivotCell:void 0,cell:I.cells.getCell(F),column:w.columns.getColumn(F)};this.parent.trigger(n.n,H),O=H.column.width;var k={formattedText:""};"column"===k.axis&&(H={style:H.style,cell:H.cell,gridCell:H.pivotCell},this.parent.trigger(n.k,H)),H.style&&this.processCellStyle(I.cells.getCell(F),H),I.cells.getCell(F).value="",0===A&&N&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0?w.headers.getHeader(0).cells.getCell(0).rowSpan++:0!==A&&N&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&w.headers.getHeader(0).cells.getCell(0).rowSpan<Object.keys(this.engine.headerContent).length&&w.headers.getHeader(0).cells.getCell(0).rowSpan++}var q=new r.PdfStringFormat;if("olap"===this.parent.dataType){var V=!N&&0===F&&f[P][A]?this.parent.renderModule.indentCollection[f[P][A].rowIndex]:0;q.paragraphIndent=15*V,D=D>V?D:V}else if(q.paragraphIndent=0,!N&&0===F&&f[P][A]&&-1!==f[P][A].level){var B=f[P][A],U=B.valueSort?B.valueSort.levelName.toString():"",G=B.actualText?B.actualText.toString().split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length:0,z=U.split(this.parent.dataSourceSettings.valueSortSettings.headerDelimiter).length-(G?G-1:G),W=z?z-1:0;q.paragraphIndent=10*W}q.alignment=R?r.PdfTextAlignment.Right:r.PdfTextAlignment.Left,q.lineAlignment=r.PdfVerticalAlignment.Middle,I.cells.getCell(F).style.stringFormat=q,F++}L&&(I.height=16),_++}w.columns.getColumn(0).width=O>0?O:100+20*D}0===C&&this.parent.dataSourceSettings.columns&&this.parent.dataSourceSettings.columns.length>0&&w.headers.getHeader(0).cells.getCell(0).rowSpan--,w.draw(x,new r.PointF(10,20)),C+=T,C>=b&&d.args.pivotValues.length>m+1&&(m++,f=d.args.pivotValues[m],b=f&&f.length>0?f[0].length:0,C=0)}while(C<b);return new Promise(function(e){var i;s||t?s&&(i=d.document.save()):(d.document.save(u+".pdf"),d.document.destroy());var r={type:"PDF",promise:s?i:null};l.parent.trigger(n.i,r),e(d.document)})},e.prototype.applyStyle=function(e,t,i){var n=this.parent.conditionalFormattingModule.hexToRgb(t.style.backgroundColor),a=new r.PdfSolidBrush(new r.PdfColor(n.r,n.g,n.b));e.cells.getCell(i).style.backgroundBrush=a;var o=Number(t.style.fontSize.split("px")[0]),s=new r.PdfStandardFont(r.PdfFontFamily.TimesRoman,o,r.PdfFontStyle.Regular);return e.cells.getCell(i).style.font=s,n=this.parent.conditionalFormattingModule.hexToRgb(t.style.color),a=new r.PdfSolidBrush(new r.PdfColor(n.r,n.g,n.b)),e.cells.getCell(i).style.textBrush=a,e},e.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},e.prototype.getFont=function(e){if(e.style.font)return e.style.font;var t=e.cell.cellStyle.font&&e.cell.cellStyle.font.fontSize?e.cell.cellStyle.font.fontSize:i.i(a.isNullOrUndefined)(e.style.fontSize)?9.75:.75*e.style.fontSize,n=i.i(a.isNullOrUndefined)(e.style.fontFamily)?r.PdfFontFamily.TimesRoman:this.getFontFamily(e.style.fontFamily),o=r.PdfFontStyle.Regular;return!i.i(a.isNullOrUndefined)(e.style.bold)&&e.style.bold&&(o|=r.PdfFontStyle.Bold),!i.i(a.isNullOrUndefined)(e.style.italic)&&e.style.italic&&(o|=r.PdfFontStyle.Italic),!i.i(a.isNullOrUndefined)(e.style.underline)&&e.style.underline&&(o|=r.PdfFontStyle.Underline),!i.i(a.isNullOrUndefined)(e.style.strikeout)&&e.style.strikeout&&(o|=r.PdfFontStyle.Strikeout),new r.PdfStandardFont(n,t,o)},e.prototype.processCellStyle=function(e,t){if(!i.i(a.isNullOrUndefined)(t.style.backgroundColor)){var n=this.hexDecToRgb(t.style.backgroundColor);e.style.backgroundBrush=new r.PdfSolidBrush(new r.PdfColor(n.r,n.g,n.b))}if(!i.i(a.isNullOrUndefined)(t.style.textBrushColor)){var o=this.hexDecToRgb(t.style.textBrushColor);e.style.textBrush=new r.PdfSolidBrush(new r.PdfColor(o.r,o.g,o.b))}if(!i.i(a.isNullOrUndefined)(t.style.textPenColor)){var s=this.hexDecToRgb(t.style.textPenColor);e.style.textPen=new r.PdfPen(new r.PdfColor(s.r,s.g,s.b))}if(i.i(a.isNullOrUndefined)(t.style.fontFamily)&&i.i(a.isNullOrUndefined)(t.style.fontSize)&&i.i(a.isNullOrUndefined)(t.style.bold)&&i.i(a.isNullOrUndefined)(t.style.italic)&&i.i(a.isNullOrUndefined)(t.style.underline)&&i.i(a.isNullOrUndefined)(t.style.strikeout)||(e.style.font=this.getFont(t)),!i.i(a.isNullOrUndefined)(t.style.border)){var l=new r.PdfBorders,d=t.style.border.width,p=i.i(a.isNullOrUndefined)(d)||"number"!=typeof d?void 0:.75*d,u=new r.PdfColor(196,196,196);if(!i.i(a.isNullOrUndefined)(t.style.border.color)){var h=this.hexDecToRgb(t.style.border.color);u=new r.PdfColor(h.r,h.g,h.b)}var c=new r.PdfPen(u,p);i.i(a.isNullOrUndefined)(t.style.border.dashStyle)||(c.dashStyle=this.getDashStyle(t.style.border.dashStyle)),l.all=c,e.style.borders=l}},e.prototype.applyEvent=function(){var e,t=o.a.getClonedPivotValues(this.engine.pivotValues);if(this.parent.exportAllPages&&(this.parent.enableVirtualization||this.parent.enablePaging)&&"olap"!==this.parent.dataType&&"Server"!==this.parent.dataSourceSettings.mode){var i=this.engine.pageSettings;this.engine.pageSettings=null,this.engine.isPagingOrVirtualizationEnabled=!1,this.engine.generateGridData(this.parent.dataSourceSettings,!0),this.parent.applyFormatting(this.engine.pivotValues),e=o.a.getClonedPivotValues(this.engine.pivotValues),this.engine.pivotValues=t,this.engine.pageSettings=i,this.engine.isPagingOrVirtualizationEnabled=!0}else e=t;var a={pivotValues:[e]};return this.parent.trigger(n.c,a),this.document=new r.PdfDocument,{document:this.document,args:a}},e.prototype.destroy=function(){this.engine&&(this.engine=null),this.exportProperties&&(this.exportProperties=null),this.document&&(this.document=null)},e}()},function(e,t,i){"use strict";var r=i(41);i.d(t,"a",function(){return r.b}),i.d(t,"b",function(){return r.c}),i.d(t,"c",function(){return r.d}),i.d(t,"d",function(){return r.e}),i.d(t,"e",function(){return r.f}),i.d(t,"f",function(){return r.g}),i.d(t,"g",function(){return r.h}),i.d(t,"h",function(){return r.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return H});var r=i(0),n=(i.n(r),i(30)),a=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!0)],t.prototype,"enable",void 0),o([i.i(r.Property)(1e3)],t.prototype,"duration",void 0),o([i.i(r.Property)(0)],t.prototype,"delay",void 0),t}(r.ChildProperty),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(null)],t.prototype,"value",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)("0")],t.prototype,"dashArray",void 0),t}(r.ChildProperty),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("Normal")],t.prototype,"fontStyle",void 0),o([i.i(r.Property)("16px")],t.prototype,"size",void 0),o([i.i(r.Property)("Normal")],t.prototype,"fontWeight",void 0),o([i.i(r.Property)("")],t.prototype,"color",void 0),o([i.i(r.Property)("Center")],t.prototype,"textAlignment",void 0),o([i.i(r.Property)("Segoe UI")],t.prototype,"fontFamily",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)("Trim")],t.prototype,"textOverflow",void 0),t}(r.ChildProperty),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(10)],t.prototype,"left",void 0),o([i.i(r.Property)(10)],t.prototype,"right",void 0),o([i.i(r.Property)(10)],t.prototype,"top",void 0),o([i.i(r.Property)(10)],t.prototype,"bottom",void 0),t}(r.ChildProperty),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("")],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),t}(r.ChildProperty),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(0)],t.prototype,"x",void 0),o([i.i(r.Property)(0)],t.prototype,"y",void 0),t}(r.ChildProperty),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(0)],t.prototype,"series",void 0),o([i.i(r.Property)(0)],t.prototype,"point",void 0),t}(r.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Complex)({},u)],t.prototype,"border",void 0),o([i.i(r.Property)("transparent")],t.prototype,"background",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)(null)],t.prototype,"backgroundImage",void 0),t}(r.ChildProperty),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"enable",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Complex)({color:null,width:1},u)],t.prototype,"line",void 0),o([i.i(r.Property)("Both")],t.prototype,"lineType",void 0),t}(r.ChildProperty),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"visible",void 0),o([i.i(r.Property)(null)],t.prototype,"name",void 0),o([i.i(r.Property)("transparent")],t.prototype,"fill",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)(0)],t.prototype,"angle",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableRotation",void 0),o([i.i(r.Property)("Auto")],t.prototype,"position",void 0),o([i.i(r.Property)(5)],t.prototype,"rx",void 0),o([i.i(r.Property)(5)],t.prototype,"ry",void 0),o([i.i(r.Property)("Center")],t.prototype,"alignment",void 0),o([i.i(r.Complex)({width:null,color:null},u)],t.prototype,"border",void 0),o([i.i(r.Complex)({left:5,right:5,top:5,bottom:5},p)],t.prototype,"margin",void 0),o([i.i(r.Complex)({size:"11px",color:"",fontStyle:"Normal",fontWeight:"Normal",fontFamily:"Segoe UI"},d)],t.prototype,"font",void 0),o([i.i(r.Property)(null)],t.prototype,"template",void 0),t}(r.ChildProperty),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("Line")],t.prototype,"type",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(null)],t.prototype,"length",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),t}(r.ChildProperty),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Complex)({width:null,color:null},u)],t.prototype,"border",void 0),o([i.i(r.Complex)({size:"11px",color:"",fontStyle:"Normal",fontWeight:"Normal",fontFamily:"Segoe UI"},d)],t.prototype,"font",void 0),o([i.i(r.Property)("transparent")],t.prototype,"fill",void 0),o([i.i(r.Property)(0)],t.prototype,"angle",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableRotation",void 0),o([i.i(r.Property)("Outside")],t.prototype,"position",void 0),o([i.i(r.Property)(5)],t.prototype,"rx",void 0),o([i.i(r.Property)(5)],t.prototype,"ry",void 0),o([i.i(r.Property)(null)],t.prototype,"template",void 0),o([i.i(r.Complex)({},v)],t.prototype,"connectorStyle",void 0),t}(r.ChildProperty),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"visible",void 0),o([i.i(r.Property)("Circle")],t.prototype,"shape",void 0),o([i.i(r.Property)("")],t.prototype,"imageUrl",void 0),o([i.i(r.Property)(5)],t.prototype,"width",void 0),o([i.i(r.Property)(5)],t.prototype,"height",void 0),o([i.i(r.Complex)({width:2,color:null},u)],t.prototype,"border",void 0),o([i.i(r.Complex)({x:0,y:0},h)],t.prototype,"offset",void 0),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Complex)({},f)],t.prototype,"dataLabel",void 0),t}(r.ChildProperty),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(10)],t.prototype,"length",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),t}(r.ChildProperty),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"visible",void 0),o([i.i(r.Property)("Fixed")],t.prototype,"type",void 0),o([i.i(r.Property)("Both")],t.prototype,"direction",void 0),o([i.i(r.Property)("Vertical")],t.prototype,"mode",void 0),o([i.i(r.Property)(1)],t.prototype,"verticalError",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(1)],t.prototype,"horizontalError",void 0),o([i.i(r.Property)(3)],t.prototype,"verticalNegativeError",void 0),o([i.i(r.Property)(3)],t.prototype,"verticalPositiveError",void 0),o([i.i(r.Property)(1)],t.prototype,"horizontalNegativeError",void 0),o([i.i(r.Property)(1)],t.prototype,"horizontalPositiveError",void 0),o([i.i(r.Complex)(null,b)],t.prototype,"errorBarCap",void 0),t}(r.ChildProperty),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("")],t.prototype,"name",void 0),o([i.i(r.Property)("0")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)(2)],t.prototype,"period",void 0),o([i.i(r.Property)("Linear")],t.prototype,"type",void 0),o([i.i(r.Property)(0)],t.prototype,"backwardForecast",void 0),o([i.i(r.Property)(0)],t.prototype,"forwardForecast",void 0),o([i.i(r.Property)(2)],t.prototype,"polynomialOrder",void 0),o([i.i(r.Complex)({},y)],t.prototype,"marker",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableTooltip",void 0),o([i.i(r.Complex)({},s)],t.prototype,"animation",void 0),o([i.i(r.Property)("")],t.prototype,"fill",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(null)],t.prototype,"intercept",void 0),o([i.i(r.Property)("SeriesType")],t.prototype,"legendShape",void 0),t}(r.ChildProperty),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Complex)({color:"transparent",width:0},u)],t.prototype,"border",void 0),o([i.i(r.Property)("Zero")],t.prototype,"mode",void 0),t}(r.ChildProperty),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(0)],t.prototype,"topLeft",void 0),o([i.i(r.Property)(0)],t.prototype,"topRight",void 0),o([i.i(r.Property)(0)],t.prototype,"bottomLeft",void 0),o([i.i(r.Property)(0)],t.prototype,"bottomRight",void 0),t}(r.ChildProperty),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"enable",void 0),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Complex)(n.a.crosshairLabelFont,d)],t.prototype,"textStyle",void 0),t}(r.ChildProperty),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)(!1)],t.prototype,"startFromAxis",void 0),o([i.i(r.Property)(null)],t.prototype,"start",void 0),o([i.i(r.Property)(null)],t.prototype,"end",void 0),o([i.i(r.Property)(null)],t.prototype,"size",void 0),o([i.i(r.Property)("#808080")],t.prototype,"color",void 0),o([i.i(r.Property)(null)],t.prototype,"dashArray",void 0),o([i.i(r.Property)("Auto")],t.prototype,"sizeType",void 0),o([i.i(r.Property)(!1)],t.prototype,"isRepeat",void 0),o([i.i(r.Property)(null)],t.prototype,"repeatEvery",void 0),o([i.i(r.Property)(null)],t.prototype,"repeatUntil",void 0),o([i.i(r.Property)(!1)],t.prototype,"isSegmented",void 0),o([i.i(r.Property)(null)],t.prototype,"segmentStart",void 0),o([i.i(r.Property)(null)],t.prototype,"segmentEnd",void 0),o([i.i(r.Property)(null)],t.prototype,"segmentAxisName",void 0),o([i.i(r.Complex)({color:"transparent",width:1},u)],t.prototype,"border",void 0),o([i.i(r.Property)("")],t.prototype,"text",void 0),o([i.i(r.Property)(null)],t.prototype,"rotation",void 0),o([i.i(r.Property)("Middle")],t.prototype,"horizontalAlignment",void 0),o([i.i(r.Property)("Middle")],t.prototype,"verticalAlignment",void 0),o([i.i(r.Complex)(n.a.stripLineLabelFont,d)],t.prototype,"textStyle",void 0),o([i.i(r.Property)("Behind")],t.prototype,"zIndex",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),t}(r.ChildProperty),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("")],t.prototype,"color",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("Rectangle")],t.prototype,"type",void 0),t}(r.ChildProperty),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(.7)],t.prototype,"width",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)(5)],t.prototype,"height",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(.7)],t.prototype,"width",void 0),o([i.i(r.Property)(5)],t.prototype,"height",void 0),o([i.i(r.Property)(null)],t.prototype,"color",void 0),t}(r.ChildProperty),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(0)],t.prototype,"x",void 0),o([i.i(r.Property)(0)],t.prototype,"y",void 0),t}(r.ChildProperty),L=(function(){function e(){}o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0)}(),function(){function e(){}o([i.i(r.Property)(!0)],e.prototype,"enable",void 0),o([i.i(r.Property)(1e3)],e.prototype,"duration",void 0),o([i.i(r.Property)(0)],e.prototype,"delay",void 0)}(),function(){function e(){}o([i.i(r.Property)(null)],e.prototype,"value",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0),o([i.i(r.Property)("0")],e.prototype,"dashArray",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"visible",void 0),o([i.i(r.Property)("Circle")],e.prototype,"shape",void 0),o([i.i(r.Property)("")],e.prototype,"imageUrl",void 0),o([i.i(r.Property)(5)],e.prototype,"height",void 0),o([i.i(r.Property)(5)],e.prototype,"width",void 0),o([i.i(r.Complex)({width:2,color:null},u)],e.prototype,"border",void 0),o([i.i(r.Property)(null)],e.prototype,"fill",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Complex)({},f)],e.prototype,"dataLabel",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"visible",void 0),o([i.i(r.Property)("Fixed")],e.prototype,"type",void 0),o([i.i(r.Property)("Both")],e.prototype,"direction",void 0),o([i.i(r.Property)("Vertical")],e.prototype,"mode",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0),o([i.i(r.Property)(1)],e.prototype,"verticalError",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)(1)],e.prototype,"horizontalError",void 0),o([i.i(r.Property)(3)],e.prototype,"verticalPositiveError",void 0),o([i.i(r.Property)(3)],e.prototype,"verticalNegativeError",void 0),o([i.i(r.Property)(1)],e.prototype,"horizontalPositiveError",void 0),o([i.i(r.Property)(1)],e.prototype,"horizontalNegativeError",void 0),o([i.i(r.Complex)(null,b)],e.prototype,"errorBarCap",void 0)}(),function(){function e(){}o([i.i(r.Property)("")],e.prototype,"name",void 0),o([i.i(r.Property)("Linear")],e.prototype,"type",void 0),o([i.i(r.Property)(2)],e.prototype,"period",void 0),o([i.i(r.Property)(2)],e.prototype,"polynomialOrder",void 0),o([i.i(r.Property)(0)],e.prototype,"backwardForecast",void 0),o([i.i(r.Property)(0)],e.prototype,"forwardForecast",void 0),o([i.i(r.Complex)({},s)],e.prototype,"animation",void 0),o([i.i(r.Complex)({},y)],e.prototype,"marker",void 0),o([i.i(r.Property)(!0)],e.prototype,"enableTooltip",void 0),o([i.i(r.Property)(null)],e.prototype,"intercept",void 0),o([i.i(r.Property)("")],e.prototype,"fill",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("SeriesType")],e.prototype,"legendShape",void 0)}(),function(){function e(){}o([i.i(r.Property)(null)],e.prototype,"fill",void 0),o([i.i(r.Complex)({color:"transparent",width:0},u)],e.prototype,"border",void 0),o([i.i(r.Property)("Zero")],e.prototype,"mode",void 0)}(),function(){function e(){}o([i.i(r.Property)(0)],e.prototype,"topLeft",void 0),o([i.i(r.Property)(0)],e.prototype,"topRight",void 0),o([i.i(r.Property)(0)],e.prototype,"bottomLeft",void 0),o([i.i(r.Property)(0)],e.prototype,"bottomRight",void 0)}(),function(){function e(){}o([i.i(r.Property)("Normal")],e.prototype,"fontStyle",void 0),o([i.i(r.Property)("16px")],e.prototype,"size",void 0),o([i.i(r.Property)("Normal")],e.prototype,"fontWeight",void 0),o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)("Center")],e.prototype,"textAlignment",void 0),o([i.i(r.Property)("Segoe UI")],e.prototype,"fontFamily",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Property)("Trim")],e.prototype,"textOverflow",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"enable",void 0),o([i.i(r.Property)(null)],e.prototype,"fill",void 0),o([i.i(r.Complex)(n.a.crosshairLabelFont,d)],e.prototype,"textStyle",void 0)}(),function(){function e(){}o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)(5)],e.prototype,"height",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(.7)],e.prototype,"width",void 0),o([i.i(r.Property)(5)],e.prototype,"height",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(.7)],e.prototype,"width",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Property)(null)],e.prototype,"color",void 0)}(),function(){function e(){}o([i.i(r.Property)(!0)],e.prototype,"visible",void 0),o([i.i(r.Property)(!1)],e.prototype,"startFromAxis",void 0),o([i.i(r.Property)(null)],e.prototype,"start",void 0),o([i.i(r.Property)(null)],e.prototype,"end",void 0),o([i.i(r.Property)(null)],e.prototype,"size",void 0),o([i.i(r.Property)("#808080")],e.prototype,"color",void 0),o([i.i(r.Property)(null)],e.prototype,"dashArray",void 0),o([i.i(r.Property)("Auto")],e.prototype,"sizeType",void 0),o([i.i(r.Property)(!1)],e.prototype,"isRepeat",void 0),o([i.i(r.Property)(null)],e.prototype,"repeatEvery",void 0),o([i.i(r.Property)(null)],e.prototype,"repeatUntil",void 0),o([i.i(r.Property)(!1)],e.prototype,"isSegmented",void 0),o([i.i(r.Property)(null)],e.prototype,"segmentStart",void 0),o([i.i(r.Property)(null)],e.prototype,"segmentEnd",void 0),o([i.i(r.Property)(null)],e.prototype,"segmentAxisName",void 0),o([i.i(r.Complex)({color:"transparent",width:1},u)],e.prototype,"border",void 0),o([i.i(r.Property)("")],e.prototype,"text",void 0),o([i.i(r.Property)(null)],e.prototype,"rotation",void 0),o([i.i(r.Property)("Middle")],e.prototype,"horizontalAlignment",void 0),o([i.i(r.Property)("Middle")],e.prototype,"verticalAlignment",void 0),o([i.i(r.Complex)(n.a.stripLineLabelFont,d)],e.prototype,"textStyle",void 0),o([i.i(r.Property)("Behind")],e.prototype,"zIndex",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0)}(),function(){function e(){}o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)(1)],e.prototype,"width",void 0),o([i.i(r.Property)("Rectangle")],e.prototype,"type",void 0)}(),function(){function e(){}o([i.i(r.Complex)({},u)],e.prototype,"border",void 0),o([i.i(r.Property)("transparent")],e.prototype,"background",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0)}(),function(){function e(){}o([i.i(r.Property)(!1)],e.prototype,"enable",void 0),o([i.i(r.Property)("")],e.prototype,"dashArray",void 0),o([i.i(r.Complex)({color:null,width:1},u)],e.prototype,"line",void 0),o([i.i(r.Property)("Both")],e.prototype,"lineType",void 0)}(),function(){function e(){}o([i.i(r.Property)(!0)],e.prototype,"visible",void 0),o([i.i(r.Property)(null)],e.prototype,"height",void 0),o([i.i(r.Property)(null)],e.prototype,"width",void 0),o([i.i(r.Complex)({x:0,y:0},F)],e.prototype,"location",void 0),o([i.i(r.Property)("Auto")],e.prototype,"position",void 0),o([i.i(r.Property)(8)],e.prototype,"padding",void 0),o([i.i(r.Property)("Center")],e.prototype,"alignment",void 0),o([i.i(r.Complex)(n.a.legendLabelFont,d)],e.prototype,"textStyle",void 0),o([i.i(r.Property)(10)],e.prototype,"shapeHeight",void 0),o([i.i(r.Property)(10)],e.prototype,"shapeWidth",void 0),o([i.i(r.Complex)({},u)],e.prototype,"border",void 0),o([i.i(r.Complex)({left:0,right:0,top:0,bottom:0},p)],e.prototype,"margin",void 0),o([i.i(r.Property)(5)],e.prototype,"shapePadding",void 0),o([i.i(r.Property)("transparent")],e.prototype,"background",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Property)(!0)],e.prototype,"toggleVisibility",void 0),o([i.i(r.Property)(null)],e.prototype,"description",void 0),o([i.i(r.Property)(3)],e.prototype,"tabIndex",void 0)}(),function(){function e(){}o([i.i(r.Property)(0)],e.prototype,"series",void 0),o([i.i(r.Property)(0)],e.prototype,"point",void 0)}(),function(){function e(){}o([i.i(r.Property)(10)],e.prototype,"left",void 0),o([i.i(r.Property)(10)],e.prototype,"right",void 0),o([i.i(r.Property)(10)],e.prototype,"top",void 0),o([i.i(r.Property)(10)],e.prototype,"bottom",void 0)}(),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Property)(null)],t.prototype,"endAngle",void 0),o([i.i(r.Property)(!1)],t.prototype,"explode",void 0),o([i.i(r.Property)(!1)],t.prototype,"explodeAll",void 0),o([i.i(r.Property)(null)],t.prototype,"explodeIndex",void 0),o([i.i(r.Property)(null)],t.prototype,"innerRadius",void 0),o([i.i(r.Property)("30%")],t.prototype,"explodeOffset",void 0),o([i.i(r.Property)(0)],t.prototype,"gapRatio",void 0),o([i.i(r.Property)("Value")],t.prototype,"groupMode",void 0),o([i.i(r.Property)(null)],t.prototype,"groupTo",void 0),o([i.i(r.Property)("20%")],t.prototype,"neckHeight",void 0),o([i.i(r.Property)("20%")],t.prototype,"neckWidth",void 0),o([i.i(r.Property)("Linear")],t.prototype,"pyramidMode",void 0),o([i.i(r.Property)([])],t.prototype,"palettes",void 0),o([i.i(r.Property)(0)],t.prototype,"startAngle",void 0),o([i.i(r.Complex)(null,s)],t.prototype,"animation",void 0),o([i.i(r.Complex)(null,S)],t.prototype,"dataLabel",void 0),o([i.i(r.Property)("0")],t.prototype,"dashArray",void 0),o([i.i(r.Property)(1)],t.prototype,"width",void 0),o([i.i(r.Property)("X")],t.prototype,"segmentAxis",void 0),o([i.i(r.Property)("Line")],t.prototype,"drawType",void 0),o([i.i(r.Property)(!0)],t.prototype,"isClosed",void 0),o([i.i(r.Collection)([],l)],t.prototype,"segments",void 0),o([i.i(r.Property)("")],t.prototype,"stackingGroup",void 0),o([i.i(r.Complex)({color:"transparent",width:0},u)],t.prototype,"border",void 0),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)(1)],t.prototype,"opacity",void 0),o([i.i(r.Property)("Line")],t.prototype,"type",void 0),o([i.i(r.Complex)(null,y)],t.prototype,"marker",void 0),o([i.i(r.Complex)(null,C)],t.prototype,"errorBar",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableTooltip",void 0),o([i.i(r.Collection)([],x)],t.prototype,"trendlines",void 0),o([i.i(r.Property)("")],t.prototype,"tooltipMappingName",void 0),o([i.i(r.Property)("SeriesType")],t.prototype,"legendShape",void 0),o([i.i(r.Property)(1)],t.prototype,"minRadius",void 0),o([i.i(r.Property)(null)],t.prototype,"selectionStyle",void 0),o([i.i(r.Property)("Natural")],t.prototype,"splineType",void 0),o([i.i(r.Property)(3)],t.prototype,"maxRadius",void 0),o([i.i(r.Property)(.5)],t.prototype,"cardinalSplineTension",void 0),o([i.i(r.Property)(null)],t.prototype,"columnWidth",void 0),o([i.i(r.Complex)(null,w)],t.prototype,"emptyPointSettings",void 0),o([i.i(r.Complex)(null,T)],t.prototype,"cornerRadius",void 0),o([i.i(r.Property)(0)],t.prototype,"columnSpacing",void 0),t}(r.ChildProperty)),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("Rotate45")],t.prototype,"labelIntersectAction",void 0),o([i.i(r.Complex)(n.a.axisLabelFont,d)],t.prototype,"labelStyle",void 0),o([i.i(r.Property)("")],t.prototype,"title",void 0),o([i.i(r.Property)(null)],t.prototype,"zoomFactor",void 0),o([i.i(r.Complex)({},M)],t.prototype,"crosshairTooltip",void 0),o([i.i(r.Property)("")],t.prototype,"labelFormat",void 0),o([i.i(r.Complex)(n.a.axisTitleFont,d)],t.prototype,"titleStyle",void 0),o([i.i(r.Property)(!1)],t.prototype,"isIndexed",void 0),o([i.i(r.Property)(0)],t.prototype,"plotOffset",void 0),o([i.i(r.Property)("Shift")],t.prototype,"edgeLabelPlacement",void 0),o([i.i(r.Property)("BetweenTicks")],t.prototype,"labelPlacement",void 0),o([i.i(r.Property)("Outside")],t.prototype,"tickPosition",void 0),o([i.i(r.Property)(!1)],t.prototype,"opposedPosition",void 0),o([i.i(r.Property)(!0)],t.prototype,"visible",void 0),o([i.i(r.Property)("Outside")],t.prototype,"labelPosition",void 0),o([i.i(r.Property)(0)],t.prototype,"labelRotation",void 0),o([i.i(r.Property)(0)],t.prototype,"minorTicksPerInterval",void 0),o([i.i(r.Property)(null)],t.prototype,"maximum",void 0),o([i.i(r.Property)(null)],t.prototype,"minimum",void 0),o([i.i(r.Property)(34)],t.prototype,"maximumLabelWidth",void 0),o([i.i(r.Property)(null)],t.prototype,"interval",void 0),o([i.i(r.Complex)({},E)],t.prototype,"majorTickLines",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableTrim",void 0),o([i.i(r.Complex)({},O)],t.prototype,"majorGridLines",void 0),o([i.i(r.Complex)({},I)],t.prototype,"minorTickLines",void 0),o([i.i(r.Complex)({},N)],t.prototype,"lineStyle",void 0),o([i.i(r.Complex)({},P)],t.prototype,"minorGridLines",void 0),o([i.i(r.Property)(!1)],t.prototype,"isInversed",void 0),o([i.i(r.Property)(null)],t.prototype,"description",void 0),o([i.i(r.Property)(0)],t.prototype,"startAngle",void 0),o([i.i(r.Property)(100)],t.prototype,"coefficient",void 0),o([i.i(r.Collection)([],_)],t.prototype,"stripLines",void 0),o([i.i(r.Property)(2)],t.prototype,"tabIndex",void 0),o([i.i(r.Complex)({color:null,width:0,type:"Rectangle"},D)],t.prototype,"border",void 0),t}(r.ChildProperty),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"enableMarker",void 0),o([i.i(r.Property)(!0)],t.prototype,"enable",void 0),o([i.i(r.Property)(null)],t.prototype,"fill",void 0),o([i.i(r.Property)(!1)],t.prototype,"shared",void 0),o([i.i(r.Property)(.75)],t.prototype,"opacity",void 0),o([i.i(r.Property)(null)],t.prototype,"header",void 0),o([i.i(r.Property)(null)],t.prototype,"format",void 0),o([i.i(r.Complex)(n.a.tooltipLabelFont,d)],t.prototype,"textStyle",void 0),o([i.i(r.Property)(null)],t.prototype,"template",void 0),o([i.i(r.Complex)({color:"#cccccc",width:.5},u)],t.prototype,"border",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableAnimation",void 0),t}(r.ChildProperty),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)("50%")],t.prototype,"x",void 0),o([i.i(r.Property)("50%")],t.prototype,"y",void 0),t}(r.ChildProperty),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Property)(!1)],t.prototype,"enablePinchZooming",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableSelectionZooming",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableDeferredZooming",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableMouseWheelZooming",void 0),o([i.i(r.Property)("XY")],t.prototype,"mode",void 0),o([i.i(r.Property)(["Zoom","ZoomIn","ZoomOut","Pan","Reset"])],t.prototype,"toolbarItems",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableScrollbar",void 0),o([i.i(r.Property)(!1)],t.prototype,"enablePan",void 0),t}(r.ChildProperty),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(r.Complex)({},L)],t.prototype,"chartSeries",void 0),o([i.i(r.Complex)({},A)],t.prototype,"primaryXAxis",void 0),o([i.i(r.Complex)({},A)],t.prototype,"primaryYAxis",void 0),o([i.i(r.Property)("")],t.prototype,"value",void 0),o([i.i(r.Property)("")],t.prototype,"columnHeader",void 0),o([i.i(r.Property)("-")],t.prototype,"columnDelimiter",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableMultipleAxis",void 0),o([i.i(r.Property)("Stacked")],t.prototype,"multipleAxisMode",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableScrollOnMultiAxis",void 0),o([i.i(r.Property)(!1)],t.prototype,"showMemberSeries",void 0),o([i.i(r.Property)(!1)],t.prototype,"showPointColorByMembers",void 0),o([i.i(r.Complex)(n.a.chartTitleFont,d)],t.prototype,"titleStyle",void 0),o([i.i(r.Property)("")],t.prototype,"title",void 0),o([i.i(r.Complex)(n.a.chartSubTitleFont,d)],t.prototype,"subTitleStyle",void 0),o([i.i(r.Property)("")],t.prototype,"subTitle",void 0),o([i.i(r.Complex)({color:"#DDDDDD",width:0},u)],t.prototype,"border",void 0),o([i.i(r.Complex)({},p)],t.prototype,"margin",void 0),o([i.i(r.Complex)({border:{color:null,width:.5},background:"transparent"},g)],t.prototype,"chartArea",void 0),o([i.i(r.Property)(null)],t.prototype,"background",void 0),o([i.i(r.Property)("Material")],t.prototype,"theme",void 0),o([i.i(r.Property)([])],t.prototype,"palettes",void 0),o([i.i(r.Complex)({},m)],t.prototype,"crosshair",void 0),o([i.i(r.Complex)({},R)],t.prototype,"tooltip",void 0),o([i.i(r.Complex)(null,k)],t.prototype,"pieCenter",void 0),o([i.i(r.Complex)({},j)],t.prototype,"zoomSettings",void 0),o([i.i(r.Property)()],t.prototype,"legendSettings",void 0),o([i.i(r.Property)("None")],t.prototype,"selectionMode",void 0),o([i.i(r.Property)("None")],t.prototype,"accumulationSelectionMode",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableSmartLabels",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableBorderOnMouseMove",void 0),o([i.i(r.Property)("None")],t.prototype,"highlightMode",void 0),o([i.i(r.Property)("None")],t.prototype,"highlightPattern",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableExport",void 0),o([i.i(r.Property)(!1)],t.prototype,"isMultiSelect",void 0),o([i.i(r.Collection)([],c)],t.prototype,"selectedDataIndexes",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableAnimation",void 0),o([i.i(r.Property)(!1)],t.prototype,"enableCanvas",void 0),o([i.i(r.Property)(!0)],t.prototype,"useGroupingSeparator",void 0),o([i.i(r.Property)(!1)],t.prototype,"isTransposed",void 0),o([i.i(r.Property)(1)],t.prototype,"tabIndex",void 0),o([i.i(r.Property)(null)],t.prototype,"description",void 0),o([i.i(r.Event)()],t.prototype,"resized",void 0),o([i.i(r.Property)(!0)],t.prototype,"enableSideBySidePlacement",void 0),o([i.i(r.Event)()],t.prototype,"loaded",void 0),o([i.i(r.Event)()],t.prototype,"beforePrint",void 0),o([i.i(r.Event)()],t.prototype,"animationComplete",void 0),o([i.i(r.Event)()],t.prototype,"load",void 0),o([i.i(r.Event)()],t.prototype,"textRender",void 0),o([i.i(r.Event)()],t.prototype,"legendRender",void 0),o([i.i(r.Event)()],t.prototype,"seriesRender",void 0),o([i.i(r.Event)()],t.prototype,"multiLevelLabelRender",void 0),o([i.i(r.Event)()],t.prototype,"pointRender",void 0),o([i.i(r.Event)()],t.prototype,"tooltipRender",void 0),o([i.i(r.Event)()],t.prototype,"legendClick",void 0),o([i.i(r.Event)()],t.prototype,"axisLabelRender",void 0),o([i.i(r.Event)()],t.prototype,"multiLevelLabelClick",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseClick",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseMove",void 0),o([i.i(r.Event)()],t.prototype,"pointMove",void 0),o([i.i(r.Event)()],t.prototype,"pointClick",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseDown",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseLeave",void 0),o([i.i(r.Event)()],t.prototype,"dragComplete",void 0),o([i.i(r.Event)()],t.prototype,"chartMouseUp",void 0),o([i.i(r.Event)()],t.prototype,"scrollStart",void 0),o([i.i(r.Event)()],t.prototype,"zoomComplete",void 0),o([i.i(r.Event)()],t.prototype,"scrollChanged",void 0),o([i.i(r.Event)()],t.prototype,"scrollEnd",void 0),o([i.i(r.Property)(!0)],t.prototype,"showMultiLevelLabels",void 0),t}(r.ChildProperty)},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),a=this&&this.__decorate||function(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e),a([i.i(r.Property)("Row")],t.prototype,"mode",void 0),a([i.i(r.Property)("Flow")],t.prototype,"cellSelectionMode",void 0),a([i.i(r.Property)("Single")],t.prototype,"type",void 0),a([i.i(r.Property)(!1)],t.prototype,"checkboxOnly",void 0),a([i.i(r.Property)(!1)],t.prototype,"persistSelection",void 0),a([i.i(r.Property)("Default")],t.prototype,"checkboxMode",void 0),a([i.i(r.Property)(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0)}(r.ChildProperty),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),a([i.i(r.Property)("auto")],t.prototype,"height",void 0),a([i.i(r.Property)("auto")],t.prototype,"width",void 0),a([i.i(r.Property)("Both")],t.prototype,"gridLines",void 0),a([i.i(r.Property)(!1)],t.prototype,"allowTextWrap",void 0),a([i.i(r.Property)(!1)],t.prototype,"allowReordering",void 0),a([i.i(r.Property)(!0)],t.prototype,"allowResizing",void 0),a([i.i(r.Property)(!0)],t.prototype,"allowAutoResizing",void 0),a([i.i(r.Property)(null)],t.prototype,"rowHeight",void 0),a([i.i(r.Property)(110)],t.prototype,"columnWidth",void 0),a([i.i(r.Property)("Ellipsis")],t.prototype,"clipMode",void 0),a([i.i(r.Property)(!1)],t.prototype,"allowSelection",void 0),a([i.i(r.Property)(-1)],t.prototype,"selectedRowIndex",void 0),a([i.i(r.Property)({mode:"Row",cellSelectionMode:"Flow",type:"Single"})],t.prototype,"selectionSettings",void 0),a([i.i(r.Property)({wrapMode:"Both"})],t.prototype,"textWrapSettings",void 0),a([i.i(r.Property)("AllPages")],t.prototype,"printMode",void 0),a([i.i(r.Property)()],t.prototype,"contextMenuItems",void 0),a([i.i(r.Event)()],t.prototype,"beforeCopy",void 0),a([i.i(r.Event)()],t.prototype,"printComplete",void 0),a([i.i(r.Event)()],t.prototype,"beforePrint",void 0),a([i.i(r.Event)()],t.prototype,"beforePdfExport",void 0),a([i.i(r.Event)()],t.prototype,"beforeExcelExport",void 0),a([i.i(r.Event)()],t.prototype,"contextMenuOpen",void 0),a([i.i(r.Event)()],t.prototype,"contextMenuClick",void 0),a([i.i(r.Event)()],t.prototype,"queryCellInfo",void 0),a([i.i(r.Event)()],t.prototype,"headerCellInfo",void 0),a([i.i(r.Event)()],t.prototype,"rowSelecting",void 0),a([i.i(r.Event)()],t.prototype,"rowSelected",void 0),a([i.i(r.Event)()],t.prototype,"rowDeselecting",void 0),a([i.i(r.Event)()],t.prototype,"rowDeselected",void 0),a([i.i(r.Event)()],t.prototype,"cellSelecting",void 0),a([i.i(r.Event)()],t.prototype,"cellSelected",void 0),a([i.i(r.Event)()],t.prototype,"cellDeselecting",void 0),a([i.i(r.Event)()],t.prototype,"cellDeselected",void 0),a([i.i(r.Event)()],t.prototype,"resizeStart",void 0),a([i.i(r.Event)()],t.prototype,"resizing",void 0),a([i.i(r.Event)()],t.prototype,"resizeStop",void 0),a([i.i(r.Event)()],t.prototype,"pdfHeaderQueryCellInfo",void 0),a([i.i(r.Event)()],t.prototype,"pdfQueryCellInfo",void 0),a([i.i(r.Event)()],t.prototype,"excelHeaderQueryCellInfo",void 0),a([i.i(r.Event)()],t.prototype,"excelQueryCellInfo",void 0),a([i.i(r.Event)()],t.prototype,"columnDragStart",void 0),a([i.i(r.Event)()],t.prototype,"columnDrag",void 0),a([i.i(r.Event)()],t.prototype,"columnDrop",void 0),a([i.i(r.Event)()],t.prototype,"columnRender",void 0),t}(r.ChildProperty))},function(e,t,i){"use strict";var r=i(42);i.d(t,"a",function(){return r.a})},function(e,t){e.exports=u},function(e,t){e.exports=h},function(e,t){e.exports=c},function(e,t){e.exports=g}])});