{"ast":null,"code":"import _regeneratorRuntime from\"/home/saiprasad/rcptlive/rcpt/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/saiprasad/rcptlive/rcpt/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import Plans from\"./Mobile/Plans\";import Plan from\"./Mobile/Plan\";import Receipt from\"./Mobile/Receipt\";import Homemobile from\"./Mobile/Homemobile\";import Home from\"./Component/home/Home\";import Stvoffer from\"./Mobile/Stvoffer\";import ReceiptComponent from\"./Mobile/ReceiptComponent\";import Receiptdownload from\"./Mobile/Receiptdownload\";import{FirebaseToken}from\"./Notification/FirebaseToken\";import{getToken}from\"firebase/messaging\";import Dynamicpage from\"./Mobile/Dynamicpage\";import NotificationForm from\"./NotificationForm\";import{baseurl}from\"./Component/Baseurl\";import Notificationpop from\"./Notificationpop\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){useEffect(function(){var tokenSent=localStorage.getItem('tokenSent');// Check if the token has been sent\nif(!tokenSent){requestPermission();}},[]);function requestPermission(){return _requestPermission.apply(this,arguments);}function _requestPermission(){_requestPermission=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var permission,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Notification.requestPermission();case 2:permission=_context.sent;if(!(permission===\"granted\")){_context.next=12;break;}_context.next=6;return getToken(FirebaseToken);case 6:token=_context.sent;sendTokenToApi(token);console.log(token);localStorage.setItem('tokenSent','true');_context.next=13;break;case 12:if(permission===\"denied\"){// alert(\"You denied the notification\");\n}case 13:case\"end\":return _context.stop();}},_callee);}));return _requestPermission.apply(this,arguments);}function sendTokenToApi(_x){return _sendTokenToApi.apply(this,arguments);}function _sendTokenToApi(){_sendTokenToApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token){var base64Token,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;//  const decodedToken = jwt.decode(token, { complete: true });\nbase64Token=btoa(JSON.stringify(token));//  console.log( 'sfgg' + base64Token);\n//  const vase=atob(base64Token);\n//  console.log(vase);\nconsole.log(base64Token);_context2.next=5;return fetch(\"\".concat(baseurl,\"/rcpt-api/rcptinsertToken?token=\").concat(base64Token),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"}});case 5:response=_context2.sent;if(response.ok){console.log(\"Token sent to the API successfully.\");}else{console.error(\"Failed to send token to the API.\");}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(\"API request error:\",_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return _sendTokenToApi.apply(this,arguments);}return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Homemobile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Plans\",element:/*#__PURE__*/_jsx(Plans,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Plan\",element:/*#__PURE__*/_jsx(Plan,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Notification\",element:/*#__PURE__*/_jsx(NotificationForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/notificationpop\",element:/*#__PURE__*/_jsx(Notificationpop,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Home\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Stvoffer\",element:/*#__PURE__*/_jsx(Stvoffer,{})}),/*#__PURE__*/_jsx(Route,{path:\"/ReceiptComponent\",element:/*#__PURE__*/_jsx(ReceiptComponent,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Receiptdownload/:shortcode\",element:/*#__PURE__*/_jsx(Receiptdownload,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Receipt/:shortcode\",element:/*#__PURE__*/_jsx(Receipt,{})}),/*#__PURE__*/_jsx(Route,{path:\"/:shortcode\",element:/*#__PURE__*/_jsx(Dynamicpage,{})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Routes","Route","Plans","Plan","Receipt","Homemobile","Home","Stvoffer","ReceiptComponent","Receiptdownload","FirebaseToken","getToken","Dynamicpage","NotificationForm","baseurl","Notificationpop","jsx","_jsx","jsxs","_jsxs","App","tokenSent","localStorage","getItem","requestPermission","_requestPermission","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","permission","token","wrap","_callee$","_context","prev","next","Notification","sent","sendTokenToApi","console","log","setItem","stop","_x","_sendTokenToApi","_callee2","base64Token","response","_callee2$","_context2","btoa","JSON","stringify","fetch","concat","method","headers","ok","error","t0","children","path","element"],"sources":["/home/saiprasad/rcptlive/rcpt/src/App.js"],"sourcesContent":["\nimport React, { useEffect } from \"react\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport Plans from \"./Mobile/Plans\";\nimport Plan from \"./Mobile/Plan\";\n\nimport Receipt from \"./Mobile/Receipt\";\nimport Homemobile from \"./Mobile/Homemobile\";\nimport Home from \"./Component/home/Home\";\nimport Stvoffer from \"./Mobile/Stvoffer\";\nimport ReceiptComponent from \"./Mobile/ReceiptComponent\";\nimport Receiptdownload from \"./Mobile/Receiptdownload\";\nimport { FirebaseToken } from \"./Notification/FirebaseToken\";\nimport { getToken } from \"firebase/messaging\";\nimport Dynamicpage from \"./Mobile/Dynamicpage\";\nimport NotificationForm from \"./NotificationForm\";\nimport { baseurl } from \"./Component/Baseurl\";\nimport Notificationpop from \"./Notificationpop\";\nimport \"./App.css\";\n\nfunction App() {\n \n  useEffect(() => {\n    \n    const tokenSent = localStorage.getItem('tokenSent'); // Check if the token has been sent\n\n    if (!tokenSent) {\n      requestPermission();\n    }\n    \n  }, []);\n\n  async function requestPermission() {\n    const permission = await Notification.requestPermission();\n    if (permission === \"granted\") {\n      const token = await getToken(FirebaseToken);\n      sendTokenToApi(token);\n      console.log( token);\n      localStorage.setItem('tokenSent', 'true');\n    } else if (permission === \"denied\") {\n      // alert(\"You denied the notification\");\n    }\n  }\n\n  async function sendTokenToApi(token) {\n    try {\n      //  const decodedToken = jwt.decode(token, { complete: true });\n\n       const base64Token = btoa(JSON.stringify(token));\n      //  console.log( 'sfgg' + base64Token);\n      //  const vase=atob(base64Token);\n      //  console.log(vase);\n      console.log(base64Token);\n      const response = await fetch(`${baseurl}/rcpt-api/rcptinsertToken?token=${base64Token}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        }\n      });\n\n      if (response.ok) {\n        console.log(\"Token sent to the API successfully.\");\n      } else {\n        console.error(\"Failed to send token to the API.\");\n      }\n    } catch (error) {\n      console.error(\"API request error:\", error);\n    }\n  }\n\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\" element={<Homemobile />} />\n        <Route path=\"/Plans\" element={<Plans />} />\n        <Route path=\"/Plan\" element={<Plan />} />\n\n        <Route path=\"/Notification\" element={<NotificationForm />} />\n   \n        <Route path=\"/notificationpop\" element={<Notificationpop />} />\n\n        <Route path=\"/Home\" element={<Home />} />\n        <Route path=\"/Stvoffer\" element={<Stvoffer />} />\n        <Route path=\"/ReceiptComponent\" element={<ReceiptComponent />} />\n        <Route path=\"/Receiptdownload/:shortcode\" element={<Receiptdownload />} />\n        <Route path=\"/Receipt/:shortcode\" element={<Receipt />} />\n        <Route path=\"/:shortcode\" element={<Dynamicpage />} />\n\n      </Routes>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}